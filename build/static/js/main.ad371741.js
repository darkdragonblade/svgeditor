/*! For license information please see main.ad371741.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var I,j=Object.assign;function z(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case M:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case L:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Me=null,Se=null;function Ee(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){Me?Se?Se.push(e):Se=[e]:Me=e}function Te(){if(Me){var e=Me,t=Se;if(Se=Me=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Le(e,t){return e(t)}function Ae(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Le(e,t,n)}finally{Pe=!1,(null!==Me||null!==Se)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(c)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ce){Ne=!1}function De(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ie=!1,je=null,ze=!1,Fe=null,Be={onError:function(e){Ie=!0,je=e}};function Ue(e,t,n,r,i,a,o,s,l){Ie=!1,je=null,De.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ve(i),e;if(o===r)return Ve(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Qe=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Mt,St,Et,Ct=!1,Tt=[],Lt=null,At=null,Pt=null,Ot=new Map,Rt=new Map,Nt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function It(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Et(e.priority,(function(){Mt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Lt&&zt(Lt)&&(Lt=null),null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),Ot.forEach(Ft),Rt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Lt&&Ut(Lt,e),null!==At&&Ut(At,e),null!==Pt&&Ut(Pt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var Gt=x.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Gt.transition=a}}function qt(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Gt.transition=a}}function Xt(e,t,n,r){if(Vt){var i=Yt(e,t,n,r);if(null===i)Vr(e,t,r,Zt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Lt=It(Lt,e,t,n,r,i),!0;case"dragenter":return At=It(At,e,t,n,r,i),!0;case"mouseover":return Pt=It(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,It(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,It(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<kt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Vr(e,t,r,Zt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Zt=null;function Yt(e,t,n,r){if(Zt=null,null!==(e=yi(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Kt=null,$t=null;function en(){if($t)return $t;var e,t,n=Kt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=j({},un,{view:0,detail:0}),hn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(j({},pn,{dataTransfer:0})),vn=an(j({},dn,{relatedTarget:0})),gn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(j({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function En(){return Sn}var Cn=j({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),Ln=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),Nn=[9,13,27,32],kn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var In=c&&"TextEvent"in window&&!Dn,jn=c&&(!kn||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Zn(e){zr(e,0)}function Yn(e){if(X(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Kn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Kn=$n}else Kn=!1;Qn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,we(e)),Oe(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==Z(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Mr={},Sr={};function Er(e){if(Mr[e])return Mr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Mr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Lr=Er("animationstart"),Ar=Er("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Or.length;Nr++){var kr=Or[Nr];Rr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Lr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(a(198));var c=je;Ie=!1,je=null,ze||(ze=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ir.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Lr:l=gn;break;case Ar:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ln}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&c.push(Wr(f,m,p)))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ln,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:xi(l),p=null==u?s:xi(u),(s=new c(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,yi(i)===r&&((c=new c(h,f+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=Xr(p))f++;for(p=0,m=h;m;m=Xr(m))p++;for(;0<f-p;)c=Xr(c),f--;for(;0<p-f;)h=Xr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Xr(c),h=Xr(h)}c=null}else c=null;null!==l&&Zr(o,s,l,c,!1),null!==u&&null!==d&&Zr(o,d,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Jn;else if(Vn(s))if(Qn)v=or;else{v=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?Wn(o,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xi(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Kt="value"in(Qt=i)?Qt.value:Qt.textContent,Hn=!0)),0<(g=qr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!kn&&Bn(e,t)?(e=en(),$t=Kt=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}zr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Re(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Re(n,a))&&o.unshift(Wr(n,l,s)):i||null!=(l=Re(n,a))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Kr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,vi="__reactListeners$"+di,gi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var _i=[],Mi=-1;function Si(e){return{current:e}}function Ei(e){0>Mi||(e.current=_i[Mi],_i[Mi]=null,Mi--)}function Ci(e,t){Mi++,_i[Mi]=e.current,e.current=t}var Ti={},Li=Si(Ti),Ai=Si(!1),Pi=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ei(Ai),Ei(Li)}function ki(e,t,n){if(Li.current!==Ti)throw Error(a(168));Ci(Li,t),Ci(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return j({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Li.current,Ci(Li,e),Ci(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Li),Ci(Li,e)):Ei(Ai),Ci(Ai,n)}var zi=null,Fi=!1,Bi=!1;function Ui(e){null===zi?zi=[e]:zi.push(e)}function Hi(){if(!Bi&&null!==zi){Bi=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Fi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),Xe($e,Hi),i}finally{bt=t,Bi=!1}}return null}var Gi=[],Vi=0,Wi=null,qi=0,Xi=[],Zi=0,Yi=null,Ji=1,Qi="";function Ki(e,t){Gi[Vi++]=qi,Gi[Vi++]=Wi,Wi=e,qi=t}function $i(e,t,n){Xi[Zi++]=Ji,Xi[Zi++]=Qi,Xi[Zi++]=Yi,Yi=e;var r=Ji;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Qi=a+e}else Ji=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Ki(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=Gi[--Vi],Gi[Vi]=null,qi=Gi[--Vi],Gi[Vi]=null;for(;e===Yi;)Yi=Xi[--Zi],Xi[Zi]=null,Qi=Xi[--Zi],Xi[Zi]=null,Ji=Xi[--Zi],Xi[Zi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ui(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Si(null),ya=null,ba=null,xa=null;function wa(){xa=ba=ya=null}function _a(e){var t=ga.current;Ei(ga),e._currentValue=t}function Ma(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,xa=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function La(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ka(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=d}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Fa=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,i))&&(ru(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,i))&&(ru(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ka(e,i,r))&&(ru(t,e,r,n),Da(t,e,r))}};function Ha(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ga(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Pi:Li.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fa,Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Pi:Li.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ua.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fa&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ku(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===M?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Za(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Iu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case _:return(t=Fu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Iu(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Xa(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=p(i,d,s[m],l);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(i,d),ia&&Ki(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return ia&&Ki(i,m),u}for(d=r(i,d);m<s.length;m++)null!==(v=f(d,i,m,s[m],l))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(i,e)})),ia&&Ki(i,m),u}function v(i,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(i,m,y.value,u);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,v),null===d?c=b:d.sibling=b,d=b,m=g}if(y.done)return n(i,m),ia&&Ki(i,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=h(i,y.value,u))&&(s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return ia&&Ki(i,v),c}for(m=r(i,m);!y.done;v++,y=l.next())null!==(y=f(m,i,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ki(i,v),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===M&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===M){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Za(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=qa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===M?((a=Iu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Du(o.type,o.key,o.props,null,r.mode,l)).ref=qa(r,a,o),l.return=r,r=l)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fu(o,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(D(o))return v(r,a,o,l);Xa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=zu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Ja=Ya(!0),Qa=Ya(!1),Ka={},$a=Si(Ka),eo=Si(Ka),to=Si(Ka);function no(e){if(e===Ka)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci($a,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Ci($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=le(t,e.type);t!==n&&(Ci(eo,e),Ci($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var so=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,vo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function _o(){throw Error(a(321))}function Mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(a(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=us,e=n(r,i)}while(bo)}if(ho.current=os,t=null!==vo&&null!==vo.next,fo=0,go=vo=mo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Lo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((fo&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,mo.lanes|=d,jl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Ro(e,t){var n=mo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,Vo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Fo(9,ko.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&fo)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&jo(e)}function Do(e,t,n){return n((function(){Io(t)&&jo(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&ru(t,e,1,-1)}function zo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function Uo(e,t,n,r){var i=Co();mo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Ho(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&Mo(r,o.deps))return void(i.memoizedState=Fo(t,n,a,r))}mo.flags|=e,i.memoizedState=Fo(1|t,n,a,r)}function Go(e,t){return Uo(8390656,8,e,t)}function Vo(e,t){return Ho(2048,8,e,t)}function Wo(e,t){return Ho(4,2,e,t)}function qo(e,t){return Ho(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Xo.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,jl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{bt=n,po.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=La(e,t,n,r))){ru(n,e,r,tu()),as(n,t,r)}}function ns(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ta(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=La(e,t,i,r))&&(ru(n,e,r,i=tu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:zo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=$o.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&fo)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Go(Do.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Pl.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Vo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Lo)},useDebugValue:Yo,useDeferredValue:function(e){return Ko(To(),vo.memoizedState,e)},useTransition:function(){return[Ao(Lo)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Vo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Po,useRef:Bo,useState:function(){return Po(Lo)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===vo?t.memoizedState=e:Ko(t,vo.memoizedState,e)},useTransition:function(){return[Po(Lo)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),hs(0,t)},n}function ms(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,ka(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Qa(t,null,n,r):Ja(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ms(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Nu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=ku(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(kl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(kl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(kl,Nl),Nl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(kl,Nl),Nl|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ri(n)?Pi:Li.current;return a=Oi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ls(e,t,n,r,i){if(Ri(n)){var a=!0;Ii(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Vs(e,t),Ga(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ea(u):u=Oi(t,u=Ri(n)?Pi:Li.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Va(t,o,r,u),Pa=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),l=t.memoizedState,s!==r||h!==l||Ai.current||Pa?("function"===typeof c&&(Ba(t,n,c,r),l=t.memoizedState),(s=Pa||Ha(t,n,s,r,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:va(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Oi(t,l=Ri(n)?Pi:Li.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Va(t,o,r,l),Pa=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var f=t.memoizedState;s!==d||h!==f||Ai.current||Pa?("function"===typeof p&&(Ba(t,n,p,r),f=t.memoizedState),(u=Pa||Ha(t,n,u,r,h,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ws(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),ro(e,t.containerInfo)}function Os(e,t,n,r,i){return pa(),fa(i),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ns,ks,Ds,Is={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=ju(l,i,0,null),e=Iu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Is,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(o=Iu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Is,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),ru(r,e,i,-1))}return vu(),Bs(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Lu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Zi++]=Ji,Xi[Zi++]=Qi,Xi[Zi++]=Yi,Ji=e.id,Qi=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=ku(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=ku(r,s):(s=Iu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Is,i}return e=(s=e.child).sibling,i=ku(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&fa(r),Ja(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ma(e.return,t,n)}function Hs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hs(t,!0,n,null,a);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Ri(t.type)&&Ni(),Xs(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Li),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Ns(e,t),Xs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)ks(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xs(t),null}if(e=no($a.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Xs(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Dl&&(Dl=3):vu())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return io(),Ns(e,t),null===e&&Hr(t.stateNode.containerInfo),Xs(t),null;case 10:return _a(t.type._context),Xs(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Gl&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Xs(t),null}else 2*Qe()-o.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Li),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},ks=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Qs=!1,Ks="function"===typeof WeakSet?WeakSet:Set,$s=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,n,a)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[vi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Qs&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Eu(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));fl(o,s,i),dl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Eu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(v){Eu(e,e.return,v)}try{rl(5,e,e.return)}catch(v){Eu(e,e.return,v)}}break;case 1:vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){Eu(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ve(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(l){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(v){Eu(e,e.return,v)}}break;case 6:if(vl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Eu(e,e.return,v)}}break;case 3:if(vl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(v){Eu(e,e.return,v)}break;case 4:default:vl(t,e),yl(e);break;case 13:vl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Qe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,vl(t,e),Qs=c):vl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(f=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Eu(r,n,v)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,$s=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(v){Eu(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Eu(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$s=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Js;var u=Qs;if(Js=o,(Qs=l)&&!u)for($s=i;null!==$s;)l=(o=$s).child,22===o.tag&&null!==o.memoizedState?Ml(i):null!==l?(l.return=o,$s=l):Ml(i);for(;null!==a;)$s=a,xl(a,t,n),a=a.sibling;$s=i,Js=s,Qs=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$s=a):wl(e)}}function wl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&za(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&al(t)}catch(p){Eu(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function _l(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Ml(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Eu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Eu(t,i,l)}}var a=t.return;try{al(t)}catch(l){Eu(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Eu(t,o,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Ll=x.ReactCurrentBatchConfig,Al=0,Pl=null,Ol=null,Rl=0,Nl=0,kl=Si(0),Dl=0,Il=null,jl=0,zl=0,Fl=0,Bl=null,Ul=null,Hl=0,Gl=1/0,Vl=null,Wl=!1,ql=null,Xl=null,Zl=!1,Yl=null,Jl=0,Ql=0,Kl=null,$l=-1,eu=0;function tu(){return 0!==(6&Al)?Qe():-1!==$l?$l:$l=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==ma.transition?(0===eu&&(eu=mt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ru(e,t,n,r){if(50<Ql)throw Ql=0,Kl=null,Error(a(185));gt(e,n,r),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(zl|=n),4===Dl&&lu(e,Rl)),iu(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Gl=Qe()+500,Fi&&Hi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Pl?Rl:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Fi=!0,Ui(e)}(uu.bind(null,e)):Ui(uu.bind(null,e)),oi((function(){0===(6&Al)&&Hi()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if($l=-1,eu=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(Mu()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Al;Al|=2;var o=mu();for(Pl===e&&Rl===t||(Vl=null,Gl=Qe()+500,pu(e,t));;)try{bu();break}catch(l){fu(e,l)}wa(),Cl.current=o,Al=i,null!==Ol?t=0:(Pl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ou(e,i))),1===t)throw n=Il,pu(e,0),lu(e,r),iu(e,Qe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=ft(e))&&(r=o,t=ou(e,o))),1===t))throw n=Il,pu(e,0),lu(e,r),iu(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_u(e,Ul,Vl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Hl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,Ul,Vl),t);break}_u(e,Ul,Vl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,Ul,Vl),r);break}_u(e,Ul,Vl);break;default:throw Error(a(329))}}}return iu(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Ul,Ul=n,null!==t&&su(t)),e}function su(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lu(e,t){for(t&=~Fl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Al))throw Error(a(327));Mu();var t=ht(e,0);if(0===(1&t))return iu(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Il,pu(e,0),lu(e,t),iu(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Ul,Vl),iu(e,Qe()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Gl=Qe()+500,Fi&&Hi())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Mu();var t=Al;Al|=1;var n=Ll.transition,r=bt;try{if(Ll.transition=null,bt=1,e)return e()}finally{bt=r,Ll.transition=n,0===(6&(Al=t))&&Hi()}}function hu(){Nl=kl.current,Ei(kl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:io(),Ei(Ai),Ei(Li),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:_a(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Pl=e,Ol=e=ku(e.current,null),Rl=Nl=t,Dl=0,Il=null,Fl=zl=jl=0,Ul=Bl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function fu(e,t){for(;;){var n=Ol;try{if(wa(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(fo=0,go=vo=mo=null,bo=!1,xo=0,Tl.current=null,null===n||null===n.return){Dl=1,Il=t,Ol=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&vs(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vs(o,c,t),vu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),fa(cs(u,l));break e}}o=u=cs(u,l),4!==Dl&&(Dl=2),null===Bl?Bl=[o]:Bl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,fs(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(x){t=x,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function mu(){var e=Cl.current;return Cl.current=os,null===e?os:e}function vu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&jl)&&0===(268435455&zl)||lu(Pl,Rl)}function gu(e,t){var n=Al;Al|=2;var r=mu();for(Pl===e&&Rl===t||(Vl=null,pu(e,t));;)try{yu();break}catch(i){fu(e,i)}if(wa(),Al=n,Cl.current=r,null!==Ol)throw Error(a(261));return Pl=null,Rl=0,Dl}function yu(){for(;null!==Ol;)xu(Ol)}function bu(){for(;null!==Ol&&!Ye();)xu(Ol)}function xu(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wu(e):Ol=t,Tl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Zs(n,t,Nl)))return void(Ol=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Dl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Dl&&(Dl=5)}function _u(e,t,n){var r=bt,i=Ll.transition;try{Ll.transition=null,bt=1,function(e,t,n,r){do{Mu()}while(null!==Yl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Pl&&(Ol=Pl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Pu(tt,(function(){return Mu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ll.transition,Ll.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Vt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===i&&(l=s),p===o&&++d===r&&(u=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Eu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=nl,nl=!1}(e,n),gl(n,e),fr(ti),Vt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Je(),Al=l,bt=s,Ll.transition=o}else e.current=n;if(Zl&&(Zl=!1,Yl=e,Jl=i),o=e.pendingLanes,0===o&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Jl)&&0!==e.tag&&Mu(),o=e.pendingLanes,0!==(1&o)?e===Kl?Ql++:(Ql=0,Kl=e):Ql=0,Hi()}(e,t,n,r)}finally{Ll.transition=i,bt=r}return null}function Mu(){if(null!==Yl){var e=xt(Jl),t=Ll.transition,n=bt;try{if(Ll.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($s=c;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var p=(d=$s).sibling,f=d.return;if(ol(d),d===c){$s=null;break}if(null!==p){p.return=f,$s=p;break}$s=f}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Eu(l,l.return,_)}if(l===s){$s=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$s=w;break e}$s=l.return}}if(Al=i,Hi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Ll.transition=t}}return!1}function Su(e,t,n){e=ka(e,t=fs(0,t=cs(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),iu(e,t))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=ka(t,e=ms(t,e=cs(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),iu(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Qe()-Hl?pu(e,0):Fl|=n),iu(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Aa(e,t))&&(gt(e,t,n),iu(e,n))}function Lu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tu(e,n)}function Pu(e,t){return Xe(e,t)}function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Ou(e,t,n,r)}function Nu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ku(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Nu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case M:return Iu(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Ru(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Ru(13,n,t,i)).elementType=A,e.lanes=o,e;case P:return(e=Ru(19,n,t,i)).elementType=P,e.lanes=o,e;case N:return ju(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case L:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ru(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Iu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function zu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,a,o,s,l){return e=new Bu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ru(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Hu(e){if(!e)return Ti;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function Gu(e,t,n,r,i,a,o,s,l){return(e=Uu(n,r,!0,e,0,a,0,s,l)).context=Hu(null),n=e.current,(a=Na(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,ka(n,a,i),e.current.lanes=i,gt(e,i,r),iu(e,r),e}function Vu(e,t,n,r){var i=t.current,a=tu(),o=nu(i);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ka(i,t,o))&&(ru(e,i,o,a),Da(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),pa();break;case 5:ao(t);break;case 1:Ri(t.type)&&Ii(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ci(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ws(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Oi(t,Li.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Ii(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=Ua,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===L)return 11;if(e===O)return 14}return 2}(r),e=va(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Ls(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Ms(null,t,r,va(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:va(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:va(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Os(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Os(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return zs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:va(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Na(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ma(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ma(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=va(r=t.type,t.pendingProps),Ms(e,t,r,i=va(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:va(r,i),Vs(e,t),t.tag=1,Ri(r)?(e=!0,Ii(t)):e=!1,Sa(t,n),Ga(t,r,i),Wa(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Gs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Zu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wu(o);s.call(e)}}Vu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wu(o);a.call(e)}}var o=Gu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[fi]=o.current,Hr(8===e.nodeType?e.parentNode:e),du(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[fi]=l.current,Hr(8===e.nodeType?e.parentNode:e),du((function(){Vu(t,l,n,r)})),l}(n,t,e,i,r);return Wu(o)}Ju.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(e,t,null,null)},Ju.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Vu(null,e,null,null)})),t[fi]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Qe()),0===(6&Al)&&(Gl=Qe()+500,Hi()))}break;case 13:du((function(){var t=Aa(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Xu(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)ru(t,e,134217728,tu());Xu(e,134217728)}},Mt=function(e){if(13===e.tag){var t=nu(e),n=Aa(e,t);if(null!==n)ru(n,e,t,tu());Xu(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));X(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Le=cu,Ae=du;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Ce,Te,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,r="",i=Zu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Ku(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Zu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)},t.render=function(e,t,n){if(!Ku(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ku(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ku(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,M={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:M.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+L(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+L(s=e[u],u);l+=A(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,c=a+L(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},k={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:M};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=M.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,p=3,f=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(v=!1,x(e),!m)if(null!==r(u))m=!0,N(_);else{var t=r(c);null!==t&&k(w,t.startTime-e)}}function _(e,n){m=!1,v&&(v=!1,y(C),C=-1),f=!0;var a=p;try{for(x(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),x(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&k(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,E=null,C=-1,T=5,L=-1;function A(){return!(t.unstable_now()-L<T)}function P(){if(null!==E){var e=t.unstable_now();L=e;var n=!0;try{n=E(!0,e)}finally{n?M():(S=!1,E=null)}}else S=!1}if("function"===typeof b)M=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,M=function(){R.postMessage(null)}}else M=function(){g(P,0)};function N(e){E=e,S||(S=!0,M())}function k(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(v?(y(C),C=-1):v=!0,k(w,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,N(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".70079b53.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="editor:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkeditor=self.webpackChunkeditor||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n(250);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=d();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}var f,m=n(184),v=[{value:"Select",href:"#transform-tool"},{value:"Pan",href:"#pan-tool"},{value:"Freehand",href:"#freehand-tool"},{value:"Rectangle",href:"#object-rect"},{value:"Ellipse",href:"#object-ellipse"},{value:"Triangle",href:"#object-triangle"},{value:"Line",href:"#object-line"},{value:"OtherShape",href:"#o-1"},{value:"Text",href:"#text-tool"},{value:"View",href:"#view-tool"}],g=[[{href:"#o-1",d:"M 8.5 4.095 C 12.004 -5.959 25.735 4.095 8.5 17.021 C -8.736 4.095 4.995 -5.959 8.5 4.095 Z"},{href:"#o-2",d:"M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 10.754 0 12.916 0.896 14.51 2.49 C 16.104 4.084 17 6.246 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z M 4.25 8.5 C 4.25 10.847 6.153 12.75 8.5 12.75 C 10.847 12.75 12.75 10.847 12.75 8.5 C 12.75 6.153 10.847 4.25 8.5 4.25 C 6.153 4.25 4.25 6.153 4.25 8.5 Z"},{href:"#o-3",d:"M 0 6.168 L 6.494 6.168 L 8.5 0 L 10.507 6.168 L 17 6.168 L 11.747 9.981 L 13.754 16.15 L 8.5 12.337 L 3.247 16.15 L 5.254 9.981 L 0 6.168 Z"},{href:"#o-4",d:"M 3.893 12.207 C 6.964 14.316 10.032 14.316 13.096 12.207 M 4.891 5.958 C 4.891 5.469 5.288 5.072 5.777 5.072 C 6.266 5.072 6.662 5.469 6.662 5.958 C 6.662 6.447 6.266 6.843 5.777 6.843 C 5.288 6.843 4.891 6.447 4.891 5.958 M 10.338 5.958 C 10.338 5.469 10.734 5.072 11.223 5.072 C 11.712 5.072 12.109 5.469 12.109 5.958 C 12.109 6.447 11.712 6.843 11.223 6.843 C 10.734 6.843 10.338 6.447 10.338 5.958 M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 13.194 0 17 3.806 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 13.194 0 17 3.806 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z"}],[{href:"#o-5",d:"M 0 7.685 L 17 7.685 M 8.539 14.982 L 16.845 23.132 M 8.539 14.904 L 0.776 23.132 M 8.5 5.201 L 8.5 14.904 M 11.08 2.58 C 11.08 4.006 9.925 5.161 8.5 5.161 C 7.075 5.161 5.92 4.006 5.92 2.58 C 5.92 1.155 7.075 0 8.5 0 C 9.925 0 11.08 1.155 11.08 2.58 Z"},{href:"#o-6",d:"M 0 1.995 C 0 0.893 0.872 0 1.948 0 L 2.833 0 L 7.083 0 L 15.052 0 C 15.569 0 16.064 0.21 16.429 0.584 C 16.795 0.958 17 1.466 17 1.995 L 17 6.981 L 17 9.973 C 17 11.075 16.128 11.968 15.052 11.968 L 7.083 11.968 L 1.531 17.04 L 2.833 11.968 L 1.948 11.968 C 0.872 11.968 0 11.075 0 9.973 L 0 6.981 L 0 1.995 Z"},{href:"#o-7",d:"M 10.323 0 C 10.286 0.002 10.251 0.005 10.214 0.008 C 9.624 0.067 9.104 0.441 8.839 0.999 L 8.699 1.421 C 8.729 1.275 8.776 1.133 8.839 0.999 C 8.367 0.511 7.706 0.285 7.051 0.391 C 6.397 0.497 5.829 0.921 5.519 1.536 C 4.643 0.996 3.55 1.029 2.705 1.621 C 1.86 2.214 1.41 3.262 1.546 4.32 L 1.636 4.75 C 1.596 4.609 1.565 4.466 1.546 4.32 L 1.533 4.36 C 0.798 4.44 0.196 5.01 0.039 5.773 C -0.117 6.536 0.208 7.318 0.845 7.713 L 1.84 7.954 C 1.493 7.983 1.146 7.899 0.845 7.713 C 0.354 8.263 0.241 9.078 0.565 9.752 C 0.889 10.425 1.582 10.813 2.296 10.725 L 2.73 10.61 C 2.591 10.668 2.446 10.706 2.296 10.725 C 2.702 11.471 3.374 12.016 4.164 12.233 C 4.953 12.449 5.791 12.321 6.491 11.878 C 7.061 12.777 8.073 13.25 9.088 13.091 C 10.103 12.931 10.941 12.168 11.238 11.133 L 11.341 10.554 C 11.326 10.751 11.292 10.944 11.238 11.133 C 11.936 11.591 12.815 11.616 13.536 11.2 C 14.257 10.784 14.708 9.99 14.714 9.126 L 14.455 7.834 L 13.437 6.96 C 14.224 7.453 14.721 8.205 14.714 9.126 C 15.651 9.135 16.447 8.333 16.804 7.411 C 17.161 6.49 17.026 5.44 16.449 4.651 C 16.688 4.064 16.674 3.396 16.41 2.82 C 16.146 2.245 15.66 1.817 15.074 1.649 C 14.943 0.886 14.403 0.273 13.69 0.072 C 12.976 -0.129 12.216 0.119 11.739 0.71 L 11.448 1.199 C 11.523 1.022 11.619 0.857 11.739 0.71 C 11.402 0.245 10.874 -0.017 10.323 0 Z"},{href:"#o-8",d:"M 0.017 8.165 C -0.018 6.777 0.669 5.413 1.826 4.637 C 3.711 3.205 6.199 2.552 8.537 2.946 C 9.695 2.768 10.208 3.97 9.8 4.896 C 9.171 5.511 8.075 4.926 7.26 5.244 C 4.616 5.585 2.006 6.734 0.219 8.754 C 0.208 8.538 -0.069 8.394 0.017 8.165 Z M 0.049 9.396 C 0.19 8.417 1.166 7.907 1.845 7.313 C 4.13 5.695 6.995 5.054 9.766 5.162 C 9.835 6.278 9.31 7.342 8.678 8.226 C 7.811 8.71 6.732 8.159 5.813 8.599 C 4.201 8.99 2.406 9.481 1.374 10.887 C 0.999 12.016 0.207 10.867 0.145 10.202 C 0.058 9.938 0.07 9.667 0.049 9.396 Z M 0.492 6.049 C 0.63 4.82 1.439 3.805 2.182 2.869 C 3.019 1.871 4.159 1.14 5.44 0.872 C 6.455 0.607 7.501 0.496 8.542 0.385 C 9.331 0.991 9.833 2.046 9.701 3.043 C 9.088 3.198 8.004 2.673 7.177 2.801 C 4.833 2.823 2.436 3.763 0.852 5.516 C 0.72 5.685 0.601 5.864 0.492 6.049 Z M 0.366 10.894 C 1.243 11.597 1.271 12.816 1.81 13.733 C 1.164 12.901 0.596 11.93 0.366 10.894 Z M 1.06 11.564 C 1.335 10.806 2.197 9.741 2.917 9.82 C 3.204 10.561 3.329 11.364 3.796 12.031 C 5.051 14.335 7.347 16.328 10.078 16.39 C 10.524 16.481 11.708 16.18 11.66 16.305 C 10.518 16.865 9.197 16.988 7.94 16.943 C 5.605 16.788 3.279 15.666 1.876 13.769 C 1.478 13.087 1.252 12.324 1.06 11.564 Z M 2.982 9.632 C 3.612 9.339 4.793 8.447 5.266 9.166 C 6.421 11.442 8.375 13.377 10.78 14.287 C 12.028 14.703 13.433 14.696 14.65 14.177 C 14.143 14.965 13.302 15.471 12.51 15.935 C 10.487 16.799 8.04 16.331 6.335 14.984 C 4.684 13.677 3.389 11.807 2.986 9.721 L 2.984 9.673 L 2.982 9.632 Z M 3.826 1.437 C 5.358 0.384 7.256 -0.11 9.108 0.021 C 8.16 0.626 6.971 0.396 5.932 0.724 C 5.207 0.881 4.487 1.094 3.826 1.437 Z M 5.149 8.861 C 6.157 8.383 7.305 8.391 8.395 8.456 C 9.052 9.48 9.521 10.669 10.541 11.407 C 11.73 12.469 13.46 12.768 14.958 12.27 C 15.472 11.922 16.044 12.144 15.763 12.833 C 15.424 13.978 14.224 14.481 13.123 14.536 C 10.872 14.761 8.812 13.482 7.291 11.937 C 6.404 11.049 5.654 10.013 5.149 8.861 Z M 8.569 0.349 C 9.39 -0.302 10.507 0.287 11.347 0.599 C 12.182 1.313 12.294 2.502 12.515 3.517 C 12.884 5.9 12.734 8.459 11.62 10.634 C 11.354 11.397 10.588 11.81 10.098 10.986 C 9.527 10.357 9.091 9.625 8.68 8.889 C 8.437 8.184 9.233 7.687 9.4 7.042 C 9.725 6.4 9.808 5.677 9.844 4.974 C 9.997 3.922 9.847 2.831 9.57 1.812 C 9.376 1.248 9.061 0.702 8.569 0.349 Z M 10.928 11.602 C 12.543 9.777 12.799 7.186 12.678 4.853 C 12.603 3.477 12.394 2.055 11.669 0.857 C 12.419 0.881 13.225 1.585 13.812 2.103 C 15.477 4.22 15.966 7.316 14.701 9.748 C 14.203 10.731 13.529 11.619 12.737 12.384 C 12.074 12.33 11.403 12.079 10.928 11.602 Z M 12.77 12.395 C 14.509 10.718 15.769 8.308 15.393 5.837 C 15.244 4.68 14.821 3.562 14.188 2.583 C 15.347 3.305 15.992 4.584 16.571 5.772 C 17.405 7.849 16.952 10.381 15.463 12.041 C 14.698 12.475 13.619 12.541 12.77 12.395 Z M 15.634 12.007 C 16.231 10.964 16.908 9.907 16.97 8.671 C 17.063 8.257 16.919 9.482 16.869 9.74 C 16.71 10.65 16.503 11.621 15.939 12.364 C 15.809 12.292 15.867 11.941 15.634 12.007 Z"}],[{href:"#o-9",d:"M 4.862 13.912 C 5.376 12.596 6.777 11.82 8.137 11.721 C 8.137 11.441 8.137 11.16 8.137 10.88 C 5.954 10.723 3.794 9.805 2.343 8.128 C 1.017 6.705 0.315 4.79 0.218 2.86 C -0.548 2.314 0.935 1.917 1.115 2.521 C 0.702 3.022 1.102 3.809 1.161 4.423 C 1.815 7.324 4.375 9.643 7.304 10.055 C 8.053 10.387 8.252 9.941 8.124 9.257 C 8.284 8.717 7.7 8.881 7.351 8.78 C 5.041 8.375 3.035 6.577 2.443 4.292 C 2.273 3.638 2.218 2.917 2.011 2.382 C 2.45 2.038 3.504 2.29 2.922 2.903 C 2.984 5.5 5.139 7.791 7.689 8.118 C 8.216 8.375 8.156 7.934 8.137 7.581 C 8.416 6.723 7.583 6.852 7.023 6.641 C 5.449 6.106 4.295 4.569 4.186 2.907 C 3.432 2.251 5.083 1.908 5.095 2.591 C 4.662 3.095 5.15 3.914 5.411 4.452 C 5.999 5.412 7.02 6.06 8.137 6.189 C 8.137 5.76 8.137 5.331 8.137 4.903 C 7.099 4.742 6.27 3.836 6.153 2.795 C 5.446 2.22 6.984 1.942 7.095 2.494 C 6.711 2.795 7 3.277 7.225 3.604 C 7.386 3.796 8.183 4.468 8.137 3.962 C 8.137 3.39 8.137 2.818 8.137 2.247 C 7.651 1.938 8.32 1.732 8.028 1.368 C 8.196 0.99 8.272 0.012 8.398 0 C 8.82 0.601 8.662 1.435 9.06 1.958 C 8.841 2.194 8.802 2.456 8.84 2.806 C 8.84 3.266 8.84 3.725 8.84 4.184 C 9.469 3.999 10.038 3.476 10.078 2.789 C 9.359 1.945 11.827 2.132 10.803 2.88 C 10.696 3.898 9.829 4.736 8.84 4.908 C 8.84 5.335 8.84 5.762 8.84 6.189 C 10.532 6.019 12.024 4.527 12.054 2.799 C 11.35 2.021 13.645 2.073 12.859 2.769 C 12.679 3.613 12.504 4.51 11.931 5.199 C 11.207 6.178 10.047 6.759 8.854 6.896 C 8.863 7.417 8.588 8.518 9.488 8.079 C 11.729 7.698 13.634 5.82 13.976 3.552 C 14.303 3.048 13.48 2.127 14.448 2.254 C 15.047 2.114 15.131 2.616 14.783 2.922 C 14.666 4.968 13.534 6.938 11.757 7.972 C 10.872 8.492 9.867 8.82 8.84 8.875 C 8.85 9.305 8.813 9.74 8.875 10.164 C 10.888 10.004 12.869 9.133 14.182 7.561 C 15.351 6.248 15.954 4.516 16.054 2.774 C 15.459 2.201 16.703 2.112 17 2.372 C 16.665 3.037 16.702 3.914 16.48 4.682 C 15.757 7.707 13.151 10.144 10.105 10.695 C 9.688 10.785 9.263 10.83 8.84 10.883 C 8.8 11.402 8.811 11.929 9.501 11.83 C 10.675 12.077 11.801 12.887 12.176 14.064 C 9.72 14.064 7.265 14.064 4.809 14.064 C 4.827 14.013 4.844 13.963 4.862 13.912 L 4.862 13.912 Z M 0.138 2.024 C 0.107 1.562 0.385 0.575 0.461 0.461 C 0.59 0.884 1.178 1.816 0.73 2.091 C 0.543 2.069 0.272 2.181 0.138 2.024 Z M 2.106 2.056 C 2.008 1.485 2.417 0.949 2.363 0.36 C 2.546 0.841 3.296 2.04 2.475 2.094 C 2.352 2.089 2.225 2.096 2.106 2.056 Z M 4.136 2.046 C 4.049 1.486 4.433 0.956 4.399 0.378 C 4.626 0.863 5.391 2.242 4.352 2.092 L 4.243 2.085 L 4.136 2.046 Z M 6.108 2.061 C 5.997 1.49 6.416 0.951 6.361 0.36 C 6.548 0.844 7.29 2.033 6.475 2.106 C 6.352 2.101 6.225 2.107 6.108 2.061 Z M 10.053 2.039 C 9.964 1.465 10.356 0.922 10.301 0.326 C 10.455 0.616 10.661 1.109 10.752 1.495 C 11.024 2.124 10.527 2.209 10.053 2.039 Z M 12.088 2.064 C 11.923 1.508 12.39 0.95 12.32 0.36 C 12.515 0.834 13.027 1.68 12.693 2.089 C 12.491 2.09 12.286 2.113 12.088 2.064 Z M 14.075 2.053 C 13.948 1.589 14.323 0.638 14.364 0.443 C 14.564 0.922 15.306 2.357 14.205 2.092 L 14.075 2.053 Z M 16.076 2.044 C 15.967 1.535 16.372 0.802 16.351 0.408 C 16.549 0.865 17.319 2.249 16.297 2.095 L 16.189 2.086 L 16.076 2.044 Z"},{href:"#o-10",d:"M 14.059 8.44 C 14.059 11.361 11.533 13.729 8.417 13.729 C 5.301 13.729 2.775 11.361 2.775 8.44 C 2.775 5.519 5.301 3.15 8.417 3.15 C 11.533 3.15 14.059 5.519 14.059 8.44 Z M 13.601 15.997 C 13.337 16.326 10.396 13.033 10.009 13.195 C 9.622 13.357 9.037 18.618 8.628 18.678 C 8.218 18.738 7.514 13.344 7.115 13.215 C 6.716 13.086 4.406 16.333 4.059 16.089 C 3.713 15.845 4.882 11.882 4.689 11.468 C 4.497 11.053 0.092 10.858 0.001 10.396 C -0.09 9.933 3.993 8.719 4.027 8.261 C 4.061 7.803 1.286 5.214 1.445 4.812 C 1.604 4.411 5.319 6.131 5.571 5.778 C 5.822 5.426 5.081 0.993 5.462 0.861 C 5.843 0.728 8.132 3.84 8.538 3.826 C 8.945 3.811 10.169 -0.09 10.585 0.002 C 11 0.093 10.793 4.139 11.115 4.409 C 11.436 4.679 14.617 3.396 14.853 3.764 C 15.089 4.131 13.029 7.704 13.153 8.128 C 13.277 8.551 17.051 8.956 16.999 9.394 C 16.947 9.832 12.281 10.018 12.086 10.443 C 11.892 10.867 13.865 15.667 13.601 15.997 Z"},{href:"#o-11",d:"M 10.504 5.109 L 8.569 4.766 L 9.282 4.394 C 9.674 4.189 10.03 3.991 10.072 3.953 C 10.177 3.86 8.865 1.833 8.701 1.834 C 8.628 1.835 8.124 2.62 7.581 3.579 C 7.033 4.545 6.488 5.281 6.359 5.228 C 4.828 4.61 3.579 3.984 3.579 3.836 C 3.579 3.734 4.06 2.83 4.647 1.826 L 5.714 0 L 8.623 0 L 11.533 0 L 12.292 1.201 L 13.052 2.402 L 13.844 1.996 C 14.393 1.714 14.602 1.674 14.526 1.864 C 13.851 3.54 12.843 5.494 12.664 5.475 C 12.54 5.462 11.568 5.297 10.504 5.109 Z M 1.48 12.586 C 0.744 11.318 0.084 10.131 0.014 9.948 C -0.058 9.76 0.152 9.089 0.496 8.407 L 1.106 7.199 L 0.482 6.83 C -0.347 6.34 -0.039 6.189 2.162 6.008 L 3.901 5.865 L 4.583 7.668 C 4.959 8.659 5.314 9.598 5.372 9.755 C 5.434 9.918 5.141 9.81 4.685 9.5 L 3.892 8.961 L 3.338 10.03 C 3.033 10.619 2.78 11.165 2.774 11.245 C 2.769 11.326 3.704 11.417 4.852 11.449 L 6.94 11.507 L 7.076 13.034 C 7.151 13.874 7.197 14.572 7.178 14.586 C 7.159 14.6 6.171 14.674 4.981 14.751 L 2.819 14.891 L 1.48 12.586 Z M 9.721 14.826 C 8.457 12.918 8.435 13.06 10.314 10.998 L 11.52 9.674 L 11.392 10.642 L 11.263 11.609 L 12.615 11.609 C 13.358 11.609 13.966 11.55 13.966 11.477 C 13.966 11.404 13.554 10.588 13.05 9.663 C 12.546 8.739 12.135 7.905 12.138 7.81 C 12.143 7.597 14.785 5.843 14.911 5.968 C 14.961 6.018 15.451 6.904 16.001 7.938 L 17 9.818 L 15.655 11.986 C 14.916 13.179 14.205 14.271 14.076 14.413 C 13.948 14.556 13.227 14.729 12.475 14.8 C 11.04 14.934 11.079 14.901 10.868 16.127 C 10.832 16.341 10.402 15.855 9.721 14.826 Z"},{href:"#o-12",d:"M 8.544 0 C 8.366 0 8.208 0.073 8.074 0.206 C 7.94 0.338 7.83 0.528 7.738 0.765 C 7.554 1.239 7.441 1.904 7.379 2.702 C 7.318 3.498 7.307 4.424 7.333 5.416 C 5.134 6.318 0.675 8.18 0.317 8.596 C -0.16 9.15 -0.006 9.784 0.186 10.206 L 7.517 8.714 C 7.672 10.658 7.892 12.584 8.084 14.093 C 7.367 14.303 6.029 14.717 5.753 14.974 C 5.372 15.328 5.372 16.471 5.372 16.471 L 8.373 16.227 C 8.444 16.72 8.488 17.007 8.488 17.007 L 8.492 17.033 L 8.516 17.033 L 8.571 17.033 L 8.595 17.033 L 8.599 17.007 C 8.599 17.007 8.643 16.72 8.714 16.227 L 11.715 16.471 C 11.715 16.471 11.715 15.328 11.335 14.974 C 11.058 14.717 9.719 14.302 9.002 14.092 C 9.194 12.588 9.414 10.669 9.569 8.731 L 16.814 10.206 C 17.006 9.784 17.161 9.15 16.684 8.596 C 16.331 8.186 11.979 6.365 9.753 5.451 C 9.78 4.446 9.77 3.507 9.707 2.702 L 9.707 2.7 C 9.646 1.903 9.532 1.238 9.349 0.765 C 9.257 0.528 9.147 0.338 9.014 0.206 C 8.88 0.073 8.722 0 8.544 0 Z"}],[{href:"#o-13",d:"M 0 0 C 0.128 1.695 0.614 3.247 1.328 4.61 L 2.656 2.538 L 2.273 2.396 L 1.741 2.208 L 2.019 1.724 L 2.993 0 L 0 0 Z M 4.079 0 L 3.117 1.7 L 3.53 1.848 L 4.091 2.048 L 3.772 2.544 L 1.859 5.537 C 3.235 7.625 5.248 9.067 7.556 9.379 L 7.556 15.489 L 3.778 15.489 L 3.778 17 L 13.222 17 L 13.222 15.489 L 9.444 15.489 L 9.444 9.379 C 13.47 8.841 16.629 4.907 17 0 L 4.079 0 Z"},{href:"#o-14",d:"M 9.138 2.865 C 9.462 2.277 10.056 1.512 9.036 1.327 C 8.751 1.181 8.467 0.923 8.183 1.211 C 7.552 1.46 7.005 1.809 7.669 2.462 C 7.963 2.883 8.231 3.803 8.565 3.905 C 8.764 3.563 8.95 3.214 9.138 2.865 Z M 7.743 4.488 C 7.163 3.453 6.696 2.343 5.987 1.389 C 5.124 0.467 3.424 0.878 3.037 2.066 C 2.524 3.241 3.631 4.644 4.885 4.497 C 5.837 4.513 6.793 4.556 7.743 4.488 Z M 12.56 4.523 C 13.792 4.357 14.501 2.805 13.8 1.775 C 13.177 0.675 11.388 0.636 10.763 1.754 C 10.222 2.658 9.752 3.602 9.256 4.53 C 10.353 4.593 11.461 4.578 12.56 4.523 Z M 14.601 5.846 C 15.022 5.476 16.649 5.04 15.417 4.689 C 15.111 4.602 14.755 4.205 14.481 4.314 C 13.885 5.055 12.969 5.489 12.012 5.444 C 11.825 5.505 10.869 5.35 11.127 5.526 C 11.802 5.911 12.46 6.329 13.158 6.671 C 13.647 6.41 14.122 6.123 14.601 5.846 Z M 4.999 6.055 C 5.358 5.846 5.718 5.637 6.077 5.427 C 4.978 5.373 3.721 5.531 2.891 4.647 C 2.657 4.385 2.432 4.085 2.108 4.415 C 1.719 4.683 0.524 4.957 1.444 5.284 C 2.245 5.757 3.041 6.242 3.862 6.681 C 4.254 6.497 4.623 6.268 4.999 6.055 Z M 10.266 8.392 C 10.732 8.017 11.86 7.661 11.898 7.259 C 10.845 6.653 9.822 5.979 8.721 5.466 C 8.342 5.323 8.034 5.544 7.729 5.736 C 6.827 6.273 5.902 6.776 5.029 7.36 C 6.171 8.066 7.327 8.751 8.493 9.415 C 9.089 9.082 9.676 8.734 10.266 8.392 Z M 14.939 9.56 C 15.423 9.255 15.906 8.95 16.389 8.645 C 16.385 7.624 16.401 6.602 16.373 5.582 C 15.398 6.126 14.437 6.697 13.491 7.292 C 13.388 8.345 13.441 9.416 13.463 10.475 C 13.962 10.181 14.448 9.866 14.939 9.56 Z M 3.606 8.916 C 3.655 8.046 3.761 7.054 2.711 6.796 C 2.048 6.487 1.13 5.694 0.619 5.702 C 0.603 6.683 0.611 7.664 0.61 8.645 C 1.589 9.256 2.551 9.897 3.551 10.473 C 3.648 9.967 3.585 9.431 3.606 8.916 Z M 10.619 12.287 C 11.198 11.921 11.777 11.556 12.356 11.19 C 12.354 10.136 12.397 9.08 12.35 8.027 C 11.713 8.209 10.985 8.773 10.314 9.124 C 9.812 9.418 9.31 9.712 8.808 10.006 C 8.818 11.132 8.781 12.26 8.844 13.384 C 9.445 13.033 10.029 12.655 10.619 12.287 Z M 8.191 11.695 C 8.191 11.132 8.191 10.569 8.191 10.006 C 7.028 9.327 5.869 8.641 4.702 7.969 C 4.637 9.046 4.674 10.126 4.664 11.205 C 5.827 11.932 6.977 12.68 8.154 13.384 C 8.2 12.823 8.183 12.258 8.191 11.695 Z M 14.968 13.958 C 15.442 13.643 15.916 13.327 16.39 13.011 C 16.37 12.011 16.439 10.997 16.339 10.008 C 15.353 10.57 14.402 11.21 13.434 11.81 C 13.458 12.845 13.387 13.892 13.494 14.919 C 13.994 14.612 14.478 14.281 14.968 13.958 Z M 3.596 13.397 C 3.592 12.873 3.588 12.348 3.584 11.824 C 2.605 11.211 1.638 10.578 0.645 9.99 C 0.583 10.995 0.618 12.003 0.609 13.01 C 1.596 13.664 2.573 14.335 3.574 14.968 C 3.612 14.446 3.593 13.921 3.596 13.397 Z M 10.644 16.844 C 11.219 16.462 11.794 16.08 12.369 15.698 C 12.368 14.633 12.39 13.567 12.361 12.502 C 11.19 13.224 10.027 13.96 8.872 14.708 C 8.742 15.736 8.827 16.797 8.826 17.837 C 9.185 18.055 10.101 17.088 10.644 16.844 Z M 8.191 16.388 C 8.121 15.654 8.49 14.62 7.556 14.335 C 6.615 13.739 5.677 13.136 4.723 12.56 C 4.584 13.568 4.73 14.619 4.623 15.639 C 5.767 16.466 6.94 17.257 8.136 18.008 C 8.231 17.481 8.172 16.924 8.191 16.388 Z M 4.19 16.194 C 2.798 15.265 1.406 14.335 0.014 13.406 C 0.015 10.538 -0.025 7.669 0.026 4.801 C 0.724 4.371 1.465 4.018 2.183 3.624 C 1.72 2.297 2.388 0.685 3.732 0.188 C 4.858 -0.274 6.216 0.143 6.934 1.116 C 7.456 0.849 7.978 0.581 8.499 0.314 C 9.024 0.584 9.548 0.854 10.073 1.124 C 10.824 0.232 12.111 -0.276 13.227 0.223 C 14.566 0.694 15.296 2.302 14.816 3.627 C 15.539 4.035 16.325 4.354 16.987 4.852 C 17.017 7.703 16.988 10.555 16.985 13.406 C 14.215 15.239 11.489 17.143 8.674 18.906 C 7.856 18.906 7.149 18.017 6.389 17.657 C 5.655 17.171 4.922 16.683 4.19 16.194 Z"},{href:"#o-15",d:"M 1.833 12.681 L 15.157 12.686 L 14.725 13.326 L 2.27 13.31 L 1.833 12.681 Z M 1.924 4.18 L 15.071 4.165 L 15.452 4.821 L 1.537 4.826 L 1.924 4.18 Z M 0.627 8.44 L 16.358 8.425 L 16.338 9.08 L 0.637 9.07 L 0.627 8.44 Z M 16.371 8.501 C 16.371 12.841 12.84 16.372 8.498 16.372 C 4.159 16.372 0.628 12.84 0.628 8.501 C 0.628 4.162 4.16 0.631 8.498 0.631 C 12.84 0.63 16.371 4.162 16.371 8.501 Z M 8.499 0 C 3.813 0 0 3.813 0 8.5 C 0 13.188 3.813 17.001 8.499 17.001 C 13.187 17.001 17 13.188 17 8.5 C 17 3.813 13.187 0 8.499 0 Z M 10.884 8.501 C 10.884 13.139 9.628 16.372 8.499 16.372 C 7.372 16.372 6.115 13.139 6.115 8.501 C 6.115 3.862 7.371 0.631 8.499 0.631 C 9.627 0.63 10.884 3.862 10.884 8.501 Z M 8.499 0 C 6.541 0 5.485 4.38 5.485 8.5 C 5.485 12.622 6.541 17.001 8.499 17.001 C 10.457 17.001 11.515 12.621 11.515 8.5 C 11.514 4.38 10.457 0 8.499 0 Z M 14.085 8.501 C 14.085 12.841 11.578 16.372 8.499 16.372 C 5.421 16.372 2.915 12.84 2.915 8.501 C 2.915 4.162 5.421 0.631 8.499 0.631 C 11.578 0.63 14.085 4.162 14.085 8.501 Z M 8.499 0 C 5.073 0 2.285 3.813 2.285 8.5 C 2.285 13.188 5.073 17.001 8.499 17.001 C 11.926 17.001 14.714 13.188 14.714 8.5 C 14.714 3.813 11.926 0 8.499 0 Z"},{href:"#o-16",d:"M 9.351 16.374 C 9.351 15.364 9.351 14.785 9.351 13.775 C 9.351 12.354 11.288 10.283 12.543 8.831 C 12.887 8.492 13.504 8.361 13.831 8.683 C 14.12 8.968 14.098 9.67 13.868 10.019 C 13.447 10.652 13.025 11.286 12.603 11.919 C 12.392 12.28 12.911 12.573 13.221 12.187 C 14.84 9.994 15.283 9.55 15.283 8.668 C 15.283 6.866 15.283 6.891 15.283 5.09 C 15.283 4.574 15.661 4.08 16.143 4.08 C 16.601 4.08 17 4.555 17 5.003 C 17 7.913 17 9.009 17 11.919 C 17 12.815 14.169 15.526 14.169 16.789 C 14.169 17.086 14.169 17.383 14.169 17.68 C 12.563 17.68 10.956 17.68 9.35 17.68 C 9.35 17.245 9.351 16.809 9.351 16.374 Z M 7.649 16.374 C 7.649 15.364 7.649 14.785 7.649 13.775 C 7.649 12.354 5.712 10.283 4.457 8.831 C 4.113 8.492 3.496 8.361 3.169 8.683 C 2.88 8.968 2.902 9.67 3.132 10.019 C 3.553 10.652 3.975 11.286 4.397 11.919 C 4.608 12.28 4.089 12.573 3.779 12.187 C 2.16 9.994 1.717 9.55 1.717 8.668 C 1.717 6.866 1.717 6.891 1.717 5.09 C 1.717 4.574 1.339 4.08 0.857 4.08 C 0.399 4.08 0 4.555 0 5.003 C 0 7.913 0 9.009 0 11.919 C 0 12.815 2.831 15.526 2.831 16.789 C 2.831 17.086 2.831 17.383 2.831 17.68 C 4.437 17.68 6.044 17.68 7.65 17.68 C 7.65 17.245 7.649 16.809 7.649 16.374 Z M 5.1 3.613 L 7.99 5.78 L 7.99 9.18 L 5.1 7.013 L 5.1 3.613 Z M 11.9 3.613 L 9.01 5.78 L 9.01 9.18 L 11.9 7.013 L 11.9 3.613 Z M 5.1 2.55 L 8.5 0 L 11.9 2.55 L 8.5 5.1 L 5.1 2.55 Z"}],[{href:"#o-17",d:"M 14.909 14.822 C 14.909 15.043 14.73 15.223 14.508 15.223 L 11.935 15.223 C 11.713 15.223 11.533 15.043 11.533 14.822 L 11.533 9.356 C 11.533 9.134 11.713 8.954 11.935 8.954 L 14.508 8.954 C 14.73 8.954 14.909 9.134 14.909 9.356 L 14.909 14.822 Z M 5.384 14.822 C 5.384 15.043 5.204 15.223 4.982 15.223 L 2.41 15.223 C 2.188 15.223 2.008 15.043 2.008 14.822 L 2.008 9.356 C 2.008 9.134 2.188 8.954 2.41 8.954 L 4.982 8.954 C 5.204 8.954 5.384 9.134 5.384 9.356 L 5.384 14.822 Z M 8.493 0 C 3.837 0 0.058 3.745 0 8.386 L 1.474 8.386 C 1.521 4.55 4.645 1.455 8.493 1.455 C 12.34 1.455 15.464 4.55 15.511 8.386 L 16.985 8.386 C 16.927 3.745 13.147 0 8.493 0 Z M 0.012 12.638 L 1.459 12.638 L 1.459 8.378 L 0.012 8.378 L 0.012 12.638 Z M 15.499 8.377 L 15.499 12.637 L 17 12.637 L 17 8.377 L 15.499 8.377 Z"},{href:"#o-18",d:"M 7.197 16.915 C 4.436 16.498 1.965 14.642 0.79 12.11 C -0.629 9.116 -0.111 5.301 2.145 2.851 C 4.35 0.268 8.177 -0.662 11.354 0.483 C 14.671 1.616 17.069 4.988 16.999 8.501 C 17.068 11.95 14.765 15.259 11.539 16.45 C 10.16 16.99 8.657 17.098 7.197 16.915 Z M 7.694 11.674 C 7.689 11.259 7.684 10.843 7.679 10.427 C 6.512 11.595 5.345 12.762 4.178 13.93 C 5.181 14.732 6.408 15.228 7.679 15.394 C 7.695 14.154 7.709 12.914 7.694 11.674 Z M 10.452 15.156 C 11.278 14.913 12.071 14.524 12.74 13.982 C 12.21 13.215 11.451 12.602 10.81 11.916 C 10.304 11.411 9.799 10.906 9.294 10.4 C 9.294 12.066 9.294 13.732 9.294 15.398 C 9.685 15.345 10.072 15.265 10.452 15.156 Z M 7.707 4.898 C 7.707 3.8 7.707 2.703 7.707 1.605 C 4.759 1.923 2.145 4.308 1.687 7.258 C 1.351 9.197 1.813 11.291 3.072 12.824 C 4.617 11.28 6.162 9.735 7.707 8.19 C 7.707 7.093 7.707 5.995 7.707 4.898 Z M 14.303 12.305 C 16.005 9.764 15.757 6.09 13.641 3.857 C 12.523 2.618 10.957 1.785 9.294 1.605 C 9.294 3.8 9.294 5.995 9.294 8.189 C 10.807 9.681 12.271 11.224 13.836 12.662 C 14.055 12.922 14.165 12.392 14.303 12.305 Z"},{href:"#o-19",d:"M 4.25 0 L 2.975 2.125 L 1.7 4.25 L 2.89 4.25 L 2.89 15.3 L 5.61 15.3 L 5.61 4.25 L 6.8 4.25 L 5.525 2.125 L 4.25 0 Z M 12.75 0 L 11.475 2.125 L 10.2 4.25 L 11.39 4.25 L 11.39 15.3 L 14.11 15.3 L 14.11 4.25 L 15.3 4.25 L 14.025 2.125 L 12.75 0 Z M 0 16.15 L 0 17.85 L 17 17.85 L 17 16.15 L 0 16.15 Z"},{href:"#o-20",d:"M 3.965 6.538 C 5.021 8.561 5.227 9.175 4.878 9.259 C 4.196 9.422 4.333 10.354 5.287 12.045 C 6.483 14.165 8.826 15.467 11.027 15.235 C 11.881 15.145 12.847 14.958 13.173 14.821 C 13.499 14.683 13.299 14.939 12.728 15.39 C 9.873 17.642 6.347 17.485 3.534 14.981 C 2.413 13.982 0.869 11.064 0.869 9.942 C 0.869 9.624 0.615 9.316 0.304 9.257 C -0.204 9.162 -0.136 8.909 0.983 6.748 C 1.668 5.427 2.312 4.251 2.415 4.135 C 2.518 4.02 3.216 5.101 3.965 6.538 Z M 13.035 10.438 C 11.98 8.415 11.774 7.801 12.123 7.717 C 12.804 7.554 12.667 6.622 11.713 4.931 C 10.517 2.811 8.174 1.508 5.974 1.741 C 5.119 1.831 4.154 2.017 3.827 2.155 C 3.501 2.292 3.701 2.036 4.272 1.586 C 7.127 -0.667 10.653 -0.51 13.466 1.995 C 14.588 2.994 16.131 5.912 16.131 7.034 C 16.131 7.352 16.385 7.66 16.696 7.718 C 17.205 7.814 17.137 8.066 16.017 10.227 C 15.333 11.549 14.688 12.724 14.585 12.84 C 14.482 12.956 13.785 11.875 13.035 10.438 Z"}],[{href:"#o-21",d:"M 13.705 0 C 12.13 1.273 9.954 1.285 8.367 0.038 C 6.842 1.238 4.769 1.272 3.212 0.141 L 0.413 3.148 C 2.135 5.032 2.125 8.058 0.383 9.928 C 0.152 10.567 0.031 10.536 0.006 11.179 C -0.054 12.728 0.294 14.172 1.381 15.26 C 2.353 16.232 3.672 16.644 4.939 16.497 C 7.054 16.614 8.068 17.598 8.494 18.187 C 9.068 17.558 9.962 16.547 12.678 16.421 C 14.299 16.17 14.885 15.764 15.645 15.013 C 16.67 13.989 17.028 12.692 16.997 11.251 C 16.985 10.653 16.917 10.445 16.58 9.681 C 14.831 7.802 14.829 4.756 16.576 2.875 L 13.705 0 Z"},{href:"#o-22",d:"M 7.82 0 L 7.82 1.721 C 3.446 1.964 0 4.526 0 7.65 C 0 7.087 0.952 6.63 2.125 6.63 C 3.298 6.63 4.25 7.087 4.25 7.65 C 4.25 7.087 5.202 6.63 6.375 6.63 C 6.934 6.63 7.441 6.737 7.82 6.906 L 7.82 15.3 C 7.82 15.675 7.515 15.98 7.14 15.98 C 6.765 15.98 6.46 15.675 6.46 15.3 L 6.46 14.96 L 5.1 14.96 L 5.1 15.3 C 5.1 16.426 6.014 17.34 7.14 17.34 C 8.266 17.34 9.18 16.426 9.18 15.3 L 9.18 6.906 C 9.559 6.737 10.066 6.63 10.625 6.63 C 11.798 6.63 12.75 7.087 12.75 7.65 C 12.75 7.087 13.702 6.63 14.875 6.63 C 16.048 6.63 17 7.087 17 7.65 C 17 4.526 13.554 1.964 9.18 1.721 L 9.18 0 L 7.82 0 Z"},{href:"#o-23",d:"M 0 1.7 C 0 2.639 1.903 3.4 4.25 3.4 C 6.597 3.4 8.5 2.639 8.5 1.7 C 8.5 0.761 10.403 0 12.75 0 C 15.097 0 17 0.761 17 1.7 L 17 15.3 C 17 14.361 15.097 13.6 12.75 13.6 C 10.403 13.6 8.5 14.361 8.5 15.3 C 8.5 16.239 6.597 17 4.25 17 C 1.903 17 0 16.239 0 15.3 L 0 1.7 Z"},{href:"#o-24",d:"M 8.5 17 C 3.805 17 0 13.195 0 8.5 C 0 3.806 3.805 0 8.5 0 C 10.754 0 12.916 0.896 14.51 2.49 C 16.104 4.084 17 6.246 17 8.5 C 17 10.755 16.104 12.917 14.51 14.511 L 17 14.511 L 17 17 L 8.5 17 Z"}],[{href:"#o-25",d:"M 0 1.995 C 0 0.893 0.872 0 1.948 0 L 2.834 0 L 7.084 0 L 15.052 0 C 15.569 0 16.064 0.21 16.43 0.584 C 16.795 0.958 17 1.466 17 1.995 L 17 6.981 L 17 9.973 C 17 11.075 16.128 11.968 15.052 11.968 L 7.084 11.968 L 1.532 17.04 L 2.834 11.968 L 1.948 11.968 C 0.872 11.968 0 11.075 0 9.973 L 0 6.981 L 0 1.995 Z"},{href:"#o-26",d:"M 0 0 L 2.833 0 L 7.083 0 L 17 0 L 17 6.611 L 17 9.444 L 17 11.333 L 7.083 11.333 L 0.027 16.888 L 2.833 11.333 L 0 11.333 L 0 9.444 L 0 6.611 L 0 0 Z"},{href:"#o-27",d:"M 0.164 16.847 L 3.51 10.84 C -0.035 9.028 -1.046 5.615 1.173 2.955 C 3.392 0.294 8.115 -0.742 12.085 0.56 C 16.055 1.862 17.971 5.076 16.513 7.986 C 15.055 10.896 10.699 12.549 6.45 11.805 L 0.164 16.847 Z"},{href:"#o-28",d:"M 17 7.495 L 14.967 7.607 L 14.423 10.341 L 12.624 9.68 L 10.015 11.779 L 9.022 10.554 L 0.655 15.791 L 5.304 9.951 L 1.443 9.191 L 2.651 8.062 L 0 5.988 L 1.905 5.487 L 1.306 2.758 L 3.303 3.044 L 4.946 0.525 L 6.401 1.508 L 9.765 0 L 10.216 1.367 L 14.232 1.348 L 13.535 2.666 L 16.929 4.142 L 15.307 4.992 L 17 7.495 Z"}],[{href:"#o-29",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.194 3.806 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 9.277 13.396 L 7.694 13.396 L 7.694 11.877 L 9.277 11.877 L 9.277 13.396 Z M 9.277 10.256 L 9.277 10.758 L 7.694 10.758 L 7.694 10.14 C 7.694 8.274 9.816 7.978 9.816 6.653 C 9.816 6.048 9.276 5.585 8.568 5.585 C 7.835 5.585 7.192 6.125 7.192 6.125 L 6.29 5.005 C 6.29 5.005 7.179 4.079 8.71 4.079 C 10.164 4.079 11.515 4.979 11.515 6.498 C 11.515 8.622 9.277 8.867 9.277 10.256 Z"},{href:"#o-30",d:"M 8.5 0 C 3.805 0 0 3.806 0 8.5 C 0 13.194 3.805 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 7.773 3.821 L 9.188 3.821 L 9.188 5.327 L 7.773 5.327 L 7.773 3.821 Z M 10.115 12.958 L 8.558 12.958 C 7.954 12.958 7.696 12.7 7.696 12.083 L 7.696 8.068 C 7.696 7.875 7.593 7.785 7.413 7.785 L 6.898 7.785 L 6.898 6.395 L 8.455 6.395 C 9.06 6.395 9.317 6.665 9.317 7.27 L 9.317 11.297 C 9.317 11.478 9.42 11.58 9.6 11.58 L 10.115 11.58 L 10.115 12.958 Z"},{href:"#o-31",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.195 3.806 17 8.5 17 C 13.194 17 17 13.195 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 8.5 16.415 C 4.137 16.415 0.585 12.864 0.585 8.5 C 0.585 4.137 4.137 0.585 8.5 0.585 C 12.864 0.585 16.416 4.136 16.416 8.5 C 16.415 12.864 12.864 16.415 8.5 16.415 Z M 5.637 7.331 C 6.182 7.331 6.624 6.463 6.624 5.394 C 6.624 4.324 6.182 3.457 5.637 3.457 C 5.091 3.457 4.649 4.324 4.649 5.394 C 4.649 6.463 5.092 7.331 5.637 7.331 Z M 11.266 7.331 C 11.812 7.331 12.253 6.463 12.253 5.394 C 12.253 4.324 11.811 3.457 11.266 3.457 C 10.721 3.457 10.278 4.324 10.278 5.394 C 10.278 6.463 10.721 7.331 11.266 7.331 Z M 3.905 11.535 C 5.259 13.321 6.832 14.349 8.512 14.349 C 10.249 14.349 11.872 13.256 13.255 11.361 C 11.784 12.387 10.16 12.96 8.451 12.96 C 6.841 12.96 5.307 12.451 3.905 11.535 Z"},{href:"#o-32",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.195 3.806 17 8.5 17 C 13.195 17 17 13.195 17 8.5 C 17 3.806 13.195 0 8.5 0 Z M 11.266 3.456 C 11.812 3.456 12.253 4.323 12.253 5.393 C 12.253 6.463 11.811 7.331 11.266 7.331 C 10.721 7.331 10.279 6.463 10.279 5.394 C 10.279 4.324 10.722 3.456 11.266 3.456 Z M 5.637 3.456 C 6.182 3.456 6.624 4.323 6.624 5.393 C 6.624 6.463 6.183 7.331 5.637 7.331 C 5.091 7.331 4.65 6.463 4.65 5.394 C 4.65 4.324 5.092 3.456 5.637 3.456 Z M 8.513 14.349 C 6.832 14.349 5.259 13.321 3.905 11.535 C 5.307 12.45 6.841 12.96 8.451 12.96 C 10.161 12.96 11.785 12.387 13.256 11.361 C 11.873 13.256 10.249 14.349 8.513 14.349 Z"}],[{href:"#o-33",d:"M 8.5 17 C 13.195 17 17 13.194 17 8.5 C 17 3.805 13.195 0 8.5 0 C 3.806 0 0 3.805 0 8.5 C 0 13.194 3.806 17 8.5 17 Z M 9.866 2.813 L 11.934 4.882 L 8.316 8.5 L 11.934 12.119 L 9.866 14.187 L 4.18 8.5 L 9.866 2.813 Z"},{href:"#o-34",d:"M 8.5 0 C 3.805 0 0 3.805 0 8.5 C 0 13.194 3.805 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.805 13.194 0 8.5 0 Z M 7.134 14.187 L 5.066 12.117 L 8.684 8.499 L 5.066 4.881 L 7.134 2.813 L 12.821 8.499 L 7.134 14.187 Z"},{href:"#o-35",d:"M 10.965 0 C 10.569 0.975 9.616 1.664 8.5 1.664 C 7.384 1.664 6.431 0.975 6.035 0 L 0 2.56 L 1.698 6.562 L 3.563 5.77 L 3.563 13.929 L 13.503 13.929 L 13.503 5.799 L 15.301 6.562 L 17 2.56 L 10.965 0 Z"},{href:"#o-36",d:"M 17 8.499 C 17 7.124 15.886 6.01 14.511 6.01 C 14.961 5.559 15.24 4.937 15.24 4.249 C 15.24 2.874 14.126 1.759 12.751 1.759 C 12.064 1.759 11.441 2.038 10.99 2.489 C 10.99 1.114 9.876 0 8.501 0 C 7.126 0 6.011 1.114 6.011 2.489 C 5.56 2.038 4.938 1.759 4.251 1.759 C 2.875 1.759 1.761 2.874 1.761 4.249 C 1.761 4.936 2.039 5.559 2.49 6.009 C 1.115 6.009 0 7.124 0 8.499 C 0 9.874 1.115 10.989 2.49 10.989 C 2.039 11.439 1.761 12.062 1.761 12.749 C 1.761 14.124 2.875 15.238 4.251 15.238 C 4.938 15.238 5.56 14.96 6.011 14.509 C 6.011 15.884 7.126 16.999 8.501 16.999 C 9.876 16.999 10.99 15.884 10.99 14.509 C 11.441 14.96 12.064 15.238 12.751 15.238 C 14.126 15.238 15.24 14.124 15.24 12.749 C 15.24 12.062 14.961 11.439 14.511 10.988 C 14.511 10.988 14.511 10.988 14.511 10.988 C 15.886 10.988 17 9.874 17 8.499 Z M 12.725 11.402 C 12.734 11.402 12.742 11.401 12.751 11.401 C 13.496 11.401 14.099 12.004 14.099 12.749 C 14.099 13.493 13.496 14.097 12.751 14.097 C 12.007 14.097 11.404 13.493 11.404 12.749 C 11.404 12.74 11.404 12.732 11.404 12.723 L 9.436 10.754 L 9.436 13.539 C 9.69 13.783 9.849 14.128 9.849 14.509 C 9.849 15.253 9.245 15.857 8.501 15.857 C 7.757 15.857 7.153 15.253 7.153 14.509 C 7.153 14.127 7.312 13.783 7.566 13.539 L 7.566 10.754 L 5.598 12.723 C 5.598 12.732 5.599 12.74 5.599 12.749 C 5.599 13.493 4.996 14.097 4.251 14.097 C 3.507 14.097 2.904 13.493 2.904 12.749 C 2.904 12.004 3.507 11.401 4.251 11.401 C 4.26 11.401 4.268 11.402 4.277 11.402 L 6.246 9.433 L 3.462 9.433 C 3.217 9.688 2.873 9.846 2.491 9.846 C 1.747 9.846 1.144 9.243 1.144 8.499 C 1.144 7.755 1.747 7.151 2.491 7.151 C 2.873 7.151 3.217 7.31 3.462 7.565 L 6.246 7.565 L 4.277 5.596 C 4.268 5.596 4.26 5.597 4.251 5.597 C 3.507 5.597 2.904 4.994 2.904 4.249 C 2.904 3.505 3.507 2.902 4.252 2.902 C 4.996 2.902 5.599 3.505 5.599 4.249 C 5.599 4.258 5.599 4.266 5.599 4.275 L 7.567 6.244 L 7.567 3.46 C 7.313 3.215 7.154 2.871 7.154 2.489 C 7.154 1.745 7.758 1.141 8.502 1.141 C 9.246 1.141 9.849 1.744 9.849 2.489 C 9.849 2.871 9.69 3.215 9.436 3.46 L 9.436 6.244 L 11.405 4.275 C 11.405 4.266 11.404 4.258 11.404 4.249 C 11.404 3.505 12.007 2.902 12.752 2.902 C 13.496 2.902 14.099 3.505 14.099 4.249 C 14.099 4.994 13.496 5.597 12.752 5.597 C 12.743 5.597 12.735 5.596 12.726 5.596 L 10.757 7.565 L 13.541 7.565 C 13.786 7.31 14.131 7.151 14.512 7.151 C 15.256 7.151 15.859 7.755 15.859 8.499 C 15.859 9.243 15.256 9.846 14.512 9.846 C 14.13 9.846 13.786 9.688 13.541 9.433 L 10.757 9.433 L 12.725 11.402 Z"}],[{href:"#o-37",d:"M 9.033 14.96 C 8.849 14.977 8.661 14.989 8.468 14.989 C 8.295 14.989 8.127 14.979 7.963 14.965 L 6.545 16.788 L 6.196 16.69 C 5.786 16.574 5.389 16.43 5.007 16.257 L 4.675 16.107 L 4.76 13.817 C 4.459 13.606 4.177 13.372 3.917 13.114 L 1.674 13.596 L 1.47 13.295 C 1.229 12.942 1.025 12.572 0.843 12.197 L 0.686 11.871 L 2.208 10.185 C 2.113 9.828 2.05 9.46 2.017 9.085 L 0 8.018 L 0.036 7.656 C 0.079 7.224 0.163 6.81 0.263 6.413 L 0.352 6.06 L 2.603 5.748 C 2.763 5.409 2.952 5.089 3.165 4.787 L 2.306 2.673 L 2.566 2.419 C 2.87 2.122 3.197 1.853 3.537 1.607 L 3.832 1.394 L 5.775 2.614 C 6.102 2.464 6.444 2.339 6.799 2.244 L 7.504 0.059 L 7.867 0.031 C 8.062 0.017 8.272 0 8.501 0 C 8.729 0 8.938 0.017 9.134 0.031 L 9.497 0.059 L 10.209 2.267 C 10.55 2.362 10.88 2.484 11.197 2.631 L 13.167 1.394 L 13.463 1.606 C 13.804 1.852 14.13 2.122 14.434 2.417 L 14.695 2.671 L 13.81 4.848 C 14.002 5.129 14.176 5.425 14.325 5.737 L 16.646 6.059 L 16.736 6.411 C 16.838 6.808 16.921 7.222 16.963 7.655 L 17 8.017 L 14.911 9.121 C 14.88 9.463 14.824 9.8 14.741 10.129 L 16.315 11.867 L 16.156 12.195 C 15.975 12.571 15.772 12.942 15.53 13.294 L 15.326 13.594 L 13.027 13.101 C 12.784 13.345 12.52 13.569 12.238 13.771 L 12.326 16.106 L 11.994 16.256 C 11.611 16.429 11.214 16.573 10.804 16.688 L 10.454 16.787 L 9.033 14.96 Z M 10.857 15.544 C 10.979 15.503 11.1 15.46 11.219 15.413 L 11.137 13.207 L 11.396 13.042 C 11.783 12.79 12.136 12.488 12.449 12.146 L 12.657 11.918 L 14.832 12.383 C 14.897 12.274 14.961 12.162 15.022 12.048 L 13.534 10.404 L 13.626 10.11 C 13.758 9.687 13.832 9.233 13.854 8.759 L 13.868 8.451 L 15.844 7.407 C 15.823 7.28 15.799 7.155 15.772 7.029 L 13.574 6.725 L 13.456 6.44 C 13.279 6.015 13.045 5.617 12.766 5.25 L 12.581 5.005 L 13.417 2.948 C 13.321 2.863 13.221 2.781 13.119 2.701 L 11.253 3.872 L 10.978 3.728 C 10.571 3.513 10.131 3.351 9.666 3.245 L 9.366 3.176 L 8.692 1.086 C 8.626 1.083 8.563 1.081 8.501 1.081 C 8.437 1.081 8.374 1.083 8.308 1.086 L 7.639 3.163 L 7.334 3.227 C 6.861 3.329 6.411 3.494 5.991 3.711 L 5.717 3.854 L 3.881 2.701 C 3.779 2.781 3.68 2.863 3.584 2.948 L 4.398 4.951 L 4.207 5.196 C 3.908 5.579 3.661 5.998 3.475 6.449 L 3.357 6.734 L 1.229 7.029 C 1.202 7.155 1.179 7.28 1.159 7.407 L 3.066 8.415 L 3.078 8.726 C 3.098 9.228 3.181 9.709 3.326 10.159 L 3.42 10.455 L 1.98 12.048 C 2.04 12.163 2.103 12.275 2.169 12.384 L 4.284 11.928 L 4.495 12.157 C 4.82 12.512 5.19 12.821 5.599 13.077 L 5.862 13.241 L 5.782 15.413 C 5.901 15.46 6.022 15.503 6.145 15.544 L 7.484 13.823 L 7.789 13.86 C 8.02 13.89 8.245 13.908 8.468 13.908 C 8.709 13.908 8.951 13.887 9.199 13.852 L 9.507 13.809 L 10.857 15.544 Z M 11.467 11.073 L 11.762 11.526 L 9.891 12.743 L 9.228 11.722 C 8.986 11.781 8.732 11.815 8.468 11.815 C 6.64 11.815 5.159 10.334 5.159 8.508 C 5.159 6.68 6.64 5.199 8.468 5.199 C 10.294 5.199 11.775 6.68 11.775 8.508 C 11.775 9.258 11.523 9.954 11.1 10.509 L 11.467 11.073 M 10.209 11.248 L 10.267 11.21 L 9.734 10.39 L 10.043 10.081 C 10.447 9.676 10.695 9.123 10.695 8.508 C 10.692 7.278 9.696 6.282 8.468 6.28 C 7.236 6.282 6.241 7.277 6.239 8.508 C 6.241 9.737 7.237 10.733 8.468 10.735 C 8.743 10.735 9.007 10.679 9.263 10.581 L 9.672 10.424 L 10.209 11.248 Z"},{href:"#o-38",d:"M 15.919 12.023 C 16.206 11.444 16.429 10.828 16.576 10.183 C 17.148 7.985 16.976 6.069 16.976 6.069 L 16.779 7.332 C 16.779 7.332 16.498 4.993 16.153 4.119 C 15.624 2.78 15.389 2.79 15.388 2.792 C 15.713 3.62 15.685 4.094 15.678 4.165 C 15.672 4.156 15.667 4.146 15.662 4.137 C 15.583 3.943 15.183 3.045 14.326 2.41 C 12.825 0.921 10.759 0.001 8.477 0 C 6.043 0 3.853 1.047 2.332 2.716 C 2.14 2.438 1.984 2.101 1.969 1.728 C 1.969 1.728 1.968 1.729 1.966 1.731 C 1.966 1.724 1.964 1.718 1.964 1.712 C 1.964 1.712 0.998 2.461 1.102 4.481 C 0.923 4.825 0.766 5.184 0.636 5.556 C 0.411 6.046 0.185 6.758 0 7.804 C 0 7.804 0.08 7.551 0.239 7.211 C 0.201 7.5 0.178 7.794 0.17 8.091 C 0.116 8.599 0.099 9.211 0.146 9.945 C 0.146 9.945 0.166 9.701 0.228 9.332 C 0.729 13.446 4.23 16.634 8.477 16.634 C 9.593 16.634 10.659 16.411 11.631 16.012 C 13.841 15.205 15.148 13.66 15.919 12.023 Z M 8.477 0.551 C 9.945 0.551 11.316 0.959 12.487 1.667 C 11.122 1.35 10.426 1.511 10.432 1.519 C 10.44 1.528 12.463 1.872 12.822 2.365 C 12.822 2.365 11.963 2.365 11.107 2.612 C 11.068 2.623 14.254 3.009 14.905 6.192 C 14.905 6.192 14.556 5.464 14.124 5.34 C 14.408 6.204 14.335 7.843 14.064 8.658 C 14.029 8.762 13.993 8.205 13.461 7.965 C 13.632 9.187 13.451 11.127 12.602 11.661 C 12.537 11.703 13.134 9.747 12.723 10.502 C 10.266 14.269 7.345 12.026 6.16 11.227 C 7.111 11.46 8.121 11.292 8.706 10.892 C 9.295 10.489 9.645 10.195 9.959 10.264 C 10.272 10.334 10.481 10.019 10.237 9.74 C 9.994 9.46 9.402 9.077 8.602 9.286 C 8.037 9.434 7.337 10.058 6.269 9.426 C 5.358 8.886 5.365 8.447 5.365 8.168 C 5.365 7.949 5.519 7.64 5.805 7.551 C 6.153 7.588 6.432 7.68 6.728 7.831 C 6.731 7.75 6.731 7.642 6.727 7.519 C 6.751 7.473 6.736 7.333 6.699 7.162 C 6.677 6.989 6.641 6.812 6.585 6.651 C 6.591 6.65 6.595 6.647 6.597 6.638 C 6.643 6.432 7.886 5.712 7.977 5.643 C 8.069 5.574 8.307 5.416 8.281 4.933 C 8.272 4.773 8.246 4.756 6.941 4.761 C 6.391 4.763 6.086 4.224 5.988 4.014 C 6.121 3.275 6.506 2.747 7.139 2.391 C 7.151 2.384 7.148 2.378 7.135 2.374 C 7.266 2.298 5.62 2.371 4.878 3.337 C 4.679 3.365 4.406 3.308 4.101 3.308 C 3.718 3.308 3.417 3.35 3.138 3.421 C 3.108 3.428 3.065 3.427 3.014 3.42 C 2.936 3.362 2.819 3.266 2.693 3.141 C 2.79 3.033 2.888 2.928 2.99 2.826 C 4.395 1.42 6.333 0.552 8.477 0.551 Z"},{href:"#o-39",d:"M 16.532 0.48 C 15.127 -0.785 11.943 0.733 10.187 1.759 C 9.683 1.68 9.155 1.637 8.604 1.637 C 6.385 1.637 4.594 2.289 3.233 3.521 C 1.685 4.938 0.826 6.794 0.826 8.94 C 0.826 8.958 0.827 8.977 0.827 8.995 C 3.005 5.582 6.355 3.833 7.243 3.371 C 7.384 3.305 7.467 3.474 7.337 3.539 C 7.327 3.566 7.327 3.539 7.337 3.539 C 5.843 4.433 3.073 7.024 1.276 10.753 L 1.274 10.748 C 0.136 13.099 -0.825 16.4 1.097 17.612 C 2.553 18.528 5.159 17.448 7.257 16.076 C 7.763 16.148 8.295 16.185 8.857 16.185 C 12.727 16.185 15.442 14.049 16.411 10.934 L 11.095 10.925 C 10.871 12.026 10.125 12.613 8.959 12.613 C 7.494 12.613 6.488 11.811 6.422 9.955 L 16.514 9.945 C 16.532 9.562 16.486 9.293 16.486 8.994 C 16.486 5.514 14.403 2.794 11.015 1.928 C 12.394 1.07 14.974 -0.199 16.216 0.814 C 17.148 1.569 16.636 3.155 16.412 3.808 C 16.374 3.976 16.571 4.004 16.608 3.845 C 17.073 2.672 17.213 1.095 16.532 0.48 Z M 6.773 15.994 C 5.137 16.971 2.881 17.676 1.777 16.848 C 0.954 16.228 1.316 14.55 2.041 12.913 C 2.481 13.57 3.032 14.163 3.68 14.656 C 4.556 15.315 5.585 15.761 6.773 15.994 Z M 6.404 7.624 C 6.431 6.01 7.588 5.311 8.801 5.311 C 10.078 5.311 11.113 6.048 11.113 7.624 L 6.404 7.624 Z"},{href:"#o-40",d:"M 8.5 2.294 C 8.156 2.294 7.817 2.315 7.484 2.355 L 7.459 2.232 C 7.445 2.161 7.418 2.096 7.382 2.038 C 7.643 1.828 7.809 1.507 7.809 1.146 C 7.809 0.513 7.296 0 6.663 0 C 6.03 0 5.517 0.513 5.517 1.146 C 5.517 1.655 5.848 2.086 6.307 2.236 C 6.293 2.308 6.293 2.383 6.307 2.46 L 6.33 2.574 C 2.687 3.534 0 6.85 0 10.795 C 0 15.489 3.806 19.295 8.5 19.295 C 13.194 19.295 17 15.489 17 10.795 C 17 6.1 13.194 2.294 8.5 2.294 Z M 8.647 4.32 C 11.691 4.32 14.238 6.448 14.88 9.298 L 14.486 9.458 C 14.385 8.993 13.97 8.644 13.475 8.644 C 12.903 8.644 12.439 9.108 12.439 9.68 C 12.439 9.731 12.445 9.781 12.452 9.831 L 10.559 9.812 C 10.522 9.733 10.481 9.657 10.434 9.584 L 12.756 6.093 L 12.794 6.036 L 9.538 8.81 C 9.297 8.702 9.032 8.64 8.754 8.635 L 8.812 8.622 L 8.008 6.856 C 8.445 6.735 8.767 6.335 8.767 5.86 C 8.767 5.288 8.304 4.824 7.732 4.824 C 7.68 4.824 7.631 4.829 7.582 4.837 L 7.622 4.404 C 7.956 4.348 8.298 4.32 8.647 4.32 Z M 5.762 1.146 C 5.762 0.649 6.166 0.246 6.662 0.246 C 7.159 0.246 7.563 0.649 7.563 1.146 C 7.563 1.437 7.424 1.694 7.21 1.859 C 7.085 1.775 6.928 1.738 6.768 1.77 C 6.614 1.801 6.486 1.889 6.403 2.008 C 6.032 1.896 5.762 1.552 5.762 1.146 Z M 2.258 10.709 C 2.258 7.673 4.374 5.132 7.212 4.481 L 7.415 4.872 C 6.998 5.006 6.697 5.397 6.697 5.857 C 6.697 6.429 7.16 6.893 7.732 6.893 C 7.779 6.893 7.824 6.889 7.869 6.883 L 7.829 8.827 L 7.865 8.819 C 7.563 8.959 7.302 9.17 7.102 9.431 L 7.166 9.33 L 6.09 8.918 L 6.891 9.765 L 6.909 9.736 C 6.779 9.989 6.7 10.274 6.688 10.576 L 6.686 10.565 L 4.894 11.391 C 4.758 10.978 4.369 10.679 3.911 10.679 C 3.339 10.679 2.875 11.143 2.875 11.715 C 2.875 11.759 2.879 11.803 2.884 11.846 L 2.349 11.794 C 2.289 11.441 2.258 11.079 2.258 10.709 Z M 8.647 17.099 C 5.621 17.099 3.087 14.996 2.426 12.172 L 2.898 11.931 C 2.998 12.4 3.412 12.751 3.91 12.751 C 4.482 12.751 4.945 12.287 4.945 11.715 C 4.945 11.643 4.938 11.574 4.924 11.505 L 6.877 11.526 C 6.908 11.591 6.942 11.654 6.979 11.715 L 4.622 15.32 L 4.777 15.187 L 7.872 12.508 C 8.101 12.613 8.353 12.678 8.619 12.69 L 8.606 12.693 L 9.444 14.488 C 8.996 14.601 8.663 15.007 8.663 15.491 C 8.663 16.062 9.127 16.526 9.699 16.526 C 9.751 16.526 9.802 16.521 9.853 16.513 L 9.856 16.983 C 9.465 17.059 9.061 17.099 8.647 17.099 Z M 10.214 16.905 L 9.948 16.495 C 10.399 16.383 10.735 15.976 10.735 15.491 C 10.735 14.919 10.27 14.455 9.699 14.455 C 9.654 14.455 9.61 14.458 9.567 14.464 L 9.567 12.51 L 9.55 12.513 C 9.83 12.387 10.076 12.2 10.271 11.968 L 11.307 12.418 L 10.552 11.527 C 10.66 11.298 10.727 11.046 10.742 10.779 L 12.486 9.984 C 12.616 10.406 13.009 10.714 13.474 10.714 C 14.047 10.714 14.51 10.25 14.51 9.678 C 14.51 9.631 14.506 9.584 14.499 9.539 L 14.943 9.621 C 15.004 9.974 15.036 10.337 15.036 10.708 C 15.037 13.697 12.985 16.207 10.214 16.905 Z"}],[{href:"#twitter",d:"M 98.914 17.39 C 95.052 19.107 91.191 20.394 87.329 20.823 C 91.62 18.248 94.623 13.957 96.34 8.809 C 92.478 11.384 88.187 13.1 83.467 13.957 C 79.606 9.667 74.457 7.093 68.879 7.093 C 57.723 7.093 48.713 16.962 48.713 28.975 C 48.713 30.692 48.713 32.408 49.142 33.695 C 32.408 32.837 17.391 24.256 7.522 10.954 C 5.806 13.957 4.948 17.82 4.948 21.681 C 4.948 29.404 8.38 35.84 13.958 39.702 C 10.525 39.702 7.522 38.415 4.948 37.128 L 4.948 37.556 C 4.948 47.855 11.813 56.865 21.252 58.581 C 19.536 59.01 17.82 59.439 16.103 59.439 C 14.816 59.439 13.529 59.439 12.242 59.01 C 14.816 67.591 22.11 74.027 31.121 74.027 C 24.256 80.035 15.674 83.468 5.806 83.468 C 4.089 83.468 2.373 83.468 1.086 83.038 C 10.096 89.045 20.823 92.907 31.979 92.907 C 69.308 92.907 89.474 59.869 89.474 31.12 L 89.474 28.117 C 92.478 25.543 95.911 21.681 98.914 17.39 Z"},{href:"#facebook",d:"M 8.333 0.414 C 3.75 0.414 0 4.149 0 8.713 L 0 91.701 C 0 96.266 3.75 100 8.333 100 L 49.167 100 L 49.167 61.826 L 37.083 61.826 L 37.917 45.228 L 49.583 45.228 L 49.583 33.195 C 49.583 33.195 47.917 17.012 66.25 17.012 C 84.167 17.012 80 17.012 80 17.012 L 80 32.366 C 80 32.366 66.346 32.521 67.083 34.44 L 67.083 45.228 L 82.917 45.228 L 79.167 61.826 L 66.25 61.826 L 66.25 99.586 L 91.667 99.586 C 96.25 99.586 100 95.851 100 91.287 L 100 8.299 C 100 3.734 96.25 0 91.667 0 L 8.333 0.414 L 8.333 0.414 Z"},{href:"#github",d:"M 49.995 0 C 22.385 0 0 22.952 0 51.267 C 0 73.916 14.325 93.13 34.194 99.911 C 36.696 100.38 37.607 98.797 37.607 97.438 C 37.607 96.223 37.564 92.998 37.54 88.721 C 23.631 91.818 20.697 81.847 20.697 81.847 C 18.423 75.927 15.145 74.351 15.145 74.351 C 10.605 71.17 15.489 71.232 15.489 71.232 C 20.507 71.598 23.146 76.516 23.146 76.516 C 27.607 84.35 34.85 82.087 37.699 80.777 C 38.153 77.463 39.442 75.203 40.872 73.923 C 29.77 72.629 18.097 68.229 18.097 48.585 C 18.097 42.99 20.047 38.413 23.245 34.829 C 22.729 33.532 21.013 28.32 23.733 21.262 C 23.733 21.262 27.932 19.883 37.484 26.518 C 41.471 25.381 45.75 24.812 50.002 24.793 C 54.247 24.812 58.525 25.381 62.519 26.518 C 72.065 19.883 76.254 21.262 76.254 21.262 C 78.984 28.32 77.268 33.532 76.751 34.829 C 79.956 38.413 81.892 42.99 81.892 48.585 C 81.892 68.28 70.201 72.613 59.062 73.882 C 60.858 75.465 62.457 78.593 62.457 83.377 C 62.457 90.228 62.396 95.758 62.396 97.438 C 62.396 98.81 63.295 100.406 65.834 99.906 C 85.687 93.111 100 73.91 100 51.267 C 100 22.952 77.611 0 49.995 0"},{href:"#google",d:"M 94.984 51.04 C 94.984 65.02 89.976 76.787 81.295 84.779 C 73.701 91.792 63.312 95.902 50.918 95.902 C 32.975 95.902 17.45 85.615 9.897 70.615 C 6.79 64.418 5.016 57.406 5.016 50 C 5.016 42.589 6.79 35.582 9.897 29.385 C 17.45 14.385 32.975 4.098 50.918 4.098 C 63.291 4.098 73.681 8.647 81.632 16.053 L 68.463 29.216 C 63.71 24.667 57.655 22.351 50.918 22.351 C 38.963 22.351 28.844 30.425 25.233 41.279 C 24.315 44.033 23.795 46.976 23.795 50 C 23.795 53.024 24.315 55.967 25.233 58.722 C 28.844 69.57 38.963 77.644 50.918 77.644 C 57.094 77.644 62.353 76.017 66.464 73.262 C 71.324 70.008 74.558 65.148 75.624 59.41 L 50.918 59.41 L 50.918 41.651 L 94.148 41.651 C 94.694 44.655 94.984 47.787 94.984 51.04 Z"}],[{href:"#register",d:"M 0 100 L 0 0 L 100 0 L 100 100 Z M 50.027 50.366 C 58.647 50.366 65.631 43.384 65.631 34.762 C 65.631 26.142 58.647 19.157 50.027 19.157 C 41.406 19.157 34.422 26.142 34.422 34.762 C 34.422 43.384 41.406 50.366 50.027 50.366 Z M 50.001 59.841 C 40.087 59.841 20.298 64.531 20.298 73.843 L 20.298 80.844 L 79.702 80.844 L 79.702 73.843 C 79.702 64.531 59.913 59.841 50.001 59.841 Z"},{href:"#open",d:"M 88.889 49.999 L 100 49.999 L 100 88.888 C 100 89.03 99.997 89.171 99.992 89.311 L 100 89.311 L 100 100 C 99.987 100 88.902 100 88.889 100 L 11.112 100 C 11.099 100 11.085 100 11.072 100 L 11.072 100 L 0 100 L 0 89.311 L 0.008 89.311 C 0.003 89.171 0 89.03 0 88.888 L 0 11.111 C 0 10.97 0.003 10.829 0.008 10.689 L 0 10.689 L 0 0 C 0.013 0 11.099 0 11.112 0 L 50.001 0 L 50.001 11.111 L 11.112 11.111 L 11.112 88.888 L 88.889 88.888 Z M 100 38.889 L 88.889 38.889 L 88.889 18.944 L 34.279 73.555 L 26.445 65.721 L 81.056 11.111 L 61.111 11.111 L 61.111 0 L 100 0 Z"},{href:"#cloud",d:"M 80.412 41.89 C 77.547 27.365 64.806 16.894 50 16.898 C 38.042 16.898 27.656 23.684 22.484 33.615 C 9.889 34.976 0.345 45.609 0.347 58.276 C 0.347 71.973 11.477 83.103 25.173 83.103 L 78.964 83.103 C 90.385 83.103 99.653 73.834 99.653 62.414 C 99.653 51.49 91.171 42.635 80.412 41.89 Z M 78.964 73.787 L 25.173 74.11 C 16.028 74.11 9.749 67.34 9.749 58.195 C 9.749 49.051 16.502 42.585 25.647 42.585 L 28.585 42.585 C 31.36 32.795 39.945 25.922 50.121 25.919 C 62.7 25.919 71.887 36.209 71.887 48.788 L 71.887 50.856 L 78.093 50.856 C 84.962 50.856 90.605 55.545 90.605 62.414 C 90.605 69.282 85.833 73.787 78.964 73.787 Z"},{href:"#auth",d:"M 52.939 40.957 C 49.122 30.121 38.883 22.871 27.392 22.872 C 12.427 22.872 0.265 35.034 0.265 50 C 0.265 64.966 12.427 77.129 27.392 77.129 C 38.883 77.129 49.122 69.88 52.939 59.043 L 72.608 59.043 L 72.608 77.129 L 90.693 77.129 L 90.693 59.043 L 99.735 59.043 L 99.735 40.957 L 52.939 40.957 Z M 27.392 59.043 C 22.419 59.043 18.35 54.974 18.35 50 C 18.35 45.026 22.419 40.957 27.392 40.957 C 32.366 40.957 36.435 45.026 36.435 50 C 36.435 54.974 32.366 59.043 27.392 59.043 Z"}],[{href:"#reverse",d:"M 22.693 44.55 L 0.945 66.352 L 22.693 88.153 L 22.693 71.802 L 60.901 71.802 L 60.901 60.901 L 22.693 60.901 L 22.693 44.55 Z M 99.055 33.649 L 77.307 11.847 L 77.307 28.199 L 39.099 28.199 L 39.099 39.099 L 77.307 39.099 L 77.307 55.451 L 99.055 33.649 Z"},{href:"#boolop-unite",d:"M 0 67.2 L 0 0 L 67.2 0 L 67.2 32.8 L 100 32.8 L 100 100 L 32.8 100 L 32.8 67.2 Z"},{href:"#arrow",d:"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z"},{href:"#plus",d:"M 60.82 60.82 C 60.82 60.82 97.29 61.07 97.29 61.07 C 98.59 61.07 99.88 59.78 99.87 58.48 C 99.87 58.48 99.75 42.85 99.75 42.85 C 99.74 41.55 98.43 40.24 97.13 40.23 C 97.13 40.23 60.66 39.98 60.66 39.98 C 60.66 39.98 60.38 2.87 60.38 2.87 C 60.37 1.56 59.05 0.25 57.75 0.24 C 57.75 0.24 42.13 0.14 42.13 0.14 C 40.82 0.13 39.53 1.42 39.54 2.73 C 39.54 2.73 39.83 39.84 39.83 39.84 C 39.83 39.84 2.71 39.59 2.71 39.59 C 1.41 39.58 0.12 40.87 0.13 42.17 C 0.13 42.17 0.25 57.8 0.25 57.8 C 0.26 59.1 1.57 60.41 2.87 60.42 C 2.87 60.42 39.34 60.67 39.34 60.67 C 39.34 60.67 39.62 97.13 39.62 97.13 C 39.63 98.43 40.94 99.75 42.24 99.76 C 42.24 99.76 57.87 99.86 57.87 99.86 C 59.17 99.87 60.46 98.58 60.45 97.27 C 60.45 97.27 60.82 60.82 60.82 60.82 Z"}],[{href:"#blog",d:"M 0 79.2846 L 0 100 L 20.7154 100 L 81.8031 38.9081 L 61.0919 18.1969 L 0 79.2846 Z M 97.8208 22.8904 C 99.9764 20.7411 99.9764 17.2513 97.8208 15.102 L 84.898 2.1792 C 82.7487 0.0236 79.2589 0.0236 77.1096 2.1792 L 67.0016 12.2851 L 87.7149 32.9984 L 97.8208 22.8904 Z"},{href:"#tutorials",d:"M 90.769 9.231 L 9.231 9.231 C 4.202 9.231 0.171 13.262 0.171 18.29 L 0.171 72.65 C 0.171 77.655 4.225 81.71 9.231 81.71 L 31.88 81.71 L 31.88 90.769 L 68.12 90.769 L 68.12 81.71 L 90.769 81.71 C 95.752 81.71 99.784 77.633 99.784 72.65 L 99.829 18.29 C 99.829 13.285 95.775 9.231 90.769 9.231 Z M 90.769 72.65 L 9.231 72.65 L 9.231 18.29 L 90.769 18.29 L 90.769 72.65 Z M 68.12 45.47 L 36.41 63.59 L 36.41 27.35 Z"},{href:"#home",d:"M 39.8886 92 L 39.8886 61.7068 L 60.0841 61.7068 L 60.0841 92 L 84.3186 92 L 84.3186 51.609 L 99.4652 51.609 L 49.9863 7.179 L 0.5074 51.609 L 15.654 51.609 L 15.654 92 Z"},{href:"#bugs",d:"M 93.284 28.359 L 78.081 28.359 C 75.64 24.126 72.274 20.5 68.234 17.754 L 77.052 8.936 L 69.424 1.306 L 57.683 13.047 C 55.194 12.452 52.651 12.127 50.001 12.127 C 47.35 12.127 44.808 12.452 42.373 13.047 L 30.578 1.306 L 22.949 8.936 L 31.714 17.754 C 27.709 20.513 24.355 24.138 21.92 28.359 L 6.717 28.359 L 6.717 39.179 L 18.025 39.179 C 17.755 40.965 17.539 42.75 17.539 44.589 L 17.539 50 L 6.717 50 L 6.717 60.82 L 17.539 60.82 L 17.539 66.231 C 17.539 68.071 17.755 69.856 18.025 71.641 L 6.717 71.641 L 6.717 82.461 L 21.92 82.461 C 27.548 92.146 37.99 98.694 50.001 98.694 C 62.012 98.694 72.454 92.146 78.081 82.461 L 93.284 82.461 L 93.284 71.641 L 81.976 71.641 C 82.246 69.856 82.462 68.071 82.462 66.231 L 82.462 60.82 L 93.284 60.82 L 93.284 50 L 82.462 50 L 82.462 44.589 C 82.462 42.75 82.246 40.965 81.976 39.179 L 93.284 39.179 L 93.284 28.359 Z M 60.821 71.641 L 39.18 71.641 L 39.18 60.82 L 60.821 60.82 L 60.821 71.641 Z M 60.821 50 L 39.18 50 L 39.18 39.179 L 60.821 39.179 L 60.821 50 Z"}],[{href:"#ideas",d:"M 35.1175 94.6475 C 35.1175 97.3755 37.3505 99.6075 40.0795 99.6075 L 59.9215 99.6075 C 62.6505 99.6075 64.8835 97.3755 64.8835 94.6475 L 64.8835 89.6875 L 35.1175 89.6875 L 35.1175 94.6475 Z M 50.0005 0.3925 C 30.8525 0.3925 15.2755 15.9695 15.2755 35.1175 C 15.2755 46.9255 21.1785 57.2925 30.1565 63.5935 L 30.1565 74.8045 C 30.1565 77.5325 32.3895 79.7645 35.1175 79.7645 L 64.8835 79.7645 C 67.6115 79.7645 69.8435 77.5325 69.8435 74.8045 L 69.8435 63.5935 C 78.8225 57.2925 84.7245 46.9255 84.7245 35.1175 C 84.7245 15.9695 69.1495 0.3925 50.0005 0.3925 Z M 64.1375 55.4575 L 59.9215 58.4345 L 59.9215 69.8435 L 40.0795 69.8435 L 40.0795 58.4345 L 35.8625 55.4575 C 29.1925 50.8325 25.2075 43.2345 25.1965 35.1175 C 25.1965 21.4275 36.3085 10.3135 50.0005 10.3135 C 63.6925 10.3135 74.8045 21.4275 74.8045 35.1175 C 74.8045 43.2045 70.8365 50.7935 64.1375 55.4575 Z"},{href:"#questions",d:"M 91.2875 22.4755 L 82.1125 22.4755 L 82.1125 63.7625 L 22.4755 63.7625 L 22.4755 72.9375 C 22.4755 75.4605 24.5395 77.5245 27.0625 77.5245 L 77.5245 77.5245 L 95.8745 95.8745 L 95.8745 27.0625 C 95.8745 24.5395 93.8105 22.4755 91.2875 22.4755 Z M 72.9375 49.9995 L 72.9375 8.7125 C 72.9375 6.1895 70.8725 4.1255 68.3495 4.1255 L 8.7125 4.1255 C 6.1895 4.1255 4.1255 6.1895 4.1255 8.7125 L 4.1255 72.9375 L 22.4755 54.5875 L 68.3495 54.5875 C 70.8725 54.5875 72.9375 52.5225 72.9375 49.9995 Z"},{href:"#logo-js",d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 59.538 82.561 C 62.296 88.013 67.935 92.171 76.661 92.171 C 85.586 92.171 92.232 87.536 92.232 79.076 C 92.232 71.229 87.724 67.738 79.741 64.314 L 77.391 63.308 C 73.36 61.562 71.613 60.42 71.613 57.602 C 71.613 55.32 73.359 53.575 76.111 53.575 C 78.809 53.575 80.547 54.713 82.158 57.602 L 89.475 52.903 C 86.38 47.459 82.084 45.38 76.111 45.38 C 67.719 45.38 62.35 50.745 62.35 57.792 C 62.35 65.443 66.854 69.061 73.635 71.95 L 75.983 72.959 C 80.268 74.834 82.824 75.974 82.824 79.197 C 82.824 81.886 80.337 83.831 76.443 83.831 C 71.809 83.831 69.189 81.414 67.175 78.125 Z M 26.33 83.571 C 28.547 88.259 32.904 92.152 40.427 92.152 C 48.754 92.152 54.459 87.724 54.459 77.994 L 54.459 45.917 L 45.062 45.917 L 45.062 77.868 C 45.062 82.565 43.114 83.772 40.026 83.772 C 36.798 83.772 35.456 81.558 33.979 78.94 Z"},{href:"#logo-html",d:"M 13.974 89.934 L 5.958 0 L 94.041 0 L 86.018 89.934 L 49.947 99.931 L 13.974 89.934 Z M 35.405 40.73 L 34.4 29.436 L 50 29.436 L 50 29.402 L 76.602 29.402 L 76.822 26.927 L 77.323 21.334 L 77.588 18.374 L 49.966 18.374 L 49.966 18.408 L 22.352 18.408 L 22.616 21.369 L 25.329 51.758 L 63.539 51.758 L 62.262 66.062 L 49.966 69.384 L 49.966 69.416 L 49.955 69.419 L 37.678 66.107 L 36.894 57.316 L 25.812 57.316 L 27.355 74.633 L 49.937 80.903 L 49.966 80.852 L 72.566 74.589 L 72.734 72.722 L 75.325 43.689 L 75.598 40.73 L 35.405 40.73 Z"}]],y="",b=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.selectOtherShape=function(e,t){window.stage.shape.plugin(t.d),console.log(e)},i.tool=function(e){var t,n,r,a,o,s,l,u,c,d,h;switch(e.value){case"Select":null===(t=i.state.stage)||void 0===t||t.tool(i.state.stage.tools().SELECT);break;case"Pan":null===(n=i.state.stage)||void 0===n||n.tool(i.state.stage.tools().PAN);break;case"Spline":null===(r=i.state.stage)||void 0===r||r.tool(i.state.stage.tools().SPLINE);break;case"Freehand":null===(a=i.state.stage)||void 0===a||a.tool(i.state.stage.tools().FREEHAND);break;case"Rectangle":null===(o=i.state.stage)||void 0===o||o.tool(i.state.stage.tools().RECT);break;case"Ellipse":null===(s=i.state.stage)||void 0===s||s.tool(i.state.stage.tools().ELLIPSE);break;case"Triangle":null===(l=i.state.stage)||void 0===l||l.tool(i.state.stage.tools().TRIANGLE);break;case"Line":null===(u=i.state.stage)||void 0===u||u.tool(i.state.stage.tools().LINE);break;case"OtherShape":y===e.value&&i.setState({toggleOtherShape:!i.state.toggleOtherShape}),null===(c=i.state.stage)||void 0===c||c.tool(i.state.stage.tools().OTHER_SHAPE);break;case"Text":null===(d=i.state.stage)||void 0===d||d.tool(i.state.stage.tools().TEXT);break;case"View":null===(h=i.state.stage)||void 0===h||h.tool(i.state.stage.tools().VIEW)}y=e.value},i.keydown=function(e){var t,n,r,a,o,s,l,u,c,d,h,p,f,m,v,g,y,b;e.preventDefault();var x,w,_,M,S=e.ctrlKey,E=e.shiftKey;switch(e.code){case"Delete":case"Backspace":null===(t=i.state.stage)||void 0===t||null===(n=t.select)||void 0===n||n.nodesRemove();break;case"KeyV":case"Escape":null===(r=i.state.stage)||void 0===r||r.tool(i.state.stage.tools().SELECT);break;case"Space":null===(a=i.state.stage)||void 0===a||a.tool(i.state.stage.tools().PAN);break;case"KeyT":null===(o=i.state.stage)||void 0===o||o.tool(i.state.stage.tools().TEXT);break;case"KeyM":null===(s=i.state.stage)||void 0===s||s.tool(i.state.stage.tools().RECT);break;case"KeyL":null===(l=i.state.stage)||void 0===l||l.tool(i.state.stage.tools().ELLIPSE);break;case"Backslash":null===(u=i.state.stage)||void 0===u||u.tool(i.state.stage.tools().LINE);break;case"ArrowUp":null===(c=i.state.stage)||void 0===c||c.nodeMove("up",1);break;case"ArrowDown":null===(d=i.state.stage)||void 0===d||d.nodeMove("down",1);break;case"ArrowLeft":null===(h=i.state.stage)||void 0===h||h.nodeMove("left",1);break;case"ArrowRight":null===(p=i.state.stage)||void 0===p||p.nodeMove("right",1)}(S&&"c"===e.key.toLowerCase()&&(null===(f=i.state.stage)||void 0===f||null===(m=f.clipboard)||void 0===m||m.copy()),S&&"x"===e.key.toLowerCase()&&(null===(v=i.state.stage)||void 0===v||null===(g=v.clipboard)||void 0===g||g.cut()),S&&"v"===e.key.toLowerCase()&&(null===(y=i.state.stage)||void 0===y||null===(b=y.clipboard)||void 0===b||b.paste()),S&&"z"===e.key.toLocaleLowerCase())&&(E?null===(x=i.state.stage)||void 0===x||null===(w=x.history)||void 0===w||w.redo():null===(_=i.state.stage)||void 0===_||null===(M=_.history)||void 0===M||M.undo())},i.keyup=function(){var e,t,n;(null===(e=i.state.stage)||void 0===e?void 0:e.currentType)===(null===(t=i.state.stage)||void 0===t?void 0:t.tools().PAN)&&(null===(n=i.state.stage)||void 0===n||n.tool(f))},i.init=function(){var e,t,n,r;null===(e=i.state.stage)||void 0===e||e.watch(i.state.stage.actions().TOOL,(function(e){var t,n;e!==(null===(t=i.state.stage)||void 0===t?void 0:t.tools().PAN)&&(f=e),"OtherShape"===y&&e!==(null===(n=i.state.stage)||void 0===n?void 0:n.tools().OTHER_SHAPE)&&i.setState({toggleOtherShape:!1});var r=document.querySelector("#toolbar"),a=null===r||void 0===r?void 0:r.querySelector("x-buttons");null===a||void 0===a||a.childNodes.forEach((function(t){var n,r,a,o,s,l,u,c,d,h,p;t.removeAttribute("toggled"),e===(null===(n=i.state.stage)||void 0===n?void 0:n.tools().SELECT)?"Select"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(r=i.state.stage)||void 0===r?void 0:r.tools().PAN)?"Pan"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(a=i.state.stage)||void 0===a?void 0:a.tools().SPLINE)?"Spline"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(o=i.state.stage)||void 0===o?void 0:o.tools().FREEHAND)?"Freehand"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(s=i.state.stage)||void 0===s?void 0:s.tools().RECT)?"Rectangle"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(l=i.state.stage)||void 0===l?void 0:l.tools().ELLIPSE)?"Ellipse"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(u=i.state.stage)||void 0===u?void 0:u.tools().TRIANGLE)?"Triangle"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(c=i.state.stage)||void 0===c?void 0:c.tools().LINE)?"Line"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(d=i.state.stage)||void 0===d?void 0:d.tools().OTHER_SHAPE)?"OtherShape"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(h=i.state.stage)||void 0===h?void 0:h.tools().TEXT)?"Text"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(p=i.state.stage)||void 0===p?void 0:p.tools().VIEW)&&"View"===t.textContent&&t.toggleAttribute("toggled")}))})),null===(t=i.state.stage)||void 0===t||t.watch(null===(n=i.state.stage)||void 0===n?void 0:n.actions().TEXT,(function(e,t){var n;"quit"===t&&(null===(n=i.state.stage)||void 0===n||n.tool(i.state.stage.tools().SELECT))})),null===(r=i.state.stage)||void 0===r||r.tool(i.state.stage.tools().SELECT)},i.chooseOtherShape=function(){var e=document.querySelector(".other-shape"),t=null===e||void 0===e?void 0:e.querySelectorAll("x-button");null===t||void 0===t||t.forEach((function(e){e.onclick=function(){t.forEach((function(e){e.removeAttribute("toggled")})),e.toggleAttribute("toggled");var n=document.querySelector("#buttons");null===n||void 0===n||n.childNodes.forEach((function(t){if("OtherShape"===t.textContent){var n=e.childNodes[0].getAttribute("href")||"";t.childNodes[0].setAttribute("href",n)}}))}}))},i.render=function(){return(0,m.jsxs)("div",{id:"toolbar",className:"flex",children:[(0,m.jsx)("x-buttons",{id:"buttons",vertical:"",children:v.map((function(e,t){return(0,m.jsxs)("x-button",{skin:"dock",value:e.value,onClick:function(){return i.tool(e)},children:[(0,m.jsx)("x-icon",{href:e.href}),"OtherShape"===e.value&&(0,m.jsx)("x-icon",{href:"#arrow-expand",class:"modal-icon"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:e.value})})]},t)}))}),(0,m.jsxs)("div",{style:{transform:i.state.toggleOtherShape?"translateX(10px)":"translateX(-281px)"},className:"other-shape",children:[(0,m.jsx)("header",{children:(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"Other Shape"})})}),(0,m.jsx)("main",{children:(0,m.jsxs)("section",{style:{padding:"12px 14px"},children:[(0,m.jsx)("h3",{children:(0,m.jsx)("x-message",{children:"Drawing"})}),(0,m.jsx)("h4",{children:(0,m.jsx)("x-message",{children:"Type"})}),g.map((function(e){return(0,m.jsx)("x-buttons",{style:{marginTop:"-1px"},children:e.map((function(e){return(0,m.jsx)("x-button",{onClick:function(t){return i.selectOtherShape(t,e)},children:(0,m.jsx)("x-icon",{href:e.href})})}))})}))]})})]})]})},i.state={stage:void 0,toggleOtherShape:!1},i}return s(n,[{key:"componentDidMount",value:function(){this.setState({stage:window.stage}),document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup),this.chooseOtherShape()}},{key:"componentDidUpdate",value:function(e,t,n){t.stage||this.init()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("keyup",this.keyup)}}]),n}(e.Component),x=b;function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:M(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function p(){}function f(){}function m(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==t&&n.call(y,o)&&(v=y);var b=m.prototype=p.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function a(r,o,s,l){var u=d(e[r],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,s,l)}),(function(e){a("throw",e,s,l)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return a("throw",e,s,l)}))}l(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function M(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=u(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(_.prototype),u(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function _(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){_(a,r,i,o,s,"next",e)}function s(e){_(a,r,i,o,s,"throw",e)}o(void 0)}))}}var S,E=!0,C=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.openSvg=M(w().mark((function e(){var t,n,r,i,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.stage,n={types:[{description:"svg",accept:{"svg/*":[".svg"]}}],excludeAcceptAllOption:!0,multiple:!1},e.next=4,window.showOpenFilePicker(n);case 4:return r=e.sent,e.next=7,r[0].getFile();case 7:i=e.sent,(a=new FileReader).readAsText(i),a.onload=function(e){var n=document.querySelector("#board"),r=(null===n||void 0===n?void 0:n.getBoundingClientRect()).height,i=(new DOMParser).parseFromString(e.target.result,"text/html").querySelector("svg"),a=null===i||void 0===i?void 0:i.viewBox.baseVal,o=a.width,s=a.height;t.svgRoot.innerHTML=null===i||void 0===i?void 0:i.innerHTML,t.setViewSize(o,s),t.setBoardSize(Number(r-40)/s,20,20)};case 11:case"end":return e.stop()}}),e)}))),i.saveSvg=M(w().mark((function e(){var t,n,r,i,a,o,s,l,u,c;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.stage,n={types:[{description:"Svg file",accept:{"svg/image":[".svg"]}}]},e.next=4,window.showSaveFilePicker(n);case 4:return r=e.sent,e.next=7,r.createWritable();case 7:return i=e.sent,a=document.querySelector("#background-outlines rect"),o=Number(null===a||void 0===a?void 0:a.getAttribute("x")),s=Number(null===a||void 0===a?void 0:a.getAttribute("y")),l=Number(null===a||void 0===a?void 0:a.getAttribute("width")),u=Number(null===a||void 0===a?void 0:a.getAttribute("height")),c='<svg\n    viewBox="'.concat(o," ").concat(s," ").concat(l," ").concat(u,'"\n    width="').concat(l,'"\n    height="').concat(u,'"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n  >').concat(t.svgRoot.innerHTML,"</svg>"),e.next=16,i.write(c);case 16:return e.next=18,i.close();case 18:case"end":return e.stop()}}),e)}))),i.toggleSmartGuides=function(){var e,t=document.querySelector("#smart");null===t||void 0===t||t.toggleAttribute("toggled"),null===(e=window.stage.select)||void 0===e||e.toggleSmartGuides(E=!E)},i.toggleMaunalGuides=function(){var e=document.querySelector("#maunal");null===e||void 0===e||e.toggleAttribute("toggled");var t=document.querySelector("#lux-rulers");"none"===t.style.display?t.style.display="block":t.style.display="none"},i.action=function(e){var t,n,r,a,o,s=window.stage;switch(e){case"open":i.openSvg();break;case"save":i.saveSvg();break;case"smart":i.toggleSmartGuides();break;case"maunal":i.toggleMaunalGuides();break;case"undo":null===(t=s.history)||void 0===t||t.undo();break;case"redo":null===(n=s.history)||void 0===n||n.redo();break;case"cut":null===(r=s.clipboard)||void 0===r||r.cut();break;case"copy":null===(a=s.clipboard)||void 0===a||a.copy();break;case"paste":null===(o=s.clipboard)||void 0===o||o.paste()}},i.state={stage:void 0},i}return s(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return(0,m.jsx)("header",{id:"header",children:(0,m.jsxs)("x-menubar",{children:[(0,m.jsxs)("x-menuitem",{children:[(0,m.jsx)("x-label",{children:"File"}),(0,m.jsxs)("x-menu",{children:[(0,m.jsx)("x-menuitem",{onClick:function(){return e.action("open")},children:(0,m.jsx)("x-label",{children:"Open"})}),(0,m.jsx)("hr",{}),(0,m.jsx)("x-menuitem",{onClick:function(){return e.action("save")},children:(0,m.jsx)("x-label",{children:"Save As.."})})]})]}),(0,m.jsxs)("x-menuitem",{children:[(0,m.jsx)("x-label",{children:"Edit"}),(0,m.jsxs)("x-menu",{children:[(0,m.jsxs)("x-menuitem",{onClick:function(){return e.action("undo")},children:[(0,m.jsx)("x-label",{children:"Undo"}),(0,m.jsx)("x-shortcut",{value:"Control+Z"})]}),(0,m.jsxs)("x-menuitem",{onClick:function(){return e.action("redo")},children:[(0,m.jsx)("x-label",{children:"Redo"}),(0,m.jsx)("x-shortcut",{value:"Control+Shift+Z"})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("x-menuitem",{onClick:function(){return e.action("cut")},children:[(0,m.jsx)("x-label",{children:"Cut"}),(0,m.jsx)("x-shortcut",{value:"Control+X"})]}),(0,m.jsxs)("x-menuitem",{onClick:function(){return e.action("copy")},children:[(0,m.jsx)("x-label",{children:"Copy"}),(0,m.jsx)("x-shortcut",{value:"Control+C"})]}),(0,m.jsxs)("x-menuitem",{onClick:function(){return e.action("paste")},children:[(0,m.jsx)("x-label",{children:"Paste"}),(0,m.jsx)("x-shortcut",{value:"Control+V"})]})]})]}),(0,m.jsxs)("x-menuitem",{children:[(0,m.jsx)("x-label",{children:"View"}),(0,m.jsxs)("x-menu",{children:[(0,m.jsx)("x-menuitem",{id:"maunal",onClick:function(){return e.action("maunal")},toggled:"true",children:(0,m.jsx)("x-label",{children:"Maunal Guides"})}),(0,m.jsx)("x-menuitem",{id:"smart",onClick:function(){return e.action("smart")},toggled:"true",children:(0,m.jsx)("x-label",{children:"Smart Guides"})})]})]}),(0,m.jsxs)("x-menuitem",{children:[(0,m.jsx)("x-label",{children:"Help"}),(0,m.jsx)("x-menu",{children:(0,m.jsx)("x-menuitem",{children:(0,m.jsx)("x-label",{children:"wechat:13696977423"})})})]})]})})}}]),n}(e.Component),T=C,L=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).colorChange=function(t){e.chageAttribute("fill",t.target.value)},e.opacitySliderChange=function(t){e.chageAttribute("opacity",t.target.value);var n=document.querySelector("#opacity-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.opacityInputChange=function(t){e.chageAttribute("opacity",t.target.value);var n=document.querySelector("#opacity-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.chageAttribute=function(e,t){var n,r,i,a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().EDIT,e),null===(r=a.select)||void 0===r||r.get().forEach((function(n){for(var r=n.node,i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),a=i.currentNode;a;)"g"!==a.localName&&a.setAttribute(e,t),a=i.nextNode()})),null===(i=a.history)||void 0===i||i.end()},e.watch=function(){var e,t=window.stage,n=document.querySelector("#opacity-slider"),r=document.querySelector("#opacity-input");0===(null===(e=t.select)||void 0===e?void 0:e.size())?(null===n||void 0===n||n.setAttribute("disabled",""),null===r||void 0===r||r.setAttribute("disabled","")):(null===n||void 0===n||n.removeAttribute("disabled"),null===r||void 0===r||r.removeAttribute("disabled"));try{var i;null===(i=t.select)||void 0===i||i.get().forEach((function(e){for(var t=e.node,n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=n.currentNode;r;){if("g"!==r.localName){var i=document.querySelector("#rect-picker"),a=document.querySelector("#opacity-slider"),o=document.querySelector("#opacity-input"),s=window.getComputedStyle(t).fill,l=window.getComputedStyle(t).opacity;throw null===i||void 0===i||i.setAttribute("value",s),null===a||void 0===a||a.setAttribute("value",l),null===o||void 0===o||o.setAttribute("value",l),new Error("ok color")}r=n.nextNode()}}))}catch(a){}},e.getAttrFirst=function(t,n){var r;if(t.hasAttribute(n)&&"g"!==t.nodeName&&(r=t.getAttribute(n)),t.children.length)for(var i=0;i<t.children.length;i++)if(t.children[i].hasAttribute(n)&&"g"!==t.children[i].nodeName)r=t.children[i].getAttribute(n);else{var a=e.getAttrFirst(t.children[i],n);a&&(r=a)}return r},e.init=function(){var t=document.querySelector("#rect-picker");null===t||void 0===t||t.addEventListener("changeend",e.colorChange);var n=document.querySelector("#opacity-slider");null===n||void 0===n||n.addEventListener("changeend",e.opacitySliderChange);var r=document.querySelector("#opacity-input");null===r||void 0===r||r.addEventListener("change",e.opacityInputChange),null===r||void 0===r||r.addEventListener("keydown",(function(e){e.stopPropagation()}));var i=window.stage;i.watch(i.actions().SELECTED,e.watch)},e.render=function(){return(0,m.jsxs)("div",{id:"fill",children:[(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{href:"#fill",children:"Fill"})}),(0,m.jsxs)("section",{id:"paint-section",children:[(0,m.jsx)("h3",{id:"section-heading",children:(0,m.jsx)("x-message",{href:"#paint",children:"Paint"})}),(0,m.jsx)("x-rectcolorpicker",{id:"rect-picker",value:"#bada55",alphaslider:""})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{id:"opacity-section",children:[(0,m.jsx)("h3",{id:"opacity-section-heading",children:(0,m.jsx)("x-message",{children:"Opacity"})}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("x-slider",{id:"opacity-slider",value:"0",min:"0",max:"1",step:"0.01",disabled:""}),(0,m.jsx)("x-numberinput",{id:"opacity-input",value:"0",min:"0",max:"1",step:"0.01",condensed:"",role:"input",tabindex:"0",disabled:"",children:(0,m.jsx)("x-stepper",{})})]})]})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),A=L,P=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).colorChange=function(t){e.chageAttribute("stroke",t.target.value)},e.opacitySliderChange=function(t){e.chageAttribute("stroke-opacity",t.target.value);var n=document.querySelector("#opacity-width-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.opacityInputChange=function(t){e.chageAttribute("stroke-opacity",t.target.value);var n=document.querySelector("#opacity-width-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.strokeWidthSliderChange=function(t){e.chageAttribute("stroke-width",t.target.value);var n=document.querySelector("#stroke-width-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.strokeWidthInputChange=function(t){e.chageAttribute("stroke-width",t.target.value);var n=document.querySelector("#stroke-width-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.chageAttribute=function(e,t){var n,r,i,a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().EDIT,e),null===(r=a.select)||void 0===r||r.get().forEach((function(n){for(var r=n.node,i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),a=i.currentNode;a;)"g"!==a.localName&&a.setAttribute(e,t),a=i.nextNode()})),null===(i=a.history)||void 0===i||i.end()},e.watch=function(){var e,t=window.stage,n=document.querySelector("#opacity-width-slider"),r=document.querySelector("#opacity-width-input"),i=document.querySelector("#stroke-width-input"),a=document.querySelector("#stroke-width-slider");0===(null===(e=t.select)||void 0===e?void 0:e.size())?(null===n||void 0===n||n.setAttribute("disabled",""),null===r||void 0===r||r.setAttribute("disabled",""),null===i||void 0===i||i.setAttribute("disabled",""),null===a||void 0===a||a.setAttribute("disabled","")):(null===n||void 0===n||n.removeAttribute("disabled"),null===r||void 0===r||r.removeAttribute("disabled"),null===i||void 0===i||i.removeAttribute("disabled"),null===a||void 0===a||a.removeAttribute("disabled"));try{var o;null===(o=t.select)||void 0===o||o.get().forEach((function(e){for(var t=e.node,n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=n.currentNode;r;){if("g"!==r.localName){var i=document.querySelector("#rect-stroke-picker"),a=document.querySelector("#opacity-width-slider"),o=document.querySelector("#opacity-width-input"),s=document.querySelector("#stroke-width-input"),l=document.querySelector("#stroke-width-slider"),u=window.getComputedStyle(t).stroke,c=window.getComputedStyle(t).strokeOpacity,d=parseFloat(window.getComputedStyle(t).strokeWidth);throw null===i||void 0===i||i.setAttribute("value",u),null===a||void 0===a||a.setAttribute("value",c),null===o||void 0===o||o.setAttribute("value",c),null===s||void 0===s||s.setAttribute("value",d.toString()),null===l||void 0===l||l.setAttribute("value",d.toString()),new Error("ok color")}r=n.nextNode()}}))}catch(s){}},e.getAttrFirst=function(t,n){var r;if(t.hasAttribute(n)&&"g"!==t.nodeName&&(r=t.getAttribute(n)),t.children.length)for(var i=0;i<t.children.length;i++)if(t.children[i].hasAttribute(n)&&"g"!==t.children[i].nodeName)r=t.children[i].getAttribute(n);else{var a=e.getAttrFirst(t.children[i],n);a&&(r=a)}return r},e.init=function(){var t=document.querySelector("#rect-stroke-picker");null===t||void 0===t||t.addEventListener("changeend",e.colorChange);var n=document.querySelector("#opacity-width-slider");null===n||void 0===n||n.addEventListener("changeend",e.opacitySliderChange);var r=document.querySelector("#opacity-width-input");null===r||void 0===r||r.addEventListener("change",e.opacityInputChange),null===r||void 0===r||r.addEventListener("keydown",(function(e){e.stopPropagation()}));var i=document.querySelector("#stroke-width-slider");null===i||void 0===i||i.addEventListener("changeend",e.strokeWidthSliderChange);var a=document.querySelector("#stroke-width-input");null===a||void 0===a||a.addEventListener("change",e.strokeWidthInputChange),null===a||void 0===a||a.addEventListener("keydown",(function(e){e.stopPropagation()}));var o=window.stage;o.watch(o.actions().SELECTED,e.watch)},e.render=function(){return(0,m.jsxs)("div",{id:"stroke",children:[(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"Stroke"})}),(0,m.jsxs)("section",{id:"paint-section",children:[(0,m.jsx)("h3",{id:"section-heading",children:(0,m.jsx)("x-message",{children:"Paint"})}),(0,m.jsx)("x-rectcolorpicker",{id:"rect-stroke-picker",value:"#bada55",alphaslider:""})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{id:"opacity-width-section",children:[(0,m.jsx)("h3",{id:"opacity-width-section-heading",children:(0,m.jsx)("x-message",{children:"Opacity"})}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("x-slider",{id:"opacity-width-slider",value:"0",min:"0",max:"1",step:"0.01"}),(0,m.jsx)("x-numberinput",{id:"opacity-width-input",value:"0",min:"0",max:"1",step:"0.01",condensed:"",role:"input",tabindex:"0",children:(0,m.jsx)("x-stepper",{})})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{id:"stroke-width-section",children:[(0,m.jsx)("h3",{id:"stroke-width-section-heading",children:(0,m.jsx)("x-message",{children:"Width"})}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("x-slider",{id:"stroke-width-slider",value:"0",min:"0",max:"50",step:"1"}),(0,m.jsx)("x-numberinput",{id:"stroke-width-input",value:"0",min:"0",max:"50",step:"1",condensed:"",role:"input",tabindex:"0",children:(0,m.jsx)("x-stepper",{})})]})]})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),O=P,R=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.changeAttribute=function(e,t){var n,r,i=window.stage,a=e.target,o=a.toggled,s=document.querySelector("#text-anchor-buttons"),l=null===s||void 0===s?void 0:s.querySelectorAll("x-button");null===(n=i.select)||void 0===n||n.checkedsTexts().forEach((function(e){switch(t){case"bold":o?(e.removeAttribute("font-weight"),a.removeAttribute("toggled")):(e.setAttribute("font-weight","700"),a.setAttribute("toggled",""));break;case"italic":o?(e.removeAttribute("font-style"),a.removeAttribute("toggled")):(e.setAttribute("font-style","italic"),a.setAttribute("toggled",""));break;case"start":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","start"),a.setAttribute("toggled","");break;case"middle":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","middle"),a.setAttribute("toggled","");break;case"end":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","end"),a.setAttribute("toggled","")}})),null===(r=i.select)||void 0===r||r.resetFrame(!0)},i.letterChange=function(e){var t,n,r=window.stage,i=document.querySelector("#letter-spacing-slider"),a=document.querySelector("#letter-spacing-input"),o=e.target;null===i||void 0===i||i.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=r.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("letter-spacing",o.value)})),null===(n=r.select)||void 0===n||n.resetFrame(!0)},i.lineChange=function(e){var t,n,r=window.stage,i=document.querySelector("#line-spacing-slider"),a=document.querySelector("#line-spacing-input"),o=e.target;null===i||void 0===i||i.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=r.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.querySelectorAll("tspan").forEach((function(e){e.setAttribute("dy",o.value+"em")}))})),null===(n=r.select)||void 0===n||n.resetFrame(!0)},i.fontSizeChange=function(e){var t,n,r=window.stage,i=document.querySelector("#font-size-slider"),a=document.querySelector("#font-size-input"),o=e.target;null===i||void 0===i||i.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=r.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("font-size",o.value)})),null===(n=r.select)||void 0===n||n.resetFrame(!0)},i.queryLocalFonts=M(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.next=4,window.queryLocalFonts();case 4:e.sent.forEach((function(e){t.includes(e.family)||(t.push(e.family),n.push(e))})),i.setState({fonts:n});case 7:case"end":return e.stop()}}),e)}))),i.fontChange=function(e){var t,n,r=e.detail.newValue,i=window.stage;null===(t=i.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("font-family",r)})),null===(n=i.select)||void 0===n||n.resetFrame(!0)},i.init=function(){var e=document.querySelector("#font-size-slider"),t=document.querySelector("#font-size-input");null===e||void 0===e||e.addEventListener("changeend",i.fontSizeChange),null===t||void 0===t||t.addEventListener("changeend",i.fontSizeChange),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()}));var n=document.querySelector("#letter-spacing-slider"),r=document.querySelector("#letter-spacing-input");null===n||void 0===n||n.addEventListener("changeend",i.letterChange),null===r||void 0===r||r.addEventListener("changeend",i.letterChange),null===r||void 0===r||r.addEventListener("keydown",(function(e){e.stopPropagation()}));var a=document.querySelector("#line-spacing-slider"),o=document.querySelector("#line-spacing-input");null===a||void 0===a||a.addEventListener("changeend",i.lineChange),null===o||void 0===o||o.addEventListener("changeend",i.lineChange),null===o||void 0===o||o.addEventListener("keydown",(function(e){e.stopPropagation()}));var s=document.querySelector("#font-select");null===s||void 0===s||s.addEventListener("change",i.fontChange)},i.watch=function(){var e=window.stage,t=document.querySelector("#bold"),n=document.querySelector("#italic"),r=document.querySelector("#start-text-anchor-button"),i=document.querySelector("#middle-text-anchor-button"),a=document.querySelector("#end-text-anchor-button"),o=document.querySelector("#font-size-slider"),s=document.querySelector("#font-size-input"),l=document.querySelector("#letter-spacing-slider"),u=document.querySelector("#letter-spacing-input"),c=document.querySelector("#line-spacing-slider"),d=document.querySelector("#line-spacing-input"),h=document.querySelector("#font-select");e.watch(e.actions().SELECTED,(function(){var p;null===o||void 0===o||o.setAttribute("value","0"),null===s||void 0===s||s.setAttribute("value","0"),null===l||void 0===l||l.setAttribute("value","0"),null===u||void 0===u||u.setAttribute("value","0"),null===c||void 0===c||c.setAttribute("value","0"),null===d||void 0===d||d.setAttribute("value","0"),null===t||void 0===t||t.removeAttribute("toggled"),null===n||void 0===n||n.removeAttribute("toggled"),null===r||void 0===r||r.removeAttribute("toggled"),null===i||void 0===i||i.removeAttribute("toggled"),null===a||void 0===a||a.removeAttribute("toggled"),null===o||void 0===o||o.removeAttribute("disabled"),null===s||void 0===s||s.removeAttribute("disabled"),null===l||void 0===l||l.removeAttribute("disabled"),null===u||void 0===u||u.removeAttribute("disabled"),null===c||void 0===c||c.removeAttribute("disabled"),null===d||void 0===d||d.removeAttribute("disabled"),null===t||void 0===t||t.removeAttribute("disabled"),null===n||void 0===n||n.removeAttribute("disabled"),null===r||void 0===r||r.removeAttribute("disabled"),null===i||void 0===i||i.removeAttribute("disabled"),null===a||void 0===a||a.removeAttribute("disabled");var f=null===(p=e.select)||void 0===p?void 0:p.checkedsTexts().keys().next().value;if(f){var m,v=window.getComputedStyle(f).fontWeight,g=window.getComputedStyle(f).fontStyle,y=parseFloat(window.getComputedStyle(f).fontSize),b=window.getComputedStyle(f).textAnchor,x=window.getComputedStyle(f).fontFamily,w="normal"===window.getComputedStyle(f).letterSpacing?"0":parseFloat(window.getComputedStyle(f).letterSpacing).toString();null===o||void 0===o||o.setAttribute("value",y.toString()),null===s||void 0===s||s.setAttribute("value",y.toString()),null===l||void 0===l||l.setAttribute("value",w),null===u||void 0===u||u.setAttribute("value",w);var _=null===(m=x.split(",").pop())||void 0===m?void 0:m.toString().replace(/\"/gim,""),M=null===h||void 0===h?void 0:h.querySelectorAll("x-menuitem");switch(null===M||void 0===M||M.forEach((function(e){e.removeAttribute("toggled"),e.getAttribute("value")===(null===_||void 0===_?void 0:_.trim())&&e.setAttribute("toggled","")})),b){case"start":null===r||void 0===r||r.setAttribute("toggled","");break;case"middle":null===i||void 0===i||i.setAttribute("toggled","");break;case"end":null===a||void 0===a||a.setAttribute("toggled","")}700===parseFloat(v)&&(null===t||void 0===t||t.setAttribute("toggled","")),"italic"===g&&(null===n||void 0===n||n.setAttribute("toggled",""));try{var S;null===(S=e.select)||void 0===S||S.checkedsTexts().forEach((function(e){if(e.querySelector("tspan")){var t,n=null===(t=e.querySelector("tspan"))||void 0===t?void 0:t.getAttribute("dy");throw null===c||void 0===c||c.setAttribute("value",parseFloat(n||"1").toString()),null===d||void 0===d||d.setAttribute("value",parseFloat(n||"1").toString()),new Error("exit")}}))}catch(E){}}else null===o||void 0===o||o.setAttribute("disabled",""),null===s||void 0===s||s.setAttribute("disabled",""),null===l||void 0===l||l.setAttribute("disabled",""),null===u||void 0===u||u.setAttribute("disabled",""),null===c||void 0===c||c.setAttribute("disabled",""),null===d||void 0===d||d.setAttribute("disabled",""),null===t||void 0===t||t.setAttribute("disabled",""),null===n||void 0===n||n.setAttribute("disabled",""),null===r||void 0===r||r.setAttribute("disabled",""),null===i||void 0===i||i.setAttribute("disabled",""),null===a||void 0===a||a.setAttribute("disabled","")}))},i.render=function(){return(0,m.jsx)("div",{id:"typography",children:(0,m.jsxs)("main",{children:[(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"typography"})}),(0,m.jsxs)("section",{id:"font-section",children:[(0,m.jsx)("h3",{id:"font-section-heading",children:(0,m.jsx)("x-message",{children:"Font"})}),(0,m.jsxs)("x-box",{id:"font-family-subsection",vertical:"",children:[(0,m.jsx)("h4",{id:"font-family-heading",children:(0,m.jsx)("x-message",{children:"Family"})}),(0,m.jsx)("x-select",{id:"font-select",onClick:function(){return i.queryLocalFonts()},children:(0,m.jsx)("x-menu",{id:"menu-wrap",children:i.state.fonts.map((function(e,t){return(0,m.jsx)("x-menuitem",{value:e.family,children:(0,m.jsx)("x-label",{children:e.family})},t)}))})})]}),(0,m.jsxs)("x-box",{id:"font-face-subsection",vertical:"",children:[(0,m.jsx)("h4",{id:"font-face-heading",children:(0,m.jsx)("x-message",{children:"Face"})}),(0,m.jsx)("x-box",{id:"font-face-box",children:(0,m.jsxs)("x-buttons",{children:[(0,m.jsx)("x-button",{id:"bold",onClick:function(e){return i.changeAttribute(e,"bold")},children:"Bold"}),(0,m.jsx)("x-button",{id:"italic",onClick:function(e){return i.changeAttribute(e,"italic")},children:"Italic"})]})})]}),(0,m.jsxs)("x-box",{id:"font-size-subsection",vertical:"",children:[(0,m.jsx)("h4",{id:"font-size-heading",children:(0,m.jsx)("x-message",{children:"Size"})}),(0,m.jsxs)("x-box",{id:"font-size-box",children:[(0,m.jsx)("x-slider",{id:"font-size-slider",value:"26",min:"1",max:"150",step:"1","aria-disabled":"false",tabindex:"0"}),(0,m.jsx)("x-numberinput",{id:"font-size-input",value:"26",min:"1",step:"1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",hasstepper:"",children:(0,m.jsx)("x-stepper",{})})]})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("section",{id:"text-section",children:[(0,m.jsx)("h3",{id:"text-section-heading",disabled:"",children:(0,m.jsx)("x-message",{href:"#text",children:"Text"})}),(0,m.jsxs)("x-box",{id:"text-anchor-box",vertical:"",children:[(0,m.jsx)("h4",{id:"text-anchor-heading",disabled:"",children:(0,m.jsx)("x-message",{href:"#anchor",children:"Anchor"})}),(0,m.jsxs)("x-buttons",{id:"text-anchor-buttons",children:[(0,m.jsx)("x-button",{id:"start-text-anchor-button",value:"start",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return i.changeAttribute(e,"start")},children:(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Start"})})}),(0,m.jsx)("x-button",{id:"middle-text-anchor-button",value:"middle",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return i.changeAttribute(e,"middle")},children:(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{href:"#text-anchor.middle",children:"Middle"})})}),(0,m.jsx)("x-button",{id:"end-text-anchor-button",value:"end",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return i.changeAttribute(e,"end")},children:(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"End"})})})]})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("section",{id:"spacing-section",children:[(0,m.jsx)("h3",{id:"spacing-section-heading",children:(0,m.jsx)("x-message",{href:"#spacing",children:"Spacing"})}),(0,m.jsxs)("x-box",{id:"letter-spacing-box",vertical:"",children:[(0,m.jsx)("h4",{id:"letter-spacing-heading",children:(0,m.jsx)("x-message",{children:"Letter"})}),(0,m.jsxs)("x-box",{id:"letter-spacing-inner-box",children:[(0,m.jsx)("x-slider",{id:"letter-spacing-slider",value:"0",min:"-20",max:"20",step:"0.1","aria-disabled":"false",tabindex:"0"}),(0,m.jsx)("x-numberinput",{id:"letter-spacing-input",value:"0",step:"0.1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",children:(0,m.jsx)("x-stepper",{})})]})]}),(0,m.jsxs)("x-box",{id:"line-spacing-box",vertical:"",children:[(0,m.jsx)("h4",{id:"line-spacing-heading",children:(0,m.jsx)("x-message",{children:"Line"})}),(0,m.jsxs)("x-box",{id:"line-spacing-inner-box",children:[(0,m.jsx)("x-slider",{id:"line-spacing-slider",value:"0",min:"-3",max:"3",step:"0.1","aria-disabled":"false",tabindex:"0"}),(0,m.jsx)("x-numberinput",{id:"line-spacing-input",value:"0",step:"0.1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",children:(0,m.jsx)("x-stepper",{})})]})]})]})]})})},i.state={fonts:[]},i}return s(n,[{key:"componentDidMount",value:function(){this.init(),this.watch(),this.queryLocalFonts()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),N=R,k=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).xInputChange=function(e){var t,n,r,i=null===(t=document.querySelector("#y-input"))||void 0===t?void 0:t.getAttribute("value"),a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().NODE_X,"X"),a.nodeDistance(e.target.value,i),null===(r=a.select)||void 0===r||r.resetFrame(!0)},e.yInputChange=function(e){var t,n,r,i=null===(t=document.querySelector("#x-input"))||void 0===t?void 0:t.getAttribute("value"),a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().NODE_Y,"Y"),a.nodeDistance(i,e.target.value),null===(r=a.select)||void 0===r||r.resetFrame(!0)},e.wInputChange=function(){var e,t,n,r,i,a=null===(e=document.querySelector("#w-input"))||void 0===e?void 0:e.getAttribute("value"),o=null===(t=document.querySelector("#h-input"))||void 0===t?void 0:t.getAttribute("value"),s=window.stage,l=null===(n=s.select)||void 0===n?void 0:n.frame().getBoundingClientRect(),u=l.width,c=l.height,d=s.matrix.a,h=(Number(a)-Math.round(u/d))*d,p=(Number(o)-Math.round(c/d))*d;null===(r=s.history)||void 0===r||r.add(s.history.actions().NODE_WIDTH,"Width"),null===(i=s.resize)||void 0===i||i.resizeWH({dataX:h,dataY:p,pos:"right"})},e.hInputChange=function(){var e,t,n,r,i,a=null===(e=document.querySelector("#w-input"))||void 0===e?void 0:e.getAttribute("value"),o=null===(t=document.querySelector("#h-input"))||void 0===t?void 0:t.getAttribute("value"),s=window.stage,l=null===(n=s.select)||void 0===n?void 0:n.frame().getBoundingClientRect(),u=l.width,c=l.height,d=s.matrix.a,h=(Number(a)-Math.round(u/d))*d,p=(Number(o)-Math.round(c/d))*d;null===(r=s.history)||void 0===r||r.add(s.history.actions().NODE_HEIGHT,"Height"),null===(i=s.resize)||void 0===i||i.resizeWH({dataX:h,dataY:p,pos:"bottom"})},e.watch=function(){var e=window.stage;clearTimeout(S),S=setTimeout((function(){var t=e.select.frame().getBoundingClientRect(),n=t.x,r=t.y,i=t.width,a=t.height,o=document.querySelector("#x-input"),s=document.querySelector("#y-input"),l=document.querySelector("#w-input"),u=document.querySelector("#h-input"),c=e.matrix.a,d=document.querySelector("#background-outlines"),h=null===d||void 0===d?void 0:d.getBoundingClientRect(),p=Math.round((n-h.x)/c),f=Math.round((r-h.y)/c),m=Math.round(i/c),v=Math.round(a/c);null===o||void 0===o||o.setAttribute("value",Math.round(p).toString()),null===s||void 0===s||s.setAttribute("value",Math.round(f).toString()),null===l||void 0===l||l.setAttribute("value",Math.round(m).toString()),null===u||void 0===u||u.setAttribute("value",Math.round(v).toString()),m,v;var g=document.querySelector("#geometry"),y=null===g||void 0===g?void 0:g.querySelectorAll("x-numberinput");null===y||void 0===y||y.forEach((function(e){m>0&&v>0?e.removeAttribute("disabled"):e.setAttribute("disabled","")}))}),50)},e.init=function(){var t=document.querySelector("#x-input");null===t||void 0===t||t.addEventListener("changeend",e.xInputChange),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()}));var n=document.querySelector("#y-input");null===n||void 0===n||n.addEventListener("changeend",e.yInputChange),null===n||void 0===n||n.addEventListener("keydown",(function(e){e.stopPropagation()}));var r=document.querySelector("#w-input");null===r||void 0===r||r.addEventListener("changeend",e.wInputChange),null===r||void 0===r||r.addEventListener("keydown",(function(e){e.stopPropagation()}));var i=document.querySelector("#h-input");null===i||void 0===i||i.addEventListener("changeend",e.hInputChange),null===i||void 0===i||i.addEventListener("keydown",(function(e){e.stopPropagation()}));var a=window.stage;a.watch(a.actions().FRAME_RECT,e.watch)},e.render=function(){return(0,m.jsx)("div",{id:"geometry",children:(0,m.jsxs)("main",{children:[(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"Geometry"})}),(0,m.jsxs)("div",{className:"geometry-content",children:[(0,m.jsx)("h3",{children:(0,m.jsx)("x-message",{children:"Object"})}),(0,m.jsxs)("section",{id:"position-section",children:[(0,m.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,m.jsx)("h4",{id:"x-heading",children:(0,m.jsx)("x-message",{children:"X"})}),(0,m.jsx)("x-numberinput",{id:"x-input",value:"0",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]}),(0,m.jsxs)("x-box",{id:"y-box",vertical:"",children:[(0,m.jsx)("h4",{id:"y-heading",children:(0,m.jsx)("x-message",{children:"Y"})}),(0,m.jsx)("x-numberinput",{id:"y-input",value:"0",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]})]}),(0,m.jsxs)("section",{id:"position-section",children:[(0,m.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,m.jsx)("h4",{id:"x-heading",children:(0,m.jsx)("x-message",{children:"width"})}),(0,m.jsx)("x-numberinput",{id:"w-input",value:"263.7",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]}),(0,m.jsxs)("x-box",{id:"y-box",vertical:"",children:[(0,m.jsx)("h4",{id:"y-heading",children:(0,m.jsx)("x-message",{children:"height"})}),(0,m.jsx)("x-numberinput",{id:"h-input",value:"86.2",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]})]})]})]})})},e}return s(n,[{key:"componentDidMount",value:function(){this.init(),this.watch()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),D=k,I=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).nodeAlign=function(e,t){window.stage.nodeAlign(e,t)},e.transform=function(e){window.stage.filp(e)},e.raise=function(){window.stage.raise()},e.lower=function(){window.stage.lower()},e.front=function(){window.stage.front()},e.back=function(){window.stage.back()},e.group=function(){window.stage.group()},e.unGroup=function(){window.stage.unGroup()},e.watch=function(){var e=window.stage,t=document.querySelector("#arrangement"),n=null===t||void 0===t?void 0:t.querySelectorAll("x-button");null===n||void 0===n||n.forEach((function(t){var n;Number(null===(n=e.select)||void 0===n?void 0:n.size())>0?t.removeAttribute("disabled"):t.setAttribute("disabled","")}))},e.init=function(){var t=window.stage;t.watch(t.actions().SELECTED,e.watch)},e.render=function(){return(0,m.jsx)("div",{id:"arrangement",children:(0,m.jsxs)("main",{children:[(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"Arrangement"})}),(0,m.jsxs)("section",{id:"align-section",children:[(0,m.jsx)("h3",{id:"align-section-heading",children:(0,m.jsx)("x-message",{children:"Alignment"})}),(0,m.jsxs)("section",{className:"flex flex-justify-between",children:[(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","left")},children:[(0,m.jsx)("x-icon",{href:"#align-left"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Align left"})})]}),(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","top")},children:[(0,m.jsx)("x-icon",{href:"#align-top"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Align top"})})]}),(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","right")},children:[(0,m.jsx)("x-icon",{href:"#align-right"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Align right"})})]}),(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","bottom")},children:[(0,m.jsx)("x-icon",{href:"#align-bottom"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Align bottom"})})]}),(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","center")},children:[(0,m.jsx)("x-icon",{href:"#center-horizontally"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Center horizontally"})})]}),(0,m.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","center")},children:[(0,m.jsx)("x-icon",{href:"#center-vertically"}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:"Center vertically"})})]})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("section",{id:"transform-section",children:[(0,m.jsx)("h3",{id:"transform-heading",children:(0,m.jsx)("x-message",{children:"Transform"})}),(0,m.jsxs)("x-box",{id:"flip-buttons",children:[(0,m.jsxs)("x-button",{id:"flip-horizontally-button",value:"flipX",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.transform("x")},children:[(0,m.jsx)("x-icon",{href:"#flip-x"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Flip X"})})]}),(0,m.jsxs)("x-button",{id:"flip-vertically-button",value:"flipY",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.transform("y")},children:[(0,m.jsx)("x-icon",{href:"#flip-y"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Flip Y"})})]})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("section",{id:"order-section",children:[(0,m.jsx)("h3",{id:"order-section-heading",children:(0,m.jsx)("x-message",{children:"Order"})}),(0,m.jsxs)("x-box",{id:"order-buttons-1",children:[(0,m.jsxs)("x-button",{id:"raise-button",value:"raise",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.raise()},children:[(0,m.jsx)("x-icon",{href:"#raise"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Raise"})})]}),(0,m.jsxs)("x-button",{id:"lower-button",value:"lower",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.lower()},children:[(0,m.jsx)("x-icon",{href:"#lower"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Lower"})})]})]}),(0,m.jsxs)("x-box",{id:"order-buttons-2",children:[(0,m.jsxs)("x-button",{id:"front-button",value:"raiseToFront",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.front()},children:[(0,m.jsx)("x-icon",{href:"#raise-to-front"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Front"})})]}),(0,m.jsxs)("x-button",{id:"back-button",value:"lowerToBack",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.back()},children:[(0,m.jsx)("x-icon",{href:"#lower-to-back"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Back"})})]})]})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("section",{id:"grouping-section",children:[(0,m.jsx)("h3",{id:"grouping-section-heading",children:(0,m.jsx)("x-message",{href:"#grouping",children:"Grouping"})}),(0,m.jsxs)("x-box",{id:"grouping-buttons",children:[(0,m.jsxs)("x-button",{id:"group-button",value:"group",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.group()},children:[(0,m.jsx)("x-icon",{href:"#group"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Group"})})]}),(0,m.jsxs)("x-button",{id:"ungroup-button",value:"ungroup",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.unGroup()},children:[(0,m.jsx)("x-icon",{href:"#ungroup"}),(0,m.jsx)("x-label",{children:(0,m.jsx)("x-message",{children:"Ungroup"})})]})]})]})]})})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),j=I;function z(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var F=0;function B(e){return"__private_"+F+++"_"+e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Element.prototype.getBox||(Element.prototype.getBox=function(){var e,t=null===(e=this.ownerSVGElement)||void 0===e?void 0:e.getBoundingClientRect(),n=this.getBoundingClientRect();return{x:n.x-t.x,right:n.right-t.x,left:n.left-t.x,y:n.y-t.y,top:n.top-t.y,bottom:n.bottom-t.y,width:n.width,height:n.height}}),Element.prototype.getMatrix||(Element.prototype.getMatrix=function(){var e=getComputedStyle(this).transform;if("none"===e||!e)return{a:1,b:0,c:0,d:1,e:0,f:0,sx:1,sy:1,angle:0};var t=e.replace(/matrix\(|\)/g,"").split(","),n=+t[0],r=+t[1],i=+t[2],a=+t[3];return{a:n,b:r,c:i,d:a,e:+t[4],f:+t[5],sx:Math.sqrt(n*n+r*r),sy:Math.sqrt(i*i+a*a),angle:Math.round(Math.atan2(r,n)*(180/Math.PI))}}),Element.prototype.getAngle||(Element.prototype.getAngle=function(){var e=this.getMatrix(),t=e.a,n=e.b;return Math.round(Math.atan2(n,t)*(180/Math.PI))}),Element.prototype.getScale||(Element.prototype.getScale=function(){var e=this.getMatrix(),t=e.a,n=e.b,r=e.c,i=e.d;return{sx:Math.sqrt(t*t+n*n),sy:Math.sqrt(r*r+i*i)}}),Element.prototype.getMatrixIterator||(Element.prototype.getMatrixIterator=function(){var e=this.getMatrix(),t=this.parentNode;if(t&&"svg"!==t.nodeName){var n=t.getMatrixIterator();e.e=e.e*(null===n||void 0===n?void 0:n.a),e.f=e.f*(null===n||void 0===n?void 0:n.d),e.a*=null===n||void 0===n?void 0:n.a,e.d*=null===n||void 0===n?void 0:n.d,e.e+=null===n||void 0===n?void 0:n.e,e.f+=null===n||void 0===n?void 0:n.f,e.sx*=n.sx,e.sy*=n.sy,e.angle+=n.angle}return e}),Element.prototype.scale||(Element.prototype.scale=function(e,t,n,r){var i=this.getMatrix(),a=e*i.a,o=t*i.d,s=n-a*n,l=r-o*r;this.setAttribute("transform","matrix(\n      ".concat(a,",\n      0,\n      0,\n      ").concat(o,",\n      ").concat(s,",\n      ").concat(l,"\n    )"))});var G={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"};SVGPathElement.prototype.getPathData||(SVGPathElement.prototype.getPathData=function(){var e=function(e){for(var t=[],n=0;n<=e.length;){var r=e[n];G.hasOwnProperty(r)&&("v"!==r.toLowerCase()&&"h"!==r.toLowerCase()||t.push({type:r,values:[Number(e[n+1])]}),"m"!==r.toLowerCase()&&"l"!==r.toLowerCase()&&"t"!==r.toLowerCase()||t.push({type:r,values:[Number(e[n+1]),Number(e[n+2])]}),"q"!==r.toLowerCase()&&"s"!==r.toLowerCase()||t.push({type:r,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4])]}),"c"===r.toLowerCase()&&t.push({type:r,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4]),Number(e[n+5]),Number(e[n+6])]}),"a"===r.toLowerCase()&&t.push({type:r,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4]),Number(e[n+5]),Number(e[n+6]),Number(e[n+7])]}),"z"===r.toLowerCase()&&t.push({type:r,values:[]})),n++}return t}(this.getAttribute("d").replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").replace(/([A-Za-z])(\d+\.\d+ || \d+)/g,"$1 $2 ").replace(/(\d+\.\d+ || \d+)([A-Za-z])/g,"$1 $2 ").trim().split(/\s*,|\s+/));return e}),SVGRectElement.prototype.getPathData||(SVGRectElement.prototype.getPathData=function(){var e=this.x.baseVal.value,t=this.y.baseVal.value,n=this.width.baseVal.value,r=this.height.baseVal.value,i=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,a=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;return i>n/2&&(i=n/2),a>r/2&&(a=r/2),[{type:"M",values:[e+i,t]},{type:"H",values:[e+n-i]},{type:"A",values:[i,a,0,0,1,e+n,t+a]},{type:"V",values:[t+r-a]},{type:"A",values:[i,a,0,0,1,e+n-i,t+r]},{type:"H",values:[e+i]},{type:"A",values:[i,a,0,0,1,e,t+r-a]},{type:"V",values:[t+a]},{type:"A",values:[i,a,0,0,1,e+i,t]},{type:"Z",values:[]}]}),SVGCircleElement.prototype.getPathData||(SVGCircleElement.prototype.getPathData=function(){var e=this.cx.baseVal.value,t=this.cy.baseVal.value,n=this.r.baseVal.value;return[{type:"M",values:[e+n,t]},{type:"A",values:[n,n,0,0,1,e,t+n]},{type:"A",values:[n,n,0,0,1,e-n,t]},{type:"A",values:[n,n,0,0,1,e,t-n]},{type:"A",values:[n,n,0,0,1,e+n,t]},{type:"Z",values:[]}]}),SVGEllipseElement.prototype.getPathData||(SVGEllipseElement.prototype.getPathData=function(){var e=this.cx.baseVal.value,t=this.cy.baseVal.value,n=this.rx.baseVal.value,r=this.ry.baseVal.value;return[{type:"M",values:[e+n,t]},{type:"A",values:[n,r,0,0,1,e,t+r]},{type:"A",values:[n,r,0,0,1,e-n,t]},{type:"A",values:[n,r,0,0,1,e,t-r]},{type:"A",values:[n,r,0,0,1,e+n,t]},{type:"Z",values:[]}]}),SVGLineElement.prototype.getPathData||(SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]}),SVGPolylineElement.prototype.getPathData||(SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e}),SVGPolygonElement.prototype.getPathData||(SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e});var V=B("stage"),W=B("isOver"),q=B("isRecording"),X=B("history"),Z=B("firstRecord"),Y=B("endRecord"),J=B("record"),Q=B("index"),K=B("listen"),$=B("action"),ee=B("CN_label"),te=B("actions"),ne=B("callBack"),re=B("updated"),ie=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:!0}),Object.defineProperty(this,q,{writable:!0,value:!1}),Object.defineProperty(this,X,{writable:!0,value:[]}),Object.defineProperty(this,Z,{writable:!0,value:[]}),Object.defineProperty(this,Y,{writable:!0,value:[]}),Object.defineProperty(this,J,{writable:!0,value:[]}),Object.defineProperty(this,Q,{writable:!0,value:0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:{ADD:Symbol(),DELETE:Symbol(),NODE_WIDTH:Symbol(),NODE_HEIGHT:Symbol(),SCALE:Symbol(),MOUSE_SCALE:Symbol(),NODE_X:Symbol(),NODE_Y:Symbol(),MOUSE_MOVE:Symbol(),KEYBOARD_MOVE:Symbol(),TITLE:Symbol(),EDIT:Symbol(),REORDER:Symbol(),GROUP:Symbol(),UNGROUP:Symbol()}}),Object.defineProperty(this,ne,{writable:!0,value:[]}),this.watch=function(e){var t;null===(t=z(n,ne)[ne])||void 0===t||t.push(e)},Object.defineProperty(this,re,{writable:!0,value:function(){z(n,K)[K]=new MutationObserver((function(e){var t;z(n,q)[q]&&(0===z(n,Z)[Z].length&&(z(n,Z)[Z]=e),z(n,Y)[Y]=e,z(n,W)[W]&&z(n,X)[X].splice(z(n,Q)[Q]-1,1,{record:e,action:z(n,$)[$],CN_label:z(n,ee)[ee]}),null===(t=z(n,ne)[ne])||void 0===t||t.forEach((function(e){e(z(n,$)[$])})))})),z(n,K)[K].observe(z(n,V)[V].svgRoot,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}}),this.add=function(e,t){if(!e)throw new Error("action not found!");z(n,Z)[Z]=[],z(n,Y)[Y]=[],z(n,W)[W]=!1,z(n,q)[q]=!0,z(n,$)[$]=e,z(n,ee)[ee]=t;var r=z(n,X)[X].length-z(n,Q)[Q];z(n,X)[X].splice(z(n,Q)[Q],r,{action:e,CN_label:t}),z(n,Q)[Q]++},this.end=function(){z(n,q)[q]&&(z(n,W)[W]=!0,setTimeout((function(){z(n,q)[q]=!1})))},this.undo=function(){var e,t,r;if(n.has(z(n,Q)[Q]-1)){z(n,Q)[Q]--;var i=n.item(z(n,Q)[Q]),a=i.record,o=i.action,s=i.CN_label,l=[n.actions().SCALE,n.actions().MOUSE_MOVE,n.actions().MOUSE_SCALE,n.actions().KEYBOARD_MOVE];null===a||void 0===a||null===(e=a.reverse())||void 0===e||e.forEach((function(e){var t=e.addedNodes,r=e.removedNodes,i=e.type,a=e.oldValue,s=e.target,u=e.nextSibling,c=e.attributeName||"";e.newValue=s.getAttribute(c)||null,"attributes"===i&&("g"!==s.localName&&"transform"===c&&l.includes(o)||(a?s.setAttribute(c,a):s.removeAttribute(c))),t.forEach((function(e){var t,r=e;null===(t=z(n,V)[V].select)||void 0===t||t.delete(r),r.remove()})),r.forEach((function(e){var t,r=e;null===(t=z(n,V)[V].select)||void 0===t||t.set(e,{node:e}),u?u.before(r):s.append(r)}))})),z(n,X)[X].splice(z(n,Q)[Q],1,{record:null===a||void 0===a?void 0:a.reverse(),action:o,CN_label:s}),null===(t=z(n,V)[V].select)||void 0===t||t.resetFrame(!0),null===(r=z(n,ne)[ne])||void 0===r||r.forEach((function(e){e("undo")}))}},this.redo=function(){var e,t;if(n.has(z(n,Q)[Q])){var r=n.item(z(n,Q)[Q]),i=r.record,a=r.action,o=[n.actions().SCALE,n.actions().MOUSE_MOVE,n.actions().MOUSE_SCALE,n.actions().KEYBOARD_MOVE];null===i||void 0===i||i.forEach((function(e){var t=e.addedNodes,r=e.removedNodes,i=e.type,s=e.target,l=e.nextSibling,u=e.attributeName||"";if("attributes"===i&&("g"===s.localName||"transform"!==u||!o.includes(a))){var c=e.newValue;c?s.setAttribute(u,c):s.removeAttribute(u)}t.forEach((function(e){var t,r=e;null===(t=z(n,V)[V].select)||void 0===t||t.set(e,{node:e}),l?l.before(r):s.append(r)})),r.forEach((function(e){var t,r=e;null===(t=z(n,V)[V].select)||void 0===t||t.delete(r),r.remove()}))})),null===(e=z(n,V)[V].select)||void 0===e||e.resetFrame(!0),z(n,Q)[Q]++,null===(t=z(n,ne)[ne])||void 0===t||t.forEach((function(e){e("redo")}))}},this.clear=function(){z(n,X)[X].splice(0,z(n,X)[X].length)},this.item=function(e){return z(n,X)[X][e]},this.get=function(){return z(n,X)[X]},this.size=function(){return z(n,X)[X].length},this.has=function(e){try{return z(n,X)[X][e]}catch(t){return!1}},this.push=function(e){z(n,X)[X].push(e)},this.setIndex=function(e){z(n,Q)[Q]=e},this.index=function(){return z(n,Q)[Q]},this.actions=function(){return z(n,te)[te]},this.removeWatch=function(e){var t=z(n,ne)[ne].findIndex((function(t){return t===e}));z(n,ne)[ne].splice(t,1)},this.uninstall=function(){z(n,ne)[ne]=[]},!t)throw new Error("stage not found!");z(this,V)[V]=t,z(this,re)[re]()})),ae=ie,oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function le(e,t){var n=e[0],r=e[1];return[n*Math.cos(t)-r*Math.sin(t),n*Math.sin(t)+r*Math.cos(t)]}function ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)if("number"!=typeof e[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof e[n]+" == typeof "+e[n]);return!0}var ce=Math.PI;function de(e,t,n){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var r=e.rX,i=e.rY,a=e.x,o=e.y;r=Math.abs(e.rX),i=Math.abs(e.rY);var s=le([(t-a)/2,(n-o)/2],-e.xRot/180*ce),l=s[0],u=s[1],c=Math.pow(l,2)/Math.pow(r,2)+Math.pow(u,2)/Math.pow(i,2);1<c&&(r*=Math.sqrt(c),i*=Math.sqrt(c)),e.rX=r,e.rY=i;var d=Math.pow(r,2)*Math.pow(u,2)+Math.pow(i,2)*Math.pow(l,2),h=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-d)/d)),p=r*u/i*h,f=-i*l/r*h,m=le([p,f],e.xRot/180*ce);e.cX=m[0]+(t+a)/2,e.cY=m[1]+(n+o)/2,e.phi1=Math.atan2((u-f)/i,(l-p)/r),e.phi2=Math.atan2((-u-f)/i,(-l-p)/r),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*ce),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*ce),e.phi1*=180/ce,e.phi2*=180/ce}function he(e,t,n){ue(e,t,n);var r=e*e+t*t-n*n;if(0>r)return[];if(0===r)return[[e*n/(e*e+t*t),t*n/(e*e+t*t)]];var i=Math.sqrt(r);return[[(e*n+t*i)/(e*e+t*t),(t*n-e*i)/(e*e+t*t)],[(e*n-t*i)/(e*e+t*t),(t*n+e*i)/(e*e+t*t)]]}var pe,fe=Math.PI/180;function me(e,t,n){return(1-n)*e+n*t}function ve(e,t,n,r){return e+Math.cos(r/180*ce)*t+Math.sin(r/180*ce)*n}function ge(e,t,n,r){var i=1e-6,a=t-e,o=n-t,s=3*a+3*(r-n)-6*o,l=6*(o-a),u=3*a;return Math.abs(s)<i?[-u/l]:function(e,t,n){void 0===n&&(n=1e-6);var r=e*e/4-t;if(r<-n)return[];if(r<=n)return[-e/2];var i=Math.sqrt(r);return[-e/2-i,-e/2+i]}(l/s,u/s,i)}function ye(e,t,n,r,i){var a=1-i;return e*(a*a*a)+t*(3*a*a*i)+n*(3*a*i*i)+r*(i*i*i)}!function(e){function t(){return i((function(e,t,n){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=n),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=n),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=n),e.relative=!1),e}))}function n(){var e=NaN,t=NaN,n=NaN,r=NaN;return i((function(i,a,o){return i.type&Se.SMOOTH_CURVE_TO&&(i.type=Se.CURVE_TO,e=isNaN(e)?a:e,t=isNaN(t)?o:t,i.x1=i.relative?a-e:2*a-e,i.y1=i.relative?o-t:2*o-t),i.type&Se.CURVE_TO?(e=i.relative?a+i.x2:i.x2,t=i.relative?o+i.y2:i.y2):(e=NaN,t=NaN),i.type&Se.SMOOTH_QUAD_TO&&(i.type=Se.QUAD_TO,n=isNaN(n)?a:n,r=isNaN(r)?o:r,i.x1=i.relative?a-n:2*a-n,i.y1=i.relative?o-r:2*o-r),i.type&Se.QUAD_TO?(n=i.relative?a+i.x1:i.x1,r=i.relative?o+i.y1:i.y1):(n=NaN,r=NaN),i}))}function r(){var e=NaN,t=NaN;return i((function(n,r,i){if(n.type&Se.SMOOTH_QUAD_TO&&(n.type=Se.QUAD_TO,e=isNaN(e)?r:e,t=isNaN(t)?i:t,n.x1=n.relative?r-e:2*r-e,n.y1=n.relative?i-t:2*i-t),n.type&Se.QUAD_TO){e=n.relative?r+n.x1:n.x1,t=n.relative?i+n.y1:n.y1;var a=n.x1,o=n.y1;n.type=Se.CURVE_TO,n.x1=((n.relative?0:r)+2*a)/3,n.y1=((n.relative?0:i)+2*o)/3,n.x2=(n.x+2*a)/3,n.y2=(n.y+2*o)/3}else e=NaN,t=NaN;return n}))}function i(e){var t=0,n=0,r=NaN,i=NaN;return function(a){if(isNaN(r)&&!(a.type&Se.MOVE_TO))throw new Error("path must start with moveto");var o=e(a,t,n,r,i);return a.type&Se.CLOSE_PATH&&(t=r,n=i),void 0!==a.x&&(t=a.relative?t+a.x:a.x),void 0!==a.y&&(n=a.relative?n+a.y:a.y),a.type&Se.MOVE_TO&&(r=t,i=n),o}}function a(e,t,n,r,a,o){return ue(e,t,n,r,a,o),i((function(i,s,l,u){var c=i.x1,d=i.x2,h=i.relative&&!isNaN(u),p=void 0!==i.x?i.x:h?0:s,f=void 0!==i.y?i.y:h?0:l;function m(e){return e*e}i.type&Se.HORIZ_LINE_TO&&0!==t&&(i.type=Se.LINE_TO,i.y=i.relative?0:l),i.type&Se.VERT_LINE_TO&&0!==n&&(i.type=Se.LINE_TO,i.x=i.relative?0:s),void 0!==i.x&&(i.x=i.x*e+f*n+(h?0:a)),void 0!==i.y&&(i.y=p*t+i.y*r+(h?0:o)),void 0!==i.x1&&(i.x1=i.x1*e+i.y1*n+(h?0:a)),void 0!==i.y1&&(i.y1=c*t+i.y1*r+(h?0:o)),void 0!==i.x2&&(i.x2=i.x2*e+i.y2*n+(h?0:a)),void 0!==i.y2&&(i.y2=d*t+i.y2*r+(h?0:o));var v=e*r-t*n;if(void 0!==i.xRot&&(1!==e||0!==t||0!==n||1!==r))if(0===v)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=Se.LINE_TO;else{var g=i.xRot*Math.PI/180,y=Math.sin(g),b=Math.cos(g),x=1/m(i.rX),w=1/m(i.rY),_=m(b)*x+m(y)*w,M=2*y*b*(x-w),S=m(y)*x+m(b)*w,E=_*r*r-M*t*r+S*t*t,C=M*(e*r+t*n)-2*(_*n*r+S*e*t),T=_*n*n-M*e*n+S*e*e,L=(Math.atan2(C,E-T)+Math.PI)%Math.PI/2,A=Math.sin(L),P=Math.cos(L);i.rX=Math.abs(v)/Math.sqrt(E*m(P)+C*A*P+T*m(A)),i.rY=Math.abs(v)/Math.sqrt(E*m(A)-C*A*P+T*m(P)),i.xRot=180*L/Math.PI}return void 0!==i.sweepFlag&&0>v&&(i.sweepFlag=+!i.sweepFlag),i}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),ue(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return i((function(e,t,n){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=n),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=n),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=n),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),i((function(r,i,a,o,s){if(isNaN(o)&&!(r.type&Se.MOVE_TO))throw new Error("path must start with moveto");return t&&r.type&Se.HORIZ_LINE_TO&&(r.type=Se.LINE_TO,r.y=r.relative?0:a),n&&r.type&Se.VERT_LINE_TO&&(r.type=Se.LINE_TO,r.x=r.relative?0:i),e&&r.type&Se.CLOSE_PATH&&(r.type=Se.LINE_TO,r.x=r.relative?o-i:o,r.y=r.relative?s-a:s),r.type&Se.ARC&&(0===r.rX||0===r.rY)&&(r.type=Se.LINE_TO,delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag),r}))},e.NORMALIZE_ST=n,e.QT_TO_C=r,e.INFO=i,e.SANITIZE=function(e){void 0===e&&(e=0),ue(e);var t=NaN,n=NaN,r=NaN,a=NaN;return i((function(i,o,s,l,u){var c=Math.abs,d=!1,h=0,p=0;if(i.type&Se.SMOOTH_CURVE_TO&&(h=isNaN(t)?0:o-t,p=isNaN(n)?0:s-n),i.type&(Se.CURVE_TO|Se.SMOOTH_CURVE_TO)?(t=i.relative?o+i.x2:i.x2,n=i.relative?s+i.y2:i.y2):(t=NaN,n=NaN),i.type&Se.SMOOTH_QUAD_TO?(r=isNaN(r)?o:2*o-r,a=isNaN(a)?s:2*s-a):i.type&Se.QUAD_TO?(r=i.relative?o+i.x1:i.x1,a=i.relative?s+i.y1:i.y2):(r=NaN,a=NaN),i.type&Se.LINE_COMMANDS||i.type&Se.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&Se.CURVE_TO||i.type&Se.SMOOTH_CURVE_TO||i.type&Se.QUAD_TO||i.type&Se.SMOOTH_QUAD_TO){var f=void 0===i.x?0:i.relative?i.x:i.x-o,m=void 0===i.y?0:i.relative?i.y:i.y-s;h=isNaN(r)?void 0===i.x1?h:i.relative?i.x:i.x1-o:r-o,p=isNaN(a)?void 0===i.y1?p:i.relative?i.y:i.y1-s:a-s;var v=void 0===i.x2?0:i.relative?i.x:i.x2-o,g=void 0===i.y2?0:i.relative?i.y:i.y2-s;c(f)<=e&&c(m)<=e&&c(h)<=e&&c(p)<=e&&c(v)<=e&&c(g)<=e&&(d=!0)}return i.type&Se.CLOSE_PATH&&c(o-l)<=e&&c(s-u)<=e&&(d=!0),d?[]:i}))},e.MATRIX=a,e.ROTATE=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),ue(e,t,n);var r=Math.sin(e),i=Math.cos(e);return a(i,r,-r,i,t-t*i+n*r,n-t*r-n*i)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),ue(e,t),a(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),ue(e,t),a(e,0,0,t,0,0)},e.SKEW_X=function(e){return ue(e),a(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return ue(e),a(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),ue(e),a(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),ue(e),a(1,0,0,-1,0,e)},e.A_TO_C=function(){return i((function(e,t,n){return Se.ARC===e.type?function(e,t,n){var r,i,a,o;e.cX||de(e,t,n);for(var s=Math.min(e.phi1,e.phi2),l=Math.max(e.phi1,e.phi2)-s,u=Math.ceil(l/90),c=new Array(u),d=t,h=n,p=0;p<u;p++){var f=me(e.phi1,e.phi2,p/u),m=me(e.phi1,e.phi2,(p+1)/u),v=m-f,g=4/3*Math.tan(v*fe/4),y=[Math.cos(f*fe)-g*Math.sin(f*fe),Math.sin(f*fe)+g*Math.cos(f*fe)],b=y[0],x=y[1],w=[Math.cos(m*fe),Math.sin(m*fe)],_=w[0],M=w[1],S=[_+g*Math.sin(m*fe),M-g*Math.cos(m*fe)],E=S[0],C=S[1];c[p]={relative:e.relative,type:Se.CURVE_TO};var T=function(t,n){var r=le([t*e.rX,n*e.rY],e.xRot),i=r[0],a=r[1];return[e.cX+i,e.cY+a]};r=T(b,x),c[p].x1=r[0],c[p].y1=r[1],i=T(E,C),c[p].x2=i[0],c[p].y2=i[1],a=T(_,M),c[p].x=a[0],c[p].y=a[1],e.relative&&(c[p].x1-=d,c[p].y1-=h,c[p].x2-=d,c[p].y2-=h,c[p].x-=d,c[p].y-=h),d=(o=[c[p].x,c[p].y])[0],h=o[1]}return c}(e,e.relative?0:t,e.relative?0:n):e}))},e.ANNOTATE_ARCS=function(){return i((function(e,t,n){return e.relative&&(t=0,n=0),Se.ARC===e.type&&de(e,t,n),e}))},e.CLONE=function(){return function(e){var t={};for(var n in e)t[n]=e[n];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),a=r(),o=n(),s=i((function(t,n,r){var i=o(a(e(function(e){var t={};for(var n in e)t[n]=e[n];return t}(t))));function l(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function u(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(i.type&Se.DRAWING_COMMANDS&&(l(n),u(r)),i.type&Se.HORIZ_LINE_TO&&l(i.x),i.type&Se.VERT_LINE_TO&&u(i.y),i.type&Se.LINE_TO&&(l(i.x),u(i.y)),i.type&Se.CURVE_TO){l(i.x),u(i.y);for(var c=0,d=ge(n,i.x1,i.x2,i.x);c<d.length;c++)0<(T=d[c])&&1>T&&l(ye(n,i.x1,i.x2,i.x,T));for(var h=0,p=ge(r,i.y1,i.y2,i.y);h<p.length;h++)0<(T=p[h])&&1>T&&u(ye(r,i.y1,i.y2,i.y,T))}if(i.type&Se.ARC){l(i.x),u(i.y),de(i,n,r);for(var f=i.xRot/180*Math.PI,m=Math.cos(f)*i.rX,v=Math.sin(f)*i.rX,g=-Math.sin(f)*i.rY,y=Math.cos(f)*i.rY,b=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],x=b[0],w=b[1],_=function(e){var t=e[0],n=e[1],r=180*Math.atan2(n,t)/Math.PI;return r<x?r+360:r},M=0,S=he(g,-m,0).map(_);M<S.length;M++)(T=S[M])>x&&T<w&&l(ve(i.cX,m,g,T));for(var E=0,C=he(y,-v,0).map(_);E<C.length;E++){var T;(T=C[E])>x&&T<w&&u(ve(i.cY,v,y,T))}}return t}));return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(pe||(pe={}));var be,xe=function(){function e(){}return e.prototype.round=function(e){return this.transform(pe.ROUND(e))},e.prototype.toAbs=function(){return this.transform(pe.TO_ABS())},e.prototype.toRel=function(){return this.transform(pe.TO_REL())},e.prototype.normalizeHVZ=function(e,t,n){return this.transform(pe.NORMALIZE_HVZ(e,t,n))},e.prototype.normalizeST=function(){return this.transform(pe.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(pe.QT_TO_C())},e.prototype.aToC=function(){return this.transform(pe.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(pe.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(pe.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(pe.SCALE(e,t))},e.prototype.rotate=function(e,t,n){return this.transform(pe.ROTATE(e,t,n))},e.prototype.matrix=function(e,t,n,r,i,a){return this.transform(pe.MATRIX(e,t,n,r,i,a))},e.prototype.skewX=function(e){return this.transform(pe.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(pe.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(pe.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(pe.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(pe.ANNOTATE_ARCS())},e}(),we=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},_e=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},Me=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return se(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var n=this;void 0===t&&(t=[]);for(var r=function(e){t.push(e),n.curArgs.length=0,n.canParseCommandOrComma=!0},i=0;i<e.length;i++){var a=e[i],o=!(this.curCommandType!==Se.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=_e(a)&&("0"===this.curNumber&&"0"===a||o);if(!_e(a)||s)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var l=Number(this.curNumber);if(isNaN(l))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===Se.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>l)throw new SyntaxError('Expected positive number, got "'+l+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(l),this.curArgs.length===Ee[this.curCommandType]&&(Se.HORIZ_LINE_TO===this.curCommandType?r({type:Se.HORIZ_LINE_TO,relative:this.curCommandRelative,x:l}):Se.VERT_LINE_TO===this.curCommandType?r({type:Se.VERT_LINE_TO,relative:this.curCommandRelative,y:l}):this.curCommandType===Se.MOVE_TO||this.curCommandType===Se.LINE_TO||this.curCommandType===Se.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Se.MOVE_TO===this.curCommandType&&(this.curCommandType=Se.LINE_TO)):this.curCommandType===Se.CURVE_TO?r({type:Se.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Se.SMOOTH_CURVE_TO?r({type:Se.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Se.QUAD_TO?r({type:Se.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Se.ARC&&r({type:Se.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!we(a))if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(s)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=Se.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=Se.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=Se.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=Se.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=Se.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=Se.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=Se.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=Se.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+".");this.curCommandType=Se.ARC,this.curCommandRelative="a"===a}else t.push({type:Se.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,n){void 0===n&&(n=[]);for(var r=0,i=Object.getPrototypeOf(this).parse.call(this,t);r<i.length;r++){var a=i[r],o=e(a);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}}})},t}(xe),Se=function(e){function t(n){var r=e.call(this)||this;return r.commands="string"==typeof n?t.parse(n):n,r}return se(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=pe.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],n=0,r=this.commands;n<r.length;n++){var i=e(r[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return this.commands=t,this},t.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];if(r.type===Se.CLOSE_PATH)t+="z";else if(r.type===Se.HORIZ_LINE_TO)t+=(r.relative?"h":"H")+r.x;else if(r.type===Se.VERT_LINE_TO)t+=(r.relative?"v":"V")+r.y;else if(r.type===Se.MOVE_TO)t+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===Se.LINE_TO)t+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===Se.CURVE_TO)t+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===Se.SMOOTH_CURVE_TO)t+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===Se.QUAD_TO)t+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===Se.SMOOTH_QUAD_TO)t+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==Se.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");t+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return t}(e)},t.parse=function(e){var t=new Me,n=[];return t.parse(e,n),t.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(xe),Ee=((be={})[Se.MOVE_TO]=2,be[Se.LINE_TO]=2,be[Se.HORIZ_LINE_TO]=1,be[Se.VERT_LINE_TO]=1,be[Se.CLOSE_PATH]=0,be[Se.QUAD_TO]=4,be[Se.SMOOTH_QUAD_TO]=2,be[Se.CURVE_TO]=6,be[Se.SMOOTH_CURVE_TO]=4,be[Se.ARC]=7,be),Ce=B("stage"),Te=B("drawingNode"),Le=B("startX"),Ae=B("startY"),Pe=B("isDrawing"),Oe=B("isMoving"),Re=B("isDisabled"),Ne=B("start"),ke=B("done"),De=B("cacheWidth"),Ie=B("cacheHeight"),je=B("d"),ze=B("install"),Fe=B("mousedown"),Be=B("mousemove"),Ue=B("mouseup"),He=B("setAttr"),Ge=B("createNode"),Ve=B("EN2CN"),We=s((function e(t,n){var i=this;if(r(this,e),Object.defineProperty(this,Ce,{writable:!0,value:void 0}),Object.defineProperty(this,Te,{writable:!0,value:void 0}),Object.defineProperty(this,Le,{writable:!0,value:0}),Object.defineProperty(this,Ae,{writable:!0,value:0}),Object.defineProperty(this,Pe,{writable:!0,value:!1}),Object.defineProperty(this,Oe,{writable:!0,value:!1}),Object.defineProperty(this,Re,{writable:!0,value:!0}),Object.defineProperty(this,Ne,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),Object.defineProperty(this,De,{writable:!0,value:0}),Object.defineProperty(this,Ie,{writable:!0,value:0}),Object.defineProperty(this,je,{writable:!0,value:"M 8.5 4.095 C 12.004 -5.959 25.735 4.095 8.5 17.021 C -8.736 4.095 4.995 -5.959 8.5 4.095 Z"}),Object.defineProperty(this,ze,{writable:!0,value:function(){var e;null===(e=z(i,Ce)[Ce].stage)||void 0===e||e.addEventListener("mousedown",z(i,Fe)[Fe]),document.addEventListener("mouseup",z(i,Ue)[Ue]),document.addEventListener("mousemove",z(i,Be)[Be])}}),Object.defineProperty(this,Fe,{writable:!0,value:function(e){var t,n=e.button,r=e.clientX,a=e.clientY;0!==n||z(i,Pe)[Pe]||z(i,Re)[Re]||(z(i,Ne)[Ne]&&z(i,Ne)[Ne](),z(i,Pe)[Pe]=!0,z(i,Le)[Le]=r,z(i,Ae)[Ae]=a,null===(t=z(i,Ce)[Ce].history)||void 0===t||t.add(z(i,Ce)[Ce].history.actions().ADD,z(i,Ve)[Ve]()))}}),Object.defineProperty(this,Be,{writable:!0,value:function(e){var t;if(z(i,Pe)[Pe]){var n=e.clientX,r=e.clientY,a=e.shiftKey;if(!(Math.max(n,z(i,Le)[Le])-Math.min(n,z(i,Le)[Le])<1||Math.max(r,z(i,Ae)[Ae])-Math.min(r,z(i,Ae)[Ae])<1)){z(i,Oe)[Oe]=!0;var o=z(i,Te)[Te]||z(i,Ge)[Ge]();if(!z(i,Te)[Te]&&z(i,je)[je]&&z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().OTHER_SHAPE){o.setAttribute("d",z(i,je)[je]);var s=o.getBoundingClientRect(),l=1/s.width,u=1/s.height;z(i,De)[De]=s.width*l,z(i,Ie)[Ie]=s.height*u;var c=new Se(z(i,je)[je]).matrix(l,0,0,u,0,0).encode();z(i,je)[je]=c,o.setAttribute("d",c)}z(i,Te)[Te]=o;var d=null===(t=o.ownerSVGElement)||void 0===t?void 0:t.getBoundingClientRect(),h=d.left,p=d.top,f=o.parentElement.getCTM(),m=f.e,v=f.a,g=f.d,y=f.f,b=[(z(i,Le)[Le]-h-m)/v,(n-h-m)/v],x=[(z(i,Ae)[Ae]-p-y)/g,(r-p-y)/g],w=Math.max.apply(null,b),_=Math.min.apply(null,b),M=Math.max.apply(null,x),S=Math.min.apply(null,x),E=w-_,C=M-S;a&&(_=E>C&&_!==b[0]?b[0]-C:_,S=C>E&&S!==x[0]?x[0]-E:S,C=C>(E=E>C?C:E)?E:C);var T={element:o,minX:_,minY:S,width:E,height:C,xArr:b,yArr:x};z(i,He)[He](e,T)}}}}),Object.defineProperty(this,Ue,{writable:!0,value:function(){if(z(i,Pe)[Pe]){var e=z(i,Te)[Te];z(i,Oe)[Oe]&&e&&z(i,ke)[ke]&&z(i,ke)[ke](e),z(i,Pe)[Pe]=!1,z(i,Oe)[Oe]=!1,z(i,Te)[Te]=void 0,z(i,Le)[Le]=0,z(i,Ae)[Ae]=0}}}),Object.defineProperty(this,He,{writable:!0,value:function(e,t){var n=t.element,r=t.minX,a=t.minY,o=t.width,s=t.height,l=t.xArr,u=t.yArr,c=e.shiftKey,d=e.clientX,h=e.clientY;if(z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().RECT)n.setAttribute("x",r),n.setAttribute("y",a),n.setAttribute("width",o),n.setAttribute("height",s);else if(z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().ELLIPSE)n.setAttribute("cx",r+o/2),n.setAttribute("cy",a+s/2),n.setAttribute("rx",o/2),n.setAttribute("ry",s/2);else if(z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().TRIANGLE){var p="M ".concat(r," ").concat(a+s," L ").concat(r+o," ").concat(a+s," L ").concat(r+o/2," ").concat(a," Z");n.setAttribute("d",p)}else if(z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().LINE){var f=180*Math.atan2(u[1]-u[0],l[1]-l[0])/Math.PI+180;n.setAttribute("x1",l[0]),n.setAttribute("y1",u[0]),n.setAttribute("x2",c&&f<315&&f>225||c&&f<=135&&f>=45?l[0]:l[1]),n.setAttribute("y2",c&&(f<45||f>=315)||c&&f<=225&&f>135?u[0]:u[1])}else if(z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().OTHER_SHAPE){var m;if(!z(i,je)[je])return;var v=null===(m=n.ownerSVGElement)||void 0===m?void 0:m.getBoundingClientRect(),g=v.left,y=v.top,b=n.parentElement.getCTM(),x=d-z(i,Le)[Le],w=h-z(i,Ae)[Ae],_=new Se(z(i,je)[je]).matrix((x+z(i,De)[De])/z(i,De)[De],0,0,(w+z(i,Ie)[Ie])/z(i,Ie)[Ie],(z(i,Le)[Le]-g-b.e)/b.a,(z(i,Ae)[Ae]-y-b.f)/b.a).encode();n.setAttribute("d",_)}}}),Object.defineProperty(this,Ge,{writable:!0,value:function(){var e,t,n,r,a,o=z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().RECT?"rect":z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().ELLIPSE?"ellipse":z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().LINE?"line":"path",s=document.createElementNS("http://www.w3.org/2000/svg",o);return null===(e=z(i,Ce)[Ce].history)||void 0===e||e.end(),null===(t=z(i,Ce)[Ce].select)||void 0===t||t.clear(),null===(n=z(i,Ce)[Ce].select)||void 0===n||n.set(s,{node:s}),z(i,Ce)[Ce].layer.append(s),s.setAttribute("fill",z(i,Ce)[Ce].options.fill||""),s.setAttribute("stroke",z(i,Ce)[Ce].options.stroke||""),s.setAttribute("stroke-width",(null===(r=z(i,Ce)[Ce].options.strokeWidth)||void 0===r?void 0:r.toString())||""),s.setAttribute("fill-opacity",(null===(a=z(i,Ce)[Ce].options.fillOpacity)||void 0===a?void 0:a.toString())||""),s}}),Object.defineProperty(this,Ve,{writable:!0,value:function(){return z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().RECT?"\u77e9\u5f62":z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().ELLIPSE?"\u692d\u5706":z(i,Ce)[Ce].currentType===z(i,Ce)[Ce].tools().LINE?"\u76f4\u7ebf":"\u8def\u5f84"}}),this.plugin=function(e){z(i,je)[je]=e},this.isDrawing=function(){return z(i,Pe)[Pe]},this.disabled=function(e){z(i,Re)[Re]=e},!t)throw new Error("stage not found!");z(this,Ce)[Ce]=t,z(this,ke)[ke]=null===n||void 0===n?void 0:n.done,z(this,Ne)[Ne]=null===n||void 0===n?void 0:n.start,z(this,ze)[ze]()})),qe=We,Xe=function(){function e(t){r(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.element=void 0,this.element=t}return s(e,[{key:"add",value:function(e,t,n,r,i,a){var o=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=i*this.a+a*this.c,this.f+=i*this.b+a*this.d,this.c=n*this.a+r*this.c,this.d=n*this.b+r*this.d,this.a=o,this.b=s,this}},{key:"translate",value:function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this}},{key:"scale",value:function(e,t,n,r){return null==t&&(t=e),(n||r)&&this.translate(n,r),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(n||r)&&this.translate(-n,-r),this}},{key:"rotate",value:function(e,t,n){e=this.rad(e),t=t||0,n=n||0;var r=+Math.cos(e).toFixed(9),i=+Math.sin(e).toFixed(9);return this.add(r,i,-i,r,t,n),this.add(1,0,0,1,-t,-n)}},{key:"skewX",value:function(e){return this.skew(e,0)}},{key:"skewY",value:function(e){return this.skew(0,e)}},{key:"skew",value:function(e,t){}},{key:"rad",value:function(e){return e%360*Math.PI/180}},{key:"deg",value:function(e){return 180*e/Math.PI%360}},{key:"getMatrix",value:function(e){e=this.element||e;var t=window.getComputedStyle(e).transform;if("none"===t)return{a:1,b:0,c:0,d:1,e:0,f:0};var n=t.replace(/matrix\(|\)/g,""),r=-1===n.search(",")?n.split(" "):n.split(",");return{a:+r[0],b:+r[1],c:+r[2],d:+r[3],e:+r[4],f:+r[5]}}},{key:"getScale",value:function(e,t){var n,r;return r=this.getMatrix(e.parentElement)["sx"===t?"a":"d"],"svg"!=(null===e||void 0===e||null===(n=e.parentElement)||void 0===n?void 0:n.tagName)&&(r*=this.getScale(e.parentElement,t)),r}},{key:"getTrans",value:function(e,t){var n;return n=this.getMatrix(e.parentElement)["sx"===t?"e":"f"]*this.getParentScale(e.parentElement,t),"svg"!=e.parentElement.tagName&&(n+=this.getTrans(e.parentElement,t)),n}},{key:"getParentScale",value:function(e,t){return"g"!=e.parentElement.tagName?1:(n=this.getMatrix(e.parentElement)["sx"===t?"a":"d"],"svg"!=e.parentElement.tagName&&(n*=this.getParentScale(e.parentElement,t)),n);var n}}]),e}(),Ze=Xe,Ye=function(e,t){return'<g uid="canvas" transform="matrix('.concat(e.a,",0,0,").concat(e.d,",").concat(e.e,",").concat(e.f,')">\n    <style>\n      #background-outlines rect{\n        fill: white;\n        stroke: rgb(0 0 0 / 20%);\n        vector-effect: non-scaling-stroke;\n      }\n\n      #lux-svg-root .lux-disabled{\n        opacity:0.24 !important;\n      }\n    </style>\n    <g id="background-outlines">\n        <rect style="pointer-events: none;" x="0" y="0" width="500" height="500" />\n    </g>\n\n    <g id="lux-workspaces">\n        <g id="lux-svg-root"></g>\n    </g>\n\n    <g id="huds">\n        <g id="outline-hud" context="transform">\n            <style>\n                #outline-hud [uid="outline"] {\n                fill: none;\n                stroke: rgb(245, 92, 54);\n                stroke-width: 2;\n                pointer-events: none;\n                vector-effect: non-scaling-stroke;\n                }\n            </style>\n            <path uid="outline"></path>\n        </g>\n\n        <g id="smart-guides-hud" enabled="">\n            <style>\n                #smart-guides-hud .repr {\n                fill: none;\n                stroke: blue;\n                stroke-width: 1;\n                vector-effect: non-scaling-stroke;\n                opacity: 0.6;\n                pointer-events: none;\n                }\n            </style>\n            <g uid="reprs"></g>\n        </g>\n\n        <g id="spline-hud" mode="edit">\n        <style>\n            #spline-hud [uid="grippies"] {\n            cursor: default;\n            }\n            #spline-hud [uid="grippies"]:focus {\n            outline: none;\n            }\n\n            /**\n             * Primary node grippies\n             */\n\n            #spline-hud .primary-node-grippie .outer-circle {\n            fill: white;\n            stroke: #4d2782;\n            stroke-width: 2;\n            vector-effect: non-scaling-stroke;\n            }\n            #spline-hud .primary-node-grippie[data-selected] .outer-circle {\n            fill: #bc9aec;\n            }\n            #spline-hud #grippies:focus .primary-node-grippie[data-selected] .outer-circle {\n            fill: #a370ea;\n            }\n            #spline-hud[mode^="draw-"]   .primary-node-grippie[data-position="mid"],\n            #spline-hud[mode$="-basis"]  .primary-node-grippie:not([data-subpath-type="basis"]),\n            #spline-hud[mode$="-rom"]    .primary-node-grippie:not([data-subpath-type="rom"]),\n            #spline-hud[mode$="-levien"] .primary-node-grippie:not([data-subpath-type="levien"]) {\n            display: none;\n            }\n\n            #spline-hud .primary-node-grippie .inner-circle {\n            pointer-events: none;\n            fill: #4d2782;\n            }\n\n            /**\n             * Secondary node grippies\n             */\n\n            #spline-hud .secondary-node-grippie {\n            fill: white;\n            stroke: #ef6c6c;\n            stroke-width: 1.5;\n            vector-effect: non-scaling-stroke;\n            }\n            #spline-hud[mode^="draw-"]   .secondary-node-grippie,\n            #spline-hud[mode$="-basis"]  .secondary-node-grippie:not([data-subpath-type="basis"]),\n            #spline-hud[mode$="-rom"]    .secondary-node-grippie:not([data-subpath-type="rom"]),\n            #spline-hud[mode$="-levien"] .secondary-node-grippie:not([data-subpath-type="levien"]) {\n            display: none;\n            }\n\n            /**\n             * Helper lines\n             */\n\n            #spline-hud .helper-line {\n            fill: none;\n            stroke: red;\n            stroke-width: 2;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            opacity: 0.3;\n            }\n            #spline-hud[mode^="draw-freehand"] .helper-line,\n            #spline-hud[mode$="-rom"] .helper-line {\n            display: none;;\n            }\n\n            /**\n             * Curve grippies\n             */\n\n            #spline-hud[mode^="draw"] .curve-grippie {\n            display: none;\n            }\n            #spline-hud .curve-grippie path {\n            fill: none;\n            stroke: blue;\n            stroke-width: 10px;\n            vector-effect: non-scaling-stroke;\n            opacity: 0;\n            }\n            #spline-hud .curve-grippie path:hover {\n            opacity: 0.2;\n            }\n        </style>\n\n        <g uid="grippies" tabindex="-1">\n            <g uid="helper-lines"></g>\n            <g uid="curve-grippies" style=""></g>\n            <g uid="primary-node-grippies"></g>\n            <g uid="secondary-node-grippies"></g>\n        </g>\n        </g>\n\n        <g id="cubic-bezier-seg-hud" drawing>\n        <style>\n            #cubic-bezier-seg-hud [uid="control-line-1"],\n            #cubic-bezier-seg-hud [uid="control-line-2"] {\n            fill: none;\n            stroke: red;\n            stroke-width: 1;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            opacity: 0.4;\n            }\n\n            #cubic-bezier-seg-hud [uid="control-point-1-grippie"],\n            #cubic-bezier-seg-hud [uid="control-point-2-grippie"] {\n            fill: red;\n            stroke: none;\n            pointer-events: none;\n            opacity: 1;\n            }\n\n            #cubic-bezier-seg-hud [uid="outline"] {\n            fill: none;\n            stroke: red;\n            stroke-width: 2.5;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            }\n        </style>\n\n        <g uid="container" transform="matrix(1, 0, 0, 1, 0, 0)" style="visibility: hidden;">\n            <path uid="outline"></path>\n            <line uid="control-line-1" x2="521.933" y1="141.132" x1="521.933" y2="141.132"></line>\n            <line uid="control-line-2" x2="745.073" y1="149.396" x1="745.073" y2="149.396"></line>\n            <circle uid="control-point-1-grippie" r="2.86078" cx="-9999999" cy="-9999999"></circle>\n            <circle uid="control-point-2-grippie" r="2.86078" cx="-9999999" cy="-9999999"></circle>\n        </g>\n        </g>\n\n        <g id="text-hud" tabindex="-1">\n        <style>\n        \n            /**\n            * Overlays\n            */\n            #text-hud{\n                pointer-events: none;\n            }\n\n            #text-hud [uid="caret-line"] {\n                stroke-width: 3;\n                vector-effect: non-scaling-stroke;\n                pointer-events: none;\n                stroke: gray;\n            }\n\n            #text-hud[inputmode] [uid="caret-line"] {\n                stroke: blue;\n            }\n            \n            #text-hud [uid="selection-rects"] rect {\n                fill:rgba(179, 179, 179, 0.3);\n                pointer-events: none;\n                stroke:none;\n            }\n\n            #text-hud[inputmode] [uid="selection-rects"] rect {\n                fill: rgb(53 132 228 / 20%);\n            }\n            \n            #text-hud [uid="html-input-object"] {\n                width: 1px;\n                height: 1px;\n                opacity: 0;\n                background: white;\n                pointer-events: none;\n            }\n\n\n            #text-hud [uid="html-input-object"] {\n            /* Needed for correct positioning of IME dialog */\n            font-size: 10px !important;\n            }\n            \n\n            #text-hud [uid="html-input"] {\n                width: 100%;\n                height: 100%;\n                padding: 0;\n                margin: 0;\n                white-space: pre;\n                text-align:left;\n                -webkit-user-modify: read-write-plaintext-only;\n                -webkit-user-select: text;\n            }\n\n        </style>\n\n        <g uid="overlays">\n            <line uid="caret-line"></line>\n            <g uid="selection-rects"></g>\n        </g>\n\n        <foreignObject uid="html-input-object" width="200" height="200" x="0" y="0">\n            <p uid="html-input" tabindex="0"></p>\n        </foreignObject>\n        </g>\n\n        <g id="frame-select-hud">\n            <style>\n                #frame-select-hud [uid="frame-select"] {\n                    // stroke-dasharray: 4;\n                    fill-opacity: 0;\n                    stroke: #1F83EA;\n                    stroke-width: 1;\n                    pointer-events: none;\n                    vector-effect: non-scaling-stroke;\n                    visibility:hidden;\n                }\n            </style>\n            <rect uid="frame-select" x="-99999" y="-99999" width="0" height="0" ></rect>\n        </g>\n\n        <g id="freehand-hud" drawing="">\n            <style>\n                #freehand-hud [uid="outline"] {\n                fill: none;\n                stroke: red;\n                stroke-width: 2.5;\n                vector-effect: non-scaling-stroke;\n                pointer-events: none;\n                }\n            </style>\n\n            <polyline uid="outline"></polyline>\n        </g>\n\n        <g id="view-hud" style="visibility:hidden">\n            <style>\n                #view-hud .grippie[data-position="left"],\n                #view-hud .grippie[data-position="right"],\n                #view-hud .grippie[data-position="top"],\n                #view-hud .grippie[data-position="bottom"] {\n                stroke: red;\n                vector-effect: non-scaling-stroke;\n                stroke-width: 8;\n                opacity: 0;\n                }\n\n                #view-hud .grippie[data-position="top-left"] path,\n                #view-hud .grippie[data-position="top-right"] path,\n                #view-hud .grippie[data-position="bottom-left"] path,\n                #view-hud .grippie[data-position="bottom-right"] path {\n\n                stroke-width: 1;\n                vector-effect: non-scaling-stroke;\n                fill: rgb(176, 214, 255);\n                stroke: rgb(2, 81, 165);\n                }\n\n                #view-hud .grippie[data-position="left"],\n                #view-hud .grippie[data-position="right"] {\n                cursor: ew-resize;\n                }\n                #view-hud .grippie[data-position="top"],\n                #view-hud .grippie[data-position="bottom"] {\n                cursor: ns-resize;\n                }\n                #view-hud .grippie[data-position="top-left"] {\n                cursor: nwse-resize;\n                }\n                #view-hud .grippie[data-position="top-right"] {\n                cursor: nesw-resize;\n                }\n                #view-hud .grippie[data-position="bottom-left"] {\n                cursor: nesw-resize;\n                }\n                #view-hud .grippie[data-position="bottom-right"] {\n                cursor: nwse-resize;\n                }\n       \n            </style>\n\n            <g uid="subhuds">\n                <g class="grippie" data-position="top-left" transform="matrix(1, 0, 0, 1, -15, -15)">\n                    <path d="M 15 15 h 15 v -5 h -20 v 20 h 5 z"></path>\n                </g>\n\n                <g class="grippie" data-position="top-right" transform="matrix(1, 0, 0, 1, 548, -15)">\n                    <path d="M 0 15 h 15 v 15 h 5 v -20 h -20 z"></path>\n                </g>\n\n                <g class="grippie" data-position="bottom-left" transform="matrix(1, 0, 0, 1, -15, 548)">\n                    <path d="M 15 15 h 15 v 5 h -20 v -20 h 5 z"></path>\n                </g>\n\n                <g class="grippie" data-position="bottom-right" transform="matrix(1, 0, 0, 1, 548, 548)">\n                    <path d="M 15 15 v -15 h 5 v 20 h -20 v -5 z"></path>\n                </g>\n                </g>\n            </g>\n        \n        <g id="rubber-band-hud">\n            <style>\n                #rubber-band-hud [uid="rubber-hand"] {\n                    fill: rgb(12 118 218 / 40%);\n                    stroke: rgb(12 118 218 / 100%);\n                    stroke-width: 1;\n                    pointer-events: none;\n                    vector-effect: non-scaling-stroke;\n                }\n            </style>\n            <rect uid="rubber-hand" x="0" y="0" width="0" height="0"></rect>\n        </g>\n\n        <g id="transform-hud">\n        <style>\n            #transform-hud .grippie {\n            fill: #ffffff;\n            stroke: #C3CBDD;\n            stroke-width: 1;\n            vector-effect: non-scaling-stroke;\n            fill: rgb(46, 102, 249);\n            stroke: white;\n            stroke-width: 2;\n            filter: url(#grippie-shadow);\n            filter: drop-shadow(0px 0px 1px black);\n            }\n        </style>\n        <g uid="grippies">\n            <g uid="scale-grippies" style="visibility:hidden;"><rect class="grippie"  data-position="top" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="right" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="top-left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="top-right" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom-left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom-right" width="').concat(t,'" height="').concat(t,'">\n            </ellipse></g>\n            <svg uid="origin-grippie" fill="#00b706" viewBox="0 0 100 100"  width="10" height="10" style="pointer-events: none;visibility:hidden;display:none">\n            <rect x="41" width="17" height="100" fill="inherit"></rect>\n            <rect x="41" width="17" height="100" fill="inherit" transform="matrix(0, 1, -1, 0, 100, 0.5)"></rect>\n        </svg>\n        </g>\n        </g>\n        <g id="rotate-hud" style="display:none;">\n            <g uid="grippies"><rect rx="999" y="0" x="0" width="').concat(t,'" height="').concat(t,'" fill="red"></g>\n        </g>\n    </g>\n</g>')},Je=B("stage"),Qe=B("textHud"),Ke=B("htmlInput"),$e=B("text"),et=B("selectRects"),tt=B("caretLine"),nt=B("startRange"),rt=B("range"),it=B("textListener"),at=B("preTime"),ot=B("blurTimer"),st=B("startIndex"),lt=B("endIndex"),ut=B("isSelecting"),ct=B("isDisabled"),dt=B("addCallBack"),ht=B("editCallBack"),pt=B("changeCallBack"),ft=B("keydownCallBack"),mt=B("quitCallBack"),vt=B("WATCH_ACTIONS"),gt=B("install"),yt=B("mousedown"),bt=B("mousemove"),xt=B("mouseup"),wt=B("keydown"),_t=B("focus"),Mt=B("blur"),St=B("change"),Et=B("textSelection"),Ct=B("textListen"),Tt=B("queryTextRect"),Lt=B("createNode"),At=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Qe,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,et,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,rt,{writable:!0,value:void 0}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:0}),Object.defineProperty(this,ot,{writable:!0,value:void 0}),Object.defineProperty(this,st,{writable:!0,value:0}),Object.defineProperty(this,lt,{writable:!0,value:0}),Object.defineProperty(this,ut,{writable:!0,value:!1}),Object.defineProperty(this,ct,{writable:!0,value:!0}),Object.defineProperty(this,dt,{writable:!0,value:void 0}),Object.defineProperty(this,ht,{writable:!0,value:void 0}),Object.defineProperty(this,pt,{writable:!0,value:void 0}),Object.defineProperty(this,ft,{writable:!0,value:void 0}),Object.defineProperty(this,mt,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:{ADD:Symbol(),EDIT:Symbol(),CHANGE:Symbol(),KEYDOWN:Symbol(),QUIT:Symbol()}}),Object.defineProperty(this,gt,{writable:!0,value:function(){var e,t,r,i,a;z(n,Qe)[Qe]=document.querySelector("#text-hud"),z(n,Ke)[Ke]=document.querySelector('[uid="html-input"]'),z(n,tt)[tt]=document.querySelector('[uid="caret-line"]'),z(n,et)[et]=document.querySelector('[uid="selection-rects"]'),null===(e=z(n,Ke)[Ke])||void 0===e||e.addEventListener("keydown",z(n,wt)[wt]),null===(t=z(n,Ke)[Ke])||void 0===t||t.addEventListener("input",z(n,St)[St]),null===(r=z(n,Ke)[Ke])||void 0===r||r.addEventListener("focus",z(n,_t)[_t]),null===(i=z(n,Ke)[Ke])||void 0===i||i.addEventListener("blur",z(n,Mt)[Mt]),null===(a=z(n,Je)[Je].stage)||void 0===a||a.addEventListener("mousedown",z(n,yt)[yt]),document.addEventListener("mousemove",z(n,bt)[bt]),document.addEventListener("mouseup",z(n,xt)[xt])}}),this.watch=function(e,t){e===n.actions().ADD?z(n,dt)[dt]=t:e===n.actions().EDIT?z(n,ht)[ht]=t:e===n.actions().CHANGE?z(n,pt)[pt]=t:e===n.actions().KEYDOWN?z(n,ft)[ft]=t:e===n.actions().QUIT&&(z(n,mt)[mt]=t)},this.add=function(e){var t;z(n,ct)[ct]||(null===(t=z(n,Je)[Je].history)||void 0===t||t.add(z(n,Je)[Je].history.actions().ADD,"\u6587\u672c"),setTimeout((function(){var t,r,i,a=e.offsetX,o=e.offsetY,s=null===(t=z(n,Je)[Je].canvas)||void 0===t?void 0:t.getMatrix().a,l=z(n,Lt)[Lt]("text"),u=Number(z(n,Je)[Je].options.fontSize)/s;l.setAttribute("font-size",u.toString()),l.setAttribute("font-family","MicrosoftYaHei,Microsoft YaHei,Microsoft YaHei"),l.style.whiteSpace="pre",z(n,Ct)[Ct](),l.append(document.createTextNode((null===(r=z(n,Je)[Je].options.textContent)||void 0===r?void 0:r.toString())||"")),z(n,Ke)[Ke].innerHTML=z(n,Je)[Je].options.textContent,z(n,Je)[Je].layer.append(l);var c=z(n,Je)[Je].layer.getCTM(),d=(a-c.e)/s,h=(o-c.f)/s;if(l.setAttribute("x",d.toFixed(9)),l.setAttribute("y",h.toFixed(9)),c.a!==c.d){var p=1/c.a*s,f=1/c.d*s,m=-(c.e-c.e)*p,v=-(c.f-c.f)*f;l.setAttribute("transform","matrix(\n            ".concat(p,",\n            ",0,",\n            ",0,",\n            ").concat(f,",\n            ").concat(m,",\n            ").concat(v,"\n          )"))}z(n,$e)[$e]=l,z(n,dt)[dt]&&z(n,dt)[dt](l),null===(i=z(n,Qe)[Qe])||void 0===i||i.setAttribute("inputmode","true"),z(n,Et)[Et](!0)})))},this.edit=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!z(n,ct)[ct]){if(e){e.stopPropagation();var i=e.clientX,a=e.clientY;z(n,rt)[rt]=document.caretRangeFromPoint(i,a)}z(n,$e)[$e]=t,z(n,Ct)[Ct](),n.closeRange(),z(n,Ke)[Ke].innerHTML="",z(n,$e)[$e].childNodes.forEach((function(e){var t=e;if("tspan"===t.localName){var r=document.createTextNode("\n");z(n,Ke)[Ke].append(r)}else{var i=t.cloneNode(!0);z(n,Ke)[Ke].append(i)}})),z(n,ut)[ut]=!1,z(n,nt)[nt]=z(n,rt)[rt],z(n,$e)[$e].onmousedown=function(e){e&&(z(n,ut)[ut]=!0)},e&&z(n,$e)[$e].onmousedown(e);z(n,$e)[$e].addEventListener("dblclick",(function e(){var t,r;"hidden"!==(null===(t=z(n,tt)[tt])||void 0===t?void 0:t.style.visibility)&&(z(n,Et)[Et](!0,!1,!0),null===(r=z(n,$e)[$e])||void 0===r||r.removeEventListener("dblclick",e))})),z(n,ht)[ht]&&z(n,ht)[ht](t),setTimeout((function(){var e;z(n,Et)[Et](r),null===(e=z(n,Qe)[Qe])||void 0===e||e.setAttribute("inputmode","true"),z(n,Ke)[Ke].focus()}))}},Object.defineProperty(this,yt,{writable:!0,value:function(e){if(0===e.button){var t=e.target;"text"===t.localName?null===n||void 0===n||n.edit(e,t):null===n||void 0===n||n.add(e)}}}),Object.defineProperty(this,bt,{writable:!0,value:function(e){var t;if(z(n,ut)[ut]){var r=e.clientX,i=e.clientY,a=null===(t=z(n,$e)[$e])||void 0===t?void 0:t.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,u=a.bottom,c=o<r&&r<l?r:r<o?o:l,d=s<i&&i<u?i:i<s?s:u;z(n,rt)[rt]=document.caretRangeFromPoint(c,d),z(n,Et)[Et](!1,!1)}}}),Object.defineProperty(this,xt,{writable:!0,value:function(){var e,t;if(z(n,nt)[nt]&&z(n,rt)[rt]&&z(n,ut)[ut]){z(n,ut)[ut]=!1,z(n,$e)[$e]&&(z(n,$e)[$e].onmousedown=null);var r=null===(e=z(n,nt)[nt])||void 0===e?void 0:e.startOffset,i=null===(t=z(n,rt)[rt])||void 0===t?void 0:t.endOffset,a=r,o=i,s=z(n,Ke)[Ke].childNodes[z(n,st)[st]],l=z(n,Ke)[Ke].childNodes[z(n,lt)[lt]];s===l&&(a=Math.min(r,i),o=Math.max(r,i));var u=2===s.compareDocumentPosition(l);u&&(a=i,o=r);var c=document.createRange();c.setStart(u?l:s,a),c.setEnd(u?s:l,o);var d=window.getSelection();null===d||void 0===d||d.removeAllRanges(),null===d||void 0===d||d.addRange(c)}}}),Object.defineProperty(this,wt,{writable:!0,value:function(e){if(e.stopPropagation(),z(n,ft)[ft]&&z(n,ft)[ft](e),z(n,$e)[$e]){e.ctrlKey&&"KeyA"===e.code?z(n,Et)[Et](!0):e.ctrlKey&&"KeyV"===e.code&&setTimeout((function(){z(n,St)[St]()})),27===e.keyCode&&(n.quit(),z(n,mt)[mt]&&z(n,mt)[mt]());[37,38,39,40].includes(e.keyCode)&&setTimeout((function(){z(n,St)[St]()}))}}}),Object.defineProperty(this,_t,{writable:!0,value:function(){var e;z(n,rt)[rt]&&""===(null===(e=z(n,et)[et])||void 0===e?void 0:e.innerHTML)&&z(n,tt)[tt]&&(clearTimeout(z(n,ot)[ot]),n.openCaretLine(),n.setCaretLine())}}),Object.defineProperty(this,Mt,{writable:!0,value:function(){z(n,ot)[ot]=setTimeout((function(){var e;null===(e=z(n,Qe)[Qe])||void 0===e||e.removeAttribute("inputmode")}),10)}}),Object.defineProperty(this,St,{writable:!0,value:function(){var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(z(n,$e)[$e]){n.closeRange();var i=window.getSelection(),a=null===(e=z(n,$e)[$e])||void 0===e?void 0:e.querySelector("tspan"),o=null===a||void 0===a?void 0:a.getAttribute("dy"),s=z(n,$e)[$e].getAttribute("x")||0,l=!1;""===z(n,Ke)[Ke].innerHTML&&(z(n,Ke)[Ke].innerHTML=" ",l=!0),-1!==z(n,Ke)[Ke].innerHTML.search("br")&&z(n,Ke)[Ke].childNodes.forEach((function(e){if(3!==e.nodeType)return e.remove()}));var u=null===(t=z(n,Ke)[Ke])||void 0===t?void 0:t.innerHTML.replace(/\n/gm,'<tspan x="'.concat(s,'" dy="').concat(o||"1em",'">&ZeroWidthSpace;</tspan>'));z(n,$e)[$e].innerHTML=u;try{var c,d=0;z(n,Ke)[Ke].childNodes.forEach((function(e,t){var r,a,o,s;(null!==(r=z(n,$e)[$e])&&void 0!==r&&null!==(a=r.childNodes[t])&&void 0!==a&&a.nextSibling||"\n"===(null===(o=e.nextSibling)||void 0===o?void 0:o.localName)||e.nextSibling&&(e.appendData(e.nextSibling.nodeValue),e.nextSibling.remove()),e===i.focusNode)&&(d=t,"\n"===(null===(s=e.previousSibling)||void 0===s?void 0:s.nodeValue)&&"\n"===e.nodeValue&&d--)}));var h,p=z(n,$e)[$e].childNodes[d],f="tspan"===(null===p||void 0===p?void 0:p.localName)?p.firstChild:p;if(z(n,rt)[rt]=document.createRange(),z(n,rt)[rt].setStart(f,i.focusOffset),z(n,rt)[rt].setEnd(f,i.focusOffset),z(n,tt)[tt])r&&(null===(h=z(n,Qe)[Qe])||void 0===h||h.setAttribute("inputmode","true"));n.openCaretLine(),n.setCaretLine(),z(n,pt)[pt]&&z(n,pt)[pt](),l&&z(n,Et)[Et](!0),null===(c=z(n,Je)[Je].select)||void 0===c||c.resetFrame(!0)}catch(m){console.error(m)}}}}),Object.defineProperty(this,Et,{writable:!0,value:function(){var e,t,r,i,a,o,s,l,u=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n.closeRange(),u){var h,p,f;n.closeCaretLine();var m=z(n,Ke)[Ke].firstChild,v=z(n,Ke)[Ke].lastChild,g=document.createRange();g.setStart(m,0),g.setEnd(v,v.textContent.length);var y=window.getSelection();null===y||void 0===y||y.removeAllRanges(),z(n,rt)[rt]=z(n,nt)[nt]=document.createRange();var b=null===(h=z(n,$e)[$e])||void 0===h?void 0:h.firstChild,x=null===(p=z(n,$e)[$e])||void 0===p?void 0:p.lastChild,w=null===(f=x.textContent)||void 0===f?void 0:f.length;z(n,rt)[rt].setStart(b,0),z(n,rt)[rt].setEnd(x,w),c||null===y||void 0===y||y.addRange(g)}var _=null===(e=z(n,Je)[Je].canvas)||void 0===e?void 0:e.getMatrix(),M=_.e,S=_.f,E=_.sx,C=_.sy,T=null===(t=z(n,Je)[Je].canvas)||void 0===t||null===(r=t.ownerSVGElement)||void 0===r?void 0:r.getBoundingClientRect(),L=T.left,A=T.top,P=null===(i=z(n,nt)[nt])||void 0===i?void 0:i.startContainer,O=null===(a=z(n,rt)[rt])||void 0===a?void 0:a.endContainer,R=null===(o=z(n,nt)[nt])||void 0===o?void 0:o.startOffset,N=null===(s=z(n,rt)[rt])||void 0===s?void 0:s.endOffset,k=-1,D=-1,I=-1;null===(l=z(n,$e)[$e])||void 0===l||l.childNodes.forEach((function(e,t){var r;if(3===e.nodeType){if(e===P&&(z(n,st)[st]=t),e===O&&(z(n,lt)[lt]=t),P===O&&(I=1,k=Math.min(R,N),D=Math.max(R,N)),4===P.compareDocumentPosition(O)){var i,a;if(I=2,e===P)k=R,D=Number(null===(i=e.textContent)||void 0===i?void 0:i.length);if(e===O&&(k=0,D=N),e!==P&&e!==O)k=0,D=Number(null===(a=e.textContent)||void 0===a?void 0:a.length)}if(2===P.compareDocumentPosition(O)){var o,s;if(I=3,e===P&&(k=0,D=R),e===O)k=N,D=Number(null===(o=e.textContent)||void 0===o?void 0:o.length);if(e!==P&&e!==O)k=0,D=Number(null===(s=e.textContent)||void 0===s?void 0:s.length)}1===I&&e!==P||2===I&&4===e.compareDocumentPosition(P)||2===I&&2===e.compareDocumentPosition(O)||3===I&&2===e.compareDocumentPosition(P)||3===I&&4===e.compareDocumentPosition(O)||null===(r=e.textContent)||void 0===r||r.split("").forEach((function(t,r){if(k<=r&&r+1<=D||d){var i,a=z(n,Tt)[Tt](e,r,r+1),o=a.x,s=a.y,l=a.width,u=a.height,c=z(n,Lt)[Lt]("rect"),h=(o-L-M)/E,p=(s-A-S)/C,f=l/E,m=u/C;c.setAttribute("x",h.toFixed(9)),c.setAttribute("y",p.toFixed(9)),c.setAttribute("width",f.toFixed(9)),c.setAttribute("height",m.toFixed(9)),null===(i=z(n,et)[et])||void 0===i||i.append(c)}}))}})),P===O&&k===D&&z(n,ut)[ut]?n.openCaretLine():n.closeCaretLine()}}),Object.defineProperty(this,Ct,{writable:!0,value:function(){setTimeout((function(){var e;z(n,$e)[$e]&&(null===(e=z(n,it)[it])||void 0===e||e.disconnect(),z(n,it)[it]=new MutationObserver((function(){n.autoSelection()})),z(n,$e)[$e]&&z(n,it)[it].observe(z(n,$e)[$e],{attributes:!0,subtree:!0}))}))}}),this.autoSelection=function(){var e,t,r,i=(new Date).getTime();if(!(i-z(n,at)[at]<20)){z(n,at)[at]=i;var a=null===(e=z(n,Qe)[Qe])||void 0===e?void 0:e.hasAttribute("inputmode");""!==(null===(t=z(n,et)[et])||void 0===t?void 0:t.innerHTML)&&z(n,Et)[Et](!1,!a),"visible"===(null===(r=z(n,tt)[tt])||void 0===r?void 0:r.style.visibility)&&(n.setCaretLine(),z(n,St)[St](a))}},this.closeRange=function(){z(n,et)[et]&&(z(n,et)[et].innerHTML="")},this.openCaretLine=function(){z(n,tt)[tt]&&(z(n,tt)[tt].style.visibility="visible")},this.closeCaretLine=function(){z(n,tt)[tt]&&(z(n,tt)[tt].style.visibility="hidden")},this.setCaretLine=function(){var e,t,r,i,a,o,s,l,u=null===(e=z(n,Je)[Je].canvas)||void 0===e||null===(t=e.ownerSVGElement)||void 0===t?void 0:t.getBoundingClientRect(),c=u.left,d=u.top,h=null===(r=z(n,rt)[rt])||void 0===r?void 0:r.getBoundingClientRect(),p=h.x,f=h.y,m=h.height,v=null===(i=z(n,Je)[Je].canvas)||void 0===i?void 0:i.getMatrix(),g=v.e,y=v.f,b=v.sx,x=v.sy,w=(p-c-g)/b,_=(f-d-y)/x;null===(a=z(n,tt)[tt])||void 0===a||a.setAttribute("x1",w.toFixed(9)),null===(o=z(n,tt)[tt])||void 0===o||o.setAttribute("y1",_.toFixed(9)),null===(s=z(n,tt)[tt])||void 0===s||s.setAttribute("x2",w.toFixed(9)),null===(l=z(n,tt)[tt])||void 0===l||l.setAttribute("y2",(_+m/x).toFixed(9))},Object.defineProperty(this,Tt,{writable:!0,value:function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n),a=document.createRange();return a.setStart(e,r),a.setEnd(e,i),a.getBoundingClientRect()}}),Object.defineProperty(this,Lt,{writable:!0,value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}),this.quit=function(){z(n,Ke)[Ke].blur(),n.closeRange(),n.closeCaretLine(),z(n,$e)[$e]&&(z(n,$e)[$e].onmousedown=null)},this.actions=function(){return z(n,vt)[vt]},this.disabled=function(e){z(n,ct)[ct]=e},this.uninstall=function(){var e,t,r,i,a;null===(e=z(n,Ke)[Ke])||void 0===e||e.removeEventListener("keydown",z(n,wt)[wt]),null===(t=z(n,Ke)[Ke])||void 0===t||t.removeEventListener("input",z(n,St)[St]),null===(r=z(n,Ke)[Ke])||void 0===r||r.removeEventListener("focus",z(n,_t)[_t]),null===(i=z(n,Ke)[Ke])||void 0===i||i.removeEventListener("blur",z(n,Mt)[Mt]),null===(a=z(n,Je)[Je].stage)||void 0===a||a.removeEventListener("mousedown",z(n,yt)[yt]),document.removeEventListener("mousemove",z(n,bt)[bt]),document.removeEventListener("mouseup",z(n,xt)[xt]),z(n,it)[it]&&z(n,it)[it].disconnect(),n.closeRange(),n.closeCaretLine(),z(n,nt)[nt]=z(n,rt)[rt]=void 0},!t)throw new Error("stage not found!");z(this,Je)[Je]=t,z(this,gt)[gt]()})),Pt=At,Ot=B("isDragging"),Rt=B("isFirst"),Nt=B("direction"),kt=B("startX"),Dt=B("startY"),It=B("un_shiftKey"),jt=B("mousemove"),zt=B("mouseup"),Ft=function(){function e(){var t=this;r(this,e),this.element=void 0,Object.defineProperty(this,Ot,{writable:!0,value:!1}),Object.defineProperty(this,Rt,{writable:!0,value:!0}),Object.defineProperty(this,Nt,{writable:!0,value:void 0}),Object.defineProperty(this,kt,{writable:!0,value:0}),Object.defineProperty(this,Dt,{writable:!0,value:0}),this.clientX=0,this.clientY=0,this.dataX=0,this.dataY=0,this.start=void 0,this.move=void 0,this.end=void 0,Object.defineProperty(this,It,{writable:!0,value:!1}),this.shiftKey=!1,this.stopPropagation=!1,this.mousedown=function(e){if(0===e.button){t.stopPropagation&&e.stopPropagation();var n=e.clientX,r=e.clientY;t.shiftKey=e.shiftKey,z(t,Ot)[Ot]=!0,z(t,kt)[kt]=n,z(t,Dt)[Dt]=r,t.start&&t.start(e,t.element)}},Object.defineProperty(this,jt,{writable:!0,value:function(e){if(z(t,Ot)[Ot]){t.stopPropagation&&e.stopPropagation();var n=e.clientX,r=e.clientY;t.shiftKey=e.shiftKey,t.dataX=n-z(t,kt)[kt],t.dataY=r-z(t,Dt)[Dt],0===t.dataX&&0===t.dataY&&(z(t,Rt)[Rt]=!0),e.shiftKey&&!z(t,It)[It]&&(z(t,Rt)[Rt]&&0!==t.dataX&&0!==t.dataY&&(z(t,Rt)[Rt]=!1,z(t,Nt)[Nt]=Math.abs(t.dataX)>Math.abs(t.dataY)?"h":"v"),"v"===z(t,Nt)[Nt]?t.dataX=0:"h"===z(t,Nt)[Nt]&&(t.dataY=0)),t.clientX=n,t.clientY=r,t.move&&t.move(t,t.element)}}}),Object.defineProperty(this,zt,{writable:!0,value:function(e){if(z(t,Ot)[Ot]){t.stopPropagation&&e.stopPropagation();var n=e.clientX,r=e.clientY;t.shiftKey=e.shiftKey,z(t,Rt)[Rt]=!0,z(t,Nt)[Nt]="",z(t,Ot)[Ot]=!1,t.dataX=n-z(t,kt)[kt],t.dataY=r-z(t,Dt)[Dt],t.end&&t.end(t,t.element)}}}),this.uninstall=function(){t.element.onmousedown=null,document.removeEventListener("mousemove",z(t,jt)[jt]),document.removeEventListener("mouseup",z(t,zt)[zt])}}return s(e,[{key:"install",value:function(e){var t=e.element,n=e.start,r=e.move,i=e.end,a=e.un_shiftKey,o=void 0!==a&&a;this.element=t,z(this,It)[It]=o,this.start=n,this.move=r,this.end=i,this.element.onmousedown=this.mousedown,document.addEventListener("mousemove",z(this,jt)[jt]),document.addEventListener("mouseup",z(this,zt)[zt])}}]),e}(),Bt=B("stage"),Ut=B("draggable"),Ht=B("startX"),Gt=B("startY"),Vt=B("install"),Wt=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Bt,{writable:!0,value:void 0}),Object.defineProperty(this,Ut,{writable:!0,value:void 0}),Object.defineProperty(this,Ht,{writable:!0,value:0}),Object.defineProperty(this,Gt,{writable:!0,value:0}),Object.defineProperty(this,Vt,{writable:!0,value:function(){z(n,Ut)[Ut]=new Ft,z(n,Ut)[Ut].install({element:z(n,Bt)[Bt].stage,start:function(){z(n,Ht)[Ht]=z(n,Bt)[Bt].matrix.e,z(n,Gt)[Gt]=z(n,Bt)[Bt].matrix.f,z(n,Bt)[Bt].stage.style.cursor="grabbing"},move:function(e){var t,r=z(n,Bt)[Bt].matrix,i=r.a,a=r.b,o=r.c,s=r.d,l=z(n,Ht)[Ht]+e.dataX,u=z(n,Gt)[Gt]+e.dataY;null===(t=z(n,Bt)[Bt].canvas)||void 0===t||t.setAttribute("transform","matrix(".concat(i,",").concat(a,",").concat(o,",").concat(s,",").concat(l,",").concat(u,")"))},end:function(){z(n,Bt)[Bt].stage.style.cursor="grab"}})}}),this.disabled=function(e){var t;e?null===(t=z(n,Ut)[Ut])||void 0===t||t.uninstall():z(n,Vt)[Vt]()},!t)throw new Error("stage not found!");z(this,Bt)[Bt]=t})),qt=Wt,Xt=B("stage"),Zt=B("isDragging"),Yt=B("splineHud"),Jt=B("grippiesGroup"),Qt=B("bezierHud"),Kt=B("bezierG"),$t=B("bezierP"),en=B("bezierL1"),tn=B("bezierL2"),nn=B("bezierC1"),rn=B("bezierC2"),an=B("splines"),on=B("isDrawing"),sn=B("checkedGrippie"),ln=B("startX"),un=B("startY"),cn=B("isDisabled"),dn=B("install"),hn=B("initGrippies"),pn=B("mousedown"),fn=B("mousemove"),mn=B("mouseup"),vn=B("createGrippies"),gn=B("unSelect"),yn=B("createSvgNode"),bn=B("typeParse"),xn=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,yn,{value:wn}),Object.defineProperty(this,Xt,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:!1}),Object.defineProperty(this,Yt,{writable:!0,value:void 0}),Object.defineProperty(this,Jt,{writable:!0,value:void 0}),Object.defineProperty(this,Qt,{writable:!0,value:void 0}),Object.defineProperty(this,Kt,{writable:!0,value:void 0}),Object.defineProperty(this,$t,{writable:!0,value:void 0}),Object.defineProperty(this,en,{writable:!0,value:void 0}),Object.defineProperty(this,tn,{writable:!0,value:void 0}),Object.defineProperty(this,nn,{writable:!0,value:void 0}),Object.defineProperty(this,rn,{writable:!0,value:void 0}),Object.defineProperty(this,an,{writable:!0,value:new Map}),Object.defineProperty(this,on,{writable:!0,value:!1}),Object.defineProperty(this,sn,{writable:!0,value:void 0}),Object.defineProperty(this,ln,{writable:!0,value:void 0}),Object.defineProperty(this,un,{writable:!0,value:void 0}),Object.defineProperty(this,cn,{writable:!0,value:!0}),Object.defineProperty(this,dn,{writable:!0,value:function(){var e,t,r;null===(e=z(n,Xt)[Xt].stage)||void 0===e||e.addEventListener("mousedown",z(n,pn)[pn]),document.addEventListener("mousemove",z(n,fn)[fn]),document.addEventListener("mouseup",z(n,mn)[mn]),z(n,Yt)[Yt]=document.querySelector("#spline-hud"),z(n,Jt)[Jt]=null===(t=z(n,Yt)[Yt])||void 0===t?void 0:t.querySelector("[uid='primary-node-grippies']"),z(n,Qt)[Qt]=document.querySelector("#cubic-bezier-seg-hud"),z(n,Kt)[Kt]=z(n,Qt)[Qt].querySelector("[uid='container']"),z(n,$t)[$t]=null===(r=z(n,Qt)[Qt])||void 0===r?void 0:r.querySelector("[uid='outline']"),z(n,en)[en]=z(n,Qt)[Qt].querySelector("[uid='control-line-1']"),z(n,tn)[tn]=z(n,Qt)[Qt].querySelector("[uid='control-line-2']"),z(n,nn)[nn]=z(n,Qt)[Qt].querySelector("[uid='control-point-1-grippie']"),z(n,rn)[rn]=z(n,Qt)[Qt].querySelector("[uid='control-point-2-grippie']")}}),Object.defineProperty(this,hn,{writable:!0,value:function(){var e,t=z(n,Xt)[Xt].matrix,r=t.a,i=t.e,a=t.f,o=new Me;null===(e=z(n,Xt)[Xt].select)||void 0===e||e.get().forEach((function(e){var t=e.node;if("path"===t.localName){var s=t.getAttribute("d").replaceAll(",",""),l=t.getCTM(),u=o.matrix(l.a,l.b,l.c,l.d,l.e,l.f).parse(s);u.forEach((function(e,o){if(1!==e.type){var l=e.x,c=e.y,d="mid";s.toLowerCase().includes("z")||s.toLowerCase().includes("m")?(2!==e.type||s.toLowerCase().includes("z")?o===u.length-1&&(d="end"):d="start",z(n,vn)[vn]((l-i)/r,(c-a)/r,d,t,o)):z(n,vn)[vn]((l-i)/r,(c-a)/r,d,t,o)}}))}}))}}),Object.defineProperty(this,pn,{writable:!0,value:function(e){var t,r,i,a;if(0===e.button&&!z(n,cn)[cn]){console.log(z(n,cn)[cn]),e.stopPropagation(),z(n,Zt)[Zt]=!0,z(n,Kt)[Kt].style.visibility="visible";var o=e.offsetX,s=e.offsetY,l=(e.clientX,e.clientY,null===(t=z(n,Xt)[Xt].svgRoot)||void 0===t?void 0:t.getMatrixIterator()),u=(o-l.e)/l.a,c=(s-l.f)/l.d;if(console.log("mousedown"),z(n,on)[on]){var d;if(z(n,ln)[ln]&&z(n,un)[un]){var h,p,f=z(n,yn)[yn]("path");f.setAttribute("style","fill:rgb(216, 216, 216);stroke:rgb(0, 0, 0)"),null===(h=z(n,Xt)[Xt].svgRoot)||void 0===h||h.append(f),null===(p=z(n,Xt)[Xt].select)||void 0===p||p.set(f,{node:f}),z(n,vn)[vn](z(n,ln)[ln],z(n,un)[un],"start",f,1),f.setAttribute("d","M ".concat(z(n,ln)[ln]," ").concat(z(n,un)[un]))}var m=z(n,an)[an].get(z(n,sn)[sn]).node,v=m.getAttribute("d");m.setAttribute("d","".concat(v," L ").concat(u," ").concat(c)),z(n,vn)[vn](u,c,"end",m,1);var g,y=null===(d=z(n,sn)[sn])||void 0===d?void 0:d.previousSibling;if("end"===y.getAttribute("data-position"))null===y||void 0===y||y.setAttribute("data-position","mid"),null===y||void 0===y||null===(g=y.querySelector(".inner-circle"))||void 0===g||g.remove();z(n,ln)[ln]=void 0,z(n,un)[un]=void 0}else z(n,on)[on]=!0,z(n,ln)[ln]=u,z(n,un)[un]=c;null===(r=z(n,nn)[nn])||void 0===r||r.setAttribute("cx",u.toFixed(9)),null===(i=z(n,nn)[nn])||void 0===i||i.setAttribute("cy",c.toFixed(9)),null===(a=z(n,$t)[$t])||void 0===a||a.setAttribute("d","M ".concat(u," ").concat(c," "))}}}),Object.defineProperty(this,fn,{writable:!0,value:function(e){var t,r;if("hidden"!==getComputedStyle(z(n,Kt)[Kt]).visibility){var i=e.clientX,a=e.clientY,o=null===(t=z(n,Xt)[Xt].stage)||void 0===t?void 0:t.getBoundingClientRect(),s=o.left,l=o.top,u=null===(r=z(n,Xt)[Xt].svgRoot)||void 0===r?void 0:r.getMatrixIterator(),c=(i-s-u.e)/u.a,d=(a-l-u.f)/u.d;if(!z(n,Zt)[Zt]){var h,p,f,m,v,g=null===(h=z(n,nn)[nn])||void 0===h?void 0:h.getAttribute("cx"),y=null===(p=z(n,nn)[nn])||void 0===p?void 0:p.getAttribute("cy");null===(f=z(n,$t)[$t])||void 0===f||f.setAttribute("d","M ".concat(g," ").concat(y," L ").concat(c," ").concat(d)),null===(m=z(n,rn)[rn])||void 0===m||m.setAttribute("cx",c.toFixed(9)),null===(v=z(n,rn)[rn])||void 0===v||v.setAttribute("cy",d.toFixed(9))}}}}),Object.defineProperty(this,mn,{writable:!0,value:function(){z(n,Zt)[Zt]=!1}}),Object.defineProperty(this,vn,{writable:!0,value:function(e,t,r,i,a){var o,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];z(n,gn)[gn]();var l=z(n,yn)[yn]("g");l.classList.add("primary-node-grippie"),null===l||void 0===l||l.setAttribute("data-position",r),s&&l.toggleAttribute("data-selected");var u=z(n,yn)[yn]("circle");if(u.classList.add("outer-circle"),u.setAttribute("cx",e.toFixed(9)),u.setAttribute("cy",t.toFixed(9)),u.setAttribute("r","5"),l.append(u),"mid"!==r){var c=z(n,yn)[yn]("circle");c.classList.add("inner-circle"),c.setAttribute("cx",e.toFixed(9)),c.setAttribute("cy",t.toFixed(9)),c.setAttribute("r","1.5"),l.append(c)}return z(n,an)[an].set(l,{node:i,index:a,pathData:""}),null===(o=z(n,Jt)[Jt])||void 0===o||o.append(l),z(n,sn)[sn]=l,(new Ft).install({element:l,start:function(){var e=z(n,an)[an].get(l),t=e.node,r=e.index,i=new Me,a=t.getAttribute("d").replaceAll(",",""),o=i.parse(a);z(n,an)[an].set(l,{node:t,index:r,pathData:o}),a.toLowerCase().includes("z")&&l.toggleAttribute("data-selected")},move:function(e){var t=e.dataX,r=e.dataY,i=z(n,an)[an].get(l),a=i.node,o=i.index,s=i.pathData,u=JSON.parse(JSON.stringify(s)).map((function(e,i){return o===i&&(e.x+=t,e.y+=r,l.childNodes.forEach((function(t){3!==t.nodeType&&(t.setAttribute("cx",e.x.toFixed(9)),t.setAttribute("cy",e.y.toFixed(9)))}))),"".concat(z(n,bn)[bn](e.type)," ").concat(e.x||""," ").concat(e.y||""," ")}));a.setAttribute("d",u)},end:function(){if(z(n,gn)[gn](),"start"===l.dataset.position){var e=z(n,an)[an].get(z(n,sn)[sn]).node,t=e.getAttribute("d");e.setAttribute("d",t+" Z"),n.closeBezierG(),z(n,on)[on]=!1}}}),l}}),Object.defineProperty(this,gn,{writable:!0,value:function(){document.querySelectorAll("[data-selected]").forEach((function(e){e.removeAttribute("data-selected")}))}}),this.closeBezierG=function(){var e,t,r,i,a;null===(e=z(n,Kt)[Kt])||void 0===e||e.setAttribute("style","visibility:hidden"),null===(t=z(n,nn)[nn])||void 0===t||t.setAttribute("cx","-9999999"),null===(r=z(n,nn)[nn])||void 0===r||r.setAttribute("cy","-9999999"),null===(i=z(n,rn)[rn])||void 0===i||i.setAttribute("cx","-9999999"),null===(a=z(n,rn)[rn])||void 0===a||a.setAttribute("cy","-9999999")},Object.defineProperty(this,bn,{writable:!0,value:function(e){return{1:"Z",2:"M",16:"L",32:"C"}[e]}}),this.disabled=function(e){z(n,cn)[cn]=e},this.uninstall=function(){var e;null===(e=z(n,Xt)[Xt].stage)||void 0===e||e.removeEventListener("mousedown",z(n,pn)[pn]),document.removeEventListener("mousemove",z(n,fn)[fn]),document.removeEventListener("mouseup",z(n,mn)[mn]),n.closeBezierG(),z(n,Jt)[Jt]&&(z(n,Jt)[Jt].innerHTML=""),z(n,an)[an].clear(),z(n,on)[on]=!1,z(n,ln)[ln]=void 0,z(n,un)[un]=void 0},!t)throw new Error("stage not found!");z(this,Xt)[Xt]=t,z(this,dn)[dn](),z(this,hn)[hn]()}));function wn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}var _n=xn,Mn=B("stage"),Sn=B("freehandLine"),En=B("isDrawing"),Cn=B("isMoveing"),Tn=B("point"),Ln=B("splineHud"),An=B("grippiesGroup"),Pn=B("pathPoint"),On=B("freeHand"),Rn=B("sTarget"),Nn=B("eTarget"),kn=B("startX"),Dn=B("startY"),In=B("shiftKey"),jn=B("isDisabled"),zn=B("install"),Fn=B("watch"),Bn=B("addNodes"),Un=B("removeNodes"),Hn=B("initGrippies"),Gn=B("createGrippies"),Vn=B("mousedown"),Wn=B("mousemove"),qn=B("mouseup"),Xn=B("convert2Path"),Zn=B("l2c"),Yn=B("smoothControlPoints"),Jn=B("createSvgNode"),Qn=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Jn,{value:nr}),Object.defineProperty(this,Yn,{value:tr}),Object.defineProperty(this,Gn,{value:er}),Object.defineProperty(this,Hn,{value:$n}),Object.defineProperty(this,zn,{value:Kn}),Object.defineProperty(this,Mn,{writable:!0,value:void 0}),Object.defineProperty(this,Sn,{writable:!0,value:void 0}),Object.defineProperty(this,En,{writable:!0,value:!1}),Object.defineProperty(this,Cn,{writable:!0,value:!1}),Object.defineProperty(this,Tn,{writable:!0,value:void 0}),Object.defineProperty(this,Ln,{writable:!0,value:void 0}),Object.defineProperty(this,An,{writable:!0,value:void 0}),Object.defineProperty(this,Pn,{writable:!0,value:new Map}),Object.defineProperty(this,On,{writable:!0,value:new Map}),Object.defineProperty(this,Rn,{writable:!0,value:void 0}),Object.defineProperty(this,Nn,{writable:!0,value:void 0}),Object.defineProperty(this,kn,{writable:!0,value:0}),Object.defineProperty(this,Dn,{writable:!0,value:0}),Object.defineProperty(this,In,{writable:!0,value:!1}),Object.defineProperty(this,jn,{writable:!0,value:!0}),Object.defineProperty(this,Fn,{writable:!0,value:function(){var e;z(n,Mn)[Mn].watch(z(n,Mn)[Mn].actions().UPDATED,(function(e){z(n,jn)[jn]||e.forEach((function(e){z(n,Bn)[Bn](e),z(n,Un)[Un](e)}))})),null===(e=z(n,Mn)[Mn].history)||void 0===e||e.watch((function(e){var t;z(n,Mn)[Mn].currentType===z(n,Mn)[Mn].tools().FREEHAND&&e!==(null===(t=z(n,Mn)[Mn].history)||void 0===t?void 0:t.actions().ADD)&&(n.reset(),n.clearPoints(),n.clearGrippies(),z(n,Hn)[Hn]())}))}}),Object.defineProperty(this,Bn,{writable:!0,value:function(e){e.addedNodes.forEach((function(e){var t=e;z(n,Hn)[Hn](t)}))}}),Object.defineProperty(this,Un,{writable:!0,value:function(e){e.removedNodes.forEach((function(e){var t,r;null===(t=z(n,On)[On])||void 0===t||null===(r=t.get(e))||void 0===r||r.forEach((function(e){e.remove()}))}))}}),Object.defineProperty(this,Vn,{writable:!0,value:function(e){var t;if(0===e.button&&!z(n,jn)[jn]){z(n,En)[En]=!0;var r=e.clientX,i=e.clientY,a=e.target;null!==(t=z(n,An)[An])&&void 0!==t&&t.contains(a)&&(z(n,Rn)[Rn]=a),z(n,kn)[kn]=r,z(n,Dn)[Dn]=i}}}),Object.defineProperty(this,Wn,{writable:!0,value:function(e){var t,r;if(z(n,En)[En]){var i=e.clientX,a=e.clientY,o=e.shiftKey;o&&(z(n,In)[In]=o),Math.abs(i)+Math.abs(a)>2&&(z(n,Cn)[Cn]=!0);var s=z(n,Sn)[Sn];z(n,Tn)[Tn]=s.ownerSVGElement.createSVGPoint();var l=null===(t=z(n,Mn)[Mn].stage)||void 0===t?void 0:t.getBoundingClientRect(),u=l.x,c=l.y,d=null===(r=z(n,Mn)[Mn].canvas)||void 0===r?void 0:r.getMatrix(),h=d.sx,p=d.sy,f=d.e,m=d.f;if(z(n,Tn)[Tn].x=(i-u-f)/h,z(n,Tn)[Tn].y=(a-c-m)/p,z(n,In)[In]){var v,g,y,b,x,w=s.ownerSVGElement.createSVGPoint();if(w.x=(z(n,kn)[kn]-u-f)/h,w.y=(z(n,Dn)[Dn]-c-m)/p,z(n,Sn)[Sn]&&(null===(v=z(n,Sn)[Sn])||void 0===v?void 0:v.points.length)>1)n.clearPoints(),null===(g=z(n,Sn)[Sn])||void 0===g||g.points.appendItem(w),null===(y=z(n,Sn)[Sn])||void 0===y||y.points.appendItem(z(n,Tn)[Tn]);else null===(b=z(n,Sn)[Sn])||void 0===b||b.points.appendItem(w),null===(x=z(n,Sn)[Sn])||void 0===x||x.points.appendItem(z(n,Tn)[Tn])}else{var _;null===(_=z(n,Sn)[Sn])||void 0===_||_.points.appendItem(z(n,Tn)[Tn])}}}}),Object.defineProperty(this,qn,{writable:!0,value:function(e){var t,r,i,a;if(z(n,En)[En]){if(z(n,En)[En]=!1,!z(n,Cn)[Cn])return z(n,In)[In]=!1,n.clearPoints(),z(n,Rn)[Rn]=void 0,z(n,Nn)[Nn]=void 0,void(z(n,Cn)[Cn]=!1);z(n,Cn)[Cn]=!1;var o=null===(t=z(n,Sn)[Sn])||void 0===t?void 0:t.getPathData(),s=e.target,l=null===(r=z(n,Mn)[Mn].stage)||void 0===r?void 0:r.getBoundingClientRect(),u=l.x,c=l.y,d=null===(i=z(n,Mn)[Mn].canvas)||void 0===i?void 0:i.getMatrix(),h=d.sx,p=d.sy,f=d.e,m=d.f,v=(e.clientX-u-f)/h,g=(e.clientY-c-m)/p;if(null!==(a=z(n,An)[An])&&void 0!==a&&a.contains(s)&&(z(n,Nn)[Nn]=s),z(n,Rn)[Rn]||z(n,Nn)[Nn]){var y,b,x,w,_,M,S,E;null===(y=z(n,Mn)[Mn].history)||void 0===y||y.add(z(n,Mn)[Mn].history.actions().EDIT,"\u624b\u7ed8");var C=z(n,Pn)[Pn].get(null===(b=z(n,Rn)[Rn])||void 0===b?void 0:b.parentNode),T=z(n,Pn)[Pn].get(null===(x=z(n,Nn)[Nn])||void 0===x?void 0:x.parentNode),L=null===(w=z(n,Rn)[Rn])||void 0===w||null===(_=w.parentElement)||void 0===_?void 0:_.dataset.position,A=null===(M=z(n,Nn)[Nn])||void 0===M||null===(S=M.parentElement)||void 0===S?void 0:S.dataset.position;if(C===T){var P,O,R,N,k;z(n,In)[In]&&"start"===A&&o.pop();var D=C.getAttribute("d"),I="",j=C.getCTM(),F=null===(P=z(n,Mn)[Mn].canvas)||void 0===P?void 0:P.getCTM(),B=j.a/F.a,U=j.d/F.d;if("start"===L){D=D.replace("M","L"),o.reverse();var H=o[0].values[0],G=o[0].values[1];I+="M ".concat((H-(j.e-F.e)/F.a)/B," ").concat((G-(j.f-F.f)/F.d)/U," "),z(n,In)[In]?I+=z(n,Xn)[Xn](o,F,F):I+=z(n,Zn)[Zn](o,j,F)}else o.shift(),z(n,In)[In]?D+=z(n,Xn)[Xn](o,j,F):D+=z(n,Zn)[Zn](o,j,F);C.setAttribute("d",I+D+"Z"),null===(O=z(n,Rn)[Rn])||void 0===O||null===(R=O.parentElement)||void 0===R||R.remove(),null===(N=z(n,Nn)[Nn])||void 0===N||null===(k=N.parentElement)||void 0===k||k.remove()}else{if(C&&T)return void console.log("merge");if(!C||!T){if("start"===L||"start"===A){var V,W,q,X="start"===L,Z=C||T,Y=Z.getCTM(),J=null===(V=z(n,Mn)[Mn].canvas)||void 0===V?void 0:V.getCTM(),Q=Y.a/J.a,K=Y.d/J.d,$=Z.getAttribute("d");$=$.replace("M","L");var ee="";X&&o.reverse();var te=o[0].values[0],ne=o[0].values[1];ee+="M ".concat((te-(Y.e-J.e)/J.a)/Q," ").concat((ne-(Y.f-J.f)/J.d)/K," "),z(n,In)[In]?ee+=z(n,Xn)[Xn](o,Y,J):ee+=z(n,Zn)[Zn](o,Y,J),Z.setAttribute("d",ee+$);var re=(null===(W=z(n,Rn)[Rn])||void 0===W?void 0:W.parentNode)||(null===(q=z(n,Nn)[Nn])||void 0===q?void 0:q.parentNode),ie=o[0].values[0],ae=o[0].values[1];null===re||void 0===re||re.childNodes.forEach((function(e){if(3!==e.nodeType){var t=e;null===t||void 0===t||t.setAttribute("cx",X?v.toFixed(9):ie.toFixed(9)),null===t||void 0===t||t.setAttribute("cy",X?g.toFixed(9):ae.toFixed(9))}}))}if("end"===L||"end"===A){var oe,se,le,ue="end"===L,ce=C||T,de=ce.getAttribute("d"),he=ce.getCTM(),pe=null===(oe=z(n,Mn)[Mn].canvas)||void 0===oe?void 0:oe.getCTM();ue||o.reverse(),z(n,In)[In]?de+=z(n,Xn)[Xn](o,he,pe):de+=z(n,Zn)[Zn](o,he,pe),ce.setAttribute("d",de);var fe=o[o.length-1].values[0],me=o[o.length-1].values[1],ve=(null===(se=z(n,Rn)[Rn])||void 0===se?void 0:se.parentNode)||(null===(le=z(n,Nn)[Nn])||void 0===le?void 0:le.parentNode);null===ve||void 0===ve||ve.childNodes.forEach((function(e){3!==e.nodeType&&(null===e||void 0===e||e.setAttribute("cx",ue?v.toFixed(9):fe.toFixed(9)),null===e||void 0===e||e.setAttribute("cy",ue?g.toFixed(9):me.toFixed(9)))}))}}}null===(E=z(n,Mn)[Mn].history)||void 0===E||E.end()}else{var ge,ye,be,xe,we="";if(z(n,In)[In])for(var _e=0;_e<o.length;_e++)we+="".concat(0===_e?"M":"L"," ").concat(o[_e].values[0]," ").concat(o[_e].values[1]," ");else{var Me=o[0].values[0],Se=o[0].values[1];we+="M ".concat(Me," ").concat(Se," "),we+=z(n,Zn)[Zn](o,{a:1,b:0,c:0,d:1,e:0,f:0},{a:1,b:0,c:0,d:1,e:0,f:0})}null===(ge=z(n,Mn)[Mn].history)||void 0===ge||ge.add(z(n,Mn)[Mn].history.actions().ADD,"\u624b\u7ed8");var Ee=z(n,Jn)[Jn]("path");Ee.setAttribute("d",we),Ee.setAttribute("fill",z(n,Mn)[Mn].options.fill||"rgb(216, 216, 216)"),Ee.setAttribute("stroke",z(n,Mn)[Mn].options.stroke||"rgb(0, 0, 0)"),null===(ye=z(n,Mn)[Mn].svgRoot)||void 0===ye||ye.append(Ee),null===(be=z(n,Mn)[Mn].select)||void 0===be||be.set(Ee,{node:Ee}),null===(xe=z(n,Mn)[Mn].select)||void 0===xe||xe.resetFrame(!0)}z(n,In)[In]=!1,n.clearPoints(),z(n,Rn)[Rn]=void 0,z(n,Nn)[Nn]=void 0}}}),Object.defineProperty(this,Xn,{writable:!0,value:function(e,t,n){var r="",i=t.a/n.a,a=t.d/n.d;return e.forEach((function(e){r+="L \n      ".concat((e.values[0]-(t.e-n.e)/n.d)/i," \n      ").concat((e.values[1]-(t.f-n.f)/n.a)/a," ")})),r}}),Object.defineProperty(this,Zn,{writable:!0,value:function(e,t,r){for(var i="",a={x:e[0].values[0],y:e[0].values[1]},o=a,s=t.a/r.a,l=t.d/r.d,u=1;u<=e.length-2;u++){var c=e[u],d={x:c.values[0],y:c.values[1]},h={x:e[u+1].values[0],y:e[u+1].values[1]},p=z(n,Yn)[Yn](a,d,h),f=p[0];i+="C ".concat((o.x-(t.e-r.e)/r.a)/s," ").concat((o.y-(t.f-r.f)/r.d)/l," ").concat((f.x-(t.e-r.e)/r.a)/s," ").concat((f.y-(t.f-r.f)/r.d)/l," ").concat((d.x-(t.e-r.e)/r.a)/s," ").concat((d.y-(t.f-r.f)/r.d)/l," "),o=p[1],a=d}return i}}),this.reset=function(){z(n,Pn)[Pn].clear(),z(n,On)[On].clear()},this.clearPoints=function(){var e;null===(e=z(n,Sn)[Sn])||void 0===e||e.points.clear()},this.clearGrippies=function(){z(n,An)[An]&&(z(n,An)[An].innerHTML="")},this.disabled=function(e){z(n,jn)[jn]=e,e?(n.reset(),n.clearPoints(),n.clearGrippies()):z(n,Hn)[Hn]()},!t)throw new Error("stage not found!");z(this,Mn)[Mn]=t,z(this,zn)[zn]()}));function Kn(){var e,t;null===(e=z(this,Mn)[Mn].stage)||void 0===e||e.addEventListener("mousedown",z(this,Vn)[Vn]),document.addEventListener("mousemove",z(this,Wn)[Wn]),document.addEventListener("mouseup",z(this,qn)[qn]),z(this,Ln)[Ln]=document.querySelector("#spline-hud"),z(this,An)[An]=null===(t=z(this,Ln)[Ln])||void 0===t?void 0:t.querySelector("[uid='primary-node-grippies']"),z(this,Sn)[Sn]=document.querySelector("#freehand-hud polyline"),z(this,Fn)[Fn]()}function $n(e){var t,n=this;null===(t=z(this,Mn)[Mn].select)||void 0===t||t.checkedsPaths().forEach((function(t){var r;if((!e||e===t)&&!t.getAttribute("d").toLowerCase().includes("z")){var i=t,a=i.getPathData(),o=a[0].values[0],s=a[0].values[1],l=a[a.length-1],u="C"===l.type?l.values[4]:l.values[0],c="C"===l.type?l.values[5]:l.values[1],d=t.getCTM(),h=null===(r=z(n,Mn)[Mn].canvas)||void 0===r?void 0:r.getCTM(),p=d.a/h.a,f=d.d/h.d,m=(1-p)*o,v=(1-f)*s,g=(1-p)*u,y=(1-f)*c,b=(d.e-h.e)/h.a,x=(d.f-h.f)/h.d,w=o+b-m,_=s+x-v,M=u+b-g,S=c+x-y,E=z(n,Gn)[Gn](w,_,"start",i),C=z(n,Gn)[Gn](M,S,"end",i);z(n,On)[On].set(i,[E,C])}}))}function er(e,t,n,r){var i,a=z(this,Jn)[Jn]("g");a.classList.add("primary-node-grippie"),a.setAttribute("data-position",n);var o=z(this,Jn)[Jn]("circle");o.classList.add("outer-circle");var s=z(this,Jn)[Jn]("circle");s.classList.add("inner-circle"),o.setAttribute("cx",e.toFixed(9)),o.setAttribute("cy",t.toFixed(9)),s.setAttribute("cx",e.toFixed(9)),s.setAttribute("cy",t.toFixed(9));var l=(z(this,Mn)[Mn].options.outerCircleSize||5)/z(this,Mn)[Mn].matrix.a,u=(z(this,Mn)[Mn].options.innerCircleSize||1.5)/z(this,Mn)[Mn].matrix.a;return o.setAttribute("r",l.toFixed(9)),s.setAttribute("r",u.toFixed(9)),null===(i=z(this,An)[An])||void 0===i||i.append(a),a.append(o),a.append(s),z(this,Pn)[Pn].set(a,r),a}function tr(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,o=n.y-t.y,s=Math.atan2(i,r),l=Math.atan2(o,a),u=Math.sqrt(r*r+i*i),c=Math.sqrt(a*a+o*o),d={x:0,y:0},h={x:0,y:0};s<0&&(s+=2*Math.PI),l<0&&(l+=2*Math.PI);var p,f,m=Math.abs(s-l),v=Math.abs(Math.PI-m)/2;return s-l>0?(p=m<Math.PI?s+v:s-v,f=m<Math.PI?l-v:l+v):(p=m<Math.PI?s-v:s+v,f=m<Math.PI?l+v:l-v),d.x=u*Math.cos(p)/3+t.x,d.y=u*Math.sin(p)/3+t.y,h.x=c*Math.cos(f)/3+t.x,h.y=c*Math.sin(f)/3+t.y,[d,h]}function nr(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}var rr=Qn,ir=B("stage"),ar=B("isDraging"),or=B("viewHud"),sr=B("subhuds"),lr=B("view"),ur=B("viewObserver"),cr=B("cacheX"),dr=B("cacheY"),hr=B("cacheWidth"),pr=B("cacheHeight"),fr=B("draggable"),mr=B("isDisabled"),vr=B("callback"),gr=B("install"),yr=B("scaleWatch"),br=B("initEvent"),xr=B("listenViewResize"),wr=B("adjustViewGrippie"),_r=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,gr,{value:Mr}),Object.defineProperty(this,ir,{writable:!0,value:void 0}),Object.defineProperty(this,ar,{writable:!0,value:!1}),Object.defineProperty(this,or,{writable:!0,value:void 0}),Object.defineProperty(this,sr,{writable:!0,value:void 0}),Object.defineProperty(this,lr,{writable:!0,value:void 0}),Object.defineProperty(this,ur,{writable:!0,value:void 0}),Object.defineProperty(this,cr,{writable:!0,value:0}),Object.defineProperty(this,dr,{writable:!0,value:0}),Object.defineProperty(this,hr,{writable:!0,value:0}),Object.defineProperty(this,pr,{writable:!0,value:0}),Object.defineProperty(this,fr,{writable:!0,value:void 0}),Object.defineProperty(this,mr,{writable:!0,value:!1}),Object.defineProperty(this,vr,{writable:!0,value:void 0}),Object.defineProperty(this,yr,{writable:!0,value:function(){z(n,wr)[wr]()}}),Object.defineProperty(this,br,{writable:!0,value:function(){var e;null===(e=z(n,sr)[sr])||void 0===e||e.childNodes.forEach((function(e){var t;if(3!==e.nodeType){var r=e;z(n,fr)[fr]=new Ft,null===(t=z(n,fr)[fr])||void 0===t||t.install({element:r,start:function(){var e,t,i,a;z(n,ar)[ar]=!0;var o=r.getMatrix(),s=o.e,l=o.f;r.setAttribute("e",s),r.setAttribute("f",l),z(n,hr)[hr]=Number(null===(e=z(n,lr)[lr])||void 0===e?void 0:e.getAttribute("width")),z(n,pr)[pr]=Number(null===(t=z(n,lr)[lr])||void 0===t?void 0:t.getAttribute("height")),z(n,cr)[cr]=Number(null===(i=z(n,lr)[lr])||void 0===i?void 0:i.getAttribute("x")),z(n,dr)[dr]=Number(null===(a=z(n,lr)[lr])||void 0===a?void 0:a.getAttribute("y"))},move:function(e){var t,i,a,o,s,l,u,c,d,h,p,f;if(z(n,ar)[ar]){var m=r.getAttribute("data-position"),v=e.dataX/z(n,ir)[ir].matrix.a,g=e.dataY/z(n,ir)[ir].matrix.d;switch(m){case"top-left":null===(t=z(n,lr)[lr])||void 0===t||t.setAttribute("x",(z(n,cr)[cr]+v).toFixed(9)),null===(i=z(n,lr)[lr])||void 0===i||i.setAttribute("width",(z(n,hr)[hr]-v).toFixed(9)),null===(a=z(n,lr)[lr])||void 0===a||a.setAttribute("y",(z(n,dr)[dr]+g).toFixed(9)),null===(o=z(n,lr)[lr])||void 0===o||o.setAttribute("height",(z(n,pr)[pr]-g).toFixed(9));break;case"top-right":null===(s=z(n,lr)[lr])||void 0===s||s.setAttribute("width",(z(n,hr)[hr]+v).toFixed(9)),null===(l=z(n,lr)[lr])||void 0===l||l.setAttribute("y",(z(n,dr)[dr]+g).toFixed(9)),null===(u=z(n,lr)[lr])||void 0===u||u.setAttribute("height",(z(n,pr)[pr]-g).toFixed(9));break;case"bottom-left":null===(c=z(n,lr)[lr])||void 0===c||c.setAttribute("x",(z(n,cr)[cr]+v).toFixed(9)),null===(d=z(n,lr)[lr])||void 0===d||d.setAttribute("width",(z(n,hr)[hr]-v).toFixed(9)),null===(h=z(n,lr)[lr])||void 0===h||h.setAttribute("height",(z(n,pr)[pr]+g).toFixed(9));break;case"bottom-right":null===(p=z(n,lr)[lr])||void 0===p||p.setAttribute("width",(z(n,hr)[hr]+v).toFixed(9)),null===(f=z(n,lr)[lr])||void 0===f||f.setAttribute("height",(z(n,pr)[pr]+g).toFixed(9))}}},end:function(){z(n,ar)[ar]&&(z(n,ar)[ar]=!1)}})}}))}}),this.watch=function(e){z(n,vr)[vr]=e},Object.defineProperty(this,xr,{writable:!0,value:function(){z(n,ur)[ur]=new MutationObserver((function(){var e,t;z(n,wr)[wr](),null===(e=(t=z(n,vr))[vr])||void 0===e||e.call(t)})),z(n,lr)[lr]&&z(n,ur)[ur].observe(z(n,lr)[lr],{attributes:!0,attributeFilter:["x","y","width","height"]})}}),Object.defineProperty(this,wr,{writable:!0,value:function(){var e,t,r;if(!z(n,mr)[mr]){var i=null===(e=z(n,lr)[lr])||void 0===e?void 0:e.getBoundingClientRect(),a=i.x,o=i.y,s=i.right,l=i.bottom,u=null===(t=z(n,ir)[ir].stage)||void 0===t?void 0:t.getBoundingClientRect(),c=u.left,d=u.top,h=z(n,ir)[ir].matrix,p=h.a,f=h.d,m=h.e,v=h.f,g=15;null===(r=z(n,sr)[sr])||void 0===r||r.childNodes.forEach((function(e){if(3!==e.nodeType){var t=e,n=t.getAttribute("data-position"),r=0,i=0,u=1/p,h=1/f;switch(n){case"top-left":r=(a-c-m)/p-u*g,i=(o-d-v)/f-h*g;break;case"top-right":r=(s-c-m)/p-u*g,i=(o-d-v)/f-h*g;break;case"bottom-left":r=(a-c-m)/p-u*g,i=(l-d-v)/f-h*g;break;case"bottom-right":r=(s-c-m)/p-u*g,i=(l-d-v)/f-h*g}t.setAttribute("transform","matrix(".concat(u,",0,0,").concat(h,",").concat(r,",").concat(i,")"))}}))}}}),this.disabled=function(e){z(n,mr)[mr]=e,z(n,or)[or]&&(z(n,or)[or].setAttribute("style","visibility : ".concat(e?"hidden":"visible")),z(n,wr)[wr]())},this.uninstall=function(){var e,t;z(n,ir)[ir].removeWatch(z(n,ir)[ir].actions().SCALE,z(n,yr)[yr]),null===(e=z(n,fr)[fr])||void 0===e||e.uninstall(),null===(t=z(n,ur)[ur])||void 0===t||t.disconnect()},!t)throw new Error("stage not found!");z(this,ir)[ir]=t,z(this,gr)[gr](),z(this,wr)[wr](),z(this,xr)[xr]()}));function Mr(){var e;z(this,or)[or]=document.querySelector("#view-hud"),z(this,sr)[sr]=null===(e=z(this,or)[or])||void 0===e?void 0:e.querySelector("[uid='subhuds']"),z(this,lr)[lr]=document.querySelector("#background-outlines rect"),z(this,br)[br](),z(this,ir)[ir].watch(z(this,ir)[ir].actions().SCALE,z(this,yr)[yr])}var Sr=_r,Er=B("stage"),Cr=B("outline"),Tr=B("install"),Lr=B("mousemove"),Ar=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Er,{writable:!0,value:void 0}),Object.defineProperty(this,Cr,{writable:!0,value:void 0}),Object.defineProperty(this,Tr,{writable:!0,value:function(){var e;z(n,Cr)[Cr]=document.querySelector("#outline-hud [uid='outline']"),null===(e=z(n,Er)[Er].stage)||void 0===e||e.addEventListener("mousemove",z(n,Lr)[Lr])}}),Object.defineProperty(this,Lr,{writable:!0,value:function(e){var t,r,i;if(!(null!==(t=z(n,Er)[Er].select)&&void 0!==t&&t.isDragging()||null!==(r=z(n,Er)[Er].resize)&&void 0!==r&&r.isResizing())){var a;if(z(n,Er)[Er].currentType===z(n,Er)[Er].tools().SELECT)for(var o,s,l=e.path||e.composedPath(),u=null===(o=z(n,Er)[Er].layer)||void 0===o||null===(s=o.children)||void 0===s?void 0:s.length,c=0;c<u;c++)for(var d=l.length,h=0;h<d;h++){var p;l[h]===(null===(p=z(n,Er)[Er].layer)||void 0===p?void 0:p.children[c])&&(a=l[h])}else if(z(n,Er)[Er].currentType===z(n,Er)[Er].tools().ASELECT&&"g"!==(null===(i=e.target)||void 0===i?void 0:i.localName)||z(n,Er)[Er].currentType===z(n,Er)[Er].tools().TEXT){var f;"text"!==(null===(f=a=e.target)||void 0===f?void 0:f.localName)&&z(n,Er)[Er].currentType===z(n,Er)[Er].tools().TEXT&&(a=null)}if(a instanceof SVGElement){var m,v;if("none"===window.getComputedStyle(a).pointerEvents)return;if(null!==(m=z(n,Er)[Er].select)&&void 0!==m&&m.has(a))return;if(null===(v=z(n,Er)[Er].svgRoot)||void 0===v||!v.contains(a))return;n.highLight(a)}}}}),this.highLight=function(e){var t,r,i,a;if(e){var o="",s=e.getBBox(),l=s.x,u=s.y,c=s.width,d=s.height;switch(null===(t=z(n,Cr)[Cr])||void 0===t||t.removeAttribute("transform"),e.localName){case"path":o=e.getAttribute("d");break;case"ellipse":case"circle":var h=l+c/2,p=u+d/2,f=c/2,m=d/2;o="M ".concat(h-f," ").concat(p,"\n             A ").concat(f," ").concat(m," 0 0 1 ").concat(h+f," ").concat(p,"\n             A ").concat(f," ").concat(m," 0 0 1 ").concat(h," ").concat(p+m,"\n             A ").concat(f," ").concat(m," 0 0 1 ").concat(h-f," ").concat(p,"\n         Z");break;case"line":var v=e.getAttribute("x1"),g=e.getAttribute("y1"),y=e.getAttribute("x2"),b=e.getAttribute("y2");o="M ".concat(v," ").concat(g," L ").concat(y," ").concat(b," Z");break;case"polyline":case"polygon":for(var x=0;x<e.points.numberOfItems;x+=1){var w=e.points.getItem(x);o+="".concat(0===x?"M":"L"," ").concat(w.x," ").concat(w.y," ")}o+="Z";break;default:o="M ".concat(l," ").concat(u,"\n            H ").concat(l+c," V ").concat(u+d,"\n            H ").concat(l," V ").concat(u,"\n          Z")}var _=e.getCTM(),M=null===(r=z(n,Er)[Er].canvas)||void 0===r?void 0:r.getCTM();null===(i=z(n,Cr)[Cr])||void 0===i||i.setAttribute("transform","matrix(\n      ".concat(_.a/M.a,",\n      ").concat(_.b/M.a,",\n      ").concat(_.c/M.d,",\n      ").concat(_.d/M.d,",\n      ").concat((_.e-M.e)/M.a,",\n      ").concat((_.f-M.f)/M.d,")")),null===(a=z(n,Cr)[Cr])||void 0===a||a.setAttribute("d",o),e.onmouseout=n.closeOutline}},this.closeOutline=function(){var e;null===(e=z(n,Cr)[Cr])||void 0===e||e.removeAttribute("d")},this.disabled=function(e){e?n.uninstall():z(n,Tr)[Tr]()},this.uninstall=function(){document.removeEventListener("mousemove",z(n,Lr)[Lr])},!t)throw"stage not found!";z(this,Er)[Er]=t,z(this,Tr)[Tr]()})),Pr=Ar;function Or(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rr=B("stage"),Nr=B("isDisabled"),kr=B("text2HTML"),Dr=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Rr,{writable:!0,value:void 0}),Object.defineProperty(this,Nr,{writable:!0,value:!1}),this.cut=function(){var e,t,r,i;0===(null===(e=z(n,Rr)[Rr].select)||void 0===e?void 0:e.size())||z(n,Nr)[Nr]||(n.copy(),null===(t=z(n,Rr)[Rr].select)||void 0===t||t.get().forEach((function(e){return e.node.remove()})),null===(r=z(n,Rr)[Rr].select)||void 0===r||r.clear(),null===(i=z(n,Rr)[Rr].select)||void 0===i||i.reset())},this.copy=function(){var e,t,r;if(0!==(null===(e=z(n,Rr)[Rr].select)||void 0===e?void 0:e.size())&&!z(n,Nr)[Nr]){var i="",a="";null===(t=z(n,Rr)[Rr].select)||void 0===t||t.get().forEach((function(e){i+=e.node.outerHTML}));var o=null===(r=z(n,Rr)[Rr].svgRoot)||void 0===r?void 0:r.querySelector("defs");null===o||void 0===o||o.childNodes.forEach((function(e){i.includes(e.id)&&(a+=e.outerHTML)}));var s="text/plain",l=o?"<svg>".concat("<defs>".concat(a,"</defs>"),i,"</svg>"):"<svg>".concat(i,"</svg>"),u=new Blob([l],{type:s}),c=[new ClipboardItem(Or({},s,u))];window.navigator.clipboard.write(c)}},this.paste=M(w().mark((function e(){var t,r,i,a,o,s,l,u,c;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z(n,Nr)[Nr]){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e,t,r,i,a,o;null===(e=z(n,Rr)[Rr].history)||void 0===e||e.add(z(n,Rr)[Rr].history.actions().ADD,"\u7c98\u8d34");var s=z(n,Rr)[Rr].matrix.a,l=null===(t=z(n,Rr)[Rr].stage)||void 0===t?void 0:t.getBoundingClientRect(),u=null===(r=z(n,Rr)[Rr].select)||void 0===r||null===(i=r.frame())||void 0===i?void 0:i.getBoundingClientRect(),c=l.x+l.width/2,d=l.y+l.height/2,h=u.x+u.width/2,p=u.y+u.height/2,f=(c-h)/s,m=(d-p)/s;null===(a=z(n,Rr)[Rr].select)||void 0===a||a.get().forEach((function(e){var t=e.node,n=t.getMatrix();(null===t||void 0===t?void 0:t.querySelectorAll("text")).forEach((function(e){e.style.whiteSpace="pre"})),t.setAttribute("transform","matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e+f,",").concat(n.f+m,")"))})),null===(o=z(n,Rr)[Rr].select)||void 0===o||o.resetFrame(!0)},r=function(e){var r,i,a,o,s=e.replace(/\t/g,"").replace(/[\n]/gm,'<tspan x="'.concat(0,'" dy="',"1em",'">&ZeroWidthSpace;</tspan>')),l=new eo({x:0,y:0,content:s.replace("\n",""),fontSize:z(n,Rr)[Rr].options.fontSize});z(n,Rr)[Rr].currentType===z(n,Rr)[Rr].tools().SELECT?z(n,Rr)[Rr].layer.append(l.node):null===(o=z(n,Rr)[Rr].svgRoot)||void 0===o||o.append(l.node);null===(r=z(n,Rr)[Rr].select)||void 0===r||r.reset(),null===(i=z(n,Rr)[Rr].select)||void 0===i||i.set(l.node,{node:l.node}),null===(a=z(n,Rr)[Rr].select)||void 0===a||a.resetFrame(!0),t()},i=function(e){var r,i;null===(r=z(n,Rr)[Rr].select)||void 0===r||r.reset(),null===e||void 0===e||e.childNodes.forEach((function(e){var t,r;(e=e.cloneNode(!0),z(n,Rr)[Rr].currentType===z(n,Rr)[Rr].tools().SELECT)?z(n,Rr)[Rr].layer.append(e):null===(r=z(n,Rr)[Rr].svgRoot)||void 0===r||r.append(e);z(n,Rr)[Rr].CAN_CEHCKED_NODE.includes(e.localName)&&(null===(t=z(n,Rr)[Rr].select)||void 0===t||t.set(e,{node:e}))})),null===(i=z(n,Rr)[Rr].select)||void 0===i||i.resetFrame(!0),t()},a=function(e){var r=new Image;r.src=e,r.onload=function(){var i,a,o,s,l=r.width,u=r.height,c=new to({href:e,x:0,y:0,width:l,height:u});z(n,Rr)[Rr].currentType===z(n,Rr)[Rr].tools().SELECT?z(n,Rr)[Rr].layer.append(c.node):null===(s=z(n,Rr)[Rr].svgRoot)||void 0===s||s.append(c.node);null===(i=z(n,Rr)[Rr].select)||void 0===i||i.reset(),null===(a=z(n,Rr)[Rr].select)||void 0===a||a.set(c.node,{node:c.node}),null===(o=z(n,Rr)[Rr].select)||void 0===o||o.resetFrame(!0),t()}},e.next=8,n.pasteTypes();case 8:o=e.sent,s=o.type,l=o.text,u=o.svg,c=o.href,e.t0=s,e.next="text/plain"===e.t0?16:"text/html"===e.t0?18:"image/png"===e.t0?20:22;break;case 16:return r(l),e.abrupt("break",22);case 18:return i(u),e.abrupt("break",22);case 20:return a(c),e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),this.pasteTypes=function(){return new Promise(function(){var e=M(w().mark((function e(t){var r,i,a,o,s,l,u,c,d,h,p,f;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.read();case 2:if(r=e.sent,!(i=r[0]).types.includes("image/png")){e.next=20;break}return e.next=7,i.getType("text/plain");case 7:return a=e.sent,e.next=10,a.text();case 10:if(!(o=e.sent).includes("</svg>")){e.next=13;break}return e.abrupt("return",t(z(n,kr)[kr](o)));case 13:return e.next=15,i.getType("image/png");case 15:s=e.sent,l=URL.createObjectURL(s),t({type:"image/png",href:l}),e.next=49;break;case 20:if(!i.types.includes("text/html")){e.next=39;break}return e.next=23,i.getType("text/plain");case 23:return u=e.sent,e.next=26,u.text();case 26:if(c=e.sent,console.log(c),!c.includes("</svg>")){e.next=30;break}return e.abrupt("return",t(z(n,kr)[kr](c)));case 30:return e.next=32,i.getType("text/plain");case 32:return d=e.sent,e.next=35,d.text();case 35:h=e.sent,t({type:"text/plain",text:h}),e.next=49;break;case 39:if(!i.types.includes("text/plain")){e.next=49;break}return e.next=42,i.getType("text/plain");case 42:return p=e.sent,e.next=45,p.text();case 45:if(!(f=e.sent).includes("</svg>")){e.next=48;break}return e.abrupt("return",t(z(n,kr)[kr](f)));case 48:t({type:"text/plain",text:f});case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Object.defineProperty(this,kr,{writable:!0,value:function(e){return{type:"text/html",svg:(new DOMParser).parseFromString(e,"text/html").body.querySelector("svg")}}}),this.disabled=function(e){z(n,Nr)[Nr]=e},!t)throw new Error("stage not found!");z(this,Rr)[Rr]=t})),Ir=Dr,jr=B("stage"),zr=B("reprs"),Fr=B("smartDistance"),Br=B("checkeds"),Ur=B("checkedsTexts"),Hr=B("checkedsPaths"),Gr=B("checkedsGroups"),Vr=B("exCludeGroupFirst"),Wr=B("uncheckeds"),qr=B("frame"),Xr=B("cacheRect"),Zr=B("startX"),Yr=B("startY"),Jr=B("cacheX"),Qr=B("cahceY"),Kr=B("focusNode"),$r=B("once"),ei=B("isMousedown"),ti=B("isDragging"),ni=B("isMoving"),ri=B("isDrawingRubber"),ii=B("canDrawRubber"),ai=B("isDisabled"),oi=B("disableDeletion"),si=B("isDisDrag"),li=B("smartGuides"),ui=B("callback"),ci=B("frameCallback"),di=B("dragBeforeCallback"),hi=B("timer"),pi=B("timeout"),fi=B("listen"),mi=B("WATCH_ACTIONS"),vi=B("install"),gi=B("listenerFrame"),yi=B("dblclick"),bi=B("mousedown"),xi=B("mousemove"),wi=B("mouseup"),_i=B("drawRubber"),Mi=B("drawRubberEnd"),Si=B("setRubberhand"),Ei=B("expandArea"),Ci=B("setGrippiePosition"),Ti=B("autoHighLight"),Li=B("comparePosition"),Ai=B("smartLine"),Pi=B("nodeMatrix"),Oi=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Si,{value:Ri}),Object.defineProperty(this,jr,{writable:!0,value:void 0}),Object.defineProperty(this,zr,{writable:!0,value:void 0}),Object.defineProperty(this,Fr,{writable:!0,value:10}),Object.defineProperty(this,Br,{writable:!0,value:new Map}),Object.defineProperty(this,Ur,{writable:!0,value:new Map}),Object.defineProperty(this,Hr,{writable:!0,value:new Map}),Object.defineProperty(this,Gr,{writable:!0,value:new Map}),Object.defineProperty(this,Vr,{writable:!0,value:SVGElement}),Object.defineProperty(this,Wr,{writable:!0,value:[]}),Object.defineProperty(this,qr,{writable:!0,value:void 0}),Object.defineProperty(this,Xr,{writable:!0,value:void 0}),Object.defineProperty(this,Zr,{writable:!0,value:0}),Object.defineProperty(this,Yr,{writable:!0,value:0}),Object.defineProperty(this,Jr,{writable:!0,value:0}),Object.defineProperty(this,Qr,{writable:!0,value:0}),Object.defineProperty(this,Kr,{writable:!0,value:void 0}),Object.defineProperty(this,$r,{writable:!0,value:!1}),Object.defineProperty(this,ei,{writable:!0,value:!1}),Object.defineProperty(this,ti,{writable:!0,value:!1}),Object.defineProperty(this,ni,{writable:!0,value:!1}),Object.defineProperty(this,ri,{writable:!0,value:!1}),Object.defineProperty(this,ii,{writable:!0,value:!1}),Object.defineProperty(this,ai,{writable:!0,value:!1}),Object.defineProperty(this,oi,{writable:!0,value:!1}),Object.defineProperty(this,si,{writable:!0,value:!1}),Object.defineProperty(this,li,{writable:!0,value:!0}),Object.defineProperty(this,ui,{writable:!0,value:void 0}),Object.defineProperty(this,ci,{writable:!0,value:void 0}),Object.defineProperty(this,di,{writable:!0,value:void 0}),Object.defineProperty(this,hi,{writable:!0,value:void 0}),Object.defineProperty(this,pi,{writable:!0,value:10}),Object.defineProperty(this,fi,{writable:!0,value:void 0}),Object.defineProperty(this,mi,{writable:!0,value:{SELECTED:Symbol(),FRAME_RECT:Symbol(),DRAG_BEFORE:Symbol()}}),Object.defineProperty(this,vi,{writable:!0,value:function(){var e,t;z(n,zr)[zr]=document.querySelector("#smart-guides-hud g"),z(n,qr)[qr]=document.querySelector('[uid="frame-select"]'),null===(e=z(n,jr)[jr].stage)||void 0===e||e.addEventListener("dblclick",z(n,yi)[yi]),null===(t=z(n,jr)[jr].stage)||void 0===t||t.addEventListener("mousedown",z(n,bi)[bi]),document.addEventListener("mousemove",z(n,xi)[xi]),document.addEventListener("mouseup",z(n,wi)[wi])}}),this.watch=function(e,t){e===n.actions().SELECTED?z(n,ui)[ui]=t:e===n.actions().FRAME_RECT?z(n,ci)[ci]=t:e===n.actions().DRAG_BEFORE&&(z(n,di)[di]=t)},Object.defineProperty(this,gi,{writable:!0,value:function(){z(n,fi)[fi]=new MutationObserver((function(){var e,t;null===(e=(t=z(n,ci))[ci])||void 0===e||e.call(t)})),z(n,fi)[fi].observe(n.frame(),{attributes:!0,attributeFilter:["x","y","transform"]})}}),Object.defineProperty(this,yi,{writable:!0,value:function(e){if(0===e.button){var t=e.target;z(n,jr)[jr].currentType===z(n,jr)[jr].tools().SELECT?1===n.size()&&"g"===n.first().node.localName?(z(n,jr)[jr].switchLayer(n.first().node),n.reset(),z(n,Ti)[Ti](e)):1===n.size()&&"text"===n.first().node.localName?z(n,jr)[jr].tool(z(n,jr)[jr].tools().TEXT,!0):0===n.size()&&(z(n,jr)[jr].switchLayer(),n.reset()):z(n,jr)[jr].currentType===z(n,jr)[jr].tools().ASELECT&&"text"===t.localName&&z(n,jr)[jr].tool(z(n,jr)[jr].tools().TEXT,!0)}}}),Object.defineProperty(this,bi,{writable:!0,value:function(e){var t;z(n,jr)[jr].currentType!==z(n,jr)[jr].tools().SELECT&&z(n,jr)[jr].currentType!==z(n,jr)[jr].tools().ASELECT||z(n,ai)[ai]||null!==(t=z(n,jr)[jr].resize)&&void 0!==t&&t.isResizing()||(z(n,ei)[ei]=!0,z(n,ii)[ii]=!1,z(n,Kr)[Kr]=n.areaFocus(e),z(n,Kr)[Kr]&&0===e.button&&(z(n,$r)[$r]=!0),z(n,Kr)[Kr]||2===e.button||(z(n,ii)[ii]=!0),z(n,Zr)[Zr]=e.clientX,z(n,Yr)[Yr]=e.clientY)}}),Object.defineProperty(this,xi,{writable:!0,value:function(e){if(z(n,ei)[ei]){z(n,ii)[ii]&&z(n,_i)[_i](e);var t,r,i=e.clientX,a=e.clientY,o=e.shiftKey;if(Math.abs(z(n,Zr)[Zr]-i)+Math.abs(z(n,Yr)[Yr]-a)>=4&&z(n,$r)[$r]&&z(n,Kr)[Kr])z(n,$r)[$r]=!1,o||n.has(z(n,Kr)[Kr])||n.clear(),n.set(z(n,Kr)[Kr],{node:z(n,Kr)[Kr]}),null===(t=(r=z(n,di))[di])||void 0===t||t.call(r),z(n,si)[si]||n.drag(e,z(n,Kr)[Kr])}}}),Object.defineProperty(this,wi,{writable:!0,value:function(e){z(n,ei)[ei]&&(z(n,ei)[ei]=!1,z(n,Mi)[Mi](e),z(n,Kr)[Kr]&&!n.has(z(n,Kr)[Kr])&&(e.shiftKey||n.has(z(n,Kr)[Kr])||n.clear(),n.set(z(n,Kr)[Kr],{node:z(n,Kr)[Kr]}),n.resetFrame(!0)))}}),this.drag=function(e,t){var r,i,a;z(n,Wr)[Wr]=[z(n,jr)[jr].boardView];var o=t,s=new Ft,l=(null===(r=z(n,qr)[qr])||void 0===r||null===(i=r.parentNode)||void 0===i?void 0:i.getCTM()).a,u=null===(a=z(n,jr)[jr].stage)||void 0===a?void 0:a.getBoundingClientRect(),c=u.left,d=u.top;s.install({element:o,start:function(){var e,r,i,a,o;z(n,ti)[ti]=!0;var s,l=[],u=[],h=null===(e=z(n,jr)[jr].canvas)||void 0===e?void 0:e.getCTM();n.get().forEach((function(e){var t=e.node,n=t.parentNode;s||(s=n),e.CTM=n.getCTM(),e.matrix=t.getMatrix(),e.box=t.getBoundingClientRect();var r=e.box,i=(r.x-c-h.e)/h.a,a=(r.right-c-h.e)/h.a,o=(r.y-d-h.f)/h.d,p=(r.bottom-d-h.f)/h.d;l.push(i,a),u.push(o,p)})),z(n,Wr)[Wr]=[].concat(H(z(n,Wr)[Wr]),H(null===(r=s)||void 0===r?void 0:r.childNodes));var p=Math.max.apply(null,l),f=Math.min.apply(null,l),m=Math.max.apply(null,u),v=Math.min.apply(null,u),g=p-f,y=m-v;n.setFrame(f,v,g,y),n.has(t)||n.toggleFrame(!0),z(n,Ci)[Ci](f,v,p,m,g,y),z(n,Jr)[Jr]=Number(null===(i=z(n,qr)[qr])||void 0===i?void 0:i.getAttribute("x")),z(n,Qr)[Qr]=Number(null===(a=z(n,qr)[qr])||void 0===a?void 0:a.getAttribute("y")),z(n,Xr)[Xr]=null===(o=z(n,qr)[qr])||void 0===o?void 0:o.getBoundingClientRect()},move:function(e){var t,r,i;if(z(n,ti)[ti]){z(n,zr)[zr]&&(z(n,zr)[zr].innerHTML="");var a,o=e.dataX,s=e.dataY;if(!z(n,ni)[ni])null===(a=z(n,jr)[jr].history)||void 0===a||a.add(z(n,jr)[jr].history.actions().MOUSE_MOVE,"\u9f20\u6807\u79fb\u52a8"),n.toggleFrame(!1),z(n,ni)[ni]=!0;null===(t=z(n,jr)[jr].hover)||void 0===t||t.closeOutline();var u=z(n,Li)[Li](o,s),c=u.sDx,d=u.sDy;n.get().forEach((function(e){var t=e.node,n=e.CTM,r=e.matrix,i=n.a*n.d,a=n.b*n.c,l=n.d/(i-a)*(o+c),u=n.a/(i-a)*(s+d),h=l-u/n.a*n.c,p=u-l/n.d*n.b,f=(r.e+h).toFixed(9),m=(r.f+p).toFixed(9),v=r.a,g=r.b,y=r.c,b=r.d;t.setAttribute("transform","matrix(".concat(v,",").concat(g,",").concat(y,",").concat(b,",").concat(f,",").concat(m,")"))}));var h=(z(n,Jr)[Jr]+(c+o)/l).toFixed(9),p=(z(n,Qr)[Qr]+(d+s)/l).toFixed(9);null===(r=z(n,qr)[qr])||void 0===r||r.setAttribute("x",h),null===(i=z(n,qr)[qr])||void 0===i||i.setAttribute("y",p),n.resetFrame(!1)}},end:function(){z(n,ti)[ti]&&(z(n,zr)[zr]&&(z(n,zr)[zr].innerHTML=""),setTimeout((function(){z(n,ti)[ti]=!1,z(n,ni)[ni]=!1})),null===s||void 0===s||s.uninstall(),n.resetFrame(!0))}}),null===s||void 0===s||s.mousedown(e)},Object.defineProperty(this,_i,{writable:!0,value:function(e){var t,r;if(!(null!==(t=z(n,jr)[jr].resize)&&void 0!==t&&t.isResizing()||z(n,ti)[ti])){var i=null===(r=z(n,jr)[jr].stage)||void 0===r?void 0:r.getBoundingClientRect(),a=i.left,o=i.top,s=z(n,jr)[jr].matrix,l=[(z(n,Zr)[Zr]-a-s.e)/s.a,(e.clientX-a-s.e)/s.a],u=[(z(n,Yr)[Yr]-o-s.f)/s.a,(e.clientY-o-s.f)/s.a],c=Math.max.apply(null,l),d=Math.min.apply(null,l),h=Math.max.apply(null,u),p=Math.min.apply(null,u),f=c-d,m=h-p;z(n,Si)[Si](d,p,f,m),z(n,ri)[ri]=!0}}}),Object.defineProperty(this,Mi,{writable:!0,value:function(e){var t,r;if(z(n,ri)[ri]&&(setTimeout((function(){z(n,ri)[ri]=!1})),(z(n,Zr)[Zr]!==e.clientX||z(n,Yr)[Yr]!==e.clientY)&&(null===(t=z(n,jr)[jr].resize)||void 0===t||!t.isResizing()))){!e.shiftKey&&n.size()>0&&n.clear();var i=document.querySelector('[uid="rubber-hand"]'),a=null===i||void 0===i?void 0:i.getBoundingClientRect(),o=[],s=[];if(z(n,jr)[jr].currentType===z(n,jr)[jr].tools().SELECT)for(var l=z(n,jr)[jr].layer.children.length,u=0;u<l;u++){var c=z(n,jr)[jr].layer.children[u],d=c.getBoundingClientRect();("none"!==window.getComputedStyle(c).pointerEvents&&z(n,jr)[jr].CAN_CEHCKED_NODE.includes(c.localName)&&n.checkIntersect(a,d)||e.shiftKey&&n.has(c))&&(o.push(d.x,d.right),s.push(d.y,d.bottom),n.set(c,{node:c}))}else for(var h=document.createNodeIterator(z(n,jr)[jr].svgRoot,NodeFilter.SHOW_ELEMENT),p=h.nextNode();null!==p;){var f=p.getBoundingClientRect();("none"!==window.getComputedStyle(p).pointerEvents&&z(n,jr)[jr].CAN_CEHCKED_NODE.includes(p.localName)&&n.checkIntersect(a,f)&&"g"!==p.localName||e.shiftKey&&n.has(p))&&(o.push(f.x,f.right),s.push(f.y,f.bottom),n.set(p,{node:p})),p=h.nextNode()}var m=z(n,jr)[jr].matrix,v=m.a,g=m.e,y=m.f,b=null===(r=z(n,jr)[jr].stage)||void 0===r?void 0:r.getBoundingClientRect(),x=b.left,w=b.top,_=(Math.min.apply(null,o)-x-g)/v,M=(Math.max.apply(null,o)-x-g)/v,S=(Math.min.apply(null,s)-w-y)/v,E=(Math.max.apply(null,s)-w-y)/v;n.setFrame(Math.abs(_)===1/0?0:_,Math.abs(S)===1/0?0:S,Math.abs(M-_)===1/0?0:M-_,Math.abs(E-S)===1/0?0:E-S),z(n,Si)[Si](0,0,0,0),n.resetFrame(!1)}}}),this.nodesRemove=function(){var e,t;0===(null===n||void 0===n?void 0:n.size())||z(n,oi)[oi]||(null===(e=z(n,jr)[jr].history)||void 0===e||e.add(z(n,jr)[jr].history.actions().DELETE,"\u5220\u9664"),n.get().forEach((function(e){return e.node.remove()})),n.clear(),n.reset(),null===(t=z(n,jr)[jr].history)||void 0===t||t.end())},this.reset=function(){var e;n.clear(),n.setFrame(0,0,0,0),null===(e=z(n,jr)[jr].text)||void 0===e||e.quit()},this.checkedsTexts=function(){return z(n,Ur)[Ur]},this.checkedsPaths=function(){return z(n,Hr)[Hr]},this.checkedsGroups=function(){return z(n,Gr)[Gr]},this.exCludeGroupFirst=function(){return z(n,Vr)[Vr]},this.set=function(e,t){switch(e.localName){case"text":z(n,Ur)[Ur].set(e,e);break;case"path":z(n,Hr)[Hr].set(e,e);break;case"g":z(n,Gr)[Gr].set(e,e),e.querySelectorAll("text").forEach((function(e){z(n,Ur)[Ur].set(e,e)})),e.querySelectorAll("path").forEach((function(e){z(n,Hr)[Hr].set(e,e)}))}z(n,Br)[Br].set(e,t),"g"===e.localName||z(n,Vr)[Vr]||(z(n,Vr)[Vr]=t),clearTimeout(z(n,hi)[hi]),z(n,hi)[hi]=setTimeout((function(){var e,t;null===(e=(t=z(n,ui))[ui])||void 0===e||e.call(t)}),z(n,pi)[pi])},this.has=function(e){return z(n,Br)[Br].has(e)},this.get=function(){return z(n,Br)[Br]},this.item=function(e){return z(n,Br)[Br].get(e)},this.first=function(){return n.item(z(n,Br)[Br].keys().next().value)},this.size=function(){return z(n,Br)[Br].size},this.delete=function(e){switch(e.localName){case"text":z(n,Ur)[Ur].delete(e);break;case"path":z(n,Hr)[Hr].delete(e);break;case"g":z(n,Gr)[Gr].delete(e),e.querySelectorAll("text").forEach((function(e){z(n,Ur)[Ur].delete(e)})),e.querySelectorAll("path").forEach((function(e){z(n,Hr)[Hr].delete(e)}))}z(n,Br)[Br].delete(e),clearTimeout(z(n,hi)[hi]),z(n,hi)[hi]=setTimeout((function(){var e,t;null===(e=(t=z(n,ui))[ui])||void 0===e||e.call(t)}),z(n,pi)[pi])},this.clear=function(){z(n,Br)[Br].clear(),z(n,Ur)[Ur].clear(),z(n,Hr)[Hr].clear(),z(n,Gr)[Gr].clear(),z(n,Vr)[Vr]=void 0,clearTimeout(z(n,hi)[hi]),z(n,hi)[hi]=setTimeout((function(){var e,t;null===(e=(t=z(n,ui))[ui])||void 0===e||e.call(t)}),z(n,pi)[pi])},this.frame=function(){return z(n,qr)[qr]},this.areaFocus=function(e){var t,r=z(n,Ei)[Ei](e.clientX,e.clientY);if(z(n,jr)[jr].currentType===z(n,jr)[jr].tools().SELECT){var i=z(n,jr)[jr].layer.children.length;e:for(var a=0;a<r.length;a++)for(var o=document.elementFromPoint(r[a].x,r[a].y),s=0;s<i;s++)if(z(n,jr)[jr].layer.children[s].contains(o)){t=z(n,jr)[jr].layer.children[s];break e}}else for(var l=0;l<r.length;l++){var u,c=r[l],d=document.elementFromPoint(c.x,c.y);if(null!==(u=z(n,jr)[jr].svgRoot)&&void 0!==u&&u.contains(d)&&"g"!==(null===d||void 0===d?void 0:d.localName)){t=d;break}}if(t){if("none"!==window.getComputedStyle(t).pointerEvents)return t}else e.shiftKey||n.reset()},Object.defineProperty(this,Ei,{writable:!0,value:function(e,t){var n=[];n.push({x:e,y:t});for(var r=1;r<=3;r++)n.push({x:e-r,y:t-r}),n.push({x:e,y:t-1}),n.push({x:e+r,y:t+r}),n.push({x:e-r,y:t}),n.push({x:e+r,y:t}),n.push({x:e-r,y:t+r}),n.push({x:e,y:t+r}),n.push({x:e+r,y:t+r});return n}}),this.resetFrame=function(e){var t,r;if(null===(t=z(n,jr)[jr].hover)||void 0===t||t.closeOutline(),n.size()<1)return n.reset();var i=[],a=[],o=z(n,jr)[jr].matrix,s=null===(r=z(n,jr)[jr].stage)||void 0===r?void 0:r.getBoundingClientRect(),l=s.left,u=s.top;if(e)n.get().forEach((function(e){var t=e.node;"text"!==t.localName&&(t.style.vectorEffect="none",t.style.strokeWidth="");var r=t.getBoundingClientRect(),s=(r.x-l-o.e)/o.a,c=(r.right-l-o.e)/o.a,d=(r.y-u-o.f)/o.a,h=(r.bottom-u-o.f)/o.a;i.push(s,c),a.push(d,h),z(n,Pi)[Pi](e.node)}));else{var c,d=null===(c=z(n,qr)[qr])||void 0===c?void 0:c.getBoundingClientRect(),h=((null===d||void 0===d?void 0:d.x)-l-o.e)/o.a,p=((null===d||void 0===d?void 0:d.right)-l-o.e)/o.a,f=((null===d||void 0===d?void 0:d.y)-u-o.f)/o.a,m=((null===d||void 0===d?void 0:d.bottom)-u-o.f)/o.a;i.push(h,p),a.push(f,m)}var v=Math.max.apply(null,i),g=Math.min.apply(null,i),y=Math.max.apply(null,a),b=Math.min.apply(null,a),x=v-g,w=y-b;e&&n.setFrame(g,b,x,w),z(n,Ci)[Ci](g,b,v,y,x,w)},this.setFrame=function(e,t,r,i){var a=z(n,qr)[qr];a.setAttribute("x",e.toFixed(9)),a.setAttribute("y",t.toFixed(9)),a.setAttribute("width",Math.abs(r).toFixed(9)),a.setAttribute("height",Math.abs(i).toFixed(9)),r>0&&i>0&&(z(n,jr)[jr].currentType===z(n,jr)[jr].tools().SELECT||z(n,jr)[jr].currentType===z(n,jr)[jr].tools().ASELECT)?n.toggleFrame(!1):n.toggleFrame(!0)},this.toggleFrame=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=document.querySelector('[uid="origin-grippie"]'),a=document.querySelector('[uid="scale-grippies"]');r?(null===(e=z(n,qr)[qr])||void 0===e||e.setAttribute("opacity","0"),i.style.visibility="hidden",a.style.visibility="hidden"):(null===(t=z(n,qr)[qr])||void 0===t||t.removeAttribute("opacity"),i.style.visibility="visible",a.style.visibility="visible")},Object.defineProperty(this,Ci,{writable:!0,value:function(e,t,r,i,a,o){var s=document.querySelector("#transform-hud"),l=null===s||void 0===s?void 0:s.querySelectorAll(".grippie"),u=Number(l[0].getAttribute("width")),c=(e-u/2+a/2).toFixed(9),d=(t-u/2).toFixed(9);l[0].setAttribute("x",c),l[0].setAttribute("y",d);var h=(e-u/2).toFixed(9),p=(t-u/2+o/2).toFixed(9);l[1].setAttribute("x",h),l[1].setAttribute("y",p);var f=(e-u/2+a/2).toFixed(9),m=(t-u/2+o).toFixed(9);l[2].setAttribute("x",f),l[2].setAttribute("y",m);var v=(e-u/2+a).toFixed(9),g=(t-u/2+o/2).toFixed(9);l[3].setAttribute("x",v),l[3].setAttribute("y",g);var y=(e-u/2).toFixed(9),b=(t-u/2).toFixed(9);l[4].setAttribute("x",y),l[4].setAttribute("y",b);var x=(r-u/2).toFixed(9),w=(t-u/2).toFixed(9);l[5].setAttribute("x",x),l[5].setAttribute("y",w);var _=(e-u/2).toFixed(9),M=(i-u/2).toFixed(9);l[6].setAttribute("x",_),l[6].setAttribute("y",M);var S=(r-u/2).toFixed(9),E=(i-u/2).toFixed(9);l[7].setAttribute("x",S),l[7].setAttribute("y",E);var C=(z(n,jr)[jr].options.grippieSize||11)/z(n,jr)[jr].matrix.a,T=e-C/2+a/2,L=t-C/2+o/2,A=document.querySelector('[uid="origin-grippie"]');null===A||void 0===A||A.setAttribute("x",T.toFixed(9)),null===A||void 0===A||A.setAttribute("y",L.toFixed(9))}}),Object.defineProperty(this,Ti,{writable:!0,value:function(e){var t=e.path||e.composedPath();e:for(var r=0;r<t.length;r++)for(var i=0;i<z(n,jr)[jr].layer.children.length;i++){var a,o;if(t[r]instanceof Node&&null!==(a=z(n,jr)[jr].layer)&&void 0!==a&&null!==(o=a.children[i])&&void 0!==o&&o.contains(t[r])){var s,l;null===(s=z(n,jr)[jr].hover)||void 0===s||s.highLight(null===(l=z(n,jr)[jr].layer)||void 0===l?void 0:l.children[i]);break e}}}}),Object.defineProperty(this,Li,{writable:!0,value:function(e,t){var r,i,a,o,s,l=0,u=0;if(!z(n,li)[li])return{sDx:l,sDy:u};var c=z(n,jr)[jr].matrix,d=c.a,h=c.e,p=c.f,f=null===(r=z(n,jr)[jr].stage)||void 0===r?void 0:r.getBoundingClientRect(),m=f.left,v=f.top,g=void 0,y=void 0,b=Number(null===(i=z(n,Xr)[Xr])||void 0===i?void 0:i.x)+e,x=Number(null===(a=z(n,Xr)[Xr])||void 0===a?void 0:a.right)+e,w=Number(null===(o=z(n,Xr)[Xr])||void 0===o?void 0:o.y)+t,_=Number(null===(s=z(n,Xr)[Xr])||void 0===s?void 0:s.bottom)+t;return z(n,Wr)[Wr].forEach((function(r){if(3!==r.nodeType&&!n.has(r)){var i=r.getBoundingClientRect(),a=i.x,o=i.y,s=i.bottom,c=i.right;if(Math.abs(b-a)<z(n,Fr)[Fr]||Math.abs(b-c)<z(n,Fr)[Fr]||Math.abs(x-c)<z(n,Fr)[Fr]||Math.abs(x-a)<z(n,Fr)[Fr]){var f,M,S=Math.min(Number(null===(f=z(n,Xr)[Xr])||void 0===f?void 0:f.top)+t,o),E=Math.max(Number(null===(M=z(n,Xr)[Xr])||void 0===M?void 0:M.bottom)+t,s),C=(S-v-p)/d,T=(E-v-p)/d,L=0;Math.abs(b-a)<z(n,Fr)[Fr]?(l=a-b,L=(a-m-h)/d):Math.abs(b-c)<z(n,Fr)[Fr]?(l=c-b,L=(c-m-h)/d):Math.abs(x-c)<z(n,Fr)[Fr]?(l=c-x,L=(c-m-h)/d):(l=a-x,L=(a-m-h)/d),g={x1:L,x2:L,y1:C,y2:T}}if(Math.abs(w-o)<z(n,Fr)[Fr]||Math.abs(w-s)<z(n,Fr)[Fr]||Math.abs(_-s)<z(n,Fr)[Fr]||Math.abs(_-o)<z(n,Fr)[Fr]){var A,P,O=Math.min(Number(null===(A=z(n,Xr)[Xr])||void 0===A?void 0:A.x)+e,a),R=Math.max(Number(null===(P=z(n,Xr)[Xr])||void 0===P?void 0:P.right)+e,c),N=(O-m-h)/d,k=(R-m-h)/d,D=0;Math.abs(w-o)<z(n,Fr)[Fr]?(u=o-w,D=(o-v-p)/d):Math.abs(w-s)<z(n,Fr)[Fr]?(u=s-w,D=(s-v-p)/d):Math.abs(_-s)<z(n,Fr)[Fr]?(u=s-_,D=(s-v-p)/d):(u=o-_,D=(o-v-p)/d),y={x1:N,x2:k,y1:D,y2:D}}}})),g&&z(n,Ai)[Ai](g.x1,g.y1,g.x2,g.y2),y&&z(n,Ai)[Ai](y.x1,y.y1,y.x2,y.y2),{sDx:l,sDy:u}}}),Object.defineProperty(this,Ai,{writable:!0,value:function(e,t,r,i){var a,o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",e.toFixed(4)),o.setAttribute("y1",t.toFixed(4)),o.setAttribute("x2",r.toFixed(4)),o.setAttribute("y2",i.toFixed(4)),o.classList.add("repr"),null===(a=z(n,zr)[zr])||void 0===a||a.append(o)}}),this.checkIntersect=function(e,t){var n=Math.max(e.x,t.x),r=Math.max(e.y,t.y),i=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return!(n>i||r>a)},Object.defineProperty(this,Pi,{writable:!0,value:function(e){var t;if(e.parentNode){var r,i=e.getMatrix();if(0!==i.b||0!==i.c)return null===(r=z(n,jr)[jr].history)||void 0===r?void 0:r.end();var a=e.getBBox(),o=a.x,s=a.y,l=a.width,u=a.height,c=l*Math.abs(i.a),d=u*Math.abs(i.d),h=o*i.a+i.e+(i.a<0&&-c),p=s*i.d+i.f+(i.d<0&&-d);switch(["g","image","text"].includes(e.localName)||e.removeAttribute("transform"),e.localName){case"g":case"image":case"text":break;case"rect":e.setAttribute("x",h.toFixed(4)),e.setAttribute("y",p.toFixed(4)),e.setAttribute("width",c.toFixed(4)),e.setAttribute("height",d.toFixed(4));break;case"circle":case"ellipse":e.setAttribute("cx",(h+c/2).toFixed(4)),e.setAttribute("cy",(p+d/2).toFixed(4)),e.setAttribute("rx",(c/2).toFixed(4)),e.setAttribute("ry",(d/2).toFixed(4));break;case"line":var f=Number(e.getAttribute("x1")),m=Number(e.getAttribute("y1")),v=Number(e.getAttribute("x2")),g=Number(e.getAttribute("y2")),y=f*i.a+i.e,b=m*i.d+i.f,x=v*i.a+i.e,w=g*i.d+i.f;e.setAttribute("x1",y.toFixed(4)),e.setAttribute("y1",b.toFixed(4)),e.setAttribute("x2",x.toFixed(4)),e.setAttribute("y2",w.toFixed(4));break;case"path":var _=e.getAttribute("d"),M=new Se(_).matrix(i.a,i.b,i.c,i.d,i.e,i.f).encode();e.setAttribute("d",M);break;case"polyline":case"polygon":for(var S="",E=e,C=0;C<E.points.numberOfItems;C+=1){var T=E.points.getItem(C),L=T.x*i.a+i.e,A=T.y*i.d+i.f;S+="".concat(L.toFixed(9)," ").concat(A.toFixed(9)," ")}e.setAttribute("points",S)}null===(t=z(n,jr)[jr].history)||void 0===t||t.end()}}}),this.actions=function(){return z(n,mi)[mi]},this.isDragging=function(){return z(n,ti)[ti]},this.isDrawingRubber=function(){return z(n,ri)[ri]},this.toggleSmartGuides=function(e){return z(n,li)[li]=e,z(n,li)[li]},this.disabled=function(e){z(n,ai)[ai]=e},this.disableDeletion=function(e){z(n,oi)[oi]=e},this.disDrag=function(e){z(n,si)[si]=e},this.uninstall=function(){var e,t;z(n,ui)[ui]=void 0,z(n,ci)[ci]=void 0,null===(e=z(n,jr)[jr].stage)||void 0===e||e.removeEventListener("dblclick",z(n,yi)[yi]),null===(t=z(n,jr)[jr].stage)||void 0===t||t.removeEventListener("mousedown",z(n,bi)[bi]),document.removeEventListener("mousemove",z(n,xi)[xi]),document.removeEventListener("mouseup",z(n,wi)[wi])},!t)throw new Error("stage not found!");z(this,jr)[jr]=t,z(this,vi)[vi](),z(this,gi)[gi]()}));function Ri(e,t,n,r){var i=document.querySelector('[uid="rubber-hand"]');null===i||void 0===i||i.setAttribute("x",e.toFixed(9)),null===i||void 0===i||i.setAttribute("y",t.toFixed(9)),null===i||void 0===i||i.setAttribute("width",n.toFixed(9)),null===i||void 0===i||i.setAttribute("height",r.toFixed(9))}var Ni,ki,Di=Oi,Ii=B("stage"),ji=B("isResizing"),zi=B("isMoving"),Fi=B("isDisabled"),Bi=B("scale"),Ui=B("cacheX"),Hi=B("cacheY"),Gi=B("cacheWidth"),Vi=B("cacheHeight"),Wi=B("temMatrix"),qi=B("temBBox"),Xi=B("install"),Zi=B("start"),Yi=B("move"),Ji=B("end"),Qi=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,Ii,{writable:!0,value:void 0}),Object.defineProperty(this,ji,{writable:!0,value:!1}),Object.defineProperty(this,zi,{writable:!0,value:!1}),Object.defineProperty(this,Fi,{writable:!0,value:!1}),Object.defineProperty(this,Bi,{writable:!0,value:1}),Object.defineProperty(this,Ui,{writable:!0,value:0}),Object.defineProperty(this,Hi,{writable:!0,value:0}),Object.defineProperty(this,Gi,{writable:!0,value:0}),Object.defineProperty(this,Vi,{writable:!0,value:0}),Object.defineProperty(this,Wi,{writable:!0,value:void 0}),Object.defineProperty(this,qi,{writable:!0,value:void 0}),Object.defineProperty(this,Xi,{writable:!0,value:function(){var e=document.querySelector("#transform-hud"),t=null===e||void 0===e?void 0:e.querySelectorAll(".grippie");null===t||void 0===t||t.forEach((function(e){(new Ft).install({element:e,start:z(n,Zi)[Zi],move:z(n,Yi)[Yi],end:z(n,Ji)[Ji],un_shiftKey:!0})}))}}),Object.defineProperty(this,Zi,{writable:!0,value:function(e){var t,r,i,a;if(!(0!==e.button||z(n,Fi)[Fi]||null!==(t=z(n,Ii)[Ii].select)&&void 0!==t&&t.isDragging())){z(n,ji)[ji]=!0;var o=null===(r=z(n,Ii)[Ii].select)||void 0===r?void 0:r.frame();z(n,Wi)[Wi]=o.getMatrix(),z(n,qi)[qi]=o.getBBox();var s=o.getBoundingClientRect(),l=null===(i=z(n,Ii)[Ii].stage)||void 0===i?void 0:i.getBoundingClientRect(),u=l.left,c=l.top;z(n,Bi)[Bi]=z(n,Ii)[Ii].matrix.a,z(n,Ui)[Ui]=(s.x-u-z(n,Ii)[Ii].matrix.e)/z(n,Bi)[Bi],z(n,Hi)[Hi]=(s.y-c-z(n,Ii)[Ii].matrix.f)/z(n,Bi)[Bi],z(n,Gi)[Gi]=s.width/z(n,Bi)[Bi],z(n,Vi)[Vi]=s.height/z(n,Bi)[Bi],null===(a=z(n,Ii)[Ii].select)||void 0===a||a.get().forEach((function(e){var t=e.node,n=t.getMatrix(),r=t.getBoundingClientRect();e.matrixIterator=t.parentElement.getMatrixIterator();var i=e.matrixIterator,a=i.a,o=i.d,l=i.e,d=i.f;e.x=(r.x-u-l)/a,e.y=(r.y-c-d)/o,e.w=r.width/a,e.h=r.height/o,e.disX=(r.x-s.x)/n.a,e.disY=(r.y-s.y)/n.d,e.disR=(r.right-s.right)/n.a,e.disB=(r.bottom-s.bottom)/n.d,e.matrix=n}))}}}),Object.defineProperty(this,Yi,{writable:!0,value:function(e){var t,r,i;if(z(n,ji)[ji]){var a,o=e.dataX,s=e.dataY,l=e.shiftKey;if(!z(n,zi)[zi]&&e instanceof Ft)null===(a=z(n,Ii)[Ii].history)||void 0===a||a.add(z(n,Ii)[Ii].history.actions().MOUSE_SCALE,"\u7f29\u653e"),0===o&&0===s||(z(n,zi)[zi]=!0);var u=e instanceof Ft?z(n,Bi)[Bi]:z(n,Ii)[Ii].matrix.a,c=null===(t=z(n,Ii)[Ii].select)||void 0===t?void 0:t.frame(),d=c.getBoundingClientRect();e instanceof Ft||(z(n,Wi)[Wi]=c.getMatrix(),z(n,qi)[qi]=c.getBBox());var h=e instanceof Ft?e.element.getAttribute("data-position"):e.pos,p=1,f=1,m=0,v=0,g=z(n,qi)[qi],y=g.x,b=g.y,x=g.width,w=g.height;switch(h){case"top":v=(1-(f=1-s/u/w))*(b+w);break;case"left":m=(1-(p=1-o/u/x))*(y+x);break;case"bottom":v=(1-(f=1+s/u/w))*b;break;case"right":m=(1-(p=1+o/u/x))*y;break;case"top-left":var _=Math.max(o/u/x,s/u/w);m=(1-(p=1-(l?_:o/u/x)))*(y+x),v=(1-(f=1-(l?_:s/u/w)))*(b+w);break;case"top-right":var M=Math.min(1+o/u/x,1-s/u/w);m=(1-(p=l?M:1+o/u/x))*y,v=(1-(f=l?M:1-s/u/w))*(b+w);break;case"bottom-left":var S=Math.min(1-o/u/x,1+s/u/w);m=(1-(p=l?S:1-o/u/x))*(y+x),v=(1-(f=l?S:1+s/u/w))*b;break;case"bottom-right":var E=Math.min(o/u/x,s/u/w);m=(1-(p=1+(l?E:o/u/x)))*y,v=(1-(f=1+(l?E:s/u/w)))*b}c.setAttribute("transform","matrix(".concat(p,",").concat(0,",").concat(0,",").concat(f,",").concat(m,",").concat(v,")")),null===(r=z(n,Ii)[Ii].select)||void 0===r||r.get().forEach((function(t){var r=t.node,i=r.getAttribute("stroke-width")||1;if(i>0&&"g"!==r.localName&&(r.style.vectorEffect="non-scaling-stroke",r.style.strokeWidth=i*z(n,Ii)[Ii].matrix.a),null!==e&&void 0!==e&&e.pos){var a,o=new Ze,s=r.getMatrix(),l=null===(a=z(n,Ii)[Ii].stage)||void 0===a?void 0:a.getBoundingClientRect(),c=l.left,m=l.top,v=r.getBoundingClientRect(),g=r.getCTM();t.x=(v.x-c-o.getTrans(r,"sx"))/g.a,t.y=(v.y-m-o.getTrans(r,"sy"))/g.d,t.w=v.width/g.a,t.h=v.height/g.d,t.disX=(v.x-d.x)/s.a,t.disY=(v.y-d.y)/s.d,t.disR=(v.right-d.right)/s.a,t.disB=(v.bottom-d.bottom)/s.d,t.matrix=s}var y=new Ze;y.add(t.matrix.a,t.matrix.b,t.matrix.c,t.matrix.d,t.matrix.e,t.matrix.f);var b=function(){switch(h){case"top":return{x:0,y:(t.y+t.h-t.matrix.f)/t.matrix.d-t.disB/u};case"left":return{x:(t.x+t.w-t.matrix.e)/t.matrix.a-t.disR/u,y:0};case"bottom":return{x:0,y:(t.y-t.matrix.f)/t.matrix.d-t.disY/u};case"right":return{x:(t.x-t.matrix.e)/t.matrix.a-t.disX/u,y:0};case"top-left":return{x:(t.x+t.w-t.matrix.e)/t.matrix.a-t.disR/u,y:(t.y+t.h-t.matrix.f)/t.matrix.d-t.disB/u};case"top-right":return{x:(t.x-t.matrix.e)/t.matrix.a-t.disX/u,y:(t.y+t.h-t.matrix.f)/t.matrix.d-t.disB/u};case"bottom-left":return{x:(t.x+t.w-t.matrix.e)/t.matrix.a-t.disR/u,y:(t.y-t.matrix.f)/t.matrix.d-t.disY/u};case"bottom-right":return{x:(t.x-t.matrix.e)/t.matrix.a-t.disX/u,y:(t.y-t.matrix.f)/t.matrix.d-t.disY/u}}};y.scale(p,f,Number(b().x),Number(b().y));var x=y.a.toFixed(9),w=y.b.toFixed(9),_=y.c.toFixed(9),M=y.d.toFixed(9),S=y.e.toFixed(9),E=y.f.toFixed(9);t.node.setAttribute("transform","matrix(".concat(x,",").concat(w,",").concat(_,",").concat(M,",").concat(S,",").concat(E,")"))})),null===(i=z(n,Ii)[Ii].select)||void 0===i||i.resetFrame(!1),null!==e&&void 0!==e&&e.pos&&(z(n,ji)[ji]=!0,z(n,Ji)[Ji]())}}}),Object.defineProperty(this,Ji,{writable:!0,value:function(){var e,t,r;z(n,ji)[ji]&&(null===(e=z(n,Ii)[Ii].select)||void 0===e||null===(t=e.frame())||void 0===t||t.removeAttribute("transform"),null===(r=z(n,Ii)[Ii].select)||void 0===r||r.resetFrame(!0),setTimeout((function(){z(n,ji)[ji]=!1,z(n,zi)[zi]=!1})))}}),this.resizeWH=function(e){z(n,ji)[ji]=!0,z(n,Yi)[Yi](e)},this.isResizing=function(){return z(n,ji)[ji]},this.disabled=function(e){z(n,Fi)[Fi]=e},!t)throw new Error("stage not found!");z(this,Ii)[Ii]=t,z(this,Xi)[Xi]()})),Ki=Qi,$i=B("div"),ea=B("menus"),ta=B("install"),na=B("clear"),ra=s((function e(){var t=this;r(this,e),Object.defineProperty(this,$i,{writable:!0,value:void 0}),Object.defineProperty(this,ea,{writable:!0,value:[]}),Object.defineProperty(this,ta,{writable:!0,value:function(){window.addEventListener("mousedown",z(t,na)[na]),window.addEventListener("blur",z(t,na)[na])}}),this.contextmenu=function(e){if(0!==z(t,ea)[ea].length){var n=e.clientX,r=e.clientY;z(t,$i)[$i]=document.createElement("div"),z(t,$i)[$i].id="lux-contextmenu",z(t,$i)[$i].innerHTML=aa(),z(t,$i)[$i].onmousedown=function(e){e.stopPropagation()},z(t,ea)[ea].forEach((function(e){if("separator"===e.type){var n,r=document.createElement("hr");r.classList.add("lux-contextmenu-hr"),null===(n=z(t,$i)[$i])||void 0===n||n.append(r)}else{var i,a=document.createElement("div");a.innerHTML=e.label,a.classList.add("lux-contextmenu-item"),e.disabled&&a.classList.add("lux-contextmenu-item-disabled"),e.click instanceof Function&&(a.onclick=function(n){z(t,na)[na](),e.click(n)}),null===(i=z(t,$i)[$i])||void 0===i||i.append(a)}})),document.body.append(z(t,$i)[$i]),z(t,$i)[$i].style.cssText="left:".concat(n,"px;top:").concat(r,"px");var i=document.body.getBoundingClientRect(),a=z(t,$i)[$i].getBoundingClientRect(),o=a.bottom-i.bottom,s=a.right-i.right;z(t,$i)[$i].style.cssText="\n    left:".concat(s>0?n-s-10:n,"px;\n    top:").concat(o>0?r-o-10:r,"px")}},Object.defineProperty(this,na,{writable:!0,value:function(){var e,n;null===(e=z(t,$i)[$i])||void 0===e||e.remove(),null===(n=document.querySelector("#lux-contextmenu"))||void 0===n||n.remove()}}),this.menus=function(e){z(t,ea)[ea]=e},this.uninstall=function(){window.removeEventListener("mousedown",z(t,na)[na]),window.removeEventListener("blur",z(t,na)[na])},z(this,ta)[ta]()})),ia=ra,aa=function(){return"<style>\n    #lux-contextmenu {\n      padding: 3px;\n      color: rgba(0,0,0,0.8);\n      background: #ffffff;\n      border: 1px solid #dcdcdc;\n      border-radius: 12px;\n      box-shadow: rgb(0 0 0 / 17%) 0px 3px 10px 0px;\n      position:fixed;\n      left:0;\n      top:0;\n      z-index:10;\n    }\n    .lux-contextmenu-item {\n      white-space: nowrap;\n      color: rgba(0,0,0,0.8);\n      border-radius: 8px;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      position: relative;\n      padding: 0px 23px 0px 23px;\n      min-height: 28px;\n      box-sizing: border-box;\n      cursor: default;\n      user-select: none;\n      font-size:13px;\n    }\n    .lux-contextmenu-item:hover {\n        background:rgba(0, 0, 0, 0.08);\n    }\n    .lux-contextmenu-item-disabled {\n      pointer-events: none;\n      opacity: 0.6;\n    }\n    .lux-contextmenu-hr{\n        min-height: 1px;\n        border: none;\n        width: 100%;\n        height: 1px;\n        margin: 4px 0px;\n        box-sizing: border-box;\n        background: rgba(0, 0, 0, 0.1);\n        transform:scale(1,0.5);\n    }\n  </style>"},oa=B("stage"),sa=B("isDisabeld"),la=B("wheel"),ua=s((function e(t){var n,i=this;if(r(this,e),Object.defineProperty(this,oa,{writable:!0,value:void 0}),Object.defineProperty(this,sa,{writable:!0,value:!1}),Object.defineProperty(this,la,{writable:!0,value:function(e){var t,n,r;if(!z(i,sa)[sa]){e.stopPropagation();var a=z(i,oa)[oa].matrix;a.a>=3e3&&(a.a=3e3),a.a<=.001&&(a.a=.001);var o=a.a/100*10,s=null===(t=z(i,oa)[oa].boardView)||void 0===t?void 0:t.getBox(),l=(e.offsetX-s.x)*o*(1/a.a),u=(e.offsetY-s.y)*o*(1/a.a);a.e=e.deltaY<0?a.e-l:l+a.e,a.f=e.deltaY<0?a.f-u:a.f+u,e.deltaY<0?a.a+=o:a.a-=o,null===(n=z(i,oa)[oa].canvas)||void 0===n||n.setAttribute("transform","matrix(".concat(a.a,",0,0,").concat(a.a,",").concat(a.e,",").concat(a.f,")")),null===(r=z(i,oa)[oa].select)||void 0===r||r.resetFrame(!1)}}}),this.disabled=function(e){z(i,sa)[sa]=e},this.uninstall=function(){var e;null===(e=z(i,oa)[oa].stage)||void 0===e||e.removeEventListener("wheel",z(i,la)[la])},!t)throw new Error("stage not found!");z(this,oa)[oa]=t,null===(n=z(this,oa)[oa].stage)||void 0===n||n.addEventListener("wheel",z(this,la)[la],{passive:!1})})),ca=ua,da=B("stage"),ha=B("horizontal"),pa=B("vertical"),fa=B("isDragging"),ma=B("unitRate"),va=B("install"),ga=B("createRulers"),ya=B("watch"),ba=B("scaleCallback"),xa=B("mousedown"),wa=B("mousemove"),_a=B("style"),Ma=B("layout"),Sa=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,da,{writable:!0,value:void 0}),Object.defineProperty(this,ha,{writable:!0,value:void 0}),Object.defineProperty(this,pa,{writable:!0,value:void 0}),Object.defineProperty(this,fa,{writable:!0,value:!1}),Object.defineProperty(this,ma,{writable:!0,value:1}),Object.defineProperty(this,va,{writable:!0,value:function(){var e;z(n,ga)[ga](),z(n,ya)[ya](),z(n,ha)[ha]=document.querySelector("#lux-horizontal-ruler"),z(n,pa)[pa]=document.querySelector("#lux-vertical-ruler"),null===(e=z(n,da)[da].stage)||void 0===e||e.addEventListener("mousedown",z(n,xa)[xa]),document.addEventListener("mousemove",z(n,wa)[wa])}}),Object.defineProperty(this,ga,{writable:!0,value:function(){var e=z(n,da)[da].stage;e.style.position="relative";var t=document.createElement("div");t.id="lux-rulers",t.innerHTML=z(n,_a)[_a]()+z(n,Ma)[Ma](),null===e||void 0===e||e.append(t)}}),Object.defineProperty(this,ya,{writable:!0,value:function(){z(n,da)[da].watch(z(n,da)[da].actions().SCALE,z(n,ba)[ba])}}),Object.defineProperty(this,ba,{writable:!0,value:function(){var e=z(n,da)[da].matrix,t=e.a,r=e.e,i=e.f,a=z(n,ha)[ha],o=z(n,pa)[pa],s=0;if(s=0<t&&t<=.001?5e4:.001<t&&t<=.0025?2e4:.0025<t&&t<=.01?1e4:.01<t&&t<=.025?5e3:.025<t&&t<=.05?2e3:.05<t&&t<=.1?1e3:.1<t&&t<=.25?500:.25<t&&t<=.5?200:.5<t&&t<=1?100:1<t&&t<=2.5?50:2.5<t&&t<=5?20:5<t&&t<=10?10:10<t&&t<=25?5:25<t&&t<=50?2:1,0===(null===a||void 0===a?void 0:a.childElementCount))for(var l=0;l<30;l++){var u=document.createElement("div");null===a||void 0===a||a.append(u),null===o||void 0===o||o.append(u.cloneNode(!0))}null===a||void 0===a||a.childNodes.forEach((function(e,i){var a=(i-Math.floor(r/(s*t*z(n,ma)[ma])))*s,o=r+a*t*z(n,ma)[ma];e.style.transform="translateX(".concat(o,"px)"),e.innerHTML=a.toString()})),null===o||void 0===o||o.childNodes.forEach((function(e,r){var a=(r-Math.floor(i/(s*t*z(n,ma)[ma])))*s,o=i+a*t*z(n,ma)[ma];e.style.transform="translateY(".concat(o,"px)"),e.innerHTML=a.toString()}))}}),Object.defineProperty(this,xa,{writable:!0,value:function(e){var t,r=e.clientX,i=e.clientY,a=null===(t=z(n,ha)[ha])||void 0===t?void 0:t.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,u=a.bottom;r>o&&r<l&&i>s&&i<u&&e.stopPropagation()}}),Object.defineProperty(this,wa,{writable:!0,value:function(){}}),this.setUnitRate=function(e){z(n,ma)[ma]=e},this.uninstall=function(){z(n,da)[da].removeWatch(z(n,da)[da].actions().SCALE,z(n,ba)[ba])},Object.defineProperty(this,_a,{writable:!0,value:function(){return"\n      <style>\n      #lux-rulers{\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        contain: strict;\n        size: 14px;\n        pointer-events: none;\n      }\n      #lux-horizontal-ruler {\n          position: absolute;\n          top: 0px;\n          width: 100%;\n          height: 14px;\n          border-width: 0px 0px 1px;\n          border-style: none none solid;\n      }\n      #lux-horizontal-ruler > div {\n          width: 0px;\n          height: 100%;\n          top: 0px;\n          left: 0px;\n          padding: 0px 0px 0px 3px;\n          border-width: 0px 0px 0px 1px;\n          border-style: none none none solid;\n          color: rgba(0, 0, 0, 0.8);\n          border-color: rgba(0, 0, 0, 0.4);\n          position: absolute;\n          font-size: 9px;\n          box-sizing: border-box;\n          user-select: none;\n          white-space: pre;\n      }\n      #lux-vertical-ruler {\n          position: absolute;\n          top: 0px;\n          width: 14px;\n          height: 100%;\n          border-width: 0px 1px 0px 0px;\n          border-style: none solid none none;\n          writing-mode: vertical-lr;\n      }\n      #lux-vertical-ruler > div {\n        width: 100%;\n        height: 0px;\n        top: 0px;\n        left: 0px;\n        padding: 3px 0px 0px;\n        border-width: 1px 0px 0px;\n        border-style: solid none none;\n        color: rgba(0, 0, 0, 0.8);\n        border-color: rgba(0, 0, 0, 0.4);\n        position: absolute;\n        font-size: 9px;\n        box-sizing: border-box;\n        user-select: none;\n        white-space: pre;\n    }\n      #lux-corner-ruler {\n          pointer-events: all;\n          position: absolute;\n          left: 0px;\n          top: 0px;\n          width: 14px;\n          height: 14px;\n          box-sizing: border-box;\n          border-width: 0px 1px 1px 0px;\n          border-style: none solid solid none;\n      }\n      .lux-ruler{\n        background: white;\n        border-color: #dcdcdc;\n      }\n      </style>\n    "}}),Object.defineProperty(this,Ma,{writable:!0,value:function(){return'<div id="lux-horizontal-ruler" class="lux-ruler"></div><div id="lux-vertical-ruler" class="lux-ruler"></div><div id="lux-corner-ruler" class="lux-ruler"></div>'}}),!t)throw new Error("stage not found!");z(this,da)[da]=t,z(this,va)[va]()})),Ea=Sa,Ca=B("TOOL"),Ta=B("WATCH_ACTIONS"),La=B("listenSvgRoot"),Aa=B("listenScale"),Pa=B("selectCallback"),Oa=B("rectCallback"),Ra=B("updatedCallback"),Na=B("toolCallback"),ka=B("scaleCallback"),Da=B("layerCallback"),Ia=B("textCallback"),ja=B("drawCallback"),za=B("viewCallback"),Fa=B("dragBeforeCallback"),Ba=B("init"),Ua=B("initElement"),Ha=B("registerDependencies"),Ga=B("setShape"),Va=B("setView"),Wa=B("setSelect"),qa=B("setText"),Xa=B("addEventListener"),Za=B("listenerScale"),Ya=B("listenerSvgRoot"),Ja=s((function e(t,n,i,a){var o=this;if(r(this,e),this.matrix={a:1,b:0,c:0,d:1,e:0,f:0},this.mmUnit=2.83464,this.CAN_CEHCKED_NODE=["rect","circle","image","text","ellipse","line","g","path","polygon","polyline"],this.currentType=void 0,this.options={fill:"#d8d8d8",stroke:"#000000",strokeWidth:1,fillOpacity:1,textFill:"#000000",textContent:"Enter your text here",fontSize:26,grippieSize:11,outerCircleSize:5,innerCircleSize:1.5},this.layer=void 0,this.stage=void 0,this.canvas=void 0,this.svgRoot=void 0,this.boardView=void 0,this.select=void 0,this.resize=void 0,this.hover=void 0,this.history=void 0,this.shape=void 0,this.pan=void 0,this.spline=void 0,this.view=void 0,this.freehand=void 0,this.text=void 0,this.clipboard=void 0,this.contextmenu=void 0,this.scale=void 0,this.ruler=void 0,Object.defineProperty(this,Ca,{writable:!0,value:{SELECT:Symbol(),ASELECT:Symbol(),RECT:Symbol(),ELLIPSE:Symbol(),TRIANGLE:Symbol(),LINE:Symbol(),OTHER_SHAPE:Symbol(),SPLINE:Symbol(),FREEHAND:Symbol(),TEXT:Symbol(),PAN:Symbol(),VIEW:Symbol()}}),Object.defineProperty(this,Ta,{writable:!0,value:{SELECTED:Symbol(),FRAME_RECT:Symbol(),HISTORY:Symbol(),VIEW:Symbol(),UPDATED:Symbol(),TOOL:Symbol(),SCALE:Symbol(),LAYER:Symbol(),TEXT:Symbol(),DRAW:Symbol(),DRAG_BEFORE:Symbol()}}),Object.defineProperty(this,La,{writable:!0,value:void 0}),Object.defineProperty(this,Aa,{writable:!0,value:void 0}),Object.defineProperty(this,Pa,{writable:!0,value:[]}),Object.defineProperty(this,Oa,{writable:!0,value:[]}),Object.defineProperty(this,Ra,{writable:!0,value:[]}),Object.defineProperty(this,Na,{writable:!0,value:[]}),Object.defineProperty(this,ka,{writable:!0,value:[]}),Object.defineProperty(this,Da,{writable:!0,value:[]}),Object.defineProperty(this,Ia,{writable:!0,value:[]}),Object.defineProperty(this,ja,{writable:!0,value:[]}),Object.defineProperty(this,za,{writable:!0,value:[]}),Object.defineProperty(this,Fa,{writable:!0,value:[]}),this.watch=function(e,t){var n;if(o.actions().SELECTED===e)null===(n=z(o,Pa)[Pa])||void 0===n||n.push(t);else if(o.actions().FRAME_RECT===e){var r;null===(r=z(o,Oa)[Oa])||void 0===r||r.push(t)}else if(o.actions().UPDATED===e){var i;null===(i=z(o,Ra)[Ra])||void 0===i||i.push(t)}else if(o.actions().TOOL===e){var a;null===(a=z(o,Na)[Na])||void 0===a||a.push(t)}else if(o.actions().SCALE===e){var s;null===(s=z(o,ka)[ka])||void 0===s||s.push(t)}else if(o.actions().LAYER===e){var l;null===(l=z(o,Da)[Da])||void 0===l||l.push(t)}else if(o.actions().TEXT===e){var u;null===(u=z(o,Ia)[Ia])||void 0===u||u.push(t)}else if(o.actions().DRAW===e){var c;null===(c=z(o,ja)[ja])||void 0===c||c.push(t)}else o.actions().VIEW===e?z(o,za)[za].push(t):o.actions().DRAG_BEFORE===e&&z(o,Fa)[Fa].push(t)},this.actions=function(){return z(o,Ta)[Ta]},this.tools=function(){return z(o,Ca)[Ca]},this.setViewBox=function(e,t){var n,r=null===(n=o.stage)||void 0===n?void 0:n.querySelector("svg");r.setAttribute("width",e.toFixed(9)),r.setAttribute("height",t.toFixed(9)),r.setAttribute("viewBox","0  0 ".concat(e," ").concat(t))},Object.defineProperty(this,Ba,{writable:!0,value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=no("svg");r.style.userSelect="none",r.setAttribute("width",t.toString()),r.setAttribute("height",n.toString()),r.setAttribute("viewBox","0  0 ".concat(t," ").concat(n)),r.style.background="#f0f0f0",r.innerHTML=Ye(o.matrix,o.options.grippieSize||11),null===(e=o.stage)||void 0===e||e.append(r),o.setViewSize(window.innerHeight/1.5,window.innerHeight/1.5),z(o,Ua)[Ua](),z(o,Ha)[Ha](),o.switchLayer(),z(o,Xa)[Xa]()}}),Object.defineProperty(this,Ua,{writable:!0,value:function(){o.svgRoot=document.querySelector("#lux-svg-root"),o.canvas=document.querySelector('[uid="canvas"]'),o.boardView=document.querySelector("#background-outlines rect")}}),Object.defineProperty(this,Ha,{writable:!0,value:function(){z(o,Ga)[Ga](),z(o,Wa)[Wa](),o.resize=new Ki(o),o.history=new ae(o),z(o,Va)[Va](),o.spline=new _n(o),o.freehand=new rr(o),o.pan=new qt(o),o.hover=new Pr(o),o.clipboard=new Ir(o),o.contextmenu=new ia,o.scale=new ca(o),o.ruler=new Ea(o),z(o,qa)[qa]()}}),Object.defineProperty(this,Ga,{writable:!0,value:function(){o.shape=new qe(o,{start:function(){var e;null===(e=z(o,ja)[ja])||void 0===e||e.forEach((function(e){e("start")}))},done:function(e){var t;e.setAttribute("data-fill","0:0:0:0"),e.setAttribute("data-stroke","0:0:0:100"),null===(t=z(o,ja)[ja])||void 0===t||t.forEach((function(t){t("end",e)}))}})}}),Object.defineProperty(this,Va,{writable:!0,value:function(){o.view=new Sr(o),o.view.watch((function(){z(o,za)[za].forEach((function(e){e()}))}))}}),Object.defineProperty(this,Wa,{writable:!0,value:function(){var e,t,n,r,i,a;o.select=new Di(o),null===(e=o.select)||void 0===e||e.watch(null===(t=o.select)||void 0===t?void 0:t.actions().SELECTED,(function(){z(o,Pa)[Pa].forEach((function(e){e()}))})),null===(n=o.select)||void 0===n||n.watch(null===(r=o.select)||void 0===r?void 0:r.actions().FRAME_RECT,(function(){z(o,Oa)[Oa].forEach((function(e){e()}))})),null===(i=o.select)||void 0===i||i.watch(null===(a=o.select)||void 0===a?void 0:a.actions().DRAG_BEFORE,(function(){z(o,Fa)[Fa].forEach((function(e){e()}))}))}}),Object.defineProperty(this,qa,{writable:!0,value:function(){o.text=new Pt(o),o.text.watch(o.text.actions().ADD,(function(e){var t;o.focusNode(e),null===(t=z(o,Ia)[Ia])||void 0===t||t.forEach((function(t){t(e,"add")}))})),o.text.watch(o.text.actions().EDIT,(function(e){var t,n;o.focusNode(e),null===(t=o.select)||void 0===t||t.resetFrame(!0),null===(n=z(o,Ia)[Ia])||void 0===n||n.forEach((function(t){t(e,"edit")}))})),o.text.watch(o.text.actions().QUIT,(function(e){var t;null===(t=z(o,Ia)[Ia])||void 0===t||t.forEach((function(t){t(e,"quit")}))}))}}),Object.defineProperty(this,Xa,{writable:!0,value:function(){z(o,Za)[Za](),z(o,Ya)[Ya]()}}),Object.defineProperty(this,Za,{writable:!0,value:function(){var e=document.querySelector("#transform-hud"),t=null===e||void 0===e?void 0:e.querySelectorAll(".grippie"),n=document.querySelector('[uid="origin-grippie"]');z(o,Aa)[Aa]=new MutationObserver((function(){for(var e,r,i=o.options.grippieSize||11,a=o.matrix.a,s=0;s<t.length;s++){var l=t[s];l.setAttribute("width",(i/a).toFixed(9)),l.setAttribute("height",(i/a).toFixed(9))}if(n.setAttribute("width",(i/a).toFixed(9)),n.setAttribute("height",(i/a).toFixed(9)),o.matrix=null===(e=o.canvas)||void 0===e?void 0:e.getMatrix(),null===(r=z(o,ka)[ka])||void 0===r||r.forEach((function(e){e(o.matrix)})),o.currentType===o.tools().FREEHAND||o.currentType===o.tools().SPLINE){var u=(o.options.outerCircleSize||5)/o.matrix.a,c=(o.options.innerCircleSize||1.5)/o.matrix.a,d=document.querySelectorAll(".outer-circle"),h=document.querySelectorAll(".inner-circle");null===d||void 0===d||d.forEach((function(e){e.setAttribute("r",u.toFixed(9))})),null===h||void 0===h||h.forEach((function(e){e.setAttribute("r",c.toFixed(9))}))}})),z(o,Aa)[Aa].observe(o.canvas,{attributes:!0,attributeFilter:["transform"]})}}),Object.defineProperty(this,Ya,{writable:!0,value:function(){z(o,La)[La]=new MutationObserver((function(e){var t;e.forEach((function(e){e.addedNodes.forEach((function(e){3!==e.nodeType&&(o.CAN_CEHCKED_NODE.includes(null===e||void 0===e?void 0:e.localName)||null===e||void 0===e||e.setAttribute("pointer-events","none"))}))})),null===(t=z(o,Ra)[Ra])||void 0===t||t.forEach((function(t){t(e)}))})),z(o,La)[La].observe(o.svgRoot,{childList:!0,subtree:!0})}}),this.tool=function(e,t){var n,r,i,a,s,l,u,c,d,h,p,f;if(!(!e||e===o.currentType||null!==(n=o.select)&&void 0!==n&&n.isDragging()||null!==(r=o.select)&&void 0!==r&&r.isDrawingRubber()||null!==(i=o.resize)&&void 0!==i&&i.isResizing()||null!==(a=o.shape)&&void 0!==a&&a.isDrawing())||t){o.currentType=e,o.currentType!==o.tools().PAN&&o.layerDisabled(),null===(s=o.select)||void 0===s||s.disabled(!0),null===(l=o.shape)||void 0===l||l.disabled(!0),null===(u=o.view)||void 0===u||u.disabled(!0),null===(c=o.spline)||void 0===c||c.disabled(!0),null===(d=o.freehand)||void 0===d||d.disabled(!0),null===(h=o.pan)||void 0===h||h.disabled(!0),null===(p=o.text)||void 0===p||p.disabled(!0),null===(f=o.text)||void 0===f||f.quit();var m,v,g,y,b=o.stage;if(o.currentType!==o.tools().SELECT&&o.currentType!==o.tools().ASELECT&&o.currentType!==o.tools().TEXT)null===(m=o.select)||void 0===m||m.toggleFrame(!0);if(o.currentType===o.tools().SELECT)null===(v=o.select)||void 0===v||v.resetFrame(!0),null===(g=o.select)||void 0===g||g.disabled(!1),b.style.cursor="auto",null===(y=o.select)||void 0===y||y.get().forEach((function(e){var t;if(!o.layer.contains(e.node))return null===(t=o.select)||void 0===t?void 0:t.reset()}));else if(o.currentType===o.tools().ASELECT){var x,w,_;null===(x=o.select)||void 0===x||x.resetFrame(!0),null===(w=o.select)||void 0===w||w.disabled(!1),b.style.cursor="auto",null===(_=o.select)||void 0===_||_.get().forEach((function(e){var t;if("g"===e.node.localName)return null===(t=o.select)||void 0===t?void 0:t.reset()}))}else if(o.currentType===o.tools().PAN){var M;b.style.cursor="grab",null===(M=o.pan)||void 0===M||M.disabled(!1)}else if(o.currentType===o.tools().TEXT){var S,E,C,T,L;if(b.style.cursor="text",null===(S=o.text)||void 0===S||S.disabled(!1),1===(null===(E=o.select)||void 0===E?void 0:E.size())&&"text"===(null===(C=o.select)||void 0===C?void 0:C.first().node.localName))null===(T=o.text)||void 0===T||T.edit(null,null===(L=o.select)||void 0===L?void 0:L.first().node,!0)}else if(o.currentType===o.tools().SPLINE){var A;b.style.cursor="crosshair",null===(A=o.spline)||void 0===A||A.disabled(!1)}else if(o.currentType===o.tools().FREEHAND){var P;b.style.cursor="crosshair",null===(P=o.freehand)||void 0===P||P.disabled(!1)}else if(o.currentType===o.tools().VIEW){var O;b.style.cursor="auto",null===(O=o.view)||void 0===O||O.disabled(!1)}else if(o.currentType===o.tools().RECT||o.currentType===o.tools().ELLIPSE||o.currentType===o.tools().TRIANGLE||o.currentType===o.tools().LINE||o.currentType===o.tools().OTHER_SHAPE){var R;b.style.cursor="crosshair",null===(R=o.shape)||void 0===R||R.disabled(!1)}z(o,Na)[Na].forEach((function(e){e(o.currentType)}))}},this.setViewSize=function(e,t,n,r){var i,a,s,l;null===(i=o.boardView)||void 0===i||i.setAttribute("width",e.toString()),null===(a=o.boardView)||void 0===a||a.setAttribute("height",t.toString()),n&&(null===(s=o.boardView)||void 0===s||s.setAttribute("x",n.toString())),r&&(null===(l=o.boardView)||void 0===l||l.setAttribute("y",r.toString()))},this.getViewSize=function(){var e,t,n,r;return{width:Number(null===(e=o.boardView)||void 0===e?void 0:e.getAttribute("width"))||0,height:Number(null===(t=o.boardView)||void 0===t?void 0:t.getAttribute("height"))||0,x:Number(null===(n=o.boardView)||void 0===n?void 0:n.getAttribute("x"))||0,y:Number(null===(r=o.boardView)||void 0===r?void 0:r.getAttribute("y"))||0}},this.setBoardSize=function(e,t,n){var r,i;o.matrix.a=e||o.matrix.a,o.matrix.d=e||o.matrix.a,o.matrix.e=t||o.matrix.e,o.matrix.f=n||o.matrix.f;var a=o.matrix;null===(r=o.canvas)||void 0===r||r.setAttribute("transform","matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")")),null===(i=o.select)||void 0===i||i.resetFrame(!1)},this.nodesCenterScale=function(e,t){var n,r,i,a,s,l;if(0!==(null===(n=o.select)||void 0===n?void 0:n.size())){e/=100,t/=100,null===(r=o.history)||void 0===r||r.add(o.history.actions().SCALE,"\u5c45\u4e2d\u7f29\u653e");var u=null===(i=o.stage)||void 0===i?void 0:i.getBoundingClientRect(),c=u.left,d=u.top,h=null===(a=o.select)||void 0===a?void 0:a.frame(),p=o.matrix,f=h.getBoundingClientRect(),m=(f.x-c-p.e)/p.a,v=f.width/p.a,g=(f.y-d-p.f)/p.a,y=f.height/p.a,b=f.x,x=f.y,w=1-e+(v-v*e)/2,_=1-t+(y-y*t)/2;h.setAttribute("x",(m+w).toFixed(9)),h.setAttribute("y",(g+_).toFixed(9)),h.setAttribute("w",(v*e).toFixed(9)),h.setAttribute("h",(y*t).toFixed(9));var M=h.getBoundingClientRect(),S=M.x,E=M.y;null===(s=o.select)||void 0===s||s.get().forEach((function(n){var r=n.node.getMatrix(),i=n.node.getBoundingClientRect(),a=i.x,o=i.y,s=a-b,l=o-x;n.node.setAttribute("transform","matrix(\n                  ".concat(e*r.a,",0,0,\n                  ").concat(t*r.d,",\n                  0,0)"));var u=n.node.getBoundingClientRect(),c=u.x,d=u.y,h=n.node.parentElement.getMatrixIterator();n.node.setAttribute("transform","matrix(\n                  ".concat(e*r.a,",0,0,\n                  ").concat(t*r.d,",\n                  ").concat(S/h.a-c/h.a+s/h.a*e,",\n                  ").concat(E/h.d-d/h.d+l/h.d*t,")"))})),null===(l=o.select)||void 0===l||l.resetFrame(!0)}},this.paragraphSplit=function(){var e,t;if(0===(null===(e=o.select)||void 0===e?void 0:e.size()))throw new Error("not checked node.");null===(t=o.select)||void 0===t||t.get().forEach((function(e){var t=e.node;if("text"===t.localName){var n=t,r=n.getAttribute("font-size"),i=n.getAttribute("font-family");if(!n.querySelector("tspan"))throw new Error("not has tspan.");n.childNodes.forEach((function(e){var t,a=no("text");a.setAttribute("font-size",r),a.setAttribute("font-family",i),a.append(document.createTextNode(e.textContent||"")),null===(t=n.parentNode)||void 0===t||t.append(a)}))}}))},this.paragraphSpacing=function(e){var t,n,r,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)throw new Error("not set direction.");if(0===(null===(t=o.select)||void 0===t?void 0:t.size()))throw new Error("not checked node.");null===(n=o.history)||void 0===n||n.add(o.history.actions().EDIT,"\u6bb5\u843d\u95f4\u8ddd");var l=0,u=null===(r=o.canvas)||void 0===r?void 0:r.getScale().sx,c=0,d=H(null===(i=o.select)||void 0===i?void 0:i.get().values());d.sort((function(t,n){return"v"===e?t.node.getBoundingClientRect().y-n.node.getBoundingClientRect().y:t.node.getBoundingClientRect().x-n.node.getBoundingClientRect().x})),d.forEach((function(t){if(c>0){var n=t.node,r=n.getBoundingClientRect(),i=r.y,a=r.x,o=(l-i)/u,d=(l-a)/u,h=n.getMatrix();n.setAttribute("transform","matrix(\n                 ".concat(h.a,",\n                 ").concat(h.b,",\n                 ").concat(h.c,",\n                 ").concat(h.d,",\n                 ").concat(h.e+("h"===e?d:0),",\n                 ").concat(h.f+("v"===e?o:0),")"))}var p=t.node.getBoundingClientRect(),f=p.width,m=p.height,v=p.bottom,g=p.right;"v"===e&&(l=0===c?v:l+m),"h"===e&&(l=0===c?g:l+f),l+=s*u,c++})),null===(a=o.select)||void 0===a||a.resetFrame(!0)},this.filp=function(e){var t,n,r;if(!e)throw new Error("not set direction.");null===(t=o.history)||void 0===t||t.add(o.history.actions().EDIT,"\u955c\u50cf\u7ffb\u8f6c"),null===(n=o.select)||void 0===n||n.get().forEach((function(t){var n=t.node,r=t.node.getBBox(),i=n.getMatrix(),a=i.a*("x"===e?-1:1),o=i.d*("y"===e?-1:1),s=i.e+("x"===e?(2*r.x+r.width)*i.a:0),l=i.f+("y"===e?(2*r.y+r.height)*i.d:0);n.setAttribute("transform","matrix(\n             ".concat(a,",\n             ").concat(i.b,",\n             ").concat(i.c,",\n             ").concat(o,",\n             ").concat(s,",\n             ").concat(l,"\n           )"))})),null===(r=o.select)||void 0===r||r.resetFrame(!0)},this.nodeAlign=function(e,t){var n,r,i,a,s;if(e&&(!o.select||0!==o.select.size())){null===(n=o.history)||void 0===n||n.add(o.history.actions().EDIT,"\u5143\u7d20\u5bf9\u9f50");var l=1===(null===(r=o.select)||void 0===r?void 0:r.size())?o.boardView:null===(i=o.select)||void 0===i?void 0:i.frame(),u=null===l||void 0===l?void 0:l.getBoundingClientRect(),c=u.x,d=u.y,h=u.right,p=u.bottom,f=u.x+u.width/2,m=u.y+u.height/2;null===(a=o.select)||void 0===a||a.get().forEach((function(n){var r=new Ze,i=n.node,a=i.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,u=a.bottom,v=a.x+a.width/2,g=a.y+a.height/2,y=i.getMatrix(),b=i.parentElement.getMatrixIterator();r.add(y.a,y.b,y.c,y.d,y.e,y.f),r.translate(Number(function(){if("v"===e)return 0;switch(t){case"left":return(c-o)/y.a/b.a;case"center":return(f-v)/y.a/b.a;case"right":return(h-l)/y.a/b.a}}()),Number(function(){if("h"===e)return 0;switch(t){case"top":return(d-s)/y.d/b.d;case"center":return(m-g)/y.d/b.d;case"bottom":return(p-u)/y.d/b.d}}())),i.setAttribute("transform","matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")"))})),null===(s=o.select)||void 0===s||s.resetFrame(!0)}},this.nodeDistance=function(e,t){var n,r,i,a=(null===(n=o.select)||void 0===n?void 0:n.frame()).getBox(),s=null===(r=o.boardView)||void 0===r?void 0:r.getBox(),l=e*o.matrix.a-(a.x-s.x),u=t*o.matrix.d-(a.y-s.y);null===(i=o.select)||void 0===i||i.get().forEach((function(e){var t=e.node.parentElement.getMatrixIterator(),n=t.a,r=t.d;e.matrix=e.node.getMatrix(),e.node.setAttribute("transform","matrix(\n          ".concat(e.matrix.a,",\n          ").concat(e.matrix.b,",\n          ").concat(e.matrix.c,",\n          ").concat(e.matrix.d,",\n          ").concat(e.matrix.e+l/n,",\n          ").concat(e.matrix.f+u/r,")"))}))},this.switchLayer=function(e){var t;o.layer=e||o.svgRoot,null===(t=z(o,Da)[Da])||void 0===t||t.forEach((function(e){e(o.layer)})),o.layerDisabled()},this.layerDisabled=function(){var e;if(0!==(null===(e=o.layer)||void 0===e?void 0:e.children.length))for(var t=o.svgRoot,n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT),r=n.nextNode();null!==r;)r.classList.remove("lux-disabled"),"g"===r.localName||r.contains(o.layer)||o.layer.contains(r)||"none"===window.getComputedStyle(r).pointerEvents||o.currentType!==o.tools().SELECT||r.classList.add("lux-disabled"),r=n.nextNode()},this.focusNode=function(e){var t;if(e&&(null===(t=o.select)||void 0===t||!t.has(e)))return"g"===e.localName&&(o.layer=e.parentElement,o.switchLayer(o.layer)),new Promise((function(t){var n,r,i,a;o.select&&(null===(n=o.select)||void 0===n?void 0:n.size())>0&&(null===(r=o.select)||void 0===r||r.clear()),null===(i=o.select)||void 0===i||i.set(e,{node:e}),null===(a=o.select)||void 0===a||a.resetFrame(!0),t(e)}))},this.queryTspanText=function(e){var t=e.parentElement;return"text"!==(null===t||void 0===t?void 0:t.localName)&&o.queryTspanText(t),t},this.nodeMove=function(e,t){var n,r,i;null===(n=o.history)||void 0===n||n.add(o.history.actions().KEYBOARD_MOVE,"\u952e\u76d8\u79fb\u52a8"),null===(r=o.select)||void 0===r||r.get().forEach((function(n){var r=n.node,i=r.getMatrix(),a=r.parentElement.getCTM(),o=0,s=0;switch(e){case"up":s=-t;break;case"down":s=t;break;case"left":o=-t;break;case"right":o=t}var l=a.a*a.d,u=a.b*a.c,c=a.d/(l-u)*o,d=a.a/(l-u)*s,h=c-d/a.a*a.c,p=d-c/a.d*a.b,f=(i.e+h).toFixed(9),m=(i.f+p).toFixed(9);r.setAttribute("transform","matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(f,",").concat(m,")"))})),null===(i=o.select)||void 0===i||i.resetFrame(!0)},this.front=function(){var e,t,n,r;null===(e=o.history)||void 0===e||e.add(o.history.actions().REORDER,"\u7f6e\u4e8e\u9876\u5c42"),(null===(t=o.select)||void 0===t?void 0:t.first().node.parentNode).prepend(null===(n=o.select)||void 0===n?void 0:n.first().node),null===(r=o.history)||void 0===r||r.end()},this.back=function(){var e,t,n,r;null===(e=o.history)||void 0===e||e.add(o.history.actions().REORDER,"\u7f6e\u4e8e\u5e95\u5c42"),(null===(t=o.select)||void 0===t?void 0:t.first().node.parentNode).append(null===(n=o.select)||void 0===n?void 0:n.first().node),null===(r=o.history)||void 0===r||r.end()},this.raise=function(){var e,t,n,r;null===(e=o.history)||void 0===e||e.add(o.history.actions().REORDER,"\u5411\u4e0b\u4e00\u5c42"),(null===(t=o.select)||void 0===t?void 0:t.first().node.previousElementSibling).before(null===(n=o.select)||void 0===n?void 0:n.first().node),null===(r=o.history)||void 0===r||r.end()},this.lower=function(){var e,t,n,r;null===(e=o.history)||void 0===e||e.add(o.history.actions().REORDER,"\u5411\u4e0a\u4e00\u5c42"),(null===(t=o.select)||void 0===t?void 0:t.first().node.nextElementSibling).after(null===(n=o.select)||void 0===n?void 0:n.first().node),null===(r=o.history)||void 0===r||r.end()},this.group=function(){var e,t,n,r;null===(e=o.history)||void 0===e||e.add(o.history.actions().GROUP,"\u7f16\u7ec4");var i=null===(t=o.select)||void 0===t?void 0:t.first().node,a=(new Qa).node;i.before(a),null===(n=o.select)||void 0===n||n.get().forEach((function(e){var t=e.node;a.append(t)})),null===(r=o.select)||void 0===r||r.reset(),o.focusNode(a)},this.unGroup=function(e){var t,n,r,i,a;if(0!==(null===(t=o.select)||void 0===t?void 0:t.checkedsGroups().size)){null===(n=o.history)||void 0===n||n.add(o.history.actions().GROUP,"\u89e3\u9664\u7f16\u7ec4");var s=[],l=e||(null===(r=o.select)||void 0===r?void 0:r.checkedsGroups());null===l||void 0===l||l.forEach((function(e){for(var t=e.getMatrix(),n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),r=n.nextNode();null!==r;){if(r!==e){var i=r.getMatrix(),a=i.a*t.a+i.c*t.b,o=i.b*t.a+i.d*t.b,l=i.a*t.c+i.c*t.d,u=i.b*t.c+i.d*t.d,c=i.e*t.sx+t.e,d=i.f*t.sy+t.f;r.setAttribute("transform","matrix(".concat(a,",").concat(o,",").concat(l,",").concat(u,",").concat(c,",").concat(d,")")),e.before(r),s.push(r)}r=n.nextNode()}e.remove()})),null===(i=o.select)||void 0===i||i.reset(),null===s||void 0===s||s.forEach((function(e){var t;null===(t=o.select)||void 0===t||t.set(e,{node:e})})),null===(a=o.select)||void 0===a||a.resetFrame(!0)}},this.removeWatch=function(e,t){if(o.actions().SELECTED===e){var n=z(o,Pa)[Pa].findIndex((function(e){return e===t}));z(o,Pa)[Pa].splice(n,1)}else if(o.actions().FRAME_RECT===e){var r=z(o,Oa)[Oa].findIndex((function(e){return e===t}));z(o,Oa)[Oa].splice(r,1)}else if(o.actions().UPDATED===e){var i=z(o,Ra)[Ra].findIndex((function(e){return e===t}));z(o,Ra)[Ra].splice(i,1)}else if(o.actions().TOOL===e){var a=z(o,Na)[Na].findIndex((function(e){return e===t}));z(o,Na)[Na].splice(a,1)}else if(o.actions().SCALE===e){var s=z(o,ka)[ka].findIndex((function(e){return e===t}));z(o,ka)[ka].splice(s,1)}else if(o.actions().LAYER===e){var l=z(o,Da)[Da].findIndex((function(e){return e===t}));z(o,Da)[Da].splice(l,1)}else if(o.actions().TEXT===e){var u=z(o,Ia)[Ia].findIndex((function(e){return e===t}));z(o,Ia)[Ia].splice(u,1)}else if(o.actions().DRAW===e){var c=z(o,ja)[ja].findIndex((function(e){return e===t}));z(o,ja)[ja].splice(c,1)}else if(o.actions().VIEW===e){var d=z(o,za)[za].findIndex((function(e){return e===t}));z(o,za)[za].splice(d,1)}else if(o.actions().DRAG_BEFORE===e){var h=z(o,Fa)[Fa].findIndex((function(e){return e===t}));z(o,Fa)[Fa].splice(h,1)}},this.uninstall=function(){var e,t,n,r,i,a,s,l,u,c,d,h,p,f,m,v;null===(e=z(o,Aa)[Aa])||void 0===e||e.disconnect(),null===(t=z(o,La)[La])||void 0===t||t.disconnect(),null===(n=o.shape)||void 0===n||n.disabled(!0),null===(r=o.view)||void 0===r||r.disabled(!0),null===(i=o.freehand)||void 0===i||i.disabled(!0),null===(a=o.pan)||void 0===a||a.disabled(!0),null===(s=o.hover)||void 0===s||s.disabled(!0),null===(l=o.clipboard)||void 0===l||l.disabled(!0),null===(u=o.select)||void 0===u||u.disabled(!0),null===(c=o.resize)||void 0===c||c.disabled(!0),null===(d=o.view)||void 0===d||d.uninstall(),null===(h=o.select)||void 0===h||h.uninstall(),null===(p=o.history)||void 0===p||p.uninstall(),null===(f=o.hover)||void 0===f||f.uninstall(),null===(m=o.text)||void 0===m||m.uninstall(),null===(v=o.scale)||void 0===v||v.uninstall()},!t)throw new Error("set content please.");this.options=Object.assign(this.options,a),this.stage=document.querySelector("#"+t),z(this,Ba)[Ba](n,i)})),Qa=function(){function e(t){r(this,e),this.node=void 0;var n=no("g");t&&Object.keys(t).forEach((function(e){n.setAttribute(ro(e),t[e])})),this.node=n}return s(e,[{key:"add",value:function(e){var t;null===(t=this.node)||void 0===t||t.append(e.node)}}]),e}(),Ka=s((function e(t){r(this,e),this.node=void 0;var n=no("rect");Object.keys(t).forEach((function(e){n.setAttribute(ro(e),t[e])})),this.node=n})),$a=s((function e(t){r(this,e),this.node=void 0;var n=no("line");t&&Object.keys(t).forEach((function(e){n.setAttribute(ro(e),t[e])})),this.node=n})),eo=s((function e(t){r(this,e),this.node=void 0;var n=no("text");t&&Object.keys(t).forEach((function(e){"content"===e?(n.innerHTML=t[e],n.innerHTML=n.innerHTML.replace(/[\n]/gm,"")):n.setAttribute(ro(e),t[e])})),this.node=n})),to=s((function e(t){r(this,e),this.node=void 0;var n=no("image");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),Object.keys(t).forEach((function(e){"content"===e?n.innerHTML=t[e]:n.setAttribute(ro(e),t[e])})),this.node=n})),no=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg",e);return t.setAttribute("data-fill","text"===e?"0:0:0:100":"0:0:0:0"),"text"!==e&&t.setAttribute("data-stroke","0:0:0:100"),t},ro=function(e){return e.split("").map((function(e){return e.toUpperCase()===e?e="-"+e.toLowerCase():e})).join("")},io=B("stage"),ao=B("layersMain"),oo=B("isDragging"),so=B("layers"),lo=B("watch"),uo=B("watchSelect"),co=B("watchUpdated"),ho=B("watchHistory"),po=B("addNodes"),fo=B("addItems"),mo=B("removeNodes"),vo=B("onmouseenter"),go=B("mousedown"),yo=B("mousemove"),bo=B("mouseup"),xo=B("ondblclick"),wo=B("toggleExpand"),_o=B("expand"),Mo=B("expandAll"),So=B("toggleLock"),Eo=B("toggleVisibility"),Co=B("clearSelect"),To=B("layerDepth"),Lo=B("findParent"),Ao=B("style"),Po=B("layout"),Oo=s((function e(t){var n=this;if(r(this,e),Object.defineProperty(this,io,{writable:!0,value:void 0}),Object.defineProperty(this,ao,{writable:!0,value:void 0}),Object.defineProperty(this,oo,{writable:!0,value:!1}),Object.defineProperty(this,so,{writable:!0,value:new Map}),this.install=function(e){if(!e)throw new Error("container not found");document.querySelector(e).innerHTML=z(n,Po)[Po](),document.addEventListener("mousemove",z(n,yo)[yo]),document.addEventListener("mouseup",z(n,bo)[bo])},Object.defineProperty(this,lo,{writable:!0,value:function(){var e;z(n,io)[io].watch(z(n,io)[io].actions().SELECTED,z(n,uo)[uo]),z(n,io)[io].watch(z(n,io)[io].actions().UPDATED,z(n,co)[co]),null===(e=z(n,io)[io].history)||void 0===e||e.watch(z(n,ho)[ho])}}),Object.defineProperty(this,uo,{writable:!0,value:function(){var e,t;z(n,Co)[Co](),0!==(null===(e=z(n,io)[io].select)||void 0===e?void 0:e.size())&&(null===(t=z(n,io)[io].select)||void 0===t||t.get().forEach((function(e){var t,r=e.node,i=null===(t=z(n,so)[so].get(r))||void 0===t?void 0:t.layerNode;if(null!==i&&void 0!==i&&i.hasAttribute("data-selected")||(null===i||void 0===i||i.toggleAttribute("data-selected"),null===i||void 0===i||i.scrollIntoView({block:"nearest"})),!i&&r.parentElement!==z(n,io)[io].svgRoot){var a=z(n,so)[so].get(z(n,Lo)[Lo](r)),o=a.layerNode;o[Object.getOwnPropertySymbols(o)[0]].contains(r)&&z(n,Mo)[Mo](a,r)}})))}}),Object.defineProperty(this,co,{writable:!0,value:function(e){z(n,ao)[ao]=document.querySelector("#lux-layers-main"),e.forEach((function(e){z(n,po)[po](e),z(n,mo)[mo](e)}))}}),Object.defineProperty(this,ho,{writable:!0,value:function(e){var t,r,i,a=null===(t=z(n,io)[io].history)||void 0===t?void 0:t.index(),o=null===(r=z(n,io)[io].history)||void 0===r?void 0:r.item(a);(null===o||void 0===o?void 0:o.action)===(null===(i=z(n,io)[io].history)||void 0===i?void 0:i.actions().TITLE)&&o.record.forEach((function(t){var r,i=(null===(r=z(n,so)[so].get(t.target))||void 0===r?void 0:r.layerNode).querySelector(".lux-layers-label");"undo"===e?i.innerHTML=t.oldValue||n.tagName(t.target.nodeName):"redo"===e&&(i.innerHTML=t.newValue||n.tagName(t.target.nodeName))}))}}),Object.defineProperty(this,po,{writable:!0,value:function(e){null===e||void 0===e||e.addedNodes.forEach((function(t){if(e.target===z(n,io)[io].svgRoot){var r,i=null===(r=z(n,ao)[ao])||void 0===r?void 0:r.querySelector("#lux-layers-items");z(n,fo)[fo](t,i,e)}else{document.querySelectorAll("[data-expandable]").forEach((function(r){if(r.hasAttribute("data-expanded")){var i=r.querySelector(".lux-layers-children"),a=r[Object.getOwnPropertySymbols(r)[0]];e.target===a&&z(n,fo)[fo](t,i,e)}}))}}))}}),Object.defineProperty(this,fo,{writable:!0,value:function(e,t,r){var i,a;if(3!==e.nodeType&&n.tagName(e.localName)){var o,s=document.createElement("div"),l=z(n,To)[To](t);if(s.setAttribute("data-depth",l),s.classList.add("lux-layers-item"),"g"===e.localName&&s.toggleAttribute("data-expandable"),s[Symbol()]=e,null===(i=z(n,so)[so])||void 0===i||i.set(e,{depth:l,layerNode:s}),!s.hasAttribute("data-selected")&&null!==(a=z(n,io)[io].select)&&void 0!==a&&a.has(e)&&s.toggleAttribute("data-selected"),s.innerHTML='\n          <div class="lux-layers-item-background"></div>\n          <div style="padding-left:'.concat(24*l,'px" \n              class="lux-layers-main">\n              <div class="lux-layers-arrow">\n              <svg class="lux-layers-arrow-icon" viewBox="0 0 48 48">\n                  <path fill="currentColor" d="M20 12L32 24L20 36V12Z" />\n              </svg>\n              </div>\n              <div class="lux-layers-icon">').concat(n.icons(e.localName),'</div>\n              <div class="lux-layers-label">').concat(e.id?e.id:n.tagName(e.localName),'</div>\n              <div class="lux-layers-action-buttons">\n                <div class="lux-lock-button" ').concat("none"===e.getAttribute("pointer-events")&&"style='opacity:1;visibility:visible;'",">\n                ").concat(n.icons("lock"),'\n                </div>\n                <div class="lux-visibility-button"').concat("none"===e.getAttribute("display")&&"style='opacity:1;visibility:visible;'",">\n                ").concat(n.icons("eyes"),'\n                </div>\n              </div>\n          </div>\n          <div class="lux-layers-children-outer">\n              <div class="lux-layers-children"></div>\n          </div>\n          '),null!==r&&void 0!==r&&r.nextSibling){var u,c=null===r||void 0===r?void 0:r.nextSibling,d=null===(u=z(n,so)[so].get(c))||void 0===u?void 0:u.layerNode;null===t||void 0===t||t.insertBefore(s,d)}else if(null!==r&&void 0!==r&&r.previousSibling)try{var h,p=null===r||void 0===r?void 0:r.previousSibling,f=null===(h=z(n,so)[so].get(p))||void 0===h?void 0:h.layerNode;null===t||void 0===t||t.insertBefore(s,f.nextSilbing)}catch(b){t.append(s)}else t.append(s);if(l>0)null===(o=z(n,io)[io].select)||void 0===o||o.get().forEach((function(e){var t,r=e.node,i=null===(t=z(n,so)[so].get(r))||void 0===t?void 0:t.layerNode;!i||null!==i&&void 0!==i&&i.hasAttribute("data-selected")||(i.toggleAttribute("data-selected"),i.scrollIntoView({block:"nearest"}))}));s.ondblclick=function(e){e.stopPropagation(),z(n,xo)[xo](e,s)},s.onmousedown=function(e){e.stopPropagation(),z(n,go)[go](e,s)},s.onmouseenter=function(e){e.stopPropagation(),z(n,vo)[vo](s)},s.onmouseout=function(){var e;null===(e=z(n,io)[io].hover)||void 0===e||e.closeOutline()};var m=s.querySelector(".lux-layers-arrow");m.onclick=function(e){z(n,wo)[wo](e,s)};var v=s.querySelector(".lux-layers-action-buttons");v.ondblclick=v.onmousedown=m.ondblclick=m.onmousedown=function(e){e.stopPropagation()};var g=s.querySelector(".lux-lock-button"),y=s.querySelector(".lux-visibility-button");g.onclick=function(e){e.stopPropagation(),z(n,So)[So](e,s,g)},y.onclick=function(e){e.stopPropagation(),z(n,Eo)[Eo](e,s,y)}}}}),Object.defineProperty(this,mo,{writable:!0,value:function(e){null===e||void 0===e||e.removedNodes.forEach((function(e){var t,r;3!==e.nodeType&&(null===(t=z(n,so)[so].get(e))||void 0===t||null===(r=t.layerNode)||void 0===r||r.remove(),z(n,so)[so].delete(e))}))}}),Object.defineProperty(this,vo,{writable:!0,value:function(e){var t,r=e[Object.getOwnPropertySymbols(e)[0]];"none"!==getComputedStyle(r).display&&(z(n,oo)[oo]||null===(t=z(n,io)[io].hover)||void 0===t||t.highLight(r))}}),Object.defineProperty(this,go,{writable:!0,value:function(e,t){if(0===e.button&&(z(n,oo)[oo]=!0,null===t||void 0===t||!t.hasAttribute("data-selected"))){e.shiftKey||z(n,Co)[Co]();var r=t[Object.getOwnPropertySymbols(t)[0]];z(n,io)[io].focusNode(r)}}}),Object.defineProperty(this,yo,{writable:!0,value:function(e){var t,r;if(z(n,oo)[oo]){var i=e.clientY,a=e.target.parentNode,o=Number(null===a||void 0===a?void 0:a.dataset.depth),s=null===(t=z(n,ao)[ao])||void 0===t?void 0:t.getBoundingClientRect().y,l=null===a||void 0===a?void 0:a.getBoundingClientRect(),u=l.y,c=l.bottom,d=l.height,h=document.querySelector("#drop-marker");h.style.visibility="visible";var p=-99999999,f=a.querySelector(".lux-layers-main");f.style.background="none",a.hasAttribute("data-expandable")&&!a.hasAttribute("data-expanded")&&i>=u+d/3&&i<u+d/3*2?f.style.background="#cbe5ff":p=i>u+d/2?c:u;var m=Number(null===(r=z(n,ao)[ao])||void 0===r?void 0:r.scrollTop);document.querySelectorAll("[data-selected]").forEach((function(e){var t=e.getBoundingClientRect(),n=t.y,r=t.bottom;p!==n&&p!==r||"visible"===h.style.visibility&&(h.style.visibility="hidden")})),h.style.cssText="\n      top:".concat(p-Number(s)+m,"px;\n      left:").concat(24*o+16,"px")}}}),Object.defineProperty(this,bo,{writable:!0,value:function(e){if(z(n,oo)[oo]){z(n,oo)[oo]=!1;var t=e.clientY;document.querySelector("#drop-marker").style.visibility="hidden";var r=e.target.parentNode;if(null===r||void 0===r||!r.hasAttribute("data-selected")){var i=null===r||void 0===r?void 0:r.getBoundingClientRect(),a=i.y,o=i.height,s=t>a+o/2?"after":"before",l=r[Object.getOwnPropertySymbols(r)[0]];if(r.hasAttribute("data-expandable")&&!r.hasAttribute("data-expanded"))r.querySelector(".lux-layers-main").style.background="none",t>=a+o/3&&t<a+o/3*2&&(s="append");document.querySelectorAll("[data-selected]").forEach((function(e){if(r!==e){var t=e[Object.getOwnPropertySymbols(e)[0]],n=t.parentElement.getMatrixIterator();"before"===s?l.before(t):"after"===s?l.after(t):l.append(t),function(e,t){var n,r=null===(n=e.parentElement)||void 0===n?void 0:n.getMatrixIterator(),i=r.angle+t.angle,a=t.sx/r.sx,o=t.sy/r.sy,s=r.a,l=r.d,u=r.e,c=r.f,d=(t.e-u)/s,h=(t.f-c)/l,p=e.getMatrix(),f=new Ze;f.add(p.a,p.b,p.c,p.d,p.e,p.f);var m=f.rotate(i);e.setAttribute("transform","matrix(\n           ".concat(m.a*a,",\n           ").concat(m.b*a,",\n           ").concat(m.c*o,",\n           ").concat(m.d*o,",\n           ").concat(m.e*a+d,",").concat(m.f*o+h,")"))}(t,n)}}))}}}}),Object.defineProperty(this,xo,{writable:!0,value:function(e,t){e.stopPropagation();var r=t[Object.getOwnPropertySymbols(t)[0]],i=t.querySelector(".lux-layers-label");i.toggleAttribute("hidden");var a=document.createElement("input");a.classList.add("lux-layers-rename"),a.setAttribute("value",i.innerHTML),i.before(a),a.select(),a.onkeydown=function(e){e.stopPropagation()},a.onchange=function(e){var t,a,o;e.stopPropagation(),null===(t=z(n,io)[io].history)||void 0===t||t.add(z(n,io)[io].history.actions().TITLE,"\u4fee\u6539\u6807\u9898"),r.id=i.innerHTML=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value,""===i.innerHTML&&(i.innerHTML=n.tagName(r.localName)),null===(o=z(n,io)[io].history)||void 0===o||o.end()},a.onblur=function(){a.remove(),i.removeAttribute("hidden")},a.ondblclick=function(e){e.stopPropagation()}}}),Object.defineProperty(this,wo,{writable:!0,value:function(e,t){e.stopPropagation(),z(n,_o)[_o](t)}}),Object.defineProperty(this,_o,{writable:!0,value:function(e){var t=e.querySelector(".lux-layers-children");e.hasAttribute("data-expanded")?(e.querySelectorAll(".lux-layers-item").forEach((function(e){var t=e[Object.getOwnPropertySymbols(e)[0]];z(n,so)[so].delete(t)})),t.innerHTML=""):e[Object.getOwnPropertySymbols(e)[0]].childNodes.forEach((function(e){z(n,fo)[fo](e,t)}));e.toggleAttribute("data-expanded")}}),Object.defineProperty(this,Mo,{writable:!0,value:function(e,t){var r=e.layerNode,i=r[Object.getOwnPropertySymbols(r)[0]];(z(n,_o)[_o](r),i!==t.parentElement)&&r.querySelectorAll(".lux-layers-item").forEach((function(e){var r=e[Object.getOwnPropertySymbols(e)[0]];r.contains(t)&&z(n,Mo)[Mo](z(n,so)[so].get(r),t)}))}}),Object.defineProperty(this,So,{writable:!0,value:function(e,t,n){var r=t[Object.getOwnPropertySymbols(t)[0]];"none"!==r.getAttribute("pointer-events")?(r.setAttribute("pointer-events","none"),n.style.visibility="visible",n.style.opacity=1):(r.removeAttribute("pointer-events"),n.removeAttribute("style"))}}),Object.defineProperty(this,Eo,{writable:!0,value:function(e,t,n){e.stopPropagation();var r=t[Object.getOwnPropertySymbols(t)[0]];"none"!==r.getAttribute("display")?(r.setAttribute("display","none"),n.style.visibility="visible",n.style.opacity=1):(r.removeAttribute("display"),n.removeAttribute("style"))}}),Object.defineProperty(this,Co,{writable:!0,value:function(){document.querySelectorAll("[data-selected]").forEach((function(e){e.removeAttribute("data-selected")}))}}),Object.defineProperty(this,To,{writable:!0,value:function(e){var t=0;return e!==z(n,ao)[ao]&&(e.hasAttribute("data-expandable")&&t++,t+=z(n,To)[To](e.parentElement)),t}}),Object.defineProperty(this,Lo,{writable:!0,value:function(e){var t=e;return z(n,so)[so].get(e)||(t=z(n,Lo)[Lo](e.parentElement)),t}}),this.uninstall=function(){var e;null===(e=z(n,io)[io].history)||void 0===e||e.removeWatch(z(n,ho)[ho]),z(n,io)[io].removeWatch(z(n,io)[io].actions().SELECTED,z(n,uo)[uo]),z(n,io)[io].removeWatch(z(n,io)[io].actions().UPDATED,z(n,co)[co]),document.removeEventListener("mousemove",z(n,yo)[yo]),document.removeEventListener("mouseup",z(n,bo)[bo])},Object.defineProperty(this,Ao,{writable:!0,value:function(){return"<style>\n          #lux-layers-main{\n            height: 100%;\n            width: 100%;\n            position: relative;\n            overflow-x: hidden;\n            overflow-y: auto;\n            background-color: #ffffff;\n            user-select: none;\n          }\n \n          .lux-layers-item{\n              position: relative;\n          }\n \n          .lux-layers-item[data-selected] > .lux-layers-main{\n              color:white;\n          }\n \n          .lux-layers-item[data-selected] > .lux-layers-item-background {\n              background: #409eff;\n          }\n \n          .lux-layers-item > .lux-layers-item-background {\n              position: absolute;\n              z-index: 0;\n              top: 0px;\n              left: 0px;\n              width: 100%;\n              height: 30px;\n          }\n \n          .lux-layers-item > .lux-layers-main .lux-layers-arrow-icon {\n              width: 17px;\n              height: 17px;\n              min-width: 10px;\n              transition: transform 0.2s ease-in-out 0s;\n              transform:  rotate(0);\n              pointer-events: none;\n          }\n \n          .lux-layers-item[data-expanded] > .lux-layers-main .lux-layers-arrow-icon {\n              transform: rotate(90deg);\n          }\n \n          .lux-layers-item[data-expandable] > .lux-layers-main .lux-layers-arrow {\n              visibility: visible;\n              pointer-events: all;\n          }\n \n          .lux-layers-main{\n              position: relative;\n              z-index: 1;\n              height: 30px;\n              padding: 0px 0px 0px 24px;\n              display: flex;\n              align-items: center;\n          }\n  \n          .lux-layers-arrow{\n              width: 27px;\n              min-width: 27px;\n              height: 20px;\n              display: flex;\n              align-items: center;\n              visibility: hidden;\n              justify-content: center;\n              pointer-events: none;\n          }\n \n          .lux-layers-icon{\n            width:17px;\n            height:17px;\n            min-width:17px;\n            pointer-events: none;\n          }\n  \n          .lux-layers-label{\n             margin-left: 10px;\n             font-size: 13px;\n             white-space: pre;\n             overflow: hidden;\n             text-overflow: ellipsis;\n             pointer-events: none;\n          }\n \n          .lux-layers-action-buttons{\n              margin-left: auto;\n              display: flex;\n              align-items:center;\n          }\n \n          .lux-layers-item .lux-layers-children-outer {\n              overflow:hidden;\n          }\n \n          .lux-layers-item .lux-layers-children-outer .lux-layers-children {\n              transform-origin: 0px 0px;\n              transition: transform 0.2s ease-in-out 0s;\n          }\n \n          .lux-lock-button{\n            width: 20px;\n            height: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            visibility: hidden;\n            pointer-events: none;\n            opacity: 0.3;\n          }\n \n          .lux-visibility-button {\n            width: 20px;\n            height: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            visibility: hidden;\n            pointer-events: none;\n            opacity: 0.3;\n            padding-right: 4px;\n          }\n  \n          .lux-layers-main:hover .lux-visibility-button,.lux-layers-main:hover .lux-lock-button{\n            visibility: visible;\n            pointer-events: all;\n          }\n  \n          .lux-layers-rename{\n            border:0;\n            margin:0;\n            margin-left: 6px;\n            padding:2px 4px;\n            outline:none;\n            border-radius:4px;\n            background:#fff;\n            color:#000;\n            font-size: 13px;\n            white-space: pre;\n          }\n  \n          #drop-marker {\n              position: absolute;\n              z-index: 100;\n              top: 23px;\n              height: 2px;\n              display: flex;\n              align-items: center;\n              color: rgb(53, 132, 228);\n              background: rgb(53, 132, 228);\n              width:calc(100% - 16px);\n              box-shadow: rgb(255 255 255 / 70%) 0px 0px 0px 1px;\n              pointer-events: none;\n          }\n  \n          #drop-marker #drop-marker-circle {\n              width: 8px;\n              height: 8px;\n              box-sizing: border-box;\n              border: 2px solid currentcolor;\n              background: white;\n              border-radius: 99px;\n              box-shadow: rgb(255 255 255 / 70%) 0px 0px 0px 1px;\n          }\n      </style>"}}),Object.defineProperty(this,Po,{writable:!0,value:function(){return"".concat(z(n,Ao)[Ao](),'\n      <div id="lux-layers-main">\n         <div id="lux-layers-items"></div>\n         <div id="drop-marker" style="visibility:hidden;">\n             <div id="drop-marker-circle"></div>\n         </div>\n      </div>')}}),this.tagName=function(e){switch(e){case"g":return"\u7f16\u7ec4";case"text":return"\u6587\u672c";case"rect":return"\u77e9\u5f62";case"line":return"\u76f4\u7ebf";case"path":return"\u8def\u5f84";case"ellipse":return"\u692d\u5706";case"circle":return"\u5706\u5f62";case"image":return"\u56fe\u7247";case"polygon":return"\u591a\u8fb9\u5f62";case"polyline":return"\u6298\u7ebf";default:return null}},this.icons=function(e){switch(e){case"rect":return'<svg viewBox="0 0 100 100" width="17" height="17">\n            <rect fill="currentColor" width="91.785" height="92.345" style="opacity: 0.2;" y="2.789" x="4.266"></rect>\n            <path fill="currentColor" d="M 0 0 C 0 0 100 0 100 0 C 100 0 100 100 100 100 C 100 100 0 100 0 100 M 6.162 6.162 C 6.162 6.162 6.162 93.838 6.162 93.838 C 6.162 93.838 93.838 93.838 93.838 93.838 C 93.838 93.838 93.838 6.162 93.838 6.162"></path>\n        </svg>';case"ellipse":return'<svg viewBox="0 0 100 100" width="17" height="17">\n            <rect fill="currentColor" width="93.882" height="93.883" style="opacity: 0.2; stroke-width: 1.002;" rx="45.893" ry="45.893" x="3.059" y="3.059"></rect>\n            <path fill="currentColor" d="M 50.001 0 C 77.615 0 100 22.25 100 49.697 L 100 50.303 C 100 77.75 77.615 100 50.001 100 C 22.386 100 0 77.75 0 50.303 L 0 49.697 C 0 22.25 22.386 0 50.001 0 Z M 5.514 49.73 L 5.514 50.27 C 5.514 74.689 25.432 94.486 50.001 94.486 C 74.569 94.486 94.486 74.689 94.486 50.27 L 94.486 49.73 C 94.486 25.311 74.569 5.514 50.001 5.514 C 25.432 5.514 5.514 25.311 5.514 49.73 Z" style="stroke-width: 1.067;"></path>\n        </svg>';case"path":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 14.138 36.021 L 1.316 33.647 C 4.121 20.442 10.812 10.616 21.388 4.169 C 28.589 -0.221 36.952 -1.319 46.475 0.874 C 53.88 2.579 60.807 5.705 67.255 10.25 C 71.918 13.537 74.536 18.605 75.11 25.454 C 75.748 33.065 72.031 39.738 63.96 45.473 C 57.121 50.332 50.025 54.809 42.674 58.904 C 37.251 61.925 33.788 67.077 32.285 74.362 C 31.315 79.065 34.356 82.781 41.407 85.511 C 48.812 88.378 56.752 88.378 65.227 85.511 C 74.905 82.238 83.521 76.747 91.075 69.04 L 99.944 78.669 C 92.173 86.44 81.867 92.691 69.028 97.421 C 60.608 100.523 51.654 101.114 42.167 99.195 C 34.428 97.63 27.924 93.153 22.655 85.765 C 17.746 78.882 18.084 70.435 23.669 60.424 C 26.638 55.103 30.861 50.71 36.339 47.247 C 41.804 43.792 47.463 40.667 53.317 37.871 C 57.204 36.015 60.076 32.805 61.933 28.242 C 63.021 25.568 62.007 22.865 58.892 20.133 C 53.125 15.076 45.777 12.88 36.846 13.544 Q 21.029 14.72 14.138 36.021 Z"></path>\n      </svg>';case"line":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 11.813 12.152 L 88.307 89.982" style="stroke-width: 14;"></path>\n        <rect fill="currentColor" y="122.862" width="97.427" height="14.765" x="-0.59" transform="matrix(-0.707107, -0.707107, 0.707108, -0.707106, -8.069685, 176.125723)"></rect>\n      </svg>';case"text":return'<svg viewBox="0 0 100 100" width="17" height="15.39">\n            <path fill="currentColor" d="M 97.668 91.505 C 97.668 91.505 100 91.505 100 91.505 C 100 91.505 100 100 100 100 C 100 100 64.811 100 64.811 100 C 64.811 100 64.811 91.505 64.811 91.505 C 64.811 91.505 67.862 91.505 67.862 91.505 C 70.346 91.505 72.095 89.004 71.289 86.606 C 71.289 86.606 66.873 73.436 66.873 73.436 C 66.873 73.436 33.126 73.436 33.126 73.436 C 33.126 73.436 28.711 86.606 28.711 86.606 C 27.904 89.004 29.653 91.505 32.138 91.505 C 32.138 91.505 35.188 91.505 35.188 91.505 C 35.188 91.505 35.188 100 35.188 100 C 35.188 100 0 100 0 100 C 0 100 0 91.505 0 91.505 C 0 91.505 2.332 91.505 2.332 91.505 C 5.545 91.505 8.41 89.436 9.477 86.343 C 9.477 86.343 42.8 0 42.8 0 C 42.8 0 58.366 0 58.366 0 C 58.366 0 90.522 86.343 90.522 86.343 C 91.59 89.435 94.455 91.505 97.668 91.505 Z M 38.524 60.7 C 38.524 60.7 61.475 60.7 61.475 60.7 C 61.475 60.7 50 21.282 50 21.282 C 50 21.282 38.524 60.7 38.524 60.7 Z"></path>\n        </svg>';case"image":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 100 3.67 C 100 2.046 99.994 -0.001 99.994 -0.001 C 99.994 -0.001 96.782 0 96.639 0 L 3.361 0 C 3.095 0 -0.016 -0.011 -0.016 -0.011 C -0.016 -0.011 0 2.125 0 3.67 L 0 96.33 C 0 96.626 0.001 99.997 0.001 99.997 C 0.001 99.997 1.952 100 3.361 100 L 96.639 100 C 97.043 100 100.004 100.005 100.004 100.005 C 100.004 100.005 100 97.723 100 96.33 L 100 3.67 Z M 93.034 56.899 C 89.771 62.463 68.517 77.161 39.497 64.829 C 21.941 57.369 0.51 70.534 6.723 77.064 L 6.723 7.791 L 93.081 7.791 L 93.081 55.046 L 93.034 56.899 Z"></path>\n      </svg>';case"polyline":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 7.775 93.508 L 24.274 4.394 L 96.292 42.21 L 75.119 97.648 L 63.006 92.767 L 80.099 48.309 L 33.848 24.038 L 20.671 96.553 L 7.775 93.508 Z" style="stroke-width: 1px;"></path>\n      </svg>';case"polygon":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 8.721 93.504 L 25.22 4.39 L 97.238 42.206 L 76.065 97.644 L 75.756 97.519 L 75.756 98.612 L 10.379 98.612 L 7.78 98.614 L 8.721 93.504 Z M 81.045 48.305 L 34.794 24.034 L 23.609 85.587 L 66.711 85.587 L 81.045 48.305 Z" style="stroke-width: 1px;"></path>\n      </svg>';case"g":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 88.789 20.909 L 50 20.909 L 40.303 11.211 L 11.211 11.211 C 5.878 11.211 1.562 15.575 1.562 20.909 L 1.515 79.091 C 1.515 84.425 5.878 88.789 11.211 88.789 L 88.789 88.789 C 94.122 88.789 98.485 84.425 98.485 79.091 L 98.485 30.606 C 98.485 25.273 94.122 20.909 88.789 20.909 Z M 88.789 79.091 L 11.211 79.091 L 11.211 30.606 L 88.789 30.606 L 88.789 79.091 Z" style="stroke-width: 4.849;"></path>\n      </svg>';case"lock":return'<svg viewBox="0 0 100 100" width="15" height="15">\n            <path fill="currentColor" d="M 19.882 14.268 L 80.459 14.268 L 80.459 48.523 L 67.286 48.523 L 67.286 28.205 L 33.058 28.205 L 33.058 48.523 L 19.882 48.523 Z"></path>\n            <rect fill="currentColor" x="14.319" y="48.523" width="71.362" height="51.477"></rect>\n            </svg>';case"eyes":return'<svg viewBox="0 0 100 100" width="15" height="15">\n          <path fill="currentColor" d="M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z"></path>\n          <path fill="currentColor" d="M 50.017 26.257 C 62.183 26.257 72.056 36.13 72.056 48.296 C 72.056 51.161 71.483 53.85 70.47 56.362 L 83.341 69.233 C 89.996 63.68 95.242 56.495 98.459 48.296 C 90.834 28.946 72.012 15.237 49.973 15.237 C 43.802 15.237 37.895 16.339 32.43 18.323 L 41.951 27.844 C 44.463 26.83 47.152 26.257 50.017 26.257 Z M 5.938 14.223 L 15.988 24.273 L 18.016 26.301 C 10.699 31.987 4.969 39.568 1.53 48.296 C 9.156 67.647 27.978 81.355 50.017 81.355 C 56.849 81.355 63.373 80.033 69.323 77.652 L 71.175 79.504 L 84.09 92.375 L 89.688 86.777 L 11.536 8.625 L 5.938 14.223 Z M 30.314 38.599 L 37.146 45.431 C 36.926 46.357 36.793 47.326 36.793 48.296 C 36.793 55.613 42.7 61.52 50.017 61.52 C 50.987 61.52 51.956 61.387 52.882 61.167 L 59.714 67.999 C 56.761 69.454 53.499 70.335 50.017 70.335 C 37.851 70.335 27.978 60.462 27.978 48.296 C 27.978 44.814 28.859 41.552 30.314 38.599 Z M 49.312 35.161 L 63.197 49.045 L 63.285 48.34 C 63.285 41.023 57.378 35.117 50.061 35.117 L 49.312 35.161 Z"></path>\n          </svg>'}},!t)throw new Error("stage not found");z(this,io)[io]=t,z(this,lo)[lo]()})),Ro=Oo,No=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).init=function(){var e=window.stage;(Ni=new Ro(e)).install("#objects-main")},e.render=function(){return(0,m.jsxs)("div",{id:"objects",children:[(0,m.jsx)("header",{children:(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"Objects"})})}),(0,m.jsx)("section",{id:"objects-content",className:"flex",children:(0,m.jsx)("main",{id:"objects-main"})})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){Ni.uninstall()}}]),n}(e.Component),ko=No,Do=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).init=function(){},e.render=function(){return(0,m.jsxs)("div",{id:"export",children:[(0,m.jsx)("header",{children:(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{href:"#objects",children:"Objects"})})}),(0,m.jsx)("section",{id:"objects-content",className:"flex",children:(0,m.jsx)("main",{id:"objects-main"})})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Io=Do,jo=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.init=function(){var e,t=window.stage;null===(e=t.history)||void 0===e||e.watch((function(){var e,n;i.setState({history:null===(e=t.history)||void 0===e?void 0:e.get(),index:null===(n=t.history)||void 0===n?void 0:n.index()})}))},i.getIcon=function(e){var t,n,r,i,a,o,s,l,u,c,d,h=window.stage;return e===(null===(t=h.history)||void 0===t?void 0:t.actions().ADD)?"#objects-panel":e===(null===(n=h.history)||void 0===n?void 0:n.actions().SCALE)||e===(null===(r=h.history)||void 0===r?void 0:r.actions().MOUSE_SCALE)||e===(null===(i=h.history)||void 0===i?void 0:i.actions().MOUSE_MOVE)?"#transform-tool":e===(null===(a=h.history)||void 0===a?void 0:a.actions().KEYBOARD_MOVE)||e===(null===(o=h.history)||void 0===o?void 0:o.actions().DELETE)||e===(null===(s=h.history)||void 0===s?void 0:s.actions().EDIT)||e===(null===(l=h.history)||void 0===l?void 0:l.actions().NODE_X)||e===(null===(u=h.history)||void 0===u?void 0:u.actions().NODE_Y)||e===(null===(c=h.history)||void 0===c?void 0:c.actions().NODE_WIDTH)||e===(null===(d=h.history)||void 0===d?void 0:d.actions().NODE_HEIGHT)?"#menu":void 0},i.handleHistory=function(e){var t=window.stage,n=i.state.index-e-1;if(n>0)for(var r=0;r<n;r++){var a;null===t||void 0===t||null===(a=t.history)||void 0===a||a.undo()}else if(n<0)for(var o=0;o<Math.abs(n);o++){var s;null===t||void 0===t||null===(s=t.history)||void 0===s||s.redo()}},i.render=function(){return(0,m.jsxs)("div",{id:"history",children:[(0,m.jsx)("header",{children:(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"History"})})}),(0,m.jsx)("section",{id:"history-content",className:"flex",children:(0,m.jsx)("main",{id:"history-main",children:(0,m.jsx)("div",{id:"items",children:i.state.history.map((function(e,t){return(0,m.jsxs)("div",{style:{background:t===i.state.index-1?"#3584e4":"none",color:t===i.state.index-1?"#ffffff":"#333333",opacity:t+1>i.state.index?.5:1},className:"item",skin:"dock",value:e.value,onClick:function(){return i.handleHistory(t)},children:[(0,m.jsx)("x-icon",{className:"icon",href:i.getIcon(e.action)}),(0,m.jsx)("span",{className:"label",children:(0,m.jsx)("x-message",{href:"#add-object",children:e.CN_label})})]},t)}))})})})]})},i.state={history:[],index:0},i}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),zo=jo,Fo=1.41732,Bo=2.83464,Uo=function(){var e=M(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'{\n  "version": "1.0",\n  "cartonParams": [  \n    {\n        "cortype": "A",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "B",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "C",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "BC1",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "BC",\n        "connectlen": 33,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EBA",\n        "connectlen": 28,\n        "coverlen": 6,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "C1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "AB",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EBC",\n        "connectlen": 28,\n        "coverlen": 6,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "B1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "E1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EB",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      }\n    ]\n}');case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ho=function(){var e=M(w().mark((function e(t,n,r,i,a,o,s,l){var u,c,d,h,p,f,m,v,g,y,b,x,_,M,S,E,C,T,L,A,P,O,R,N,k,D,I,j,z,F,B,U,H,G,V,W,q,X,Z,Y,J,Q,K,$,ee;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uo();case 2:if(u=e.sent,c=JSON.parse(u).cartonParams,d=c.find((function(e){return i===e.cortype})),d){e.next=7;break}return e.abrupt("return","\u6ca1\u6709".concat(i,"\u8be5\u7bb1\u578b\u695e\u578b\u53c2\u6570"));case 7:return h=Math.floor(Number(d.coverlen)/2),p=Number(d.connectlen)+h,f=Number(d.connectlen)+h+2*t+2*n,m=r+2*Math.floor((n+Number(d.coverlen))/2),v=f*Bo,g=m*Bo,y=null===a||void 0===a?void 0:a.getAttribute("data-version"),(b=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("viewBox","0 0 ".concat(v," ").concat(g)),b.setAttribute("xmlns","http://www.w3.org/2000/svg"),b.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),y&&b.setAttribute("data-version",y),0,M=(_=(x=0+p)+t)-3,S=_+3,C=(E=_+n)-3,T=E+3,A=(L=E+t)-3,P=L+3,O=L+n-h,R=Math.floor((n+Number(d.coverlen))/2),0,D=(k=(N=0+R)+r)+R,(I=new Qa({id:"\u8fb9\u6846",pointerEvents:"none",display:l?"unset":"none"})).add(new Ka({id:"AT",x:x*Bo,y:0,width:(M-x)*Bo,height:(N-0)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"AB",x:x*Bo,y:k*Bo,width:(M-x)*Bo,height:(D-k)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"BT",x:S*Bo,y:0,width:(C-S)*Bo,height:(N-0)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"BB",x:S*Bo,y:k*Bo,width:(C-S)*Bo,height:(D-k)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"CT",x:T*Bo,y:0,width:(A-T)*Bo,height:(N-0)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"CB",x:T*Bo,y:k*Bo,width:(A-T)*Bo,height:(D-k)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"DT",x:P*Bo,y:0,width:(O-P)*Bo,height:(N-0)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"DB",x:P*Bo,y:k*Bo,width:(O-P)*Bo,height:(D-k)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"E",x:0,y:N*Bo,width:(x-0)*Bo,height:(k-N)*Bo,fill:"none",stroke:"black",strokeWidth:Fo})),I.add(new Ka({id:"A",x:x*Bo,y:N*Bo,width:(_-x)*Bo,height:(k-N)*Bo,fill:"none",stroke:"red",strokeWidth:Fo})),I.add(new Ka({id:"B",x:_*Bo,y:N*Bo,width:(E-_)*Bo,height:(k-N)*Bo,fill:"none",stroke:"red",strokeWidth:Fo})),I.add(new Ka({id:"C",x:E*Bo,y:N*Bo,width:(L-E)*Bo,height:(k-N)*Bo,fill:"none",stroke:"red",strokeWidth:Fo})),I.add(new Ka({id:"D",x:L*Bo,y:N*Bo,width:(O-L)*Bo,height:(k-N)*Bo,fill:"none",stroke:"red",strokeWidth:Fo})),U=-60,-65,-55,-66,G=(H=O+30)-5,V=H+5,W=H+15,X=(q=H+50)-5,Z=q+5,Y=q+15,Yo(I,Bo,0,F=-25,0,z=-35,0,j=-30,x,j,x,F,x,z,x/2,B=-36,x-0+""),Yo(I,Bo,x,F,x,z,x,j,_,j,_,F,_,z,(_-x)/2+x,B,_-x+""),Yo(I,Bo,_,F,_,z,_,j,E,j,E,F,E,z,(E-_)/2+_,B,E-_+""),Yo(I,Bo,E,F,E,z,E,j,L,j,L,F,L,z,(L-E)/2+E,B,L-E+""),Yo(I,Bo,L,F,L,z,L,j,O,j,O,F,O,z,(O-L)/2+L,B,O-L+""),Yo(I,Bo,0,-55,0,-65,0,U,O,U,O,-55,O,-65,(O-0)/2,-66,O-0+""),Yo(I,Bo,G,0,V,0,H,0,H,N,G,N,V,N,W,(N-0)/2+0,N-0+""),Yo(I,Bo,G,N,V,N,H,N,H,D,G,D,V,D,W,(k-N)/2+N,k-N+""),Yo(I,Bo,G,k,V,k,H,k,H,D,G,D,V,D,W,(D-k)/2+k,D-k+""),Yo(I,Bo,X,0,Z,0,q,0,q,D,X,D,Z,D,Y,(D-0)/2+0,D-0+""),J=new Qa({id:"\u7f16\u8f91"}),o&&(o["\u8ba2\u5355\u7f16\u53f7"]||o["\u8ba2\u8d27\u6570\u91cf"])&&(Q=0+(x-0)*Bo/2,K=N*Bo+(k-N)*Bo/2,($=new eo({id:"\u9489\u6761",fontSize:"30px",fontFamily:"'SimHei','\u9ed1\u4f53'",textAnchor:"middle",content:"".concat(o["\u8ba2\u5355\u7f16\u53f7"]).concat(o["\u8ba2\u5355\u7f16\u53f7"]&&o["\u8ba2\u8d27\u6570\u91cf"]?"-"+o["\u8ba2\u8d27\u6570\u91cf"]:o["\u8ba2\u8d27\u6570\u91cf"])})).node.setAttribute("transform","matrix(0, -1, 1, 0, ".concat(Q,",  ").concat(K,")")),J.add($),delete o["\u8ba2\u5355\u7f16\u53f7"],delete o["\u8ba2\u8d27\u6570\u91cf"]),s&&(ee=Wo(t,n,r,p,h,R),Go(ee,J.node,I.node,a,o)),b.innerHTML=I.node.outerHTML+J.node.outerHTML,e.abrupt("return",b);case 81:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s,l){return e.apply(this,arguments)}}(),Go=function(e,t,n,r,i){var a=(null===r||void 0===r?void 0:r.getElementsByTagName("text"))||[];for(var o in i)for(var s=0;s<a.length;s++){var l=a[s].getAttribute("id");if(l&&l===o){var u=i[o].toString(),c=a[s].getAttribute("font-size");c&&u&&-1!==u.indexOf("/n")&&(u=u.replace(RegExp("/n","g"),'<tspan x="0" dy="'.concat(c,'">\u200b</tspan>'))),a[s].innerHTML=u}}for(var d=(null===r||void 0===r?void 0:r.getElementsByTagName("g"))||[],h=0;h<d.length;h++){var p=d[h],f=p.dataset.area,m=p.dataset.pt,v=f;if(f&&m){var g=p.dataset.x||0,y=p.dataset.y||0,b=e.get(v+"-"+m);b&&(Vo(b,p,m,Number(g),Number(y)),p.hasAttribute("data-join-blade")?n.innerHTML=n.innerHTML+p.outerHTML:t.innerHTML=t.innerHTML+p.outerHTML)}}},Vo=function(e,t,n,r,i){var a=e.x,o=e.y,s=r,l=i;-1!=n.indexOf("T")&&(o+=l),-1!=n.indexOf("B")&&(o-=l),-1!=n.indexOf("L")&&(a+=s),-1!=n.indexOf("R")&&(a-=s),t.setAttribute("transform","matrix(1, 0, 0, 1, ".concat(a*Bo,",  ").concat(o*Bo,")"))},Wo=function(e,t,n,r,i,a){var o,s,l,u,c,d,h,p,f,m,v,g,y,b,x,w;o=r/2,l=(s=r)+e/2,c=(u=s+e)+t/2,h=(d=u+t)+e/2,f=(p=d+e)+(t-i)/2,m=p+(t-i),v=a/2,y=(g=a)+n/2,x=(b=g+n)+a/2,w=b+a;var _=new Map;return Zo(_,"E-C",o,y),Xo(_,"A","L",s,0,v,g,y,b,x,w),qo(_,"A",l,0,v,g,y,b,x,w),Xo(_,"A","R",u,0,v,g,y,b,x,w),Xo(_,"B","L",u,0,v,g,y,b,x,w),qo(_,"B",c,0,v,g,y,b,x,w),Xo(_,"B","R",d,0,v,g,y,b,x,w),Xo(_,"C","L",d,0,v,g,y,b,x,w),qo(_,"C",h,0,v,g,y,b,x,w),Xo(_,"C","R",p,0,v,g,y,b,x,w),Xo(_,"D","L",p,0,v,g,y,b,x,w),qo(_,"D",f,0,v,g,y,b,x,w),Xo(_,"D","R",m,0,v,g,y,b,x,w),_},qo=function(e,t,n,r,i,a,o,s,l,u){Zo(e,t+"T-TC",n,r),Zo(e,t+"T-C",n,i),Zo(e,t+"T-BC",n,a),Zo(e,t+"-TC",n,a),Zo(e,t+"-C",n,o),Zo(e,t+"-BC",n,s),Zo(e,t+"B-TC",n,s),Zo(e,t+"B-C",n,l),Zo(e,t+"B-BC",n,u)},Xo=function(e,t,n,r,i,a,o,s,l,u,c){Zo(e,t+"T-"+n+"T",r,i),Zo(e,t+"T-"+n+"C",r,a),Zo(e,t+"T-"+n+"B",r,o),Zo(e,t+"-"+n+"T",r,o),Zo(e,t+"-"+n+"C",r,s),Zo(e,t+"-"+n+"B",r,l),Zo(e,t+"B-"+n+"T",r,l),Zo(e,t+"B-"+n+"C",r,u),Zo(e,t+"B-"+n+"B",r,c)},Zo=function(e,t,n,r){e.set(t,{x:n,y:r})},Yo=function(e,t,n,r,i,a,o,s,l,u,c,d,h,p,f,m,v){var g=new $a({fill:"green",stroke:"green"});g.node.setAttribute("x1",n*t+""),g.node.setAttribute("y1",r*t+""),g.node.setAttribute("x2",i*t+""),g.node.setAttribute("y2",a*t+""),e.add(g);var y=new $a({fill:"green",stroke:"green"});y.node.setAttribute("x1",o*t+""),y.node.setAttribute("y1",s*t+""),y.node.setAttribute("x2",l*t+""),y.node.setAttribute("y2",u*t+""),e.add(y);var b=new $a({fill:"green",stroke:"green"});b.node.setAttribute("x1",c*t+""),b.node.setAttribute("y1",d*t+""),b.node.setAttribute("x2",h*t+""),b.node.setAttribute("y2",p*t+""),e.add(b)},Jo=function(e){u(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).createBlade=M(w().mark((function e(){var t,n,r,i,a,o,s,l,u,c,d,h,p,f,m,v,g;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.stage,a=null===(t=document.querySelector("#length-input"))||void 0===t?void 0:t.getAttribute("value"),o=null===(n=document.querySelector("#width-input"))||void 0===n?void 0:n.getAttribute("value"),s=null===(r=document.querySelector("#height-input"))||void 0===r?void 0:r.getAttribute("value"),e.next=6,Ho(Number(a),Number(o),Number(s),"B",null,null,!0,!0);case 6:if(l=e.sent,i.svgRoot&&l){if(c=null===(u=i.svgRoot)||void 0===u?void 0:u.querySelector("#\u8fb9\u6846"))d=l.querySelector("#\u8fb9\u6846"),i.svgRoot.replaceChild(d,c);else for(h=l.childNodes,p=0;p<h.length;p++)i.svgRoot.append(h[p].cloneNode(!0));f=null===l||void 0===l?void 0:l.viewBox.baseVal,null===i||void 0===i||i.setViewSize(f.width,f.height),m=document.querySelector("#board"),v=null===m||void 0===m?void 0:m.getBoundingClientRect(),g=v.height,i.setBoardSize(Number(g-40)/f.height,20,20),i.history.clear(),i.select.resetFrame(!0)}case 8:case"end":return e.stop()}}),e)}))),e.render=function(){return(0,m.jsxs)("div",{id:"three-box",children:[(0,m.jsx)("header",{children:(0,m.jsx)("h2",{children:(0,m.jsx)("x-message",{children:"3D-BOX"})})}),(0,m.jsx)("section",{id:"three-box-content",className:"flex",children:(0,m.jsxs)("main",{id:"three-box-main",children:[(0,m.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,m.jsx)("h4",{id:"x-heading",children:(0,m.jsx)("x-message",{children:"Length"})}),(0,m.jsx)("x-numberinput",{id:"length-input",value:"320",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]}),(0,m.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,m.jsx)("h4",{id:"x-heading",children:(0,m.jsx)("x-message",{children:"Width"})}),(0,m.jsx)("x-numberinput",{id:"width-input",value:"200",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]}),(0,m.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,m.jsx)("h4",{id:"x-heading",children:(0,m.jsx)("x-message",{children:"Height"})}),(0,m.jsx)("x-numberinput",{id:"height-input",value:"450",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,m.jsx)("x-stepper",{})})]}),(0,m.jsx)("x-box",{id:"blade-btn",children:(0,m.jsx)("x-button",{toggled:"",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.createBlade()},children:"CREATE BOX"})})]})})]})},e}return s(n,[{key:"componentDidMount",value:function(){var e=document.querySelector("#length-input"),t=document.querySelector("#width-input"),n=document.querySelector("#height-input");null===e||void 0===e||e.addEventListener("keydown",(function(e){e.stopPropagation()})),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()})),null===n||void 0===n||n.addEventListener("keydown",(function(e){e.stopPropagation()}));var r=document.querySelector("#create-blade");null===r||void 0===r||r.addEventListener("click",this.createBlade)}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Qo=Jo,Ko=[{value:"Fill",href:"#fill-panel"},{value:"Stroke",href:"#stroke-panel"},{value:"Typography",href:"#typography-panel"},{value:"Geometry",href:"#geometry-panel"},{value:"Arrangement",href:"#arrangement-panel"},{value:"Objects",href:"#objects-panel"},{value:"History",href:"#history-panel"},{value:"3DBox",href:"#3d-box"}],$o=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.selectAction=function(e){var t=e.target,n=document.querySelector("#actionbar"),r=null===n||void 0===n?void 0:n.querySelector("x-buttons");null===r||void 0===r||r.childNodes.forEach((function(e){e.removeAttribute("toggled")})),t.textContent===i.state.currenAction?i.setState({currenAction:""}):(t.setAttribute("toggled",""),i.setState({currenAction:t.textContent}))},i.render=function(){return(0,m.jsxs)("div",{id:"actionbar",className:"flex",children:[(0,m.jsx)("x-buttons",{id:"buttons",vertical:"",children:Ko.map((function(e,t){return(0,m.jsxs)("x-button",{skin:"dock",value:e.value,onClick:function(e){return i.selectAction(e)},children:[(0,m.jsx)("x-icon",{href:e.href}),(0,m.jsx)("x-tooltip",{children:(0,m.jsx)("x-message",{children:e.value})})]},t)}))}),(0,m.jsxs)("div",{className:"compositingpanel",style:{transform:i.state.currenAction?"translateX(0)":"translateX(281px)"},children:[(0,m.jsx)("div",{style:{height:"100%",display:"Fill"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(A,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"Stroke"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(O,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"Typography"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(N,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"Geometry"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(D,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"Arrangement"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(j,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"Objects"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(ko,{})}),"Export"===i.state.currenAction&&(0,m.jsx)(Io,{}),(0,m.jsx)("div",{style:{height:"100%",display:"History"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(zo,{})}),(0,m.jsx)("div",{style:{height:"100%",display:"3DBox"===i.state.currenAction?"block":"none"},children:(0,m.jsx)(Qo,{})})]})]})},i.state={currenAction:""},i}return s(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),es=$o,ts=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.action=function(e){var t,n,r,a,o,s,l,u,c,d,h,p,f,m,v,g,y,b;switch(e.target.textContent){case"Undo":null===(t=i.state.stage)||void 0===t||null===(n=t.history)||void 0===n||n.undo();break;case"Redo":null===(r=i.state.stage)||void 0===r||null===(a=r.history)||void 0===a||a.redo();break;case"Cut":null===(o=i.state.stage)||void 0===o||null===(s=o.clipboard)||void 0===s||s.cut();break;case"Copy":null===(l=i.state.stage)||void 0===l||null===(u=l.clipboard)||void 0===u||u.copy();break;case"Paste":null===(c=i.state.stage)||void 0===c||null===(d=c.clipboard)||void 0===d||d.paste();break;case"Delete":null===(h=i.state.stage)||void 0===h||null===(p=h.select)||void 0===p||p.nodesRemove();break;case"Group":null===(f=i.state.stage)||void 0===f||f.group();break;case"Ungroup":null===(m=i.state.stage)||void 0===m||m.unGroup();break;case"Raise":null===(v=i.state.stage)||void 0===v||v.raise();break;case"Lower":null===(g=i.state.stage)||void 0===g||g.lower();break;case"Front":null===(y=i.state.stage)||void 0===y||y.front();break;case"Back":null===(b=i.state.stage)||void 0===b||b.back()}},i.contextmenu=function(){var e=M(w().mark((function e(t){var n,r,a,o,s,l,u,c,d,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===(n=i.state.stage)||void 0===n||null===(r=n.select)||void 0===r?void 0:r.checkedsGroups().keys().next().value,l=function(){var e,n,r,a=null===(e=i.state.stage)||void 0===e||null===(n=e.select)||void 0===n||null===(r=n.frame())||void 0===r?void 0:r.getBoundingClientRect(),o=a.left,s=a.top,l=a.bottom,u=a.right,c=t.clientX,d=t.clientY;return c>=o&&c<=u&&d>=s&&d<=l}(),e.prev=2,e.next=5,window.navigator.clipboard.read();case 5:u=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),u=!1;case 11:c=null===(a=i.state.stage)||void 0===a||null===(o=a.select)||void 0===o?void 0:o.size(),d=document.querySelector("#contextmenu"),null===(h=null===d||void 0===d?void 0:d.querySelectorAll("x-menuitem"))||void 0===h||h.forEach((function(e){e.removeAttribute("disabled"),"Cut"!==e.textContent&&"Copy"!==e.textContent&&"Group"!==e.textContent&&"Delete"!==e.textContent&&"Raise"!==e.textContent&&"Lower"!==e.textContent&&"Front"!==e.textContent&&"Back"!==e.textContent||0!==c&&l||e.toggleAttribute("disabled"),"Ungroup"===e.textContent&&(s&&l||e.toggleAttribute("disabled")),"Paste"===e.textContent&&(u||e.toggleAttribute("disabled"))}));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),i.render=function(){return(0,m.jsx)("x-contextmenu",{id:"contextmenu",children:(0,m.jsxs)("x-menu",{children:[(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Undo"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Redo"})}),(0,m.jsx)("hr",{}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Cut"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Copy"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Paste"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Delete"})}),(0,m.jsx)("hr",{}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Group"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Ungroup"})}),(0,m.jsx)("hr",{}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Raise"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Lower"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Front"})}),(0,m.jsx)("x-menuitem",{onClick:function(e){i.action(e)},children:(0,m.jsx)("x-label",{children:"Back"})})]})})},i.state={stage:void 0},i}return s(n,[{key:"componentDidMount",value:function(){this.setState({stage:window.stage}),document.addEventListener("contextmenu",this.contextmenu)}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),ns=ts;function rs(e,t,n){return rs=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},rs.apply(null,arguments)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var is={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},as={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},os=0,ss=1,ls=2,us=1,cs=2,ds=3,hs=0,ps=1,fs=2,ms=0,vs=1,gs=2,ys=3,bs=4,xs=5,ws=100,_s=101,Ms=102,Ss=103,Es=104,Cs=200,Ts=201,Ls=202,As=203,Ps=204,Os=205,Rs=206,Ns=207,ks=208,Ds=209,Is=210,js=0,zs=1,Fs=2,Bs=3,Us=4,Hs=5,Gs=6,Vs=7,Ws=0,qs=1,Xs=2,Zs=0,Ys=1,Js=2,Qs=3,Ks=4,$s=5,el=301,tl=302,nl=303,rl=304,il=306,al=307,ol=1e3,sl=1001,ll=1002,ul=1003,cl=1004,dl=1005,hl=1006,pl=1007,fl=1008,ml=1009,vl=1010,gl=1011,yl=1012,bl=1013,xl=1014,wl=1015,_l=1016,Ml=1017,Sl=1018,El=1019,Cl=1020,Tl=1021,Ll=1022,Al=1023,Pl=1024,Ol=1025,Rl=Al,Nl=1026,kl=1027,Dl=1028,Il=1029,jl=1030,zl=1031,Fl=1032,Bl=1033,Ul=33776,Hl=33777,Gl=33778,Vl=33779,Wl=35840,ql=35841,Xl=35842,Zl=35843,Yl=36196,Jl=37492,Ql=37496,Kl=37808,$l=37809,eu=37810,tu=37811,nu=37812,ru=37813,iu=37814,au=37815,ou=37816,su=37817,lu=37818,uu=37819,cu=37820,du=37821,hu=36492,pu=37840,fu=37841,mu=37842,vu=37843,gu=37844,yu=37845,bu=37846,xu=37847,wu=37848,_u=37849,Mu=37850,Su=37851,Eu=37852,Cu=37853,Tu=2201,Lu=2300,Au=2301,Pu=2302,Ou=2400,Ru=2401,Nu=2402,ku=2500,Du=3e3,Iu=3001,ju=3007,zu=3002,Fu=3003,Bu=3004,Uu=3005,Hu=3006,Gu=3200,Vu=3201,Wu=0,qu=1,Xu=7680,Zu=519,Yu=35044,Ju=35048;function Qu(){}Object.assign(Qu.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var Ku=[],$u=0;$u<256;$u++)Ku[$u]=($u<16?"0":"")+$u.toString(16);var ec,tc=1234567,nc={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Ku[255&e]+Ku[e>>8&255]+Ku[e>>16&255]+Ku[e>>24&255]+"-"+Ku[255&t]+Ku[t>>8&255]+"-"+Ku[t>>16&15|64]+Ku[t>>24&255]+"-"+Ku[63&n|128]+Ku[n>>8&255]+"-"+Ku[n>>16&255]+Ku[n>>24&255]+Ku[255&r]+Ku[r>>8&255]+Ku[r>>16&255]+Ku[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(tc=e%2147483647),((tc=16807*tc%2147483647)-1)/2147483646},degToRad:function(e){return e*nc.DEG2RAD},radToDeg:function(e){return e*nc.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),p=a((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*f,l*p,s*u);break;case"YXY":e.set(l*p,s*c,l*f,s*u);break;case"ZYZ":e.set(l*f,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};function rc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}function ic(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(rc.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(rc.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(ic.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=a*f+o*g+s*x,i[3]=a*m+o*y+s*w,i[6]=a*v+o*b+s*_,i[1]=l*f+u*g+c*x,i[4]=l*m+u*y+c*w,i[7]=l*v+u*b+c*_,i[2]=d*f+h*g+p*x,i[5]=d*m+h*y+p*w,i[8]=d*v+h*b+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],d=n[7],h=n[8],p=h*l-u*d,f=u*c-h*s,m=d*s-l*c,v=i*p+a*f+o*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);var g=1/v;return r[0]=p*g,r[1]=(o*d-h*a)*g,r[2]=(u*a-o*l)*g,r[3]=f*g,r[4]=(h*i-o*c)*g,r[5]=(o*s-u*i)*g,r[6]=m*g,r[7]=(a*c-d*i)*g,r[8]=(l*i-a*s)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*u,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var ac={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ec&&(ec=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),ec.width=e.width,ec.height=e.height;var n=ec.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ec}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},oc=0;function sc(e,t,n,r,i,a,o,s,l,u){Object.defineProperty(this,"id",{value:oc++}),this.uuid=nc.generateUUID(),this.name="",this.image=void 0!==e?e:sc.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:sc.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:sl,this.wrapT=void 0!==r?r:sl,this.magFilter=void 0!==i?i:hl,this.minFilter=void 0!==a?a:fl,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Al,this.internalFormat=null,this.type=void 0!==s?s:ml,this.offset=new rc(0,0),this.repeat=new rc(1,1),this.center=new rc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ic,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Du,this.version=0,this.onUpdate=null}function lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=e,this.y=t,this.z=n,this.w=r}function uc(e,t,n){this.width=e,this.height=t,this.scissor=new lc(0,0,e,t),this.scissorTest=!1,this.viewport=new lc(0,0,e,t),n=n||{},this.texture=new sc(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:hl,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function cc(e,t,n){uc.call(this,e,t,n),this.samples=4}function dc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=e,this._y=t,this._z=n,this._w=r}sc.DEFAULT_IMAGE=void 0,sc.DEFAULT_MAPPING=300,sc.prototype=Object.assign(Object.create(Qu.prototype),{constructor:sc,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=nc.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(ac.getDataURL(r[a]))}else i=ac.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ol:e.x=e.x-Math.floor(e.x);break;case sl:e.x=e.x<0?0:1;break;case ll:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ol:e.y=e.y-Math.floor(e.y);break;case sl:e.y=e.y<0?0:1;break;case ll:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(sc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(lc.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(lc.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-d)<a&&Math.abs(c-f)<a&&Math.abs(p-m)<a){if(Math.abs(u+d)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(l+h+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(h+1)/2,b=(v+1)/2,x=(u+d)/4,w=(c+f)/4,_=(p+m)/4;return g>y&&g>b?g<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=w/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):b<a?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=_/i),this.set(n,r,i,t),this}var M=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(d-u)*(d-u));return Math.abs(M)<.001&&(M=1),this.x=(m-p)/M,this.y=(c-f)/M,this.z=(d-u)/M,this.w=Math.acos((l+h+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),uc.prototype=Object.assign(Object.create(Qu.prototype),{constructor:uc,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),cc.prototype=Object.assign(Object.create(uc.prototype),{constructor:cc,isWebGLMultisampleRenderTarget:!0,copy:function(e){return uc.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(dc,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],p=i[a+2],f=i[a+3];if(c!==f||s!==d||l!==h||u!==p){var m=1-o,v=s*d+l*h+u*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*m+d*w,l=l*m+h*w,u=u*m+p*w,c=c*m+f*w,m===1-o){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c},multiplyQuaternionsFlat:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],d=i[a+1],h=i[a+2],p=i[a+3];return e[t]=o*p+u*c+s*h-l*d,e[t+1]=s*p+u*d+l*c-o*h,e[t+2]=l*p+u*h+o*d-s*c,e[t+3]=u*p-o*c-s*d-l*h,e}}),Object.defineProperties(dc.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(dc.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),d=s(n/2),h=s(r/2),p=s(i/2);switch(a){case"XYZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"YXZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"ZXY":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"ZYX":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"YZX":this._x=d*u*c+l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c-d*h*p;break;case"XZY":this._x=d*u*c-l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+o+c;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-s)*h,this._y=(i-l)*h,this._z=(a-r)*h}else if(n>o&&n>c){var p=2*Math.sqrt(1+n-o-c);this._w=(u-s)/p,this._x=.25*p,this._y=(r+a)/p,this._z=(i+l)/p}else if(o>c){var f=2*Math.sqrt(1+o-n-c);this._w=(i-l)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(s+u)/f}else{var m=2*Math.sqrt(1+c-n-o);this._w=(a-r)/m,this._x=(i+l)/m,this._y=(s+u)/m,this._z=.25*m}return this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(nc.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var hc=new fc,pc=new dc;function fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=e,this.y=t,this.z=n}Object.assign(fc.prototype,{isVector3:!0,set:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pc.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(pc.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=l*s+d*-i+u*-o-c*-a,this.y=u*s+d*-a+c*-i-l*-o,this.z=c*s+d*-o+l*-a-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return hc.copy(this).projectOnVector(e),this.sub(hc)},reflect:function(e){return this.sub(hc.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(nc.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var mc=new fc,vc=new _c,gc=new fc(0,0,0),yc=new fc(1,1,1),bc=new fc,xc=new fc,wc=new fc;function _c(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(_c.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,l,u,c,d,h,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=d,v[3]=h,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new _c).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/mc.setFromMatrixColumn(e,0).length(),i=1/mc.setFromMatrixColumn(e,1).length(),a=1/mc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var d=a*u,h=a*c,p=o*u,f=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-o*s,t[2]=f-d*l,t[6]=p+h*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*u,x=s*c,w=l*u,_=l*c;t[0]=b-_*o,t[4]=-a*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=a*u,t[9]=_-b*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var M=a*u,S=a*c,E=o*u,C=o*c;t[0]=s*u,t[4]=E*l-S,t[8]=M*l+C,t[1]=s*c,t[5]=C*l+M,t[9]=S*l-E,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,L=a*l,A=o*s,P=o*l;t[0]=s*u,t[4]=P-T*c,t[8]=A*c+L,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=L*c+A,t[10]=T-P*c}else if("XZY"===e.order){var O=a*s,R=a*l,N=o*s,k=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=O*c+k,t[5]=a*u,t[9]=R*c-N,t[2]=N*c-R,t[6]=o*u,t[10]=k*c+O}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(gc,e,yc)},lookAt:function(e,t,n){var r=this.elements;return wc.subVectors(e,t),0===wc.lengthSq()&&(wc.z=1),wc.normalize(),bc.crossVectors(n,wc),0===bc.lengthSq()&&(1===Math.abs(n.z)?wc.x+=1e-4:wc.z+=1e-4,wc.normalize(),bc.crossVectors(n,wc)),bc.normalize(),xc.crossVectors(wc,bc),r[0]=bc.x,r[4]=xc.x,r[8]=wc.x,r[1]=bc.y,r[5]=xc.y,r[9]=wc.y,r[2]=bc.z,r[6]=xc.z,r[10]=wc.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],M=r[8],S=r[12],E=r[1],C=r[5],T=r[9],L=r[13],A=r[2],P=r[6],O=r[10],R=r[14],N=r[3],k=r[7],D=r[11],I=r[15];return i[0]=a*w+o*E+s*A+l*N,i[4]=a*_+o*C+s*P+l*k,i[8]=a*M+o*T+s*O+l*D,i[12]=a*S+o*L+s*R+l*I,i[1]=u*w+c*E+d*A+h*N,i[5]=u*_+c*C+d*P+h*k,i[9]=u*M+c*T+d*O+h*D,i[13]=u*S+c*L+d*R+h*I,i[2]=p*w+f*E+m*A+v*N,i[6]=p*_+f*C+m*P+v*k,i[10]=p*M+f*T+m*O+v*D,i[14]=p*S+f*L+m*R+v*I,i[3]=g*w+y*E+b*A+x*N,i[7]=g*_+y*C+b*P+x*k,i[11]=g*M+y*T+b*O+x*D,i[15]=g*S+y*L+b*R+x*I,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+i*s*c-r*l*c-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*h-i*a*c+n*a*h+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*d+r*a*c-n*a*d+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=r[8],p=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=p*y*d-g*f*d+g*c*m-u*y*m-p*c*b+u*f*b,w=v*f*d-h*y*d-v*c*m+l*y*m+h*c*b-l*f*b,_=h*g*d-v*p*d+v*u*m-l*g*m-h*u*b+l*p*b,M=v*p*c-h*g*c-v*u*f+l*g*f+h*u*y-l*p*y,S=i*x+a*w+o*_+s*M;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var E=1/S;return n[0]=x*E,n[1]=(g*f*s-p*y*s-g*o*m+a*y*m+p*o*b-a*f*b)*E,n[2]=(u*y*s-g*c*s+g*o*d-a*y*d-u*o*b+a*c*b)*E,n[3]=(p*c*s-u*f*s-p*o*d+a*f*d+u*o*m-a*c*m)*E,n[4]=w*E,n[5]=(h*y*s-v*f*s+v*o*m-i*y*m-h*o*b+i*f*b)*E,n[6]=(v*c*s-l*y*s-v*o*d+i*y*d+l*o*b-i*c*b)*E,n[7]=(l*f*s-h*c*s+h*o*d-i*f*d-l*o*m+i*c*m)*E,n[8]=_*E,n[9]=(v*p*s-h*g*s-v*a*m+i*g*m+h*a*b-i*p*b)*E,n[10]=(l*g*s-v*u*s+v*a*d-i*g*d-l*a*b+i*u*b)*E,n[11]=(h*u*s-l*p*s-h*a*d+i*p*d+l*a*m-i*u*m)*E,n[12]=M*E,n[13]=(h*g*o-v*p*o+v*a*f-i*g*f-h*a*y+i*p*y)*E,n[14]=(v*u*o-l*g*o-v*a*c+i*g*c+l*a*y-i*u*y)*E,n[15]=(l*p*o-h*u*o+h*a*c-i*p*c-l*a*f+i*u*f)*E,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,d=i*l,h=i*u,p=i*c,f=a*u,m=a*c,v=o*c,g=s*l,y=s*u,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(f+v))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-g)*_,r[10]=(1-(d+f))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=mc.set(r[0],r[1],r[2]).length(),a=mc.set(r[4],r[5],r[6]).length(),o=mc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],vc.copy(this);var s=1/i,l=1/a,u=1/o;return vc.elements[0]*=s,vc.elements[1]*=s,vc.elements[2]*=s,vc.elements[4]*=l,vc.elements[5]*=l,vc.elements[6]*=l,vc.elements[8]*=u,vc.elements[9]*=u,vc.elements[10]*=u,t.setFromRotationMatrix(vc),n.x=i,n.y=a,n.z=o,this},makePerspective:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),d=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),c=(t+e)*s,d=(n+r)*l,h=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Mc=new _c,Sc=new dc;function Ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ec.DefaultOrder;this._x=e,this._y=t,this._z=n,this._order=r}function Cc(){this.mask=1}Ec.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ec.DefaultOrder="XYZ",Object.defineProperties(Ec.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Ec.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=nc.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],d=i[2],h=i[6],p=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Mc.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mc,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Sc.setFromEuler(this),this.setFromQuaternion(Sc,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new fc(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Cc.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!==(this.mask&e.mask)}});var Tc=0,Lc=new fc,Ac=new dc,Pc=new _c,Oc=new fc,Rc=new fc,Nc=new fc,kc=new dc,Dc=new fc(1,0,0),Ic=new fc(0,1,0),jc=new fc(0,0,1),zc={type:"added"},Fc={type:"removed"};function Bc(){Object.defineProperty(this,"id",{value:Tc++}),this.uuid=nc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bc.DefaultUp.clone();var e=new fc,t=new Ec,n=new dc,r=new fc(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new _c},normalMatrix:{value:new ic}}),this.matrix=new _c,this.matrixWorld=new _c,this.matrixAutoUpdate=Bc.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Cc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Uc(){Bc.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Bc.DefaultUp=new fc(0,1,0),Bc.DefaultMatrixAutoUpdate=!0,Bc.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Bc,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.multiply(Ac),this},rotateOnWorldAxis:function(e,t){return Ac.setFromAxisAngle(e,t),this.quaternion.premultiply(Ac),this},rotateX:function(e){return this.rotateOnAxis(Dc,e)},rotateY:function(e){return this.rotateOnAxis(Ic,e)},rotateZ:function(e){return this.rotateOnAxis(jc,e)},translateOnAxis:function(e,t){return Lc.copy(e).applyQuaternion(this.quaternion),this.position.add(Lc.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Dc,e)},translateY:function(e){return this.translateOnAxis(Ic,e)},translateZ:function(e){return this.translateOnAxis(jc,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Pc.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Oc.copy(e):Oc.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Rc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pc.lookAt(Rc,Oc,this.up):Pc.lookAt(Oc,Rc,this.up),this.quaternion.setFromRotationMatrix(Pc),r&&(Pc.extractRotation(r.matrixWorld),Ac.setFromRotationMatrix(Pc),this.quaternion.premultiply(Ac.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(zc)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Fc)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Pc.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Pc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pc),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new fc),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new dc),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Rc,e,Nc),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new fc),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Rc,kc,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new fc),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],d=0,h=this.material.length;d<h;d++)c.push(i(e.materials,this.material[d]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var p=0;p<this.children.length;p++)r.children.push(this.children[p].toJSON(e).object)}if(t){var f=b(e.geometries),m=b(e.materials),v=b(e.textures),g=b(e.images),y=b(e.shapes);f.length>0&&(n.geometries=f),m.length>0&&(n.materials=m),v.length>0&&(n.textures=v),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y)}return n.object=r,n;function b(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),Uc.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Uc,isScene:!0,copy:function(e,t){return Bc.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Bc.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Hc=[new fc,new fc,new fc,new fc,new fc,new fc,new fc,new fc],Gc=new fc,Vc=new td,Wc=new fc,qc=new fc,Xc=new fc,Zc=new fc,Yc=new fc,Jc=new fc,Qc=new fc,Kc=new fc,$c=new fc,ed=new fc;function td(e,t){this.min=void 0!==e?e:new fc(1/0,1/0,1/0),this.max=void 0!==t?t:new fc(-1/0,-1/0,-1/0)}function nd(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){ed.fromArray(e,a);var s=i.x*Math.abs(ed.x)+i.y*Math.abs(ed.y)+i.z*Math.abs(ed.z),l=t.dot(ed),u=n.dot(ed),c=r.dot(ed);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(td.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>i&&(i=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>i&&(i=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Gc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new fc),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new fc),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Vc.copy(t.boundingBox),Vc.applyMatrix4(e.matrixWorld),this.union(Vc));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new fc),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Gc),Gc.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Qc),Kc.subVectors(this.max,Qc),Wc.subVectors(e.a,Qc),qc.subVectors(e.b,Qc),Xc.subVectors(e.c,Qc),Zc.subVectors(qc,Wc),Yc.subVectors(Xc,qc),Jc.subVectors(Wc,Xc);var t=[0,-Zc.z,Zc.y,0,-Yc.z,Yc.y,0,-Jc.z,Jc.y,Zc.z,0,-Zc.x,Yc.z,0,-Yc.x,Jc.z,0,-Jc.x,-Zc.y,Zc.x,0,-Yc.y,Yc.x,0,-Jc.y,Jc.x,0];return!!nd(t,Wc,qc,Xc,Kc)&&(!!nd(t=[1,0,0,0,1,0,0,0,1],Wc,qc,Xc,Kc)&&($c.crossVectors(Zc,Yc),nd(t=[$c.x,$c.y,$c.z],Wc,qc,Xc,Kc)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new fc),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Gc.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Gc).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(Hc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hc)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var rd=new td;function id(e,t){this.center=void 0!==e?e:new fc,this.radius=void 0!==t?t:-1}Object.assign(id.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):rd.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new fc),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new td),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var ad=new fc,od=new fc,sd=new fc,ld=new fc,ud=new fc,cd=new fc,dd=new fc;function hd(e,t){this.origin=void 0!==e?e:new fc,this.direction=void 0!==t?t:new fc(0,0,-1)}Object.assign(hd.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new fc),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,ad)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new fc),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=ad.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ad.copy(this.direction).multiplyScalar(t).add(this.origin),ad.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){od.copy(e).add(t).multiplyScalar(.5),sd.copy(t).sub(e).normalize(),ld.copy(this.origin).sub(od);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(sd),c=ld.dot(this.direction),d=-ld.dot(sd),h=ld.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(a=u*c-d,s=l*p,(i=u*d-c)>=0)if(a>=-s)if(a<=s){var f=1/p;o=(i*=f)*(i+u*(a*=f)+2*c)+a*(u*i+a+2*d)+h}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(sd).multiplyScalar(a).add(od),o},intersectSphere:function(e,t){ad.subVectors(e.center,this.origin);var n=ad.dot(this.direction),r=ad.dot(ad)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,ad)},intersectTriangle:function(e,t,n,r,i){ud.subVectors(t,e),cd.subVectors(n,e),dd.crossVectors(ud,cd);var a,o=this.direction.dot(dd);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}ld.subVectors(this.origin,e);var s=a*this.direction.dot(cd.crossVectors(ld,cd));if(s<0)return null;var l=a*this.direction.dot(ud.cross(ld));if(l<0)return null;if(s+l>o)return null;var u=-a*ld.dot(dd);return u<0?null:this.at(u/o,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var pd=new fc,fd=new fc,md=new ic;function vd(e,t){this.normal=void 0!==e?e:new fc(1,0,0),this.constant=void 0!==t?t:0}Object.assign(vd.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=pd.subVectors(n,t).cross(fd.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new fc),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new fc);var n=e.delta(pd),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new fc),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||md.getNormalMatrix(e),r=this.coplanarPoint(pd).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var gd=new fc,yd=new fc,bd=new fc,xd=new fc,wd=new fc,_d=new fc,Md=new fc,Sd=new fc,Ed=new fc,Cd=new fc;function Td(e,t,n){this.a=void 0!==e?e:new fc,this.b=void 0!==t?t:new fc,this.c=void 0!==n?n:new fc}Object.assign(Td,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new fc),r.subVectors(n,t),gd.subVectors(e,t),r.cross(gd);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){gd.subVectors(r,t),yd.subVectors(n,t),bd.subVectors(e,t);var a=gd.dot(gd),o=gd.dot(yd),s=gd.dot(bd),l=yd.dot(yd),u=yd.dot(bd),c=a*l-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new fc),0===c)return i.set(-2,-1,-1);var d=1/c,h=(l*s-o*u)*d,p=(a*u-o*s)*d;return i.set(1-h-p,p,h)},containsPoint:function(e,t,n,r){return Td.getBarycoord(e,t,n,r,xd),xd.x>=0&&xd.y>=0&&xd.x+xd.y<=1},getUV:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,xd),s.set(0,0),s.addScaledVector(i,xd.x),s.addScaledVector(a,xd.y),s.addScaledVector(o,xd.z),s},isFrontFacing:function(e,t,n,r){return gd.subVectors(n,t),yd.subVectors(e,t),gd.cross(yd).dot(r)<0}}),Object.assign(Td.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return gd.subVectors(this.c,this.b),yd.subVectors(this.a,this.b),.5*gd.cross(yd).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new fc),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Td.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new vd),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Td.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return Td.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return Td.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Td.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new fc);var n,r,i=this.a,a=this.b,o=this.c;wd.subVectors(a,i),_d.subVectors(o,i),Sd.subVectors(e,i);var s=wd.dot(Sd),l=_d.dot(Sd);if(s<=0&&l<=0)return t.copy(i);Ed.subVectors(e,a);var u=wd.dot(Ed),c=_d.dot(Ed);if(u>=0&&c<=u)return t.copy(a);var d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(wd,n);Cd.subVectors(e,o);var h=wd.dot(Cd),p=_d.dot(Cd);if(p>=0&&h<=p)return t.copy(o);var f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(_d,r);var m=u*p-h*c;if(m<=0&&c-u>=0&&h-p>=0)return Md.subVectors(o,a),r=(c-u)/(c-u+(h-p)),t.copy(a).addScaledVector(Md,r);var v=1/(m+f+d);return n=f*v,r=d*v,t.copy(i).addScaledVector(wd,n).addScaledVector(_d,r)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Ld={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ad={h:0,s:0,l:0},Pd={h:0,s:0,l:0};function Od(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function Rd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Nd(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function kd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function Dd(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new fc,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Od,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}Object.assign(Od.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=nc.euclideanModulo(e,1),t=nc.clamp(t,0,1),n=nc.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Rd(i,r,e+1/3),this.g=Rd(i,r,e),this.b=Rd(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=Ld[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Nd(e.r),this.g=Nd(e.g),this.b=Nd(e.b),this},copyLinearToSRGB:function(e){return this.r=kd(e.r),this.g=kd(e.g),this.b=kd(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),l=(s+o)/2;if(s===o)t=0,n=0;else{var u=o-s;switch(n=l<=.5?u/(o+s):u/(2-o-s),o){case r:t=(i-a)/u+(i<a?6:0);break;case i:t=(a-r)/u+2;break;case a:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Ad),Ad.h+=e,Ad.s+=t,Ad.l+=n,this.setHSL(Ad.h,Ad.s,Ad.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Ad),e.getHSL(Pd);var n=nc.lerp(Ad.h,Pd.h,t),r=nc.lerp(Ad.s,Pd.s,t),i=nc.lerp(Ad.l,Pd.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),Od.NAMES=Ld,Object.assign(Dd.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var r=0,i=e.vertexColors.length;r<i;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}});var Id=0;function jd(){Object.defineProperty(this,"id",{value:Id++}),this.uuid=nc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=vs,this.side=hs,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ps,this.blendDst=Os,this.blendEquation=ws,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Bs,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Zu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xu,this.stencilZFail=Xu,this.stencilZPass=Xu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function zd(e){jd.call(this),this.type="MeshBasicMaterial",this.color=new Od(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}jd.prototype=Object.assign(Object.create(Qu.prototype),{constructor:jd,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==vs&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==hs&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(jd.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),zd.prototype=Object.create(jd.prototype),zd.prototype.constructor=zd,zd.prototype.isMeshBasicMaterial=!0,zd.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var Fd=new fc,Bd=new rc;function Ud(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Yu,this.updateRange={offset:0,count:-1},this.version=0}function Hd(e,t,n){Ud.call(this,new Int8Array(e),t,n)}function Gd(e,t,n){Ud.call(this,new Uint8Array(e),t,n)}function Vd(e,t,n){Ud.call(this,new Uint8ClampedArray(e),t,n)}function Wd(e,t,n){Ud.call(this,new Int16Array(e),t,n)}function qd(e,t,n){Ud.call(this,new Uint16Array(e),t,n)}function Xd(e,t,n){Ud.call(this,new Int32Array(e),t,n)}function Zd(e,t,n){Ud.call(this,new Uint32Array(e),t,n)}function Yd(e,t,n){Ud.call(this,new Float32Array(e),t,n)}function Jd(e,t,n){Ud.call(this,new Float64Array(e),t,n)}function Qd(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Kd(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(Ud.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ud.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Od),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new rc),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new fc),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new lc),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Bd.fromBufferAttribute(this,t),Bd.applyMatrix3(e),this.setXY(t,Bd.x,Bd.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)Fd.fromBufferAttribute(this,r),Fd.applyMatrix3(e),this.setXYZ(r,Fd.x,Fd.y,Fd.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)Fd.x=this.getX(t),Fd.y=this.getY(t),Fd.z=this.getZ(t),Fd.applyMatrix4(e),this.setXYZ(t,Fd.x,Fd.y,Fd.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)Fd.x=this.getX(t),Fd.y=this.getY(t),Fd.z=this.getZ(t),Fd.applyNormalMatrix(e),this.setXYZ(t,Fd.x,Fd.y,Fd.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)Fd.x=this.getX(t),Fd.y=this.getY(t),Fd.z=this.getZ(t),Fd.transformDirection(e),this.setXYZ(t,Fd.x,Fd.y,Fd.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Hd.prototype=Object.create(Ud.prototype),Hd.prototype.constructor=Hd,Gd.prototype=Object.create(Ud.prototype),Gd.prototype.constructor=Gd,Vd.prototype=Object.create(Ud.prototype),Vd.prototype.constructor=Vd,Wd.prototype=Object.create(Ud.prototype),Wd.prototype.constructor=Wd,qd.prototype=Object.create(Ud.prototype),qd.prototype.constructor=qd,Xd.prototype=Object.create(Ud.prototype),Xd.prototype.constructor=Xd,Zd.prototype=Object.create(Ud.prototype),Zd.prototype.constructor=Zd,Yd.prototype=Object.create(Ud.prototype),Yd.prototype.constructor=Yd,Jd.prototype=Object.create(Ud.prototype),Jd.prototype.constructor=Jd,Object.assign(Qd.prototype,{computeGroups:function(e){var t,n,r=[],i=void 0,a=e.faces;for(n=0;n<a.length;n++){var o=a[n];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*n-t.start,r.push(t)),t={start:3*n,materialIndex:i})}void 0!==t&&(t.count=3*n-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){c=[];for(var p=0;p<h;p++)c[p]={name:d[p].name,data:[]};this.morphTargets.normal=c}var f=e.skinIndices,m=e.skinWeights,v=f.length===r.length,g=m.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<n.length;y++){var b=n[y];this.vertices.push(r[b.a],r[b.b],r[b.c]);var x=b.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var w=b.normal;this.normals.push(w,w,w)}var _=b.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var M=b.color;this.colors.push(M,M,M)}if(!0===a){var S=i[0][y];void 0!==S?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new rc,new rc,new rc))}if(!0===o){var E=i[1][y];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new rc,new rc,new rc))}for(var C=0;C<l;C++){var T=s[C].vertices;t[C].data.push(T[b.a],T[b.b],T[b.c])}for(var L=0;L<h;L++){var A=d[L].vertexNormals[y];c[L].data.push(A.a,A.b,A.c)}v&&this.skinIndices.push(f[b.a],f[b.b],f[b.c]),g&&this.skinWeights.push(m[b.a],m[b.b],m[b.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var $d=1,eh=new _c,th=new Bc,nh=new fc,rh=new td,ih=new td,ah=new fc;function oh(){Object.defineProperty(this,"id",{value:$d+=2}),this.uuid=nc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}oh.prototype=Object.assign(Object.create(Qu.prototype),{constructor:oh,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Kd(e)>65535?Zd:qd)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new ic).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return eh.makeRotationX(e),this.applyMatrix4(eh),this},rotateY:function(e){return eh.makeRotationY(e),this.applyMatrix4(eh),this},rotateZ:function(e){return eh.makeRotationZ(e),this.applyMatrix4(eh),this},translate:function(e,t,n){return eh.makeTranslation(e,t,n),this.applyMatrix4(eh),this},scale:function(e,t,n){return eh.makeScale(e,t,n),this.applyMatrix4(eh),this},lookAt:function(e){return th.lookAt(e),th.updateMatrix(),this.applyMatrix4(th.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(nh).negate(),this.translate(nh.x,nh.y,nh.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Yd(3*t.vertices.length,3),r=new Yd(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Yd(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Yd(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(!0===t.verticesNeedUpdate){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){var i=this.attributes.normal;void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){var a=this.attributes.color;void 0!==a&&(a.copyColorsArray(t.colors),a.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var o=this.attributes.uv;void 0!==o&&(o.copyVector2sArray(t.uvs),o.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(t.lineDistances),s.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Qd).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new Ud(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new Ud(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new Ud(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new Ud(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new Ud(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[o],u=0,c=l.length;u<c;u++){var d=l[u],h=new Yd(3*d.data.length,3);h.name=d.name,s.push(h.copyVector3sArray(d.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var p=new Yd(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Yd(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new td);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];rh.setFromBufferAttribute(i),this.morphTargetsRelative?(ah.addVectors(this.boundingBox.min,rh.min),this.boundingBox.expandByPoint(ah),ah.addVectors(this.boundingBox.max,rh.max),this.boundingBox.expandByPoint(ah)):(this.boundingBox.expandByPoint(rh.min),this.boundingBox.expandByPoint(rh.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new id);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(rh.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];ih.setFromBufferAttribute(a),this.morphTargetsRelative?(ah.addVectors(rh.min,ih.min),rh.expandByPoint(ah),ah.addVectors(rh.max,ih.max),rh.expandByPoint(ah)):(rh.expandByPoint(ih.min),rh.expandByPoint(ih.max))}rh.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)ah.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ah));if(t)for(var u=0,c=t.length;u<c;u++)for(var d=t[u],h=this.morphTargetsRelative,p=0,f=d.count;p<f;p++)ah.fromBufferAttribute(d,p),h&&(nh.fromBufferAttribute(e,p),ah.add(nh)),o=Math.max(o,n.distanceToSquared(ah));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Ud(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new fc,o=new fc,s=new fc,l=new fc,u=new fc,c=new fc,d=new fc,h=new fc;if(e)for(var p=0,f=e.count;p<f;p+=3){var m=e.getX(p+0),v=e.getX(p+1),g=e.getX(p+2);a.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),l.fromBufferAttribute(n,m),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),l.add(d),u.add(d),c.add(d),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,l=Math.min(o.length,i.length-s),u=0,c=s;u<l;u++,c++)i[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ah.fromBufferAttribute(e,t),ah.normalize(),e.setXYZ(t,ah.x,ah.y,ah.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=t[l]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new Ud(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new oh,n=this.index.array,r=this.attributes;for(var i in r){var a=e(r[i],n);t.setAttribute(i,a)}var o=this.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,d=u.length;c<d;c++){var h=e(u[c],n);l.push(h)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,m=p.length;f<m;f++){var v=p[f];t.addGroup(v.start,v.count,v.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a],s=o.toJSON(e.data);""!==o.name&&(s.name=o.name),e.data.attributes[a]=s}var l={},u=!1;for(var c in this.morphAttributes){for(var d=this.morphAttributes[c],h=[],p=0,f=d.length;p<f;p++){var m=d[p],v=m.toJSON(e.data);""!==m.name&&(v.name=m.name),h.push(v)}h.length>0&&(l[c]=h,u=!0)}u&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);var g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));var y=this.boundingSphere;return null!==y&&(e.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),e},clone:function(){return(new oh).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,d=u.length;c<d;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,p=0,f=h.length;p<f;p++){var m=h[p];this.addGroup(m.start,m.count,m.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var sh=new _c,lh=new hd,uh=new id,ch=new fc,dh=new fc,hh=new fc,ph=new fc,fh=new fc,mh=new fc,vh=new fc,gh=new fc,yh=new fc,bh=new rc,xh=new rc,wh=new rc,_h=new fc,Mh=new fc;function Sh(e,t){Bc.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new oh,this.material=void 0!==t?t:new zd,this.updateMorphTargets()}function Eh(e,t,n,r,i,a,o,s){if(null===(t.side===ps?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==fs,s)))return null;Mh.copy(s),Mh.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Mh);return l<n.near||l>n.far?null:{distance:l,point:Mh.clone(),object:e}}function Ch(e,t,n,r,i,a,o,s,l,u,c,d){ch.fromBufferAttribute(i,u),dh.fromBufferAttribute(i,c),hh.fromBufferAttribute(i,d);var h=e.morphTargetInfluences;if(t.morphTargets&&a&&h){vh.set(0,0,0),gh.set(0,0,0),yh.set(0,0,0);for(var p=0,f=a.length;p<f;p++){var m=h[p],v=a[p];0!==m&&(ph.fromBufferAttribute(v,u),fh.fromBufferAttribute(v,c),mh.fromBufferAttribute(v,d),o?(vh.addScaledVector(ph,m),gh.addScaledVector(fh,m),yh.addScaledVector(mh,m)):(vh.addScaledVector(ph.sub(ch),m),gh.addScaledVector(fh.sub(dh),m),yh.addScaledVector(mh.sub(hh),m)))}ch.add(vh),dh.add(gh),hh.add(yh)}e.isSkinnedMesh&&(e.boneTransform(u,ch),e.boneTransform(c,dh),e.boneTransform(d,hh));var g=Eh(e,t,n,r,ch,dh,hh,_h);if(g){s&&(bh.fromBufferAttribute(s,u),xh.fromBufferAttribute(s,c),wh.fromBufferAttribute(s,d),g.uv=Td.getUV(_h,ch,dh,hh,bh,xh,wh,new rc)),l&&(bh.fromBufferAttribute(l,u),xh.fromBufferAttribute(l,c),wh.fromBufferAttribute(l,d),g.uv2=Td.getUV(_h,ch,dh,hh,bh,xh,wh,new rc));var y=new Dd(u,c,d);Td.getNormal(ch,dh,hh,y.normal),g.face=y}return g}Sh.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Sh,isMesh:!0,copy:function(e){return Bc.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),uh.copy(r.boundingSphere),uh.applyMatrix4(a),!1!==e.ray.intersectsSphere(uh)&&(sh.getInverse(a),lh.copy(e.ray).applyMatrix4(sh),null===r.boundingBox||!1!==lh.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,l=r.morphAttributes.position,u=r.morphTargetsRelative,c=r.attributes.uv,d=r.attributes.uv2,h=r.groups,p=r.drawRange;if(null!==o)if(Array.isArray(i))for(var f=0,m=h.length;f<m;f++)for(var v=h[f],g=i[v.materialIndex],y=Math.max(v.start,p.start),b=Math.min(v.start+v.count,p.start+p.count);y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),_=o.getX(y+2);(n=Ch(this,g,e,lh,s,l,u,c,d,x,w,_))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=v.materialIndex,t.push(n))}else for(var M=Math.max(0,p.start),S=Math.min(o.count,p.start+p.count);M<S;M+=3){var E=o.getX(M),C=o.getX(M+1),T=o.getX(M+2);(n=Ch(this,i,e,lh,s,l,u,c,d,E,C,T))&&(n.faceIndex=Math.floor(M/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var L=0,A=h.length;L<A;L++)for(var P=h[L],O=i[P.materialIndex],R=Math.max(P.start,p.start),N=Math.min(P.start+P.count,p.start+p.count);R<N;R+=3){(n=Ch(this,O,e,lh,s,l,u,c,d,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=P.materialIndex,t.push(n))}else for(var k=Math.max(0,p.start),D=Math.min(s.count,p.start+p.count);k<D;k+=3){(n=Ch(this,i,e,lh,s,l,u,c,d,k,k+1,k+2))&&(n.faceIndex=Math.floor(k/3),t.push(n))}}else if(r.isGeometry){var I,j=Array.isArray(i),z=r.vertices,F=r.faces,B=r.faceVertexUvs[0];B.length>0&&(I=B);for(var U=0,H=F.length;U<H;U++){var G=F[U],V=j?i[G.materialIndex]:i;if(void 0!==V){var W=z[G.a],q=z[G.b],X=z[G.c];if(n=Eh(this,V,e,lh,W,q,X,_h)){if(I&&I[U]){var Z=I[U];bh.copy(Z[0]),xh.copy(Z[1]),wh.copy(Z[2]),n.uv=Td.getUV(_h,W,q,X,bh,xh,wh,new rc)}n.face=G,n.faceIndex=U,t.push(n)}}}}}});var Th=0,Lh=new _c,Ah=new Bc,Ph=new fc;function Oh(){Object.defineProperty(this,"id",{value:Th+=2}),this.uuid=nc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Oh.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Oh,isGeometry:!0,applyMatrix4:function(e){for(var t=(new ic).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(var i=0,a=this.faces.length;i<a;i++){var o=this.faces[i];o.normal.applyMatrix3(t).normalize();for(var s=0,l=o.vertexNormals.length;s<l;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Lh.makeRotationX(e),this.applyMatrix4(Lh),this},rotateY:function(e){return Lh.makeRotationY(e),this.applyMatrix4(Lh),this},rotateZ:function(e){return Lh.makeRotationZ(e),this.applyMatrix4(Lh),this},translate:function(e,t,n){return Lh.makeTranslation(e,t,n),this.applyMatrix4(Lh),this},scale:function(e,t,n){return Lh.makeScale(e,t,n),this.applyMatrix4(Lh),this},lookAt:function(e){return Ah.lookAt(e),Ah.updateMatrix(),this.applyMatrix4(Ah.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position,a=r.normal,o=r.color,s=r.uv,l=r.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<i.count;u++)t.vertices.push((new fc).fromBufferAttribute(i,u)),void 0!==o&&t.colors.push((new Od).fromBufferAttribute(o,u));function c(e,n,r,i){var u=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],c=new Dd(e,n,r,void 0===a?[]:[(new fc).fromBufferAttribute(a,e),(new fc).fromBufferAttribute(a,n),(new fc).fromBufferAttribute(a,r)],u,i);t.faces.push(c),void 0!==s&&t.faceVertexUvs[0].push([(new rc).fromBufferAttribute(s,e),(new rc).fromBufferAttribute(s,n),(new rc).fromBufferAttribute(s,r)]),void 0!==l&&t.faceVertexUvs[1].push([(new rc).fromBufferAttribute(l,e),(new rc).fromBufferAttribute(l,n),(new rc).fromBufferAttribute(l,r)])}var d=e.groups;if(d.length>0)for(var h=0;h<d.length;h++)for(var p=d[h],f=p.start,m=f,v=f+p.count;m<v;m+=3)void 0!==n?c(n.getX(m),n.getX(m+1),n.getX(m+2),p.materialIndex):c(m,m+1,m+2,p.materialIndex);else if(void 0!==n)for(var g=0;g<n.count;g+=3)c(n.getX(g),n.getX(g+1),n.getX(g+2));else for(var y=0;y<i.count;y+=3)c(y,y+1,y+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ph).negate(),this.translate(Ph.x,Ph.y,Ph.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new _c;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var e=new fc,t=new fc,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);for(var t=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)t[n]=new fc;if(e)for(var i=new fc,a=new fc,o=0,s=this.faces.length;o<s;o++){var l=this.faces[o],u=this.vertices[l.a],c=this.vertices[l.b],d=this.vertices[l.c];i.subVectors(d,c),a.subVectors(u,c),i.cross(a),t[l.a].add(i),t[l.b].add(i),t[l.c].add(i)}else{this.computeFaceNormals();for(var h=0,p=this.faces.length;h<p;h++){var f=this.faces[h];t[f.a].add(f.normal),t[f.b].add(f.normal),t[f.c].add(f.normal)}}for(var m=0,v=this.vertices.length;m<v;m++)t[m].normalize();for(var g=0,y=this.faces.length;g<y;g++){var b=this.faces[g],x=b.vertexNormals;3===x.length?(x[0].copy(t[b.a]),x[1].copy(t[b.b]),x[2].copy(t[b.c])):(x[0]=t[b.a].clone(),x[1]=t[b.b].clone(),x[2]=t[b.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new Oh;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var l=this.morphNormals[o].faceNormals,u=this.morphNormals[o].vertexNormals,c=0,d=this.faces.length;c<d;c++){var h=new fc,p={a:new fc,b:new fc,c:new fc};l.push(h),u.push(p)}}var f=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var m=0,v=this.faces.length;m<v;m++){var g=this.faces[m],y=f.faceNormals[m],b=f.vertexNormals[m];y.copy(g.normal),b.a.copy(g.vertexNormals[0]),b.b.copy(g.vertexNormals[1]),b.c.copy(g.vertexNormals[2])}}for(var x=0,w=this.faces.length;x<w;x++){var _=this.faces[x];_.normal=_.__originalFaceNormal,_.vertexNormals=_.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new td),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new id),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new ic).getNormalMatrix(t));for(var d=0,h=o.length;d<h;d++){var p=o[d].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(var f=0,m=c.length;f<m;f++)u.push(c[f].clone());for(var v=0,g=l.length;v<g;v++){var y=l[v],b=void 0,x=void 0,w=void 0,_=y.vertexNormals,M=y.vertexColors;(b=new Dd(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&b.normal.applyMatrix3(r).normalize();for(var S=0,E=_.length;S<E;S++)x=_[S].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),b.vertexNormals.push(x);b.color.copy(y.color);for(var C=0,T=M.length;C<T;C++)w=M[C],b.vertexColors.push(w.clone());b.materialIndex=y.materialIndex+n,s.push(b)}for(var L=0,A=e.faceVertexUvs.length;L<A;L++){var P=e.faceVertexUvs[L];void 0===this.faceVertexUvs[L]&&(this.faceVertexUvs[L]=[]);for(var O=0,R=P.length;O<R;O++){for(var N=P[O],k=[],D=0,I=N.length;D<I;D++)k.push(N[D].clone());this.faceVertexUvs[L].push(k)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){for(var e={},t=[],n=[],r=Math.pow(10,4),i=0,a=this.vertices.length;i<a;i++){var o=this.vertices[i],s=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r);void 0===e[s]?(e[s]=i,t.push(this.vertices[i]),n[i]=t.length-1):n[i]=n[e[s]]}for(var l=[],u=0,c=this.faces.length;u<c;u++){var d=this.faces[u];d.a=n[d.a],d.b=n[d.b],d.c=n[d.c];for(var h=[d.a,d.b,d.c],p=0;p<3;p++)if(h[p]===h[(p+1)%3]){l.push(u);break}}for(var f=l.length-1;f>=0;f--){var m=l[f];this.faces.splice(m,1);for(var v=0,g=this.faceVertexUvs.length;v<g;v++)this.faceVertexUvs[v].splice(m,1)}var y=this.vertices.length-t.length;return this.vertices=t,y},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new fc(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),o&&o.length===t&&(i=[]);for(var s=0;s<t;s++){var l=e[s]._id;r&&r.push(a[l]),i&&i.push(o[l])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},u=[],c={},d=[],h={},p=0;p<this.faces.length;p++){var f=this.faces[p],m=void 0!==this.faceVertexUvs[0][p],v=f.normal.length()>0,g=f.vertexNormals.length>0,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,b=f.vertexColors.length>0,x=0;if(x=S(x,0,0),x=S(x,1,!0),x=S(x,2,!1),x=S(x,3,m),x=S(x,4,v),x=S(x,5,g),x=S(x,6,y),x=S(x,7,b),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),m){var w=this.faceVertexUvs[0][p];o.push(T(w[0]),T(w[1]),T(w[2]))}if(v&&o.push(E(f.normal)),g){var _=f.vertexNormals;o.push(E(_[0]),E(_[1]),E(_[2]))}if(y&&o.push(C(f.color)),b){var M=f.vertexColors;o.push(C(M[0]),C(M[1]),C(M[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function C(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e},clone:function(){return(new Oh).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,a=0,o=i.length;a<o;a++)this.colors.push(i[a].clone());for(var s=e.faces,l=0,u=s.length;l<u;l++)this.faces.push(s[l].clone());for(var c=0,d=e.faceVertexUvs.length;c<d;c++){var h=e.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var p=0,f=h.length;p<f;p++){for(var m=h[p],v=[],g=0,y=m.length;g<y;g++){var b=m[g];v.push(b.clone())}this.faceVertexUvs[c].push(v)}}for(var x=e.morphTargets,w=0,_=x.length;w<_;w++){var M={};if(M.name=x[w].name,void 0!==x[w].vertices){M.vertices=[];for(var S=0,E=x[w].vertices.length;S<E;S++)M.vertices.push(x[w].vertices[S].clone())}if(void 0!==x[w].normals){M.normals=[];for(var C=0,T=x[w].normals.length;C<T;C++)M.normals.push(x[w].normals[C].clone())}this.morphTargets.push(M)}for(var L=e.morphNormals,A=0,P=L.length;A<P;A++){var O={};if(void 0!==L[A].vertexNormals){O.vertexNormals=[];for(var R=0,N=L[A].vertexNormals.length;R<N;R++){var k=L[A].vertexNormals[R],D={};D.a=k.a.clone(),D.b=k.b.clone(),D.c=k.c.clone(),O.vertexNormals.push(D)}}if(void 0!==L[A].faceNormals){O.faceNormals=[];for(var I=0,j=L[A].faceNormals.length;I<j;I++)O.faceNormals.push(L[A].faceNormals[I].clone())}this.morphNormals.push(O)}for(var z=e.skinWeights,F=0,B=z.length;F<B;F++)this.skinWeights.push(z[F].clone());for(var U=e.skinIndices,H=0,G=U.length;H<G;H++)this.skinIndices.push(U[H].clone());for(var V=e.lineDistances,W=0,q=V.length;W<q;W++)this.lineDistances.push(V[W]);var X=e.boundingBox;null!==X&&(this.boundingBox=X.clone());var Z=e.boundingSphere;return null!==Z&&(this.boundingSphere=Z.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Rh=function(e){u(n,e);var t=p(n);function n(e,i,a,o,s,l){var u;return r(this,n),(u=t.call(this)).type="BoxGeometry",u.parameters={width:e,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l},u.fromBufferGeometry(new Nh(e,i,a,o,s,l)),u.mergeVertices(),u}return s(n)}(Oh),Nh=function(e){u(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;r(this,n),(e=t.call(this)).type="BoxBufferGeometry",e.parameters={width:i,height:a,depth:o,widthSegments:s,heightSegments:l,depthSegments:u};var c=h(e);s=Math.floor(s),l=Math.floor(l),u=Math.floor(u);var d=[],p=[],f=[],m=[],v=0,g=0;function y(e,t,n,r,i,a,o,s,l,u,h){for(var y=a/l,b=o/u,x=a/2,w=o/2,_=s/2,M=l+1,S=u+1,E=0,C=0,T=new fc,L=0;L<S;L++)for(var A=L*b-w,P=0;P<M;P++){var O=P*y-x;T[e]=O*r,T[t]=A*i,T[n]=_,p.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,f.push(T.x,T.y,T.z),m.push(P/l),m.push(1-L/u),E+=1}for(var R=0;R<u;R++)for(var N=0;N<l;N++){var k=v+N+M*R,D=v+N+M*(R+1),I=v+(N+1)+M*(R+1),j=v+(N+1)+M*R;d.push(k,D,j),d.push(D,I,j),C+=6}c.addGroup(g,C,h),g+=C,v+=E}return y("z","y","x",-1,-1,o,a,i,u,l,0),y("z","y","x",1,-1,o,a,-i,u,l,1),y("x","z","y",1,1,i,o,a,s,u,2),y("x","z","y",1,-1,i,o,-a,s,u,3),y("x","y","z",1,-1,i,a,o,s,l,4),y("x","y","z",-1,-1,i,a,-o,s,l,5),e.setIndex(d),e.setAttribute("position",new Yd(p,3)),e.setAttribute("normal",new Yd(f,3)),e.setAttribute("uv",new Yd(m,2)),e}return s(n)}(oh);function kh(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Dh(e){for(var t={},n=0;n<e.length;n++){var r=kh(e[n]);for(var i in r)t[i]=r[i]}return t}var Ih={clone:kh,merge:Dh},jh="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",zh="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Fh(e){jd.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=jh,this.fragmentShader=zh,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Bh(){Bc.call(this),this.type="Camera",this.matrixWorldInverse=new _c,this.projectionMatrix=new _c,this.projectionMatrixInverse=new _c}function Uh(e,t,n,r){Bh.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Fh.prototype=Object.create(jd.prototype),Fh.prototype.constructor=Fh,Fh.prototype.isShaderMaterial=!0,Fh.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},Fh.prototype.toJSON=function(e){var t=jd.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},Bh.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Bh,isCamera:!0,copy:function(e,t){return Bc.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new fc),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Bc.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Bc.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Uh.prototype=Object.assign(Object.create(Bh.prototype),{constructor:Uh,isPerspectiveCamera:!0,copy:function(e,t){return Bh.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*nc.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*nc.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*nc.RAD2DEG*Math.atan(Math.tan(.5*nc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*nc.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Bc.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Hh=90,Gh=1;function Vh(e,t,n){if(Bc.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var r=new Uh(Hh,Gh,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new fc(1,0,0)),this.add(r);var i=new Uh(Hh,Gh,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new fc(-1,0,0)),this.add(i);var a=new Uh(Hh,Gh,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new fc(0,1,0)),this.add(a);var o=new Uh(Hh,Gh,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new fc(0,-1,0)),this.add(o);var s=new Uh(Hh,Gh,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new fc(0,0,1)),this.add(s);var l=new Uh(Hh,Gh,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new fc(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var u=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.xr.enabled=u},this.clear=function(e,t,r,i){for(var a=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(n,o),e.clear(t,r,i);e.setRenderTarget(a)}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function Wh(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),uc.call(this,e,e,t)}function qh(e,t,n,r,i,a,o,s,l,u,c,d){sc.call(this,null,a,o,s,l,u,r,i,c,d),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:ul,this.minFilter=void 0!==u?u:ul,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Vh.prototype=Object.create(Bc.prototype),Vh.prototype.constructor=Vh,Wh.prototype=Object.create(uc.prototype),Wh.prototype.constructor=Wh,Wh.prototype.isWebGLCubeRenderTarget=!0,Wh.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=Al,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new Uc,r="\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",i="\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",a=new Fh({name:"CubemapFromEquirect",uniforms:kh({tEquirect:{value:null}}),vertexShader:r,fragmentShader:i,side:ps,blending:ms});a.uniforms.tEquirect.value=t;var o=new Sh(new Nh(5,5,5),a);return n.add(o),new Vh(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this},qh.prototype=Object.create(sc.prototype),qh.prototype.constructor=qh,qh.prototype.isDataTexture=!0;var Xh=new id,Zh=new fc;function Yh(e,t,n,r,i,a){this.planes=[void 0!==e?e:new vd,void 0!==t?t:new vd,void 0!==n?n:new vd,void 0!==r?r:new vd,void 0!==i?i:new vd,void 0!==a?a:new vd]}Object.assign(Yh.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,f-d,y-m).normalize(),t[1].setComponents(o+r,c+s,f+d,y+m).normalize(),t[2].setComponents(o+i,c+l,f+h,y+v).normalize(),t[3].setComponents(o-i,c-l,f-h,y-v).normalize(),t[4].setComponents(o-a,c-u,f-p,y-g).normalize(),t[5].setComponents(o+a,c+u,f+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Xh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xh)},intersectsSprite:function(e){return Xh.center.set(0,0,0),Xh.radius=.7071067811865476,Xh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xh)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Zh.x=r.normal.x>0?e.max.x:e.min.x,Zh.y=r.normal.y>0?e.max.y:e.min.y,Zh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zh)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Jh={common:{diffuse:{value:new Od(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ic},uv2Transform:{value:new ic},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new rc(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Od(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Od(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ic}},sprite:{diffuse:{value:new Od(15658734)},opacity:{value:1},center:{value:new rc(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ic}}};function Qh(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Kh(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var a=r.get(t);void 0===a?r.set(t,function(t,n){var r=t.array,i=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}function $h(e,t,n,r){Oh.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ep(e,t,n,r)),this.mergeVertices()}function ep(e,t,n,r){oh.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(r)||1,l=o+1,u=s+1,c=e/o,d=t/s,h=[],p=[],f=[],m=[],v=0;v<u;v++)for(var g=v*d-a,y=0;y<l;y++){var b=y*c-i;p.push(b,-g,0),f.push(0,0,1),m.push(y/o),m.push(1-v/s)}for(var x=0;x<s;x++)for(var w=0;w<o;w++){var _=w+l*x,M=w+l*(x+1),S=w+1+l*(x+1),E=w+1+l*x;h.push(_,M,E),h.push(M,S,E)}this.setIndex(h),this.setAttribute("position",new Yd(p,3)),this.setAttribute("normal",new Yd(f,3)),this.setAttribute("uv",new Yd(m,2))}$h.prototype=Object.create(Oh.prototype),$h.prototype.constructor=$h,ep.prototype=Object.create(oh.prototype),ep.prototype.constructor=ep;var tp={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},np={basic:{uniforms:Dh([Jh.common,Jh.specularmap,Jh.envmap,Jh.aomap,Jh.lightmap,Jh.fog]),vertexShader:tp.meshbasic_vert,fragmentShader:tp.meshbasic_frag},lambert:{uniforms:Dh([Jh.common,Jh.specularmap,Jh.envmap,Jh.aomap,Jh.lightmap,Jh.emissivemap,Jh.fog,Jh.lights,{emissive:{value:new Od(0)}}]),vertexShader:tp.meshlambert_vert,fragmentShader:tp.meshlambert_frag},phong:{uniforms:Dh([Jh.common,Jh.specularmap,Jh.envmap,Jh.aomap,Jh.lightmap,Jh.emissivemap,Jh.bumpmap,Jh.normalmap,Jh.displacementmap,Jh.fog,Jh.lights,{emissive:{value:new Od(0)},specular:{value:new Od(1118481)},shininess:{value:30}}]),vertexShader:tp.meshphong_vert,fragmentShader:tp.meshphong_frag},standard:{uniforms:Dh([Jh.common,Jh.envmap,Jh.aomap,Jh.lightmap,Jh.emissivemap,Jh.bumpmap,Jh.normalmap,Jh.displacementmap,Jh.roughnessmap,Jh.metalnessmap,Jh.fog,Jh.lights,{emissive:{value:new Od(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tp.meshphysical_vert,fragmentShader:tp.meshphysical_frag},toon:{uniforms:Dh([Jh.common,Jh.aomap,Jh.lightmap,Jh.emissivemap,Jh.bumpmap,Jh.normalmap,Jh.displacementmap,Jh.gradientmap,Jh.fog,Jh.lights,{emissive:{value:new Od(0)}}]),vertexShader:tp.meshtoon_vert,fragmentShader:tp.meshtoon_frag},matcap:{uniforms:Dh([Jh.common,Jh.bumpmap,Jh.normalmap,Jh.displacementmap,Jh.fog,{matcap:{value:null}}]),vertexShader:tp.meshmatcap_vert,fragmentShader:tp.meshmatcap_frag},points:{uniforms:Dh([Jh.points,Jh.fog]),vertexShader:tp.points_vert,fragmentShader:tp.points_frag},dashed:{uniforms:Dh([Jh.common,Jh.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tp.linedashed_vert,fragmentShader:tp.linedashed_frag},depth:{uniforms:Dh([Jh.common,Jh.displacementmap]),vertexShader:tp.depth_vert,fragmentShader:tp.depth_frag},normal:{uniforms:Dh([Jh.common,Jh.bumpmap,Jh.normalmap,Jh.displacementmap,{opacity:{value:1}}]),vertexShader:tp.normal_vert,fragmentShader:tp.normal_frag},sprite:{uniforms:Dh([Jh.sprite,Jh.fog]),vertexShader:tp.sprite_vert,fragmentShader:tp.sprite_frag},background:{uniforms:{uvTransform:{value:new ic},t2D:{value:null}},vertexShader:tp.background_vert,fragmentShader:tp.background_frag},cube:{uniforms:Dh([Jh.envmap,{opacity:{value:1}}]),vertexShader:tp.cube_vert,fragmentShader:tp.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tp.equirect_vert,fragmentShader:tp.equirect_frag},distanceRGBA:{uniforms:Dh([Jh.common,Jh.displacementmap,{referencePosition:{value:new fc},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tp.distanceRGBA_vert,fragmentShader:tp.distanceRGBA_frag},shadow:{uniforms:Dh([Jh.lights,Jh.fog,{color:{value:new Od(0)},opacity:{value:1}}]),vertexShader:tp.shadow_vert,fragmentShader:tp.shadow_frag}};function rp(e,t,n,r){var i,a,o=new Od(0),s=0,l=null,u=0,c=null;function d(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),d(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){d(o,s=e)},render:function(t,r,h,p){var f=!0===r.isScene?r.background:null,m=e.xr,v=m.getSession&&m.getSession();if(v&&"additive"===v.environmentBlendMode&&(f=null),null===f?d(o,s):f&&f.isColor&&(d(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===il)){void 0===a&&((a=new Sh(new Nh(1,1,1),new Fh({name:"BackgroundCubeMaterial",uniforms:kh(np.cube.uniforms),vertexShader:np.cube.vertexShader,fragmentShader:np.cube.fragmentShader,side:ps,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(a));var g=f.isWebGLCubeRenderTarget?f.texture:f;a.material.uniforms.envMap.value=g,a.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,l===f&&u===g.version&&c===e.toneMapping||(a.material.needsUpdate=!0,l=f,u=g.version,c=e.toneMapping),t.unshift(a,a.geometry,a.material,0,0,null)}else f&&f.isTexture&&(void 0===i&&((i=new Sh(new ep(2,2),new Fh({name:"BackgroundMaterial",uniforms:kh(np.background.uniforms),vertexShader:np.background.vertexShader,fragmentShader:np.background.fragmentShader,side:hs,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&u===f.version&&c===e.toneMapping||(i.material.needsUpdate=!0,l=f,u=f.version,c=e.toneMapping),t.unshift(i,i.geometry,i.material,0,0,null))}}}function ip(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=h(null),u=l;function c(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{}}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){b(),u!==l&&c((u=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,y,b){var x=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c);return c}(y,d,l);u!==w&&c((u=w).object),x=function(e){var t=u.attributes,n=e.attributes;if(Object.keys(t).length!==Object.keys(n).length)return!0;for(var r in n){var i=t[r],a=n[r];if(i.attribute!==a)return!0;if(i.data!==a.data)return!0}return!1}(y),x&&function(e){var t={},n=e.attributes;for(var r in n){var i=n[r],a={};a.attribute=i,i.data&&(a.data=i.data),t[r]=a}u.attributes=t}(y)}else{var _=!0===l.wireframe;u.geometry===y.id&&u.program===d.id&&u.wireframe===_||(u.geometry=y.id,u.program=d.id,u.wireframe=_,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(!function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var d in u){var h=u[d];if(h>=0){var y=l[d];if(void 0!==y){var b=y.normalized,x=y.itemSize,w=n.get(y);if(void 0===w)continue;var _=w.buffer,M=w.type,S=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,C=E.stride,T=y.offset;E&&E.isInstancedInterleavedBuffer?(m(h,E.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)):f(h),e.bindBuffer(34962,_),g(h,x,M,b,C*S,T*S)}else y.isInstancedBufferAttribute?(m(h,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):f(h),e.bindBuffer(34962,_),g(h,x,M,b,0,0)}else if("instanceMatrix"===d){var L=n.get(i.instanceMatrix);if(void 0===L)continue;var A=L.buffer,P=L.type;m(h+0,1),m(h+1,1),m(h+2,1),m(h+3,1),e.bindBuffer(34962,A),e.vertexAttribPointer(h+0,4,P,!1,64,0),e.vertexAttribPointer(h+1,4,P,!1,64,16),e.vertexAttribPointer(h+2,4,P,!1,64,32),e.vertexAttribPointer(h+3,4,P,!1,64,48)}else if(void 0!==c){var O=c[d];if(void 0!==O)switch(O.length){case 2:e.vertexAttrib2fv(h,O);break;case 3:e.vertexAttrib3fv(h,O);break;case 4:e.vertexAttrib4fv(h,O);break;default:e.vertexAttrib1fv(h,O)}}}}v()}(i,l,d,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:v}}function ap(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,r,o,s),n.update(o,i,s)}}}function op(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=c>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?e.getParameter(36183):0}}function sp(){var e=this,t=null,n=0,r=!1,i=!1,a=new vd,o=new ic,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=r+4*l,d=n.matrixWorldInverse;o.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,p=r;h!==l;++h,p+=4)a.copy(t[h]).applyMatrix4(d,o),a.normal.toArray(u,p),u[p+3]=a.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==n||r;return r=i,t=u(e,a,0),n=e.length,o},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,a,o,c,d,h){if(!r||null===e||0===e.length||i&&!o)i?u(null):l();else{var p=i?0:n,f=4*p,m=d.clippingState||null;s.value=m,m=u(e,c,f,h);for(var v=0;v!==f;++v)m[v]=t[v];d.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=p}}}function lp(e){var t={};return{has:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,!!r},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function up(e,t,n,r){var i=new WeakMap,a=new WeakMap;function o(e){var s=e.target,l=i.get(s);for(var u in null!==l.index&&t.remove(l.index),l.attributes)t.remove(l.attributes[u]);s.removeEventListener("dispose",o),i.delete(s);var c=a.get(l);c&&(t.remove(c),a.delete(l)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],d=s[l+1],h=s[l+2];n.push(c,d,d,h,h,c)}}else{var p=i.array;o=i.version;for(var f=0,m=p.length/3-1;f<m;f+=3){var v=f+0,g=f+1,y=f+2;n.push(v,g,g,y,y,v)}}var b=new(Kd(n)>65535?Zd:qd)(n,1);b.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,b)}return{get:function(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new oh).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function cp(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,d;if(s)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](i,l,a,r*o,u),n.update(l,i,u)}}}function dp(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function hp(e,t){return e[0]-t[0]}function pp(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fp(e){for(var t={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,a,o,s){var l=i.morphTargetInfluences,u=void 0===l?0:l.length,c=t[a.id];if(void 0===c){c=[];for(var d=0;d<u;d++)c[d]=[d,0];t[a.id]=c}for(var h=0;h<u;h++){var p=c[h];p[0]=h,p[1]=l[h]}c.sort(pp);for(var f=0;f<8;f++)f<u&&c[f][1]?(r[f][0]=c[f][0],r[f][1]=c[f][1]):(r[f][0]=Number.MAX_SAFE_INTEGER,r[f][1]=0);r.sort(hp);for(var m=o.morphTargets&&a.morphAttributes.position,v=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var b=r[y],x=b[0],w=b[1];x!==Number.MAX_SAFE_INTEGER&&w?(m&&a.getAttribute("morphTarget"+y)!==m[x]&&a.setAttribute("morphTarget"+y,m[x]),v&&a.getAttribute("morphNormal"+y)!==v[x]&&a.setAttribute("morphNormal"+y,v[x]),n[y]=w,g+=w):(m&&void 0!==a.getAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),v&&void 0!==a.getAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var _=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",_),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function mp(e,t,n,r){var i=new WeakMap;return{update:function(e){var a=r.render.frame,o=e.geometry,s=t.get(e,o);return i.get(s)!==a&&(o.isGeometry&&s.updateFromObject(e),t.update(s),i.set(s,a)),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){i=new WeakMap}}}function vp(e,t,n,r,i,a,o,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:el,o=void 0!==o?o:Ll,sc.call(this,e,t,n,r,i,a,o,s,l,u),this.flipY=!1}function gp(e,t,n,r){sc.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=ul,this.minFilter=ul,this.wrapR=sl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function yp(e,t,n,r){sc.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=ul,this.minFilter=ul,this.wrapR=sl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}np.physical={uniforms:Dh([np.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new rc(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Od(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:tp.meshphysical_vert,fragmentShader:tp.meshphysical_frag},vp.prototype=Object.create(sc.prototype),vp.prototype.constructor=vp,vp.prototype.isCubeTexture=!0,Object.defineProperty(vp.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),gp.prototype=Object.create(sc.prototype),gp.prototype.constructor=gp,gp.prototype.isDataTexture2DArray=!0,yp.prototype=Object.create(sc.prototype),yp.prototype.constructor=yp,yp.prototype.isDataTexture3D=!0;var bp=new sc,xp=new gp,wp=new yp,_p=new vp,Mp=[],Sp=[],Ep=new Float32Array(16),Cp=new Float32Array(9),Tp=new Float32Array(4);function Lp(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Mp[i];if(void 0===a&&(a=new Float32Array(i),Mp[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Ap(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Pp(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Op(e,t){var n=Sp[t];void 0===n&&(n=new Int32Array(t),Sp[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Rp(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Np(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ap(n,t))return;e.uniform2fv(this.addr,t),Pp(n,t)}}function kp(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ap(n,t))return;e.uniform3fv(this.addr,t),Pp(n,t)}}function Dp(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ap(n,t))return;e.uniform4fv(this.addr,t),Pp(n,t)}}function Ip(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ap(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Pp(n,t)}else{if(Ap(n,r))return;Tp.set(r),e.uniformMatrix2fv(this.addr,!1,Tp),Pp(n,r)}}function jp(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ap(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Pp(n,t)}else{if(Ap(n,r))return;Cp.set(r),e.uniformMatrix3fv(this.addr,!1,Cp),Pp(n,r)}}function zp(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ap(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Pp(n,t)}else{if(Ap(n,r))return;Ep.set(r),e.uniformMatrix4fv(this.addr,!1,Ep),Pp(n,r)}}function Fp(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||bp,i)}function Bp(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||xp,i)}function Up(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||wp,i)}function Hp(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||_p,i)}function Gp(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Vp(e,t){var n=this.cache;Ap(n,t)||(e.uniform2iv(this.addr,t),Pp(n,t))}function Wp(e,t){var n=this.cache;Ap(n,t)||(e.uniform3iv(this.addr,t),Pp(n,t))}function qp(e,t){var n=this.cache;Ap(n,t)||(e.uniform4iv(this.addr,t),Pp(n,t))}function Xp(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Zp(e,t){e.uniform1fv(this.addr,t)}function Yp(e,t){e.uniform1iv(this.addr,t)}function Jp(e,t){e.uniform2iv(this.addr,t)}function Qp(e,t){e.uniform3iv(this.addr,t)}function Kp(e,t){e.uniform4iv(this.addr,t)}function $p(e,t){var n=Lp(t,this.size,2);e.uniform2fv(this.addr,n)}function ef(e,t){var n=Lp(t,this.size,3);e.uniform3fv(this.addr,n)}function tf(e,t){var n=Lp(t,this.size,4);e.uniform4fv(this.addr,n)}function nf(e,t){var n=Lp(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function rf(e,t){var n=Lp(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function af(e,t){var n=Lp(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function of(e,t,n){var r=t.length,i=Op(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||bp,i[a])}function sf(e,t,n){var r=t.length,i=Op(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||_p,i[a])}function lf(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Rp;case 35664:return Np;case 35665:return kp;case 35666:return Dp;case 35674:return Ip;case 35675:return jp;case 35676:return zp;case 5124:case 35670:return Gp;case 35667:case 35671:return Vp;case 35668:case 35672:return Wp;case 35669:case 35673:return qp;case 5125:return Xp;case 35678:case 36198:case 36298:case 36306:case 35682:return Fp;case 35679:case 36299:case 36307:return Up;case 35680:case 36300:case 36308:case 36293:return Hp;case 36289:case 36303:case 36311:case 36292:return Bp}}(t.type)}function uf(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Zp;case 35664:return $p;case 35665:return ef;case 35666:return tf;case 35674:return nf;case 35675:return rf;case 35676:return af;case 5124:case 35670:return Yp;case 35667:case 35671:return Jp;case 35668:case 35672:return Qp;case 35669:case 35673:return Kp;case 35678:case 36198:case 36298:case 36306:case 35682:return of;case 35680:case 36300:case 36308:case 36293:return sf}}(t.type)}function cf(e){this.id=e,this.seq=[],this.map={}}uf.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Pp(t,e)},cf.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var df=/([\w\d_]+)(\])?(\[|\.)?/g;function hf(e,t){e.seq.push(t),e.map[t.id]=t}function pf(e,t,n){var r=e.name,i=r.length;for(df.lastIndex=0;;){var a=df.exec(r),o=df.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){hf(n,void 0===u?new lf(s,e,t):new uf(s,e,t));break}var c=n.map[s];void 0===c&&hf(n,c=new cf(s)),n=c}}function ff(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);pf(i,e.getUniformLocation(t,i.name),this)}}function mf(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}ff.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},ff.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},ff.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},ff.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var vf=0;function gf(e){switch(e){case Du:return["Linear","( value )"];case Iu:return["sRGB","( value )"];case zu:return["RGBE","( value )"];case Bu:return["RGBM","( value, 7.0 )"];case Uu:return["RGBM","( value, 16.0 )"];case Hu:return["RGBD","( value, 256.0 )"];case ju:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Fu:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function yf(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function bf(e,t){var n=gf(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xf(e,t){var n=gf(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function wf(e,t){var n;switch(t){case Ys:n="Linear";break;case Js:n="Reinhard";break;case Qs:n="OptimizedCineon";break;case Ks:n="ACESFilmic";break;case $s:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function _f(e){return""!==e}function Mf(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Sf(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ef=/^[ \t]*#include +<([\w\d./]+)>/gm;function Cf(e){return e.replace(Ef,Tf)}function Tf(e,t){var n=tp[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Cf(n)}var Lf=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Af=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function Pf(e){return e.replace(Af,Rf).replace(Lf,Of)}function Of(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Rf(e,t,n,r)}function Rf(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Nf(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function kf(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===us?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===cs?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===ds&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case el:case tl:t="ENVMAP_TYPE_CUBE";break;case il:case al:t="ENVMAP_TYPE_CUBE_UV";break;case nl:case rl:t="ENVMAP_TYPE_EQUIREC"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case tl:case rl:case al:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ws:t="ENVMAP_BLENDING_MULTIPLY";break;case qs:t="ENVMAP_BLENDING_MIX";break;case Xs:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_f).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram();n.isRawShaderMaterial?((i=[v].filter(_f).join("\n")).length>0&&(i+="\n"),(a=[m,v].filter(_f).join("\n")).length>0&&(a+="\n")):(i=[Nf(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_f).join("\n"),a=[m,Nf(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Zs?"#define TONE_MAPPING":"",n.toneMapping!==Zs?tp.tonemapping_pars_fragment:"",n.toneMapping!==Zs?wf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",tp.encodings_pars_fragment,n.map?bf("mapTexelToLinear",n.mapEncoding):"",n.matcap?bf("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?bf("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?bf("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?bf("lightMapTexelToLinear",n.lightMapEncoding):"",xf("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(_f).join("\n")),l=Sf(l=Mf(l=Cf(l),n),n),u=Sf(u=Mf(u=Cf(u),n),n),l=Pf(l),u=Pf(u),n.isWebGL2&&!n.isRawShaderMaterial&&(i=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#version 300 es\n","#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y,b,x=a+u,w=mf(o,35633,i+l),_=mf(o,35632,x);if(o.attachShader(g,w),o.attachShader(g,_),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var M=o.getProgramInfoLog(g).trim(),S=o.getShaderInfoLog(w).trim(),E=o.getShaderInfoLog(_).trim(),C=!0,T=!0;if(!1===o.getProgramParameter(g,35714)){C=!1;var L=yf(o,w,"vertex"),A=yf(o,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(g,35715),"gl.getProgramInfoLog",M,L,A)}else""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==S&&""!==E||(T=!1);T&&(this.diagnostics={runnable:C,programLog:M,vertexShader:{log:S,prefix:i},fragmentShader:{log:E,prefix:a}})}return o.deleteShader(w),o.deleteShader(_),this.getUniforms=function(){return void 0===y&&(y=new ff(o,g)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(o,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=vf++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=_,this}function Df(e,t,n,r){var i=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,l=n.maxVertexUniforms,u=n.vertexTextures,c=n.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function p(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Du,t}return{getParameters:function(r,i,h,f,m,v,g){var y,b,x=f.fog,w=r.isMeshStandardMaterial?f.environment:null,_=r.envMap||w,M=d[r.type],S=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(s)return 1024;var n=l,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;if(null!==r.precision&&(c=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",c,"instead."),M){var E=np[M];y=E.vertexShader,b=E.fragmentShader}else y=r.vertexShader,b=r.fragmentShader;var C=e.getRenderTarget();return{isWebGL2:a,shaderID:M,shaderName:r.type,vertexShader:y,fragmentShader:b,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:c,instancing:!0===g.isInstancedMesh,supportsVertexTextures:u,outputEncoding:null!==C?p(C.texture):e.outputEncoding,map:!!r.map,mapEncoding:p(r.map),matcap:!!r.matcap,matcapEncoding:p(r.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:p(_),envMapCubeUV:!!_&&(_.mapping===il||_.mapping===al),lightMap:!!r.lightMap,lightMapEncoding:p(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:p(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===qu,tangentSpaceNormalMap:r.normalMapType===Wu,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatMap||!!r.clearcoatRoughnessMap||!!r.clearcoatNormalMap||!!r.displacementMap||!!r.transmissionMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap)&&!!r.displacementMap,fog:!!x,useFog:r.fog,fogExp2:x&&x.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&S>0,maxBones:S,useVertexTexture:s,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:Zs,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===fs,flipSided:r.side===ps,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:a||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||null!==t.get("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(void 0===t.isRawShaderMaterial){for(var i=0;i<h.length;i++)n.push(t[h[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var r=np[n];t=Ih.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var a,o=0,s=i.length;o<s;o++){var l=i[o];if(l.cacheKey===n){++(a=l).usedTimes;break}}return void 0===a&&(a=new kf(e,n,t,r),i.push(a)),a},releaseProgram:function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},programs:i}}function If(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function jf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function zf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ff(e){var t=[],n=0,r=[],i=[],a={id:-1};function o(r,i,o,s,l,u){var c=t[n],d=e.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:d.program||a,groupOrder:s,renderOrder:r.renderOrder,z:l,group:u},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=d.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=l,c.group=u),n++,c}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(e,t,n,a,s,l){var u=o(e,t,n,a,s,l);(!0===n.transparent?i:r).push(u)},unshift:function(e,t,n,a,s,l){var u=o(e,t,n,a,s,l);(!0===n.transparent?i:r).unshift(u)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||jf),i.length>1&&i.sort(t||zf)}}}function Bf(e){var t=new WeakMap;function n(e){var r=e.target;r.removeEventListener("dispose",n),t.delete(r)}return{get:function(r,i){var a,o=t.get(r);return void 0===o?(a=new Ff(e),t.set(r,new WeakMap),t.get(r).set(i,a),r.addEventListener("dispose",n)):void 0===(a=o.get(i))&&(a=new Ff(e),o.set(i,a)),a},dispose:function(){t=new WeakMap}}}function Uf(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new fc,color:new Od};break;case"SpotLight":n={position:new fc,direction:new fc,color:new Od,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new fc,color:new Od,distance:0,decay:0};break;case"HemisphereLight":n={direction:new fc,skyColor:new Od,groundColor:new Od};break;case"RectAreaLight":n={color:new Od,position:new fc,halfWidth:new fc,halfHeight:new fc}}return e[t.id]=n,n}}}var Hf=0;function Gf(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Vf(){for(var e=new Uf,t=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rc};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rc,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;r<9;r++)n.probe.push(new fc);var i=new fc,a=new _c,o=new _c;return{setup:function(r,s,l){for(var u=0,c=0,d=0,h=0;h<9;h++)n.probe[h].set(0,0,0);var p=0,f=0,m=0,v=0,g=0,y=0,b=0,x=0,w=l.matrixWorldInverse;r.sort(Gf);for(var _=0,M=r.length;_<M;_++){var S=r[_],E=S.color,C=S.intensity,T=S.distance,L=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)u+=E.r*C,c+=E.g*C,d+=E.b*C;else if(S.isLightProbe)for(var A=0;A<9;A++)n.probe[A].addScaledVector(S.sh.coefficients[A],C);else if(S.isDirectionalLight){var P=e.get(S);if(P.color.copy(S.color).multiplyScalar(S.intensity),P.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(w),S.castShadow){var O=S.shadow,R=t.get(S);R.shadowBias=O.bias,R.shadowNormalBias=O.normalBias,R.shadowRadius=O.radius,R.shadowMapSize=O.mapSize,n.directionalShadow[p]=R,n.directionalShadowMap[p]=L,n.directionalShadowMatrix[p]=S.shadow.matrix,y++}n.directional[p]=P,p++}else if(S.isSpotLight){var N=e.get(S);if(N.position.setFromMatrixPosition(S.matrixWorld),N.position.applyMatrix4(w),N.color.copy(E).multiplyScalar(C),N.distance=T,N.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(w),N.coneCos=Math.cos(S.angle),N.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),N.decay=S.decay,S.castShadow){var k=S.shadow,D=t.get(S);D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,n.spotShadow[m]=D,n.spotShadowMap[m]=L,n.spotShadowMatrix[m]=S.shadow.matrix,x++}n.spot[m]=N,m++}else if(S.isRectAreaLight){var I=e.get(S);I.color.copy(E).multiplyScalar(C),I.position.setFromMatrixPosition(S.matrixWorld),I.position.applyMatrix4(w),o.identity(),a.copy(S.matrixWorld),a.premultiply(w),o.extractRotation(a),I.halfWidth.set(.5*S.width,0,0),I.halfHeight.set(0,.5*S.height,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),n.rectArea[v]=I,v++}else if(S.isPointLight){var j=e.get(S);if(j.position.setFromMatrixPosition(S.matrixWorld),j.position.applyMatrix4(w),j.color.copy(S.color).multiplyScalar(S.intensity),j.distance=S.distance,j.decay=S.decay,S.castShadow){var z=S.shadow,F=t.get(S);F.shadowBias=z.bias,F.shadowNormalBias=z.normalBias,F.shadowRadius=z.radius,F.shadowMapSize=z.mapSize,F.shadowCameraNear=z.camera.near,F.shadowCameraFar=z.camera.far,n.pointShadow[f]=F,n.pointShadowMap[f]=L,n.pointShadowMatrix[f]=S.shadow.matrix,b++}n.point[f]=j,f++}else if(S.isHemisphereLight){var B=e.get(S);B.direction.setFromMatrixPosition(S.matrixWorld),B.direction.transformDirection(w),B.direction.normalize(),B.skyColor.copy(S.color).multiplyScalar(C),B.groundColor.copy(S.groundColor).multiplyScalar(C),n.hemi[g]=B,g++}}n.ambient[0]=u,n.ambient[1]=c,n.ambient[2]=d;var U=n.hash;U.directionalLength===p&&U.pointLength===f&&U.spotLength===m&&U.rectAreaLength===v&&U.hemiLength===g&&U.numDirectionalShadows===y&&U.numPointShadows===b&&U.numSpotShadows===x||(n.directional.length=p,n.spot.length=m,n.rectArea.length=v,n.point.length=f,n.hemi.length=g,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=x,n.spotShadowMap.length=x,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=x,U.directionalLength=p,U.pointLength=f,U.spotLength=m,U.rectAreaLength=v,U.hemiLength=g,U.numDirectionalShadows=y,U.numPointShadows=b,U.numSpotShadows=x,n.version=Hf++)},state:n}}function Wf(){var e=new Vf,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function qf(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i;return!1===e.has(n)?(i=new Wf,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):!1===e.get(n).has(r)?(i=new Wf,e.get(n).set(r,i)):i=e.get(n).get(r),i},dispose:function(){e=new WeakMap}}}function Xf(e){jd.call(this),this.type="MeshDepthMaterial",this.depthPacking=Gu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Zf(e){jd.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new fc,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}Xf.prototype=Object.create(jd.prototype),Xf.prototype.constructor=Xf,Xf.prototype.isMeshDepthMaterial=!0,Xf.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Zf.prototype=Object.create(jd.prototype),Zf.prototype.constructor=Zf,Zf.prototype.isMeshDistanceMaterial=!0,Zf.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Yf="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Jf="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Qf(e,t,n){var r=new Yh,i=new rc,a=new rc,o=new lc,s=[],l=[],u={},c={0:ps,1:hs,2:fs},d=new Fh({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new rc},radius:{value:4}},vertexShader:Jf,fragmentShader:Yf}),h=d.clone();h.defines.HORIZONAL_PASS=1;var p=new oh;p.setAttribute("position",new Ud(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new Sh(p,d),m=this;function v(n,r){var i=t.update(f);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,f,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,h,f,null)}function g(e,t,n){var r=e<<0|t<<1|n<<2,i=s[r];return void 0===i&&(i=new Xf({depthPacking:Vu,morphTargets:e,skinning:t}),s[r]=i),i}function y(e,t,n){var r=e<<0|t<<1|n<<2,i=l[r];return void 0===i&&(i=new Zf({morphTargets:e,skinning:t}),l[r]=i),i}function b(t,n,r,i,a,o,s){var l=null,d=g,h=t.customDepthMaterial;if(!0===i.isPointLight&&(d=y,h=t.customDistanceMaterial),void 0===h){var p=!1;!0===r.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var f=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=d(p,f,!0===t.isInstancedMesh)}else l=h;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var m=l.uuid,v=r.uuid,b=u[m];void 0===b&&(b={},u[m]=b);var x=b[v];void 0===x&&(x=l.clone(),b[v]=x),l=x}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=s===ds?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:c[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=a,l.farDistance=o),l}function x(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===ds)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,d=0,h=c.length;d<h;d++){var p=c[d],f=u[p.materialIndex];if(f&&f.visible){var m=b(n,l,f,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,m,n,p)}}else if(u.visible){var v=b(n,l,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,v,n,null)}}for(var g=n.children,y=0,w=g.length;y<w;y++)x(g[y],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=us,this.render=function(t,s,l){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(ms),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var g=t[p],y=g.shadow;if(!1!==y.autoUpdate||!1!==y.needsUpdate)if(void 0!==y){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),a.copy(y.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(a.x=Math.floor(n/b.x),i.x=a.x*b.x,y.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/b.y),i.y=a.y*b.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&this.type===ds){var w={minFilter:hl,magFilter:hl,format:Al,stencilBuffer:!1};y.map=new uc(i.x,i.y,w),y.map.texture.name=g.name+".shadowMap",y.mapPass=new uc(i.x,i.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){var _={minFilter:ul,magFilter:ul,format:Al,stencilBuffer:!1};y.map=new uc(i.x,i.y,_),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),S=0;S<M;S++){var E=y.getViewport(S);o.set(a.x*E.x,a.y*E.y,a.x*E.z,a.y*E.w),h.viewport(o),y.updateMatrices(g,S),r=y.getFrustum(),x(s,l,y.camera,g,this.type)}y.isPointLightShadow||this.type!==ds||v(y,l),y.needsUpdate=!1}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,d)}}}function Kf(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new lc,r=null,i=new lc(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?D(2929):I(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case js:e.depthFunc(512);break;case zs:e.depthFunc(519);break;case Fs:e.depthFunc(513);break;case Bs:e.depthFunc(515);break;case Us:e.depthFunc(514);break;case Hs:e.depthFunc(518);break;case Gs:e.depthFunc(516);break;case Vs:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?D(2960):I(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},u={},c=null,d=null,h=null,p=null,f=null,m=null,v=null,g=null,y=null,b=!1,x=null,w=null,_=null,M=null,S=null,E=e.getParameter(35661),C=!1,T=0,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(T=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),C=T>=1):-1!==L.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),C=T>=2);var A=null,P={},O=new lc,R=new lc;function N(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var k={};function D(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function I(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}k[3553]=N(3553,3553,1),k[34067]=N(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),D(2929),s.setFunc(Bs),U(!1),H(ss),D(2884),B(ms);var j=(Or(r={},ws,32774),Or(r,_s,32778),Or(r,Ms,32779),r);if(a)j[Ss]=32775,j[Es]=32776;else{var z=t.get("EXT_blend_minmax");null!==z&&(j[Ss]=z.MIN_EXT,j[Es]=z.MAX_EXT)}var F=(Or(i={},Cs,0),Or(i,Ts,1),Or(i,Ls,768),Or(i,Ps,770),Or(i,Is,776),Or(i,ks,774),Or(i,Rs,772),Or(i,As,769),Or(i,Os,771),Or(i,Ds,775),Or(i,Ns,773),i);function B(t,n,r,i,a,o,s,l){if(t!==ms){if(d||(D(3042),d=!0),t===xs)a=a||n,o=o||r,s=s||i,n===p&&a===v||(e.blendEquationSeparate(j[n],j[a]),p=n,v=a),r===f&&i===m&&o===g&&s===y||(e.blendFuncSeparate(F[r],F[i],F[o],F[s]),f=r,m=i,g=o,y=s),h=t,b=null;else if(t!==h||l!==b){if(p===ws&&v===ws||(e.blendEquation(32774),p=ws,v=ws),l)switch(t){case vs:e.blendFuncSeparate(1,771,1,771);break;case gs:e.blendFunc(1,1);break;case ys:e.blendFuncSeparate(0,0,769,771);break;case bs:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case vs:e.blendFuncSeparate(770,771,1,771);break;case gs:e.blendFunc(770,1);break;case ys:e.blendFunc(0,769);break;case bs:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,g=null,y=null,h=t,b=l}}else d&&(I(3042),d=!1)}function U(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function H(t){t!==os?(D(2884),t!==w&&(t===ss?e.cullFace(1029):t===ls?e.cullFace(1028):e.cullFace(1032))):I(2884),w=t}function G(t,n,r){t?(D(32823),M===n&&S===r||(e.polygonOffset(n,r),M=n,S=r)):I(32823)}function V(t){void 0===t&&(t=33984+E-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:o,depth:s,stencil:l},enable:D,disable:I,useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:B,setMaterial:function(e,t){e.side===fs?I(2884):D(2884);var n=e.side===ps;t&&(n=!n),U(n),e.blending===vs&&!1===e.transparent?B(ms):B(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),G(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:U,setCullFace:H,setLineWidth:function(t){t!==_&&(C&&e.lineWidth(t),_=t)},setPolygonOffset:G,setScissorTest:function(e){e?D(3089):I(3089)},activeTexture:V,bindTexture:function(t,n){null===A&&V();var r=P[A];void 0===r&&(r={type:void 0,texture:void 0},P[A]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||k[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=P[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===R.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){u={},A=null,P={},c=null,h=null,x=null,w=null,o.reset(),s.reset(),l.reset()}}}function $f(e,t,n,r,i,a,o){var s,l,u,c=i.isWebGL2,d=i.maxTextures,h=i.maxCubemapSize,p=i.maxTextureSize,f=i.maxSamples,m=new WeakMap,v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function g(e,t){return v?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?nc.floorPowerOfTwo:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===u&&(u=g(o,s));var l=n?g(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return nc.isPowerOfTwo(e.width)&&nc.isPowerOfTwo(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==ul&&e.minFilter!==hl}function w(t,n,i,a){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function _(n,r,i){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function M(e){return e===ul||e===cl||e===dl?9728:9729}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&m.delete(n),o.memory.textures--}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(t.texture),r.remove(t)}(n),o.memory.textures--}var C=0;function T(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void k(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function L(t,i){if(6===t.image.length){var o=r.get(t);if(t.version>0&&o.__version!==t.version){N(o,t),n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,u=[],d=0;d<6;d++)u[d]=s||l?l?t.image[d].image:t.image[d]:y(t.image[d],!1,!0,h);var p,f=u[0],m=b(f)||c,v=a.convert(t.format),g=a.convert(t.type),M=_(t.internalFormat,v,g);if(R(34067,t,m),s){for(var S=0;S<6;S++){p=u[S].mipmaps;for(var E=0;E<p.length;E++){var C=p[E];t.format!==Al&&t.format!==Ll?null!==v?n.compressedTexImage2D(34069+S,E,M,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+S,E,M,C.width,C.height,0,v,g,C.data)}}o.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(var T=0;T<6;T++)if(l){n.texImage2D(34069+T,0,M,u[T].width,u[T].height,0,v,g,u[T].data);for(var L=0;L<p.length;L++){var A=p[L].image[T].image;n.texImage2D(34069+T,L+1,M,A.width,A.height,0,v,g,A.data)}}else{n.texImage2D(34069+T,0,M,v,g,u[T]);for(var P=0;P<p.length;P++){var O=p[P];n.texImage2D(34069+T,P+1,M,v,g,O.image[T])}}o.__maxMipLevel=p.length}x(t,m)&&w(34067,t,f.width,f.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture)}}function A(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}var P=(Or(s={},ol,10497),Or(s,sl,33071),Or(s,ll,33648),s),O=(Or(l={},ul,9728),Or(l,cl,9984),Or(l,dl,9986),Or(l,hl,9729),Or(l,pl,9985),Or(l,fl,9987),l);function R(n,a,o){o?(e.texParameteri(n,10242,P[a.wrapS]),e.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[a.wrapR]),e.texParameteri(n,10240,O[a.magFilter]),e.texParameteri(n,10241,O[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===sl&&a.wrapT===sl||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==ul&&a.minFilter!==hl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(a.type===wl&&null===t.get("OES_texture_float_linear"))return;if(a.type===_l&&null===(c||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),o.memory.textures++)}function k(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),N(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s,l=function(e){return!c&&(e.wrapS!==sl||e.wrapT!==sl||e.minFilter!==ul&&e.minFilter!==hl)}(r)&&!1===b(r.image),u=y(r.image,l,!1,p),d=b(u)||c,h=a.convert(r.format),f=a.convert(r.type),m=_(r.internalFormat,h,f);R(o,r,d);var v=r.mipmaps;if(r.isDepthTexture)m=6402,c?m=r.type===wl?36012:r.type===xl?33190:r.type===Cl?35056:33189:r.type===wl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Nl&&6402===m&&r.type!==yl&&r.type!==xl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=yl,f=a.convert(r.type)),r.format===kl&&6402===m&&(m=34041,r.type!==Cl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Cl,f=a.convert(r.type))),n.texImage2D(3553,0,m,u.width,u.height,0,h,f,null);else if(r.isDataTexture)if(v.length>0&&d){for(var g=0,M=v.length;g<M;g++)s=v[g],n.texImage2D(3553,g,m,s.width,s.height,0,h,f,s.data);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,u.width,u.height,0,h,f,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var S=0,E=v.length;S<E;S++)s=v[S],r.format!==Al&&r.format!==Ll?null!==h?n.compressedTexImage2D(3553,S,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,m,s.width,s.height,0,h,f,s.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,u.width,u.height,u.depth,0,h,f,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,u.width,u.height,u.depth,0,h,f,u.data),t.__maxMipLevel=0;else if(v.length>0&&d){for(var C=0,T=v.length;C<T;C++)s=v[C],n.texImage2D(3553,C,m,h,f,s);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,h,f,u),t.__maxMipLevel=0;x(r,d)&&w(o,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function D(t,i,o,s){var l=a.convert(i.texture.format),u=a.convert(i.texture.type),c=_(i.texture.internalFormat,l,u);n.texImage2D(s,0,c,i.width,i.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===wl?i=36012:o.type===xl&&(i=33190));var s=z(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var l=z(n);e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var u=a.convert(n.texture.format),c=a.convert(n.texture.type),d=_(n.texture.internalFormat,u,c);if(r){var h=z(n);e.renderbufferStorageMultisample(36161,h,d,n.width,n.height)}else e.renderbufferStorage(36161,d,n.width,n.height)}e.bindRenderbuffer(36161,null)}function j(t){var n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Nl)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==kl)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),I(n.__webglDepthbuffer[a],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),I(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function z(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(f,e.samples):0}var F=!1,B=!1;this.allocateTextureUnit=function(){var e=C;return e>=d&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+d),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=L,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(t){var i=r.get(t),s=r.get(t.texture);t.addEventListener("dispose",E),s.__webglTexture=e.createTexture(),o.memory.textures++;var l=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,d=b(t)||c;if(!c||t.texture.format!==Ll||t.texture.type!==wl&&t.texture.type!==_l||(t.texture.format=Al,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){i.__webglFramebuffer=[];for(var h=0;h<6;h++)i.__webglFramebuffer[h]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),u)if(c){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var p=a.convert(t.texture.format),f=a.convert(t.texture.type),m=_(t.texture.internalFormat,p,f),v=z(t);e.renderbufferStorageMultisample(36161,v,m,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),I(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,s.__webglTexture),R(34067,t.texture,d);for(var g=0;g<6;g++)D(i.__webglFramebuffer[g],t,36064,34069+g);x(t.texture,d)&&w(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),R(3553,t.texture,d),D(i.__webglFramebuffer,t,36064,3553),x(t.texture,d)&&w(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(x(t,b(e)||c)){var i=e.isWebGLCubeRenderTarget?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(i,a),w(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var i=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?L(e,t):A(e,t)}}function em(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===ml)return 5121;if(e===Ml)return 32819;if(e===Sl)return 32820;if(e===El)return 33635;if(e===vl)return 5120;if(e===gl)return 5122;if(e===yl)return 5123;if(e===bl)return 5124;if(e===xl)return 5125;if(e===wl)return 5126;if(e===_l)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===Tl)return 6406;if(e===Ll)return 6407;if(e===Al)return 6408;if(e===Pl)return 6409;if(e===Ol)return 6410;if(e===Nl)return 6402;if(e===kl)return 34041;if(e===Dl)return 6403;if(e===Il)return 36244;if(e===jl)return 33319;if(e===zl)return 33320;if(e===Fl)return 36248;if(e===Bl)return 36249;if(e===Ul||e===Hl||e===Gl||e===Vl){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===Ul)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Hl)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Gl)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Vl)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Wl||e===ql||e===Xl||e===Zl){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===Wl)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ql)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Xl)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Zl)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Yl)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Jl||e===Ql)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===Jl)return n.COMPRESSED_RGB8_ETC2;if(e===Ql)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Kl||e===$l||e===eu||e===tu||e===nu||e===ru||e===iu||e===au||e===ou||e===su||e===lu||e===uu||e===cu||e===du||e===pu||e===fu||e===mu||e===vu||e===gu||e===yu||e===bu||e===xu||e===wu||e===_u||e===Mu||e===Su||e===Eu||e===Cu?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===hu?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===Cl?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function tm(e){Uh.call(this),this.cameras=e||[]}function nm(){Bc.call(this),this.type="Group"}function rm(){this._targetRay=null,this._grip=null,this._hand=null}function im(e,t){var n=this,r=null,i=1,a=null,o="local-floor",s=null,l=[],u=new Map,c=new Uh;c.layers.enable(1),c.viewport=new lc;var d=new Uh;d.layers.enable(2),d.viewport=new lc;var h=[c,d],p=new tm;p.layers.enable(1),p.layers.enable(2);var f=null,m=null;function v(e){var t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function g(){u.forEach((function(e,t){e.disconnect(t)})),u.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){a=e,S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(e){for(var t=r.inputSources,n=0;n<l.length;n++)u.set(t[n],l[n]);for(var i=0;i<e.removed.length;i++){var a=e.removed[i],o=u.get(a);o&&(o.dispatchEvent({type:"disconnected",data:a}),u.delete(a))}for(var s=0;s<e.added.length;s++){var c=e.added[s],d=u.get(c);d&&d.dispatchEvent({type:"connected",data:c})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=l[e];return void 0===t&&(t=new rm,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=l[e];return void 0===t&&(t=new rm,l[e]=t),t.getGripSpace()},this.getHand=function(e){var t=l[e];return void 0===t&&(t=new rm,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return r},this.setSession=function(e){if(null!==(r=e)){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",g);var n=t.getContextAttributes();!0!==n.xrCompatible&&t.makeXRCompatible();var a={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:i},s=new XRWebGLLayer(r,t,a);r.updateRenderState({baseLayer:s}),r.requestReferenceSpace(o).then(y),r.addEventListener("inputsourceschange",b)}};var x=new fc,w=new fc;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=d.near=c.near=e.near,p.far=d.far=c.far=e.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);var t=e.parent,n=p.cameras;_(p,t);for(var i=0;i<n.length;i++)_(n[i],t);e.matrixWorld.copy(p.matrixWorld);for(var a=e.children,o=0,s=a.length;o<s;o++)a[o].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){x.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);var r=x.distanceTo(w),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*c,p=o*d,f=r/(-c+d),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=o+f,g=s+f,y=h-m,b=p+(r-m),_=l*s/g*v,M=u*s/g*v;e.projectionMatrix.makePerspective(y,b,_,M,v,g)}(p,c,d):p.projectionMatrix.copy(c.projectionMatrix),p};var M=null;var S=new Qh;S.setAnimationLoop((function(t,n){if(null!==(s=n.getViewerPose(a))){var i=s.views,o=r.renderState.baseLayer;e.setFramebuffer(o.framebuffer);var u=!1;i.length!==p.cameras.length&&(p.cameras.length=0,u=!0);for(var c=0;c<i.length;c++){var d=i[c],f=o.getViewport(d),m=h[c];m.matrix.fromArray(d.transform.matrix),m.projectionMatrix.fromArray(d.projectionMatrix),m.viewport.set(f.x,f.y,f.width,f.height),0===c&&p.matrix.copy(m.matrix),!0===u&&p.cameras.push(m)}}for(var v=r.inputSources,g=0;g<l.length;g++){var y=l[g],b=v[g];y.update(b,n,a)}M&&M(t,n)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}function am(e){function t(t,n,r){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var i,a,o=n.envMap||r;if(o){t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var s=e.get(o).__maxMipLevel;void 0!==s&&(t.maxMipLevel.value=s)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap&&(i=n.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ps&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ps&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ps&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ps&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ps&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ps&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r,i),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t,r),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===ps&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,r,i):n(e,r,i)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ps&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ps&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ps&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ps&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,a,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function om(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Du,this.physicallyCorrectLights=!1,this.toneMapping=Zs,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p=this,f=!1,m=null,v=0,g=0,y=null,b=null,x=-1,w=null,_=null,M=new lc,S=new lc,E=null,C=t.width,T=t.height,L=1,A=null,P=null,O=new lc(0,0,C,T),R=new lc(0,0,C,T),N=!1,k=new Yh,D=new sp,I=!1,j=!1,z=new _c,F=new fc,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===y?L:1}var H,G,V,W,q,X,Z,Y,J,Q,K,$,ee,te,ne,re,ie,ae,oe,se=n;function le(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{var ue={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",me,!1),null===se){var ce=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&ce.shift(),null===(se=le(ce,ue)))throw le(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===se.getShaderPrecisionFormat&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}function de(){H=new lp(se),!1===(G=new op(se,H,e)).isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),ae=new em(se,H,G),(V=new Kf(se,H,G)).scissor(S.copy(R).multiplyScalar(L).floor()),V.viewport(M.copy(O).multiplyScalar(L).floor()),W=new dp(se),q=new If,X=new $f(se,H,V,q,G,ae,W),Z=new Kh(se,G),oe=new ip(se,H,Z,G),Y=new up(se,Z,W,oe),J=new mp(se,Y,Z,W),ne=new fp(se),Q=new Df(p,H,G,oe),K=new am(q),$=new Bf(q),ee=new qf,te=new rp(p,V,J,s),re=new ap(se,H,W,G),ie=new cp(se,H,W,G),W.programs=Q.programs,p.capabilities=G,p.extensions=H,p.properties=q,p.renderLists=$,p.state=V,p.info=W}de();var he=new im(p,se);this.xr=he;var pe=new Qf(p,J,G.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,de()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve),function(e){ge(e),q.remove(e)}(t)}function ge(e){var t=q.get(e).program;void 0!==t&&Q.releaseProgram(t)}this.shadowMap=pe,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){var e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(e){void 0!==e&&(L=e,this.setSize(C,T,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new rc),e.set(C,T)},this.setSize=function(e,n,r){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,T=n,t.width=Math.floor(e*L),t.height=Math.floor(n*L),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new rc),e.set(C*L,T*L).floor()},this.setDrawingBufferSize=function(e,n,r){C=e,T=n,L=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new lc),e.copy(M)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),V.viewport(M.copy(O).multiplyScalar(L).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),V.scissor(S.copy(R).multiplyScalar(L).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){V.setScissorTest(N=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(){return te.getClearColor()},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),se.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",me,!1),$.dispose(),ee.dispose(),q.dispose(),J.dispose(),oe.dispose(),he.dispose(),be.stop()},this.renderBufferImmediate=function(e,t){oe.initAttributes();var n=q.get(e);e.hasPositions&&!n.position&&(n.position=se.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=se.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=se.createBuffer()),e.hasColors&&!n.color&&(n.color=se.createBuffer());var r=t.getAttributes();e.hasPositions&&(se.bindBuffer(34962,n.position),se.bufferData(34962,e.positionArray,35048),oe.enableAttribute(r.position),se.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(se.bindBuffer(34962,n.normal),se.bufferData(34962,e.normalArray,35048),oe.enableAttribute(r.normal),se.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(se.bindBuffer(34962,n.uv),se.bufferData(34962,e.uvArray,35048),oe.enableAttribute(r.uv),se.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(se.bindBuffer(34962,n.color),se.bufferData(34962,e.colorArray,35048),oe.enableAttribute(r.color),se.vertexAttribPointer(r.color,3,5126,!1,0,0)),oe.disableUnusedAttributes(),se.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Se(e,t,r,i);V.setMaterial(r,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c,d=1;!0===r.wireframe&&(l=Y.getWireframeAttribute(n),d=2),(r.morphTargets||r.morphNormals)&&ne.update(i,n,r,s),oe.setup(i,r,s,n,l);var h=re;null!==l&&(c=Z.get(l),(h=ie).setIndex(c));var p=null!==l?l.count:u.count,f=n.drawRange.start*d,m=n.drawRange.count*d,v=null!==a?a.start*d:0,g=null!==a?a.count*d:1/0,y=Math.max(f,v),b=Math.min(p,f+m,v+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*U()),h.setMode(1)):h.setMode(4);else if(i.isLine){var w=r.linewidth;void 0===w&&(w=1),V.setLineWidth(w*U()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){var _=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,x,_)}else h.render(y,x)}},this.compile=function(e,t){(h=ee.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t);var n=new WeakMap;e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var a=r[i];!1===n.has(a)&&(Me(a,e,t),n.set(a))}else!1===n.has(r)&&(Me(r,e,t),n.set(r))}))};var ye=null;var be=new Qh;function xe(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var i=J.update(e),a=e.material;a.visible&&d.push(e,i,a,n,F.z,null)}}else if(e.isImmediateRenderObject)r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),d.push(e,null,e.material,n,F.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||k.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var p=l[u],f=s[p.materialIndex];f&&f.visible&&d.push(e,o,f,n,F.z,p)}else s.visible&&d.push(e,o,s,n,F.z,null)}for(var m=e.children,v=0,g=m.length;v<g;v++)xe(m[v],t,n,r)}}function we(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;if(n.isArrayCamera){_=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var m=d[p];s.layers.test(m.layers)&&(V.viewport(M.copy(m.viewport)),h.setupLights(m),_e(s,t,m,l,u,c))}}else _=null,_e(s,t,n,l,u,c)}}function _e(e,t,n,r,i,a){if(e.onBeforeRender(p,t,n,r,i,a),h=ee.get(t,_||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=Se(n,t,i,e);V.setMaterial(i),oe.reset(),function(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}(e,o)}else p.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(p,t,n,r,i,a),h=ee.get(t,_||n)}function Me(e,t,n){!0!==t.isScene&&(t=B);var r=q.get(e),i=h.state.lights,a=h.state.shadowsArray,o=i.state.version,s=Q.getParameters(e,i.state,a,t,D.numPlanes,D.numIntersection,n),l=Q.getProgramCacheKey(s),u=r.program,c=!0;if(void 0===u)e.addEventListener("dispose",ve);else if(u.cacheKey!==l)ge(e);else if(r.lightsStateVersion!==o)r.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}c&&(s.uniforms=Q.getUniforms(e,s),e.onBeforeCompile(s,p),u=Q.acquireProgram(s,l),r.program=u,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);var d=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<p.maxMorphTargets;f++)d["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var m=0;m<p.maxMorphNormals;m++)d["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var v=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=D.numPlanes,r.numIntersection=D.numIntersection,v.clippingPlanes=D.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(v.ambientLightColor.value=i.state.ambient,v.lightProbe.value=i.state.probe,v.directionalLights.value=i.state.directional,v.directionalLightShadows.value=i.state.directionalShadow,v.spotLights.value=i.state.spot,v.spotLightShadows.value=i.state.spotShadow,v.rectAreaLights.value=i.state.rectArea,v.pointLights.value=i.state.point,v.pointLightShadows.value=i.state.pointShadow,v.hemisphereLights.value=i.state.hemi,v.directionalShadowMap.value=i.state.directionalShadowMap,v.directionalShadowMatrix.value=i.state.directionalShadowMatrix,v.spotShadowMap.value=i.state.spotShadowMap,v.spotShadowMatrix.value=i.state.spotShadowMatrix,v.pointShadowMap.value=i.state.pointShadowMap,v.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=ff.seqWithValue(g.seq,v);r.uniformsList=y}function Se(e,t,n,r){!0!==t.isScene&&(t=B),X.resetTextureUnits();var i=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===y?p.outputEncoding:y.texture.encoding,s=q.get(n),l=h.state.lights;if(!0===I&&(!0===j||e!==w)){var u=e===w&&n.id===x;D.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,s,u)}n.version===s.__version?void 0===s.program||n.fog&&s.fog!==i||s.environment!==a||s.needsLights&&s.lightsStateVersion!==l.state.version?Me(n,t,r):void 0===s.numClippingPlanes||s.numClippingPlanes===D.numPlanes&&s.numIntersection===D.numIntersection?s.outputEncoding!==o&&Me(n,t,r):Me(n,t,r):(Me(n,t,r),s.__version=n.version);var c,d,f=!1,m=!1,v=!1,g=s.program,b=g.getUniforms(),_=s.uniforms;if(V.useProgram(g.program)&&(f=!0,m=!0,v=!0),n.id!==x&&(x=n.id,m=!0),f||w!==e){if(b.setValue(se,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&b.setValue(se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,m=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var M=b.map.cameraPosition;void 0!==M&&M.setValue(se,F.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(se,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&b.setValue(se,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){b.setOptional(se,r,"bindMatrix"),b.setOptional(se,r,"bindMatrixInverse");var S=r.skeleton;if(S){var E=S.bones;if(G.floatVertexTextures){if(void 0===S.boneTexture){var C=Math.sqrt(4*E.length);C=nc.ceilPowerOfTwo(C),C=Math.max(C,4);var A=new Float32Array(C*C*4);A.set(S.boneMatrices);var P=new qh(A,C,C,Al,wl);S.boneMatrices=A,S.boneTexture=P,S.boneTextureSize=C}b.setValue(se,"boneTexture",S.boneTexture,X),b.setValue(se,"boneTextureSize",S.boneTextureSize)}else b.setOptional(se,S,"boneMatrices")}}return(m||s.receiveShadow!==r.receiveShadow)&&(s.receiveShadow=r.receiveShadow,b.setValue(se,"receiveShadow",r.receiveShadow)),m&&(b.setValue(se,"toneMappingExposure",p.toneMappingExposure),s.needsLights&&(d=v,(c=_).ambientLightColor.needsUpdate=d,c.lightProbe.needsUpdate=d,c.directionalLights.needsUpdate=d,c.directionalLightShadows.needsUpdate=d,c.pointLights.needsUpdate=d,c.pointLightShadows.needsUpdate=d,c.spotLights.needsUpdate=d,c.spotLightShadows.needsUpdate=d,c.rectAreaLights.needsUpdate=d,c.hemisphereLights.needsUpdate=d),i&&n.fog&&K.refreshFogUniforms(_,i),K.refreshMaterialUniforms(_,n,a,L,T),void 0!==_.ltc_1&&(_.ltc_1.value=Jh.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=Jh.LTC_2),ff.upload(se,s.uniformsList,_,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ff.upload(se,s.uniformsList,_,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(se,"center",r.center),b.setValue(se,"modelViewMatrix",r.modelViewMatrix),b.setValue(se,"normalMatrix",r.normalMatrix),b.setValue(se,"modelMatrix",r.matrixWorld),g}be.setAnimationLoop((function(e){he.isPresenting||ye&&ye(e)})),"undefined"!==typeof window&&be.setContext(window),this.setAnimationLoop=function(e){ye=e,he.setAnimationLoop(e),null===e?be.stop():be.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0===t||!0===t.isCamera){if(!0!==f){oe.resetDefaultState(),x=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||y),(h=ee.get(e,t)).init(),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(z),j=this.localClippingEnabled,I=D.init(this.clippingPlanes,j,t),(d=$.get(e,t)).init(),xe(e,t,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(A,P),!0===I&&D.beginShadows();var i=h.state.shadowsArray;pe.render(i,e,t),h.setupLights(t),!0===I&&D.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),te.render(d,e,t,r);var a=d.opaque,o=d.transparent;a.length>0&&we(a,e,t),o.length>0&&we(o,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==y&&(X.updateRenderTargetMipmap(y),X.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),d=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){m!==e&&null===y&&se.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t,n){y=e,v=t,g=n,e&&void 0===q.get(e).__webglFramebuffer&&X.setupRenderTarget(e);var r=m,i=!1;if(e){var a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,M.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else M.copy(O).multiplyScalar(L).floor(),S.copy(R).multiplyScalar(L).floor(),E=N;if(b!==r&&(se.bindFramebuffer(36160,r),b=r),V.viewport(M),V.scissor(S),V.setScissorTest(E),i){var o=q.get(e.texture);se.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var l=!1;s!==b&&(se.bindFramebuffer(36160,s),l=!0);try{var u=e.texture,c=u.format,d=u.type;if(c!==Al&&ae.convert(c)!==se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(d!==ml&&ae.convert(d)!==se.getParameter(35738)&&(d!==wl||!(G.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float")))&&(d!==_l||!(G.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===se.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&se.readPixels(t,n,r,i,ae.convert(c),ae.convert(d),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&se.bindFramebuffer(36160,b)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=ae.convert(t.format);X.setTexture2D(t,0),se.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){void 0===r&&(r=0);var i=t.image.width,a=t.image.height,o=ae.convert(n.format),s=ae.convert(n.type);X.setTexture2D(n,0),se.pixelStorei(37440,n.flipY),se.pixelStorei(37441,n.premultiplyAlpha),se.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?se.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?se.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):se.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&se.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),V.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function sm(e){om.call(this,e)}function lm(e,t){this.name="",this.color=new Od(e),this.density=void 0!==t?t:25e-5}function um(e,t,n){this.name="",this.color=new Od(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function cm(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Yu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=nc.generateUUID()}tm.prototype=Object.assign(Object.create(Uh.prototype),{constructor:tm,isArrayCamera:!0}),nm.prototype=Object.assign(Object.create(Bc.prototype),{constructor:nm,isGroup:!0}),Object.assign(rm.prototype,{constructor:rm,getHandSpace:function(){if(null===this._hand&&(this._hand=new nm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){var t=new nm;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new nm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new nm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e)if(e.hand){a=!0;for(var u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++)if(e.hand[u]){var c=t.getJointPose(e.hand[u],n),d=l.joints[u];null!==c&&(d.matrix.fromArray(c.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=c.radius),d.visible=null!==c;var h=l.joints[window.XRHand.INDEX_PHALANX_TIP],p=l.joints[window.XRHand.THUMB_PHALANX_TIP],f=h.position.distanceTo(p.position);l.inputState.pinching&&f>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}}),Object.assign(im.prototype,Qu.prototype),sm.prototype=Object.assign(Object.create(om.prototype),{constructor:sm,isWebGL1Renderer:!0}),Object.assign(lm.prototype,{isFogExp2:!0,clone:function(){return new lm(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(um.prototype,{isFog:!0,clone:function(){return new um(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(cm.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(cm.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nc.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new cm(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nc.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var dm,hm=new fc;function pm(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function fm(e){jd.call(this),this.type="SpriteMaterial",this.color=new Od(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(pm.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(pm.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)hm.x=this.getX(t),hm.y=this.getY(t),hm.z=this.getZ(t),hm.applyMatrix4(e),this.setXYZ(t,hm.x,hm.y,hm.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return new Ud(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),fm.prototype=Object.create(jd.prototype),fm.prototype.constructor=fm,fm.prototype.isSpriteMaterial=!0,fm.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var mm=new fc,vm=new fc,gm=new fc,ym=new rc,bm=new rc,xm=new _c,wm=new fc,_m=new fc,Mm=new fc,Sm=new rc,Em=new rc,Cm=new rc;function Tm(e){if(Bc.call(this),this.type="Sprite",void 0===dm){dm=new oh;var t=new cm(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);dm.setIndex([0,1,2,0,2,3]),dm.setAttribute("position",new pm(t,3,0,!1)),dm.setAttribute("uv",new pm(t,2,3,!1))}this.geometry=dm,this.material=void 0!==e?e:new fm,this.center=new rc(.5,.5)}function Lm(e,t,n,r,i,a){ym.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(bm.x=a*ym.x-i*ym.y,bm.y=i*ym.x+a*ym.y):bm.copy(ym),e.copy(t),e.x+=bm.x,e.y+=bm.y,e.applyMatrix4(xm)}Tm.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Tm,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vm.setFromMatrixScale(this.matrixWorld),xm.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&vm.multiplyScalar(-gm.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Lm(wm.set(-.5,-.5,0),gm,a,vm,n,r),Lm(_m.set(.5,-.5,0),gm,a,vm,n,r),Lm(Mm.set(.5,.5,0),gm,a,vm,n,r),Sm.set(0,0),Em.set(1,0),Cm.set(1,1);var o=e.ray.intersectTriangle(wm,_m,Mm,!1,mm);if(null!==o||(Lm(_m.set(-.5,.5,0),gm,a,vm,n,r),Em.set(0,1),null!==(o=e.ray.intersectTriangle(wm,Mm,_m,!1,mm)))){var s=e.ray.origin.distanceTo(mm);s<e.near||s>e.far||t.push({distance:s,point:mm.clone(),uv:Td.getUV(mm,wm,_m,Mm,Sm,Em,Cm,new rc),face:null,object:this})}},copy:function(e){return Bc.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});var Am=new fc,Pm=new fc;function Om(){Bc.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Rm(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Sh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new _c,this.bindMatrixInverse=new _c}Om.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Om,isLOD:!0,copy:function(e){Bc.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Am.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Am);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){Am.setFromMatrixPosition(e.matrixWorld),Pm.setFromMatrixPosition(this.matrixWorld);var n,r,i=Am.distanceTo(Pm)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}},toJSON:function(e){var t=Bc.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Rm.prototype=Object.assign(Object.create(Sh.prototype),{constructor:Rm,isSkinnedMesh:!0,copy:function(e){return Sh.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new lc,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Sh.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var e=new fc,t=new lc,n=new lc,r=new fc,i=new _c;return function(a,o){var s=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,a),n.fromBufferAttribute(l.attributes.skinWeight,a),e.fromBufferAttribute(l.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var u=0;u<4;u++){var c=n.getComponent(u);if(0!==c){var d=t.getComponent(u);i.multiplyMatrices(s.bones[d].matrixWorld,s.boneInverses[d]),o.addScaledVector(r.copy(e).applyMatrix4(i),c)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});var Nm=new _c,km=new _c;function Dm(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new _c)}}function Im(){Bc.call(this),this.type="Bone"}Object.assign(Dm.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new _c;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:km;Nm.multiplyMatrices(o,t[i]),Nm.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Dm(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Im.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Im,isBone:!0});var jm=new _c,zm=new _c,Fm=[],Bm=new Sh;function Um(e,t,n){Sh.call(this,e,t),this.instanceMatrix=new Ud(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function Hm(e){jd.call(this),this.type="LineBasicMaterial",this.color=new Od(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}Um.prototype=Object.assign(Object.create(Sh.prototype),{constructor:Um,isInstancedMesh:!0,copy:function(e){return Sh.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(Bm.geometry=this.geometry,Bm.material=this.material,void 0!==Bm.material)for(var i=0;i<r;i++){this.getMatrixAt(i,jm),zm.multiplyMatrices(n,jm),Bm.matrixWorld=zm,Bm.raycast(e,Fm);for(var a=0,o=Fm.length;a<o;a++){var s=Fm[a];s.instanceId=i,s.object=this,t.push(s)}Fm.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Hm.prototype=Object.create(jd.prototype),Hm.prototype.constructor=Hm,Hm.prototype.isLineBasicMaterial=!0,Hm.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var Gm=new fc,Vm=new fc,Wm=new _c,qm=new hd,Xm=new id;function Zm(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Bc.call(this),this.type="Line",this.geometry=void 0!==e?e:new oh,this.material=void 0!==t?t:new Hm,this.updateMorphTargets()}Zm.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Zm,isLine:!0,copy:function(e){return Bc.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Gm.fromBufferAttribute(t,r-1),Vm.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Gm.distanceTo(Vm);e.setAttribute("lineDistance",new Yd(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices,o=e.lineDistances;o[0]=0;for(var s=1,l=a.length;s<l;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xm.copy(n.boundingSphere),Xm.applyMatrix4(r),Xm.radius+=i,!1!==e.ray.intersectsSphere(Xm)){Wm.getInverse(r),qm.copy(e.ray).applyMatrix4(Wm);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new fc,l=new fc,u=new fc,c=new fc,d=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,p=n.attributes.position.array;if(null!==h)for(var f=h.array,m=0,v=f.length-1;m<v;m+=d){var g=f[m],y=f[m+1];if(s.fromArray(p,3*g),l.fromArray(p,3*y),!(qm.distanceSqToSegment(s,l,c,u)>o)){c.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(c);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var x=0,w=p.length/3-1;x<w;x+=d){if(s.fromArray(p,3*x),l.fromArray(p,3*x+3),!(qm.distanceSqToSegment(s,l,c,u)>o)){c.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var M=n.vertices,S=M.length,E=0;E<S-1;E+=d){if(!(qm.distanceSqToSegment(M[E],M[E+1],c,u)>o)){c.applyMatrix4(this.matrixWorld);var C=e.ray.origin.distanceTo(c);C<e.near||C>e.far||t.push({distance:C,point:u.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Ym=new fc,Jm=new fc;function Qm(e,t){Zm.call(this,e,t),this.type="LineSegments"}function Km(e,t){Zm.call(this,e,t),this.type="LineLoop"}function $m(e){jd.call(this),this.type="PointsMaterial",this.color=new Od(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Qm.prototype=Object.assign(Object.create(Zm.prototype),{constructor:Qm,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Ym.fromBufferAttribute(t,r),Jm.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Ym.distanceTo(Jm);e.setAttribute("lineDistance",new Yd(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,o=e.lineDistances,s=0,l=a.length;s<l;s+=2)Ym.copy(a[s]),Jm.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+Ym.distanceTo(Jm);return this}}),Km.prototype=Object.assign(Object.create(Zm.prototype),{constructor:Km,isLineLoop:!0}),$m.prototype=Object.create(jd.prototype),$m.prototype.constructor=$m,$m.prototype.isPointsMaterial=!0,$m.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var ev=new _c,tv=new hd,nv=new id,rv=new fc;function iv(e,t){Bc.call(this),this.type="Points",this.geometry=void 0!==e?e:new oh,this.material=void 0!==t?t:new $m,this.updateMorphTargets()}function av(e,t,n,r,i,a,o){var s=tv.distanceSqToPoint(e);if(s<n){var l=new fc;tv.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}function ov(e,t,n,r,i,a,o,s,l){sc.call(this,e,t,n,r,i,a,o,s,l),this.format=void 0!==o?o:Ll,this.minFilter=void 0!==a?a:hl,this.magFilter=void 0!==i?i:hl,this.generateMipmaps=!1;var u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function sv(e,t,n,r,i,a,o,s,l,u,c,d){sc.call(this,null,a,o,s,l,u,r,i,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function lv(e,t,n,r,i,a,o,s,l){sc.call(this,e,t,n,r,i,a,o,s,l),this.needsUpdate=!0}function uv(e,t,n,r,i,a,o,s,l,u){if((u=void 0!==u?u:Nl)!==Nl&&u!==kl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Nl&&(n=yl),void 0===n&&u===kl&&(n=Cl),sc.call(this,null,r,i,a,o,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:ul,this.minFilter=void 0!==s?s:ul,this.flipY=!1,this.generateMipmaps=!1}function cv(e){oh.call(this),this.type="WireframeGeometry";var t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){for(var a=e.faces,o=0,s=a.length;o<s;o++)for(var l=a[o],u=0;u<3;u++){var c=l[i[u]],d=l[i[(u+1)%3]];n[0]=Math.min(c,d),n[1]=Math.max(c,d);var h=n[0]+","+n[1];void 0===r[h]&&(r[h]={index1:n[0],index2:n[1]})}for(var p in r){var f=r[p],m=e.vertices[f.index1];t.push(m.x,m.y,m.z),m=e.vertices[f.index2],t.push(m.x,m.y,m.z)}}else if(e&&e.isBufferGeometry){var v=new fc;if(null!==e.index){var g=e.attributes.position,y=e.index,b=e.groups;0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]);for(var x=0,w=b.length;x<w;++x)for(var _=b[x],M=_.start,S=M,E=M+_.count;S<E;S+=3)for(var C=0;C<3;C++){var T=y.getX(S+C),L=y.getX(S+(C+1)%3);n[0]=Math.min(T,L),n[1]=Math.max(T,L);var A=n[0]+","+n[1];void 0===r[A]&&(r[A]={index1:n[0],index2:n[1]})}for(var P in r){var O=r[P];v.fromBufferAttribute(g,O.index1),t.push(v.x,v.y,v.z),v.fromBufferAttribute(g,O.index2),t.push(v.x,v.y,v.z)}}else for(var R=e.attributes.position,N=0,k=R.count/3;N<k;N++)for(var D=0;D<3;D++){var I=3*N+D;v.fromBufferAttribute(R,I),t.push(v.x,v.y,v.z);var j=3*N+(D+1)%3;v.fromBufferAttribute(R,j),t.push(v.x,v.y,v.z)}}this.setAttribute("position",new Yd(t,3))}function dv(e,t,n){Oh.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new hv(e,t,n)),this.mergeVertices()}function hv(e,t,n){oh.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],a=[],o=[],s=1e-5,l=new fc,u=new fc,c=new fc,d=new fc,h=new fc;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var p=t+1,f=0;f<=n;f++)for(var m=f/n,v=0;v<=t;v++){var g=v/t;e(g,m,u),i.push(u.x,u.y,u.z),g-s>=0?(e(g-s,m,c),d.subVectors(u,c)):(e(g+s,m,c),d.subVectors(c,u)),m-s>=0?(e(g,m-s,c),h.subVectors(u,c)):(e(g,m+s,c),h.subVectors(c,u)),l.crossVectors(d,h).normalize(),a.push(l.x,l.y,l.z),o.push(g,m)}for(var y=0;y<n;y++)for(var b=0;b<t;b++){var x=y*p+b,w=y*p+b+1,_=(y+1)*p+b+1,M=(y+1)*p+b;r.push(x,w,M),r.push(w,_,M)}this.setIndex(r),this.setAttribute("position",new Yd(i,3)),this.setAttribute("normal",new Yd(a,3)),this.setAttribute("uv",new Yd(o,2))}function pv(e,t,n,r){Oh.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new fv(e,t,n,r)),this.mergeVertices()}function fv(e,t,n,r){oh.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],a=[];function o(e,t,n,r){for(var i=Math.pow(2,r),a=[],o=0;o<=i;o++){a[o]=[];for(var l=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),c=i-o,d=0;d<=c;d++)a[o][d]=0===d&&o===i?l:l.clone().lerp(u,d/c)}for(var h=0;h<i;h++)for(var p=0;p<2*(i-h)-1;p++){var f=Math.floor(p/2);p%2===0?(s(a[h][f+1]),s(a[h+1][f]),s(a[h][f])):(s(a[h][f+1]),s(a[h+1][f+1]),s(a[h+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new fc,r=new fc,i=new fc,a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r=r||0),function(e){for(var t=new fc,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new fc,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-r)}var o;(function(){for(var e=new fc,t=new fc,n=new fc,r=new fc,o=new rc,s=new rc,l=new rc,d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=c(r);u(o,h+0,e,p),u(s,h+2,t,p),u(l,h+4,n,p)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Yd(i,3)),this.setAttribute("normal",new Yd(i.slice(),3)),this.setAttribute("uv",new Yd(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function mv(e,t){Oh.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new vv(e,t)),this.mergeVertices()}function vv(e,t){fv.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function gv(e,t){Oh.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new yv(e,t)),this.mergeVertices()}function yv(e,t){fv.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function bv(e,t){Oh.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new xv(e,t)),this.mergeVertices()}function xv(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];fv.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function wv(e,t){Oh.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new _v(e,t)),this.mergeVertices()}function _v(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];fv.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mv(e,t,n,r,i,a){Oh.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Sv(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Sv(e,t,n,r,i){oh.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o=new fc,s=new fc,l=new rc,u=new fc,c=[],d=[],h=[],p=[];function f(i){u=e.getPointAt(i/t,u);for(var l=a.normals[i],h=a.binormals[i],p=0;p<=r;p++){var f=p/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);s.x=v*l.x+m*h.x,s.y=v*l.y+m*h.y,s.z=v*l.z+m*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,c.push(o.x,o.y,o.z)}}!function(){for(var e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(var e=0;e<=t;e++)for(var n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(var e=1;e<=t;e++)for(var n=1;n<=r;n++){var i=(r+1)*(e-1)+(n-1),a=(r+1)*e+(n-1),o=(r+1)*e+n,s=(r+1)*(e-1)+n;p.push(i,a,s),p.push(a,o,s)}}()}(),this.setIndex(p),this.setAttribute("position",new Yd(c,3)),this.setAttribute("normal",new Yd(d,3)),this.setAttribute("uv",new Yd(h,2))}function Ev(e,t,n,r,i,a,o){Oh.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Cv(e,t,n,r,i,a)),this.mergeVertices()}function Cv(e,t,n,r,i,a){oh.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;for(var o=[],s=[],l=[],u=[],c=new fc,d=new fc,h=new fc,p=new fc,f=new fc,m=new fc,v=new fc,g=0;g<=n;++g){var y=g/n*i*Math.PI*2;A(y,i,a,e,h),A(y+.01,i,a,e,p),m.subVectors(p,h),v.addVectors(p,h),f.crossVectors(m,v),v.crossVectors(f,m),f.normalize(),v.normalize();for(var b=0;b<=r;++b){var x=b/r*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);c.x=h.x+(w*v.x+_*f.x),c.y=h.y+(w*v.y+_*f.y),c.z=h.z+(w*v.z+_*f.z),s.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(g/n),u.push(b/r)}}for(var M=1;M<=n;M++)for(var S=1;S<=r;S++){var E=(r+1)*(M-1)+(S-1),C=(r+1)*M+(S-1),T=(r+1)*M+S,L=(r+1)*(M-1)+S;o.push(E,C,L),o.push(C,T,L)}function A(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new Yd(s,3)),this.setAttribute("normal",new Yd(l,3)),this.setAttribute("uv",new Yd(u,2))}function Tv(e,t,n,r,i){Oh.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Lv(e,t,n,r,i)),this.mergeVertices()}function Lv(e,t,n,r,i){oh.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;for(var a=[],o=[],s=[],l=[],u=new fc,c=new fc,d=new fc,h=0;h<=n;h++)for(var p=0;p<=r;p++){var f=p/r*i,m=h/n*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(f),c.y=(e+t*Math.cos(m))*Math.sin(f),c.z=t*Math.sin(m),o.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(c,u).normalize(),s.push(d.x,d.y,d.z),l.push(p/r),l.push(h/n)}for(var v=1;v<=n;v++)for(var g=1;g<=r;g++){var y=(r+1)*v+g-1,b=(r+1)*(v-1)+g-1,x=(r+1)*(v-1)+g,w=(r+1)*v+g;a.push(y,b,w),a.push(b,x,w)}this.setIndex(a),this.setAttribute("position",new Yd(o,3)),this.setAttribute("normal",new Yd(s,3)),this.setAttribute("uv",new Yd(l,2))}iv.prototype=Object.assign(Object.create(Bc.prototype),{constructor:iv,isPoints:!0,copy:function(e){return Bc.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),nv.copy(n.boundingSphere),nv.applyMatrix4(r),nv.radius+=i,!1!==e.ray.intersectsSphere(nv)){ev.getInverse(r),tv.copy(e.ray).applyMatrix4(ev);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,d=u.length;c<d;c++){var h=u[c];rv.fromArray(l,3*h),av(rv,h,o,r,e,t,this)}else for(var p=0,f=l.length/3;p<f;p++)rv.fromArray(l,3*p),av(rv,p,o,r,e,t,this)}else for(var m=n.vertices,v=0,g=m.length;v<g;v++)av(m[v],v,o,r,e,t,this)}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),ov.prototype=Object.assign(Object.create(sc.prototype),{constructor:ov,isVideoTexture:!0,update:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),sv.prototype=Object.create(sc.prototype),sv.prototype.constructor=sv,sv.prototype.isCompressedTexture=!0,lv.prototype=Object.create(sc.prototype),lv.prototype.constructor=lv,lv.prototype.isCanvasTexture=!0,uv.prototype=Object.create(sc.prototype),uv.prototype.constructor=uv,uv.prototype.isDepthTexture=!0,cv.prototype=Object.create(oh.prototype),cv.prototype.constructor=cv,dv.prototype=Object.create(Oh.prototype),dv.prototype.constructor=dv,hv.prototype=Object.create(oh.prototype),hv.prototype.constructor=hv,pv.prototype=Object.create(Oh.prototype),pv.prototype.constructor=pv,fv.prototype=Object.create(oh.prototype),fv.prototype.constructor=fv,mv.prototype=Object.create(Oh.prototype),mv.prototype.constructor=mv,vv.prototype=Object.create(fv.prototype),vv.prototype.constructor=vv,gv.prototype=Object.create(Oh.prototype),gv.prototype.constructor=gv,yv.prototype=Object.create(fv.prototype),yv.prototype.constructor=yv,bv.prototype=Object.create(Oh.prototype),bv.prototype.constructor=bv,xv.prototype=Object.create(fv.prototype),xv.prototype.constructor=xv,wv.prototype=Object.create(Oh.prototype),wv.prototype.constructor=wv,_v.prototype=Object.create(fv.prototype),_v.prototype.constructor=_v,Mv.prototype=Object.create(Oh.prototype),Mv.prototype.constructor=Mv,Sv.prototype=Object.create(oh.prototype),Sv.prototype.constructor=Sv,Sv.prototype.toJSON=function(){var e=oh.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Ev.prototype=Object.create(Oh.prototype),Ev.prototype.constructor=Ev,Cv.prototype=Object.create(oh.prototype),Cv.prototype.constructor=Cv,Tv.prototype=Object.create(Oh.prototype),Tv.prototype.constructor=Tv,Lv.prototype=Object.create(oh.prototype),Lv.prototype.constructor=Lv;var Av=function(e,t,n){n=n||2;var r,i,a,o,s,l,u,c=t&&t.length,d=c?t[0]*n:e.length,h=Pv(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Pv(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Uv(o));for(s.sort(jv),i=0;i<s.length;i++)zv(s[i],n),n=Ov(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var f=n;f<d;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-i))?1/u:0}return Rv(h,p,n,r,i,u),p};function Pv(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Qv(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Qv(a,e[a],e[a+1],o);return o&&Wv(o,o.next)&&(Kv(o),o=o.next),o}function Ov(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Wv(r,r.next)&&0!==Vv(r.prev,r,r.next))r=r.next;else{if(Kv(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Rv(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Bv(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?kv(e,r,i,a):Nv(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Kv(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Rv(e=Dv(Ov(e),t,n),t,n,r,i,a,2):2===o&&Iv(e,t,n,r,i,a):Rv(Ov(e),t,n,r,i,a,1);break}}}function Nv(e){var t=e.prev,n=e,r=e.next;if(Vv(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Hv(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Vv(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function kv(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Vv(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=Bv(s,l,t,n,r),h=Bv(u,c,t,n,r),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&Hv(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Vv(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Hv(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Vv(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Hv(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Vv(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&Hv(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Vv(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Dv(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Wv(i,a)&&qv(i,r,r.next,a)&&Yv(i,a)&&Yv(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Kv(r),Kv(r.next),r=e=a),r=r.next}while(r!==e);return Ov(r)}function Iv(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Gv(o,s)){var l=Jv(o,s);return o=Ov(o,o.next),l=Ov(l,l.next),Rv(o,t,n,r,i,a),void Rv(l,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function jv(e,t){return e.x-t.x}function zv(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var l,u=n,c=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Hv(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),Yv(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&Fv(n,r)))&&(n=r,h=l)),r=r.next}while(r!==u);return n}(e,t),t){var n=Jv(t,e);Ov(t,t.next),Ov(n,n.next)}}function Fv(e,t){return Vv(e.prev,e,t.prev)<0&&Vv(t.next,e,e.next)<0}function Bv(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Uv(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Hv(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Gv(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&qv(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Yv(e,t)&&Yv(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Vv(e.prev,e,t.prev)||Vv(e,t.prev,t))||Wv(e,t)&&Vv(e.prev,e,e.next)>0&&Vv(t.prev,t,t.next)>0)}function Vv(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Wv(e,t){return e.x===t.x&&e.y===t.y}function qv(e,t,n,r){var i=Zv(Vv(e,t,n)),a=Zv(Vv(e,t,r)),o=Zv(Vv(n,r,e)),s=Zv(Vv(n,r,t));return i!==a&&o!==s||(!(0!==i||!Xv(e,n,t))||(!(0!==a||!Xv(e,r,t))||(!(0!==o||!Xv(n,e,r))||!(0!==s||!Xv(n,t,r)))))}function Xv(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Zv(e){return e>0?1:e<0?-1:0}function Yv(e,t){return Vv(e.prev,e,e.next)<0?Vv(e,t,e.next)>=0&&Vv(e,e.prev,t)>=0:Vv(e,t,e.prev)<0||Vv(e,e.next,t)<0}function Jv(e,t){var n=new $v(e.i,e.x,e.y),r=new $v(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Qv(e,t,n,r){var i=new $v(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Kv(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $v(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var eg={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return eg.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];tg(e),ng(n,e);var a=e.length;t.forEach(tg);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,ng(n,t[o]);for(var s=Av(n,r),l=0;l<s.length;l+=3)i.push(s.slice(l,l+3));return i}};function tg(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ng(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function rg(e,t){Oh.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ig(e,t)),this.mergeVertices()}function ig(e,t){oh.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:ag;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var v,g,y,b,x,w=!1;f&&(v=f.getSpacedPoints(s),w=!0,u=!1,g=f.computeFrenetFrames(s,!1),y=new fc,b=new fc,x=new fc),u||(p=0,c=0,d=0,h=0);var _=e.extractPoints(o),M=_.shape,S=_.holes;if(!eg.isClockWise(M)){M=M.reverse();for(var E=0,C=S.length;E<C;E++){var T=S[E];eg.isClockWise(T)&&(S[E]=T.reverse())}}for(var L=eg.triangulateShape(M,S),A=M,P=0,O=S.length;P<O;P++){var R=S[P];M=M.concat(R)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var k=M.length,D=L.length;function I(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,d=o*u-s*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-s/h,m=t.y+o/h,v=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(o*u-s*l),g=(r=f+o*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new rc(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new rc(r/a,i/a)}for(var j=[],z=0,F=A.length,B=F-1,U=z+1;z<F;z++,B++,U++)B===F&&(B=0),U===F&&(U=0),j[z]=I(A[z],A[B],A[U]);for(var H,G=[],V=j.concat(),W=0,q=S.length;W<q;W++){var X=S[W];H=[];for(var Z=0,Y=X.length,J=Y-1,Q=Z+1;Z<Y;Z++,J++,Q++)J===Y&&(J=0),Q===Y&&(Q=0),H[Z]=I(X[Z],X[J],X[Q]);G.push(H),V=V.concat(H)}for(var K=0;K<p;K++){for(var $=K/p,ee=c*Math.cos($*Math.PI/2),te=d*Math.sin($*Math.PI/2)+h,ne=0,re=A.length;ne<re;ne++){var ie=N(A[ne],j[ne],te);Oe(ie.x,ie.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];H=G[ae];for(var le=0,ue=se.length;le<ue;le++){var ce=N(se[le],H[le],te);Oe(ce.x,ce.y,-ee)}}}for(var de=d+h,he=0;he<k;he++){var pe=u?N(M[he],V[he],de):M[he];w?(b.copy(g.normals[0]).multiplyScalar(pe.x),y.copy(g.binormals[0]).multiplyScalar(pe.y),x.copy(v[0]).add(b).add(y),Oe(x.x,x.y,x.z)):Oe(pe.x,pe.y,0)}for(var fe=1;fe<=s;fe++)for(var me=0;me<k;me++){var ve=u?N(M[me],V[me],de):M[me];w?(b.copy(g.normals[fe]).multiplyScalar(ve.x),y.copy(g.binormals[fe]).multiplyScalar(ve.y),x.copy(v[fe]).add(b).add(y),Oe(x.x,x.y,x.z)):Oe(ve.x,ve.y,l/s*fe)}for(var ge=p-1;ge>=0;ge--){for(var ye=ge/p,be=c*Math.cos(ye*Math.PI/2),xe=d*Math.sin(ye*Math.PI/2)+h,we=0,_e=A.length;we<_e;we++){var Me=N(A[we],j[we],xe);Oe(Me.x,Me.y,l+be)}for(var Se=0,Ee=S.length;Se<Ee;Se++){var Ce=S[Se];H=G[Se];for(var Te=0,Le=Ce.length;Te<Le;Te++){var Ae=N(Ce[Te],H[Te],xe);w?Oe(Ae.x,Ae.y+v[s-1].y,v[s-1].x+be):Oe(Ae.x,Ae.y,l+be)}}}function Pe(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=s+2*p;a<o;a++){var l=k*a,u=k*(a+1);Ne(t+r+l,t+i+l,t+i+u,t+r+u)}}}function Oe(e,t,n){a.push(e),a.push(t),a.push(n)}function Re(e,t,i){ke(e),ke(t),ke(i);var a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);De(o[0]),De(o[1]),De(o[2])}function Ne(e,t,i,a){ke(e),ke(t),ke(a),ke(t),ke(i),ke(a);var o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function ke(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function De(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(u){for(var t=0,i=k*t,a=0;a<D;a++){var o=L[a];Re(o[2]+i,o[1]+i,o[0]+i)}i=k*(t=s+2*p);for(var l=0;l<D;l++){var c=L[l];Re(c[0]+i,c[1]+i,c[2]+i)}}else{for(var d=0;d<D;d++){var h=L[d];Re(h[2],h[1],h[0])}for(var f=0;f<D;f++){var m=L[f];Re(m[0]+k*s,m[1]+k*s,m[2]+k*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;Pe(A,t),t+=A.length;for(var i=0,a=S.length;i<a;i++){var o=S[i];Pe(o,t),t+=o.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Yd(r,3)),this.setAttribute("uv",new Yd(i,2)),this.computeVertexNormals()}rg.prototype=Object.create(Oh.prototype),rg.prototype.constructor=rg,rg.prototype.toJSON=function(){var e=Oh.prototype.toJSON.call(this);return og(this.parameters.shapes,this.parameters.options,e)},ig.prototype=Object.create(oh.prototype),ig.prototype.constructor=ig,ig.prototype.toJSON=function(){var e=oh.prototype.toJSON.call(this);return og(this.parameters.shapes,this.parameters.options,e)};var ag={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new rc(a,o),new rc(s,l),new rc(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<.01?[new rc(o,1-l),new rc(u,1-d),new rc(h,1-f),new rc(m,1-g)]:[new rc(s,1-l),new rc(c,1-d),new rc(p,1-f),new rc(v,1-g)]}};function og(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function sg(e,t){Oh.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new lg(e,t)),this.mergeVertices()}function lg(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Oh;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ig.call(this,r,t),this.type="TextBufferGeometry"}function ug(e,t,n,r,i,a,o){Oh.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new cg(e,t,n,r,i,a,o)),this.mergeVertices()}function cg(e,t,n,r,i,a,o){oh.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),l=0,u=[],c=new fc,d=new fc,h=[],p=[],f=[],m=[],v=0;v<=n;v++){var g=[],y=v/n,b=0;0==v&&0==a?b=.5/t:v==n&&s==Math.PI&&(b=-.5/t);for(var x=0;x<=t;x++){var w=x/t;c.x=-e*Math.cos(r+w*i)*Math.sin(a+y*o),c.y=e*Math.cos(a+y*o),c.z=e*Math.sin(r+w*i)*Math.sin(a+y*o),p.push(c.x,c.y,c.z),d.copy(c).normalize(),f.push(d.x,d.y,d.z),m.push(w+b,1-y),g.push(l++)}u.push(g)}for(var _=0;_<n;_++)for(var M=0;M<t;M++){var S=u[_][M+1],E=u[_][M],C=u[_+1][M],T=u[_+1][M+1];(0!==_||a>0)&&h.push(S,E,T),(_!==n-1||s<Math.PI)&&h.push(E,C,T)}this.setIndex(h),this.setAttribute("position",new Yd(p,3)),this.setAttribute("normal",new Yd(f,3)),this.setAttribute("uv",new Yd(m,2))}function dg(e,t,n,r,i,a){Oh.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new hg(e,t,n,r,i,a)),this.mergeVertices()}function hg(e,t,n,r,i,a){oh.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;for(var o=[],s=[],l=[],u=[],c=e,d=(t-e)/(r=void 0!==r?Math.max(1,r):1),h=new fc,p=new rc,f=0;f<=r;f++){for(var m=0;m<=n;m++){var v=i+m/n*a;h.x=c*Math.cos(v),h.y=c*Math.sin(v),s.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,u.push(p.x,p.y)}c+=d}for(var g=0;g<r;g++)for(var y=g*(n+1),b=0;b<n;b++){var x=b+y,w=x,_=x+n+1,M=x+n+2,S=x+1;o.push(w,_,S),o.push(_,M,S)}this.setIndex(o),this.setAttribute("position",new Yd(s,3)),this.setAttribute("normal",new Yd(l,3)),this.setAttribute("uv",new Yd(u,2))}function pg(e,t,n,r){Oh.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new fg(e,t,n,r)),this.mergeVertices()}function fg(e,t,n,r){oh.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=nc.clamp(r,0,2*Math.PI);for(var i=[],a=[],o=[],s=1/t,l=new fc,u=new rc,c=0;c<=t;c++)for(var d=n+c*s*r,h=Math.sin(d),p=Math.cos(d),f=0;f<=e.length-1;f++)l.x=e[f].x*h,l.y=e[f].y,l.z=e[f].x*p,a.push(l.x,l.y,l.z),u.x=c/t,u.y=f/(e.length-1),o.push(u.x,u.y);for(var m=0;m<t;m++)for(var v=0;v<e.length-1;v++){var g=v+m*e.length,y=g,b=g+e.length,x=g+e.length+1,w=g+1;i.push(y,b,w),i.push(b,x,w)}if(this.setIndex(i),this.setAttribute("position",new Yd(a,3)),this.setAttribute("uv",new Yd(o,2)),this.computeVertexNormals(),r===2*Math.PI)for(var _=this.attributes.normal.array,M=new fc,S=new fc,E=new fc,C=t*e.length*3,T=0,L=0;T<e.length;T++,L+=3)M.x=_[L+0],M.y=_[L+1],M.z=_[L+2],S.x=_[C+L+0],S.y=_[C+L+1],S.z=_[C+L+2],E.addVectors(M,S).normalize(),_[L+0]=_[C+L+0]=E.x,_[L+1]=_[C+L+1]=E.y,_[L+2]=_[C+L+2]=E.z}function mg(e,t){Oh.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new vg(e,t)),this.mergeVertices()}function vg(e,t){oh.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(o,s,l),o+=s,s=0;function u(e){var o=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===eg.isClockWise(u)&&(u=u.reverse());for(var d=0,h=c.length;d<h;d++){var p=c[d];!0===eg.isClockWise(p)&&(c[d]=p.reverse())}for(var f=eg.triangulateShape(u,c),m=0,v=c.length;m<v;m++){var g=c[m];u=u.concat(g)}for(var y=0,b=u.length;y<b;y++){var x=u[y];r.push(x.x,x.y,0),i.push(0,0,1),a.push(x.x,x.y)}for(var w=0,_=f.length;w<_;w++){var M=f[w],S=M[0]+o,E=M[1]+o,C=M[2]+o;n.push(S,E,C),s+=3}}this.setIndex(n),this.setAttribute("position",new Yd(r,3)),this.setAttribute("normal",new Yd(i,3)),this.setAttribute("uv",new Yd(a,2))}function gg(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function yg(e,t){oh.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,a,o=[],s=Math.cos(nc.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new Oh).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,p=0,f=h.length;p<f;p++)for(var m=h[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var g=u[i];if(void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=s){var y=d[g.index1];o.push(y.x,y.y,y.z),y=d[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new Yd(o,3))}function bg(e,t,n,r,i,a,o,s){Oh.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new xg(e,t,n,r,i,a,o,s)),this.mergeVertices()}function xg(e,t,n,r,i,a,o,s){oh.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],d=[],h=[],p=0,f=[],m=n/2,v=0;function g(n){var i,a,f=new rc,g=new fc,y=0,b=!0===n?e:t,x=!0===n?1:-1;i=p;for(var w=1;w<=r;w++)c.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),p++;a=p;for(var _=0;_<=r;_++){var M=_/r*s+o,S=Math.cos(M),E=Math.sin(M);g.x=b*E,g.y=m*x,g.z=b*S,c.push(g.x,g.y,g.z),d.push(0,x,0),f.x=.5*S+.5,f.y=.5*E*x+.5,h.push(f.x,f.y),p++}for(var C=0;C<r;C++){var T=i+C,L=a+C;!0===n?u.push(L,L+1,T):u.push(L+1,L,T),y+=3}l.addGroup(v,y,!0===n?1:2),v+=y}!function(){for(var a=new fc,g=new fc,y=0,b=(t-e)/n,x=0;x<=i;x++){for(var w=[],_=x/i,M=_*(t-e)+e,S=0;S<=r;S++){var E=S/r,C=E*s+o,T=Math.sin(C),L=Math.cos(C);g.x=M*T,g.y=-_*n+m,g.z=M*L,c.push(g.x,g.y,g.z),a.set(T,b,L).normalize(),d.push(a.x,a.y,a.z),h.push(E,1-_),w.push(p++)}f.push(w)}for(var A=0;A<r;A++)for(var P=0;P<i;P++){var O=f[P][A],R=f[P+1][A],N=f[P+1][A+1],k=f[P][A+1];u.push(O,R,k),u.push(R,N,k),y+=6}l.addGroup(v,y,0),v+=y}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new Yd(c,3)),this.setAttribute("normal",new Yd(d,3)),this.setAttribute("uv",new Yd(h,2))}function wg(e,t,n,r,i,a,o){bg.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function _g(e,t,n,r,i,a,o){xg.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function Mg(e,t,n,r){Oh.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Sg(e,t,n,r)),this.mergeVertices()}function Sg(e,t,n,r){oh.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=[],a=[],o=[],s=[],l=new fc,u=new rc;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(var c=0,d=3;c<=t;c++,d+=3){var h=n+c/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),o.push(0,0,1),u.x=(a[d]/e+1)/2,u.y=(a[d+1]/e+1)/2,s.push(u.x,u.y)}for(var p=1;p<=t;p++)i.push(p,p+1,0);this.setIndex(i),this.setAttribute("position",new Yd(a,3)),this.setAttribute("normal",new Yd(o,3)),this.setAttribute("uv",new Yd(s,2))}sg.prototype=Object.create(Oh.prototype),sg.prototype.constructor=sg,lg.prototype=Object.create(ig.prototype),lg.prototype.constructor=lg,ug.prototype=Object.create(Oh.prototype),ug.prototype.constructor=ug,cg.prototype=Object.create(oh.prototype),cg.prototype.constructor=cg,dg.prototype=Object.create(Oh.prototype),dg.prototype.constructor=dg,hg.prototype=Object.create(oh.prototype),hg.prototype.constructor=hg,pg.prototype=Object.create(Oh.prototype),pg.prototype.constructor=pg,fg.prototype=Object.create(oh.prototype),fg.prototype.constructor=fg,mg.prototype=Object.create(Oh.prototype),mg.prototype.constructor=mg,mg.prototype.toJSON=function(){var e=Oh.prototype.toJSON.call(this);return gg(this.parameters.shapes,e)},vg.prototype=Object.create(oh.prototype),vg.prototype.constructor=vg,vg.prototype.toJSON=function(){var e=oh.prototype.toJSON.call(this);return gg(this.parameters.shapes,e)},yg.prototype=Object.create(oh.prototype),yg.prototype.constructor=yg,bg.prototype=Object.create(Oh.prototype),bg.prototype.constructor=bg,xg.prototype=Object.create(oh.prototype),xg.prototype.constructor=xg,wg.prototype=Object.create(bg.prototype),wg.prototype.constructor=wg,_g.prototype=Object.create(xg.prototype),_g.prototype.constructor=_g,Mg.prototype=Object.create(Oh.prototype),Mg.prototype.constructor=Mg,Sg.prototype=Object.create(oh.prototype),Sg.prototype.constructor=Sg;var Eg=Object.freeze({__proto__:null,WireframeGeometry:cv,ParametricGeometry:dv,ParametricBufferGeometry:hv,TetrahedronGeometry:mv,TetrahedronBufferGeometry:vv,OctahedronGeometry:gv,OctahedronBufferGeometry:yv,IcosahedronGeometry:bv,IcosahedronBufferGeometry:xv,DodecahedronGeometry:wv,DodecahedronBufferGeometry:_v,PolyhedronGeometry:pv,PolyhedronBufferGeometry:fv,TubeGeometry:Mv,TubeBufferGeometry:Sv,TorusKnotGeometry:Ev,TorusKnotBufferGeometry:Cv,TorusGeometry:Tv,TorusBufferGeometry:Lv,TextGeometry:sg,TextBufferGeometry:lg,SphereGeometry:ug,SphereBufferGeometry:cg,RingGeometry:dg,RingBufferGeometry:hg,PlaneGeometry:$h,PlaneBufferGeometry:ep,LatheGeometry:pg,LatheBufferGeometry:fg,ShapeGeometry:mg,ShapeBufferGeometry:vg,ExtrudeGeometry:rg,ExtrudeBufferGeometry:ig,EdgesGeometry:yg,ConeGeometry:wg,ConeBufferGeometry:_g,CylinderGeometry:bg,CylinderBufferGeometry:xg,CircleGeometry:Mg,CircleBufferGeometry:Sg,BoxGeometry:Rh,BoxBufferGeometry:Nh});function Cg(e){jd.call(this),this.type="ShadowMaterial",this.color=new Od(0),this.transparent=!0,this.setValues(e)}function Tg(e){Fh.call(this,e),this.type="RawShaderMaterial"}function Lg(e){jd.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Od(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Od(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new rc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function Ag(e){Lg.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rc(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function Pg(e){jd.call(this),this.type="MeshPhongMaterial",this.color=new Od(16777215),this.specular=new Od(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Od(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new rc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Og(e){jd.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Od(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Od(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new rc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Rg(e){jd.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new rc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ng(e){jd.call(this),this.type="MeshLambertMaterial",this.color=new Od(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Od(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function kg(e){jd.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Od(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new rc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Dg(e){Hm.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Cg.prototype=Object.create(jd.prototype),Cg.prototype.constructor=Cg,Cg.prototype.isShadowMaterial=!0,Cg.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this},Tg.prototype=Object.create(Fh.prototype),Tg.prototype.constructor=Tg,Tg.prototype.isRawShaderMaterial=!0,Lg.prototype=Object.create(jd.prototype),Lg.prototype.constructor=Lg,Lg.prototype.isMeshStandardMaterial=!0,Lg.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},Ag.prototype=Object.create(Lg.prototype),Ag.prototype.constructor=Ag,Ag.prototype.isMeshPhysicalMaterial=!0,Ag.prototype.copy=function(e){return Lg.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Od).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},Pg.prototype=Object.create(jd.prototype),Pg.prototype.constructor=Pg,Pg.prototype.isMeshPhongMaterial=!0,Pg.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Og.prototype=Object.create(jd.prototype),Og.prototype.constructor=Og,Og.prototype.isMeshToonMaterial=!0,Og.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Rg.prototype=Object.create(jd.prototype),Rg.prototype.constructor=Rg,Rg.prototype.isMeshNormalMaterial=!0,Rg.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ng.prototype=Object.create(jd.prototype),Ng.prototype.constructor=Ng,Ng.prototype.isMeshLambertMaterial=!0,Ng.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},kg.prototype=Object.create(jd.prototype),kg.prototype.constructor=kg,kg.prototype.isMeshMatcapMaterial=!0,kg.prototype.copy=function(e){return jd.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Dg.prototype=Object.create(Hm.prototype),Dg.prototype.constructor=Dg,Dg.prototype.isLineDashedMaterial=!0,Dg.prototype.copy=function(e){return Hm.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ig=Object.freeze({__proto__:null,ShadowMaterial:Cg,SpriteMaterial:fm,RawShaderMaterial:Tg,ShaderMaterial:Fh,PointsMaterial:$m,MeshPhysicalMaterial:Ag,MeshStandardMaterial:Lg,MeshPhongMaterial:Pg,MeshToonMaterial:Og,MeshNormalMaterial:Rg,MeshLambertMaterial:Ng,MeshDepthMaterial:Xf,MeshDistanceMaterial:Zf,MeshBasicMaterial:zd,MeshMatcapMaterial:kg,LineDashedMaterial:Dg,LineBasicMaterial:Hm,Material:jd}),jg={arraySlice:function(e,t,n){return jg.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r,i){i=i||30;var a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],d=[],h=0;h<l.times.length;++h){var p=l.times[h]*i;if(!(p<n||p>=r)){c.push(l.times[h]);for(var f=0;f<u;++f)d.push(l.values[h*u+f])}}0!==c.length&&(l.times=jg.convertArray(c,l.times.constructor),l.values=jg.convertArray(d,l.values.constructor),o.push(l))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===r||r<=0)&&(r=30);for(var i=e.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return"continue";var o,l=t.getValueSize(),u=t.times.length-1;if(a<=t.times[0])o=jg.arraySlice(t.values,0,t.valueSize);else if(a>=t.times[u]){var c=u*l;o=jg.arraySlice(t.values,c)}else{var d=t.createInterpolant();d.evaluate(a),o=d.resultBuffer}"quaternion"===r&&new dc(o[0],o[1],o[2],o[3]).normalize().conjugate().toArray(o);for(var h=i.times.length,p=0;p<h;++p){var f=p*l;if("quaternion"===r)dc.multiplyQuaternionsFlat(i.values,f,o,0,i.values,f);else for(var m=0;m<l;++m)i.values[f+m]-=o[m]}},s=0;s<i;++s)o();return e.blendMode=2501,e}};function zg(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Fg(e,t,n,r){zg.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Bg(e,t,n,r){zg.call(this,e,t,n,r)}function Ug(e,t,n,r){zg.call(this,e,t,n,r)}function Hg(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jg.convertArray(t,this.TimeBufferType),this.values=jg.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Gg(e,t,n){Hg.call(this,e,t,n)}function Vg(e,t,n,r){Hg.call(this,e,t,n,r)}function Wg(e,t,n,r){Hg.call(this,e,t,n,r)}function qg(e,t,n,r){zg.call(this,e,t,n,r)}function Xg(e,t,n,r){Hg.call(this,e,t,n,r)}function Zg(e,t,n,r){Hg.call(this,e,t,n,r)}function Yg(e,t,n,r){Hg.call(this,e,t,n,r)}function Jg(e,t,n,r){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==r?r:ku,this.uuid=nc.generateUUID(),this.duration<0&&this.resetDuration()}function Qg(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wg;case"vector":case"vector2":case"vector3":case"vector4":return Yg;case"color":return Vg;case"quaternion":return Xg;case"bool":case"boolean":return Gg;case"string":return Zg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];jg.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(zg.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var l=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(zg.prototype,{beforeStart_:zg.prototype.copySampleValue_,afterEnd_:zg.prototype.copySampleValue_}),Fg.prototype=Object.assign(Object.create(zg.prototype),{constructor:Fg,DefaultSettings_:{endingStart:Ou,endingEnd:Ou},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ru:i=e,o=2*t-n;break;case Nu:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ru:a=e,s=2*n-t;break;case Nu:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,v=-d*m+2*d*f-d*p,g=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,b=h*m-h*f,x=0;x!==o;++x)i[x]=v*a[u+x]+g*a[l+x]+y*a[s+x]+b*a[c+x];return i}}),Bg.prototype=Object.assign(Object.create(zg.prototype),{constructor:Bg,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,d=0;d!==o;++d)i[d]=a[l+d]*c+a[s+d]*u;return i}}),Ug.prototype=Object.assign(Object.create(zg.prototype),{constructor:Ug,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Hg,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:jg.convertArray(e.times,Array),values:jg.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(Hg.prototype,{constructor:Hg,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Au,InterpolantFactoryMethodDiscrete:function(e){return new Ug(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Bg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Fg(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Lu:t=this.InterpolantFactoryMethodDiscrete;break;case Au:t=this.InterpolantFactoryMethodLinear;break;case Pu:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lu;case this.InterpolantFactoryMethodLinear:return Au;case this.InterpolantFactoryMethodSmooth:return Pu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=jg.arraySlice(n,i,a),this.values=jg.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&jg.isTypedArray(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e},optimize:function(){for(var e=jg.arraySlice(this.times),t=jg.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Pu,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(r)s=!0;else for(var u=o*n,c=u-n,d=u+n,h=0;h!==n;++h){var p=t[u+h];if(p!==t[c+h]||p!==t[d+h]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var f=o*n,m=a*n,v=0;v!==n;++v)t[m+v]=t[f+v]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=jg.arraySlice(e,0,a),this.values=jg.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){var e=jg.arraySlice(this.times,0),t=jg.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Gg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Gg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Lu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Vg,ValueTypeName:"color"}),Wg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Wg,ValueTypeName:"number"}),qg.prototype=Object.assign(Object.create(zg.prototype),{constructor:qg,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)dc.slerpFlat(i,0,a,l-o,a,l,s);return i}}),Xg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Xg,ValueTypeName:"quaternion",DefaultInterpolation:Au,InterpolantFactoryMethodLinear:function(e){return new qg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Zg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Zg,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Lu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yg.prototype=Object.assign(Object.create(Hg.prototype),{constructor:Yg,ValueTypeName:"vector"}),Object.assign(Jg,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Qg(n[i]).scale(r));return new Jg(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Hg.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=jg.getKeyframeOrder(s);s=jg.sortedArray(s,1,u),l=jg.sortedArray(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new Wg(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new Jg(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var d=[];for(var h in r)d.push(Jg.CreateFromMorphTargetSequence(h,r[h],t,n));return d},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];jg.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var d={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var p=0;p<c[h].morphTargets.length;p++)d[c[h].morphTargets[p]]=-1;for(var f in d){for(var m=[],v=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];m.push(y.time),v.push(y.morphTarget===f?1:0)}r.push(new Wg(".morphTargetInfluence["+f+"]",m,v))}s=d.length*(a||1)}else{var b=".bones["+t[u].name+"]";n(Yg,b+".position",c,"pos",r),n(Xg,b+".quaternion",c,"rot",r),n(Yg,b+".scale",c,"scl",r)}}return 0===r.length?null:new Jg(i,s,r,o)}}),Object.assign(Jg.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Jg(this.name,this.duration,e,this.blendMode)}});var Kg={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function $g(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}var ey=new $g;function ty(e){this.manager=void 0!==e?e:ey,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(ty.prototype,{load:function(){},loadAsync:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var ny={};function ry(e){ty.call(this,e)}function iy(e){ty.call(this,e)}function ay(e){ty.call(this,e)}function oy(e){ty.call(this,e)}function sy(e){ty.call(this,e)}function ly(e){ty.call(this,e)}function uy(e){ty.call(this,e)}function cy(){this.type="Curve",this.arcLengthDivisions=200}function dy(e,t,n,r,i,a,o,s){cy.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function hy(e,t,n,r,i,a){dy.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function py(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,u*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}ry.prototype=Object.assign(Object.create(ty.prototype),{constructor:ry,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Kg.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===ny[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var l=s[1],u=!!s[2],c=s[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),f=0;f<c.length;f++)p[f]=c.charCodeAt(f);d="blob"===h?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(c,l);break;case"json":d=JSON.parse(c);break;default:d=c}setTimeout((function(){t&&t(d),i.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{for(var v in ny[e]=[],ny[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=ny[e];if(delete ny[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Kg.add(e,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var l=0,u=r.length;l<u;l++){var c=r[l];c.onError&&c.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=ny[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=ny[e];delete ny[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=ny[e];delete ny[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return i.manager.itemStart(e),o}ny[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),iy.prototype=Object.assign(Object.create(ty.prototype),{constructor:iy,load:function(e,t,n,r){var i=this,a=new ry(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=Jg.parse(e[n]);t.push(r)}return t}}),ay.prototype=Object.assign(Object.create(ty.prototype),{constructor:ay,load:function(e,t,n,r){var i=this,a=[],o=new sv;o.image=a;var s=new ry(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader);var l=0;function u(u){s.load(e[u],(function(e){var n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=hl),o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,d=e.length;c<d;++c)u(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=hl),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}),oy.prototype=Object.assign(Object.create(ty.prototype),{constructor:oy,load:function(e,t,n,r){var i=this,a=new qh,o=new ry(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:sl,a.wrapT=void 0!==n.wrapT?n.wrapT:sl,a.magFilter=void 0!==n.magFilter?n.magFilter:hl,a.minFilter=void 0!==n.minFilter?n.minFilter:hl,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=fl),1===n.mipmapCount&&(a.minFilter=hl),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}),sy.prototype=Object.assign(Object.create(ty.prototype),{constructor:sy,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Kg.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Kg.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}),ly.prototype=Object.assign(Object.create(ty.prototype),{constructor:ly,load:function(e,t,n,r){var i=new vp,a=new sy(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}}),uy.prototype=Object.assign(Object.create(ty.prototype),{constructor:uy,load:function(e,t,n,r){var i=new sc,a=new sy(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ll:Al,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(cy.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(a-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(a-1)},getTangent:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new rc:new fc);return s.copy(o).sub(a).normalize(),s},getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){for(var n=new fc,r=[],i=[],a=[],o=new fc,s=new _c,l=0;l<=e;l++){var u=l/e;r[l]=this.getTangentAt(u,new fc),r[l].normalize()}i[0]=new fc,a[0]=new fc;var c=Number.MAX_VALUE,d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),p<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var f=1;f<=e;f++){if(i[f]=i[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos(nc.clamp(r[f-1].dot(r[f]),-1,1));i[f].applyMatrix4(s.makeRotationAxis(o,m))}a[f].crossVectors(r[f],i[f])}if(!0===t){var v=Math.acos(nc.clamp(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],v*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),dy.prototype=Object.create(cy.prototype),dy.prototype.constructor=dy,dy.prototype.isEllipseCurve=!0,dy.prototype.getPoint=function(e,t){for(var n=t||new rc,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return n.set(s,l)},dy.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},dy.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},dy.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},hy.prototype=Object.create(dy.prototype),hy.prototype.constructor=hy,hy.prototype.isArcCurve=!0;var fy=new fc,my=new py,vy=new py,gy=new py;function yy(e,t,n,r){cy.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==r?r:.5}function by(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function xy(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function wy(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function _y(e,t,n,r){cy.call(this),this.type="CubicBezierCurve",this.v0=e||new rc,this.v1=t||new rc,this.v2=n||new rc,this.v3=r||new rc}function My(e,t,n,r){cy.call(this),this.type="CubicBezierCurve3",this.v0=e||new fc,this.v1=t||new fc,this.v2=n||new fc,this.v3=r||new fc}function Sy(e,t){cy.call(this),this.type="LineCurve",this.v1=e||new rc,this.v2=t||new rc}function Ey(e,t){cy.call(this),this.type="LineCurve3",this.v1=e||new fc,this.v2=t||new fc}function Cy(e,t,n){cy.call(this),this.type="QuadraticBezierCurve",this.v0=e||new rc,this.v1=t||new rc,this.v2=n||new rc}function Ty(e,t,n){cy.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new fc,this.v1=t||new fc,this.v2=n||new fc}function Ly(e){cy.call(this),this.type="SplineCurve",this.points=e||[]}yy.prototype=Object.create(cy.prototype),yy.prototype.constructor=yy,yy.prototype.isCatmullRomCurve3=!0,yy.prototype.getPoint=function(e,t){var n,r,i,a,o=t||new fc,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===d&&c===l-1&&(c=l-2,d=1),this.closed||c>0?n=s[(c-1)%l]:(fy.subVectors(s[0],s[1]).add(s[0]),n=fy),r=s[c%l],i=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(fy.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=fy),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),h),f=Math.pow(r.distanceToSquared(i),h),m=Math.pow(i.distanceToSquared(a),h);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),my.initNonuniformCatmullRom(n.x,r.x,i.x,a.x,p,f,m),vy.initNonuniformCatmullRom(n.y,r.y,i.y,a.y,p,f,m),gy.initNonuniformCatmullRom(n.z,r.z,i.z,a.z,p,f,m)}else"catmullrom"===this.curveType&&(my.initCatmullRom(n.x,r.x,i.x,a.x,this.tension),vy.initCatmullRom(n.y,r.y,i.y,a.y,this.tension),gy.initCatmullRom(n.z,r.z,i.z,a.z,this.tension));return o.set(my.calc(d),vy.calc(d),gy.calc(d)),o},yy.prototype.copy=function(e){cy.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},yy.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},yy.prototype.fromJSON=function(e){cy.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new fc).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},_y.prototype=Object.create(cy.prototype),_y.prototype.constructor=_y,_y.prototype.isCubicBezierCurve=!0,_y.prototype.getPoint=function(e,t){var n=t||new rc,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(wy(e,r.x,i.x,a.x,o.x),wy(e,r.y,i.y,a.y,o.y)),n},_y.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},_y.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},_y.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},My.prototype=Object.create(cy.prototype),My.prototype.constructor=My,My.prototype.isCubicBezierCurve3=!0,My.prototype.getPoint=function(e,t){var n=t||new fc,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(wy(e,r.x,i.x,a.x,o.x),wy(e,r.y,i.y,a.y,o.y),wy(e,r.z,i.z,a.z,o.z)),n},My.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},My.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},My.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Sy.prototype=Object.create(cy.prototype),Sy.prototype.constructor=Sy,Sy.prototype.isLineCurve=!0,Sy.prototype.getPoint=function(e,t){var n=t||new rc;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Sy.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Sy.prototype.getTangent=function(e,t){var n=t||new rc;return n.copy(this.v2).sub(this.v1).normalize(),n},Sy.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Sy.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Sy.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ey.prototype=Object.create(cy.prototype),Ey.prototype.constructor=Ey,Ey.prototype.isLineCurve3=!0,Ey.prototype.getPoint=function(e,t){var n=t||new fc;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ey.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ey.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ey.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ey.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Cy.prototype=Object.create(cy.prototype),Cy.prototype.constructor=Cy,Cy.prototype.isQuadraticBezierCurve=!0,Cy.prototype.getPoint=function(e,t){var n=t||new rc,r=this.v0,i=this.v1,a=this.v2;return n.set(xy(e,r.x,i.x,a.x),xy(e,r.y,i.y,a.y)),n},Cy.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Cy.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Cy.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ty.prototype=Object.create(cy.prototype),Ty.prototype.constructor=Ty,Ty.prototype.isQuadraticBezierCurve3=!0,Ty.prototype.getPoint=function(e,t){var n=t||new fc,r=this.v0,i=this.v1,a=this.v2;return n.set(xy(e,r.x,i.x,a.x),xy(e,r.y,i.y,a.y),xy(e,r.z,i.z,a.z)),n},Ty.prototype.copy=function(e){return cy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ty.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ty.prototype.fromJSON=function(e){return cy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ly.prototype=Object.create(cy.prototype),Ly.prototype.constructor=Ly,Ly.prototype.isSplineCurve=!0,Ly.prototype.getPoint=function(e,t){var n=t||new rc,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],u=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(by(o,s.x,l.x,u.x,c.x),by(o,s.y,l.y,u.y,c.y)),n},Ly.prototype.copy=function(e){cy.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Ly.prototype.toJSON=function(){var e=cy.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Ly.prototype.fromJSON=function(e){cy.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new rc).fromArray(r))}return this};var Ay=Object.freeze({__proto__:null,ArcCurve:hy,CatmullRomCurve3:yy,CubicBezierCurve:_y,CubicBezierCurve3:My,EllipseCurve:dy,LineCurve:Sy,LineCurve3:Ey,QuadraticBezierCurve:Cy,QuadraticBezierCurve3:Ty,SplineCurve:Ly});function Py(){cy.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Oy(e){Py.call(this),this.type="Path",this.currentPoint=new rc,e&&this.setFromPoints(e)}function Ry(e){Oy.call(this,e),this.uuid=nc.generateUUID(),this.type="Shape",this.holes=[]}function Ny(e,t){Bc.call(this),this.type="Light",this.color=new Od(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ky(e,t,n){Ny.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Bc.DefaultUp),this.updateMatrix(),this.groundColor=new Od(t)}function Dy(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new rc(512,512),this.map=null,this.mapPass=null,this.matrix=new _c,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Yh,this._frameExtents=new rc(1,1),this._viewportCount=1,this._viewports=[new lc(0,0,1,1)]}function Iy(){Dy.call(this,new Uh(50,1,.5,500))}function jy(e,t,n,r,i,a){Ny.call(this,e,t),this.type="SpotLight",this.position.copy(Bc.DefaultUp),this.updateMatrix(),this.target=new Bc,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Iy}function zy(){Dy.call(this,new Uh(90,1,.5,500)),this._frameExtents=new rc(4,2),this._viewportCount=6,this._viewports=[new lc(2,1,1,1),new lc(0,1,1,1),new lc(3,1,1,1),new lc(1,1,1,1),new lc(3,0,1,1),new lc(1,0,1,1)],this._cubeDirections=[new fc(1,0,0),new fc(-1,0,0),new fc(0,0,1),new fc(0,0,-1),new fc(0,1,0),new fc(0,-1,0)],this._cubeUps=[new fc(0,1,0),new fc(0,1,0),new fc(0,1,0),new fc(0,1,0),new fc(0,0,1),new fc(0,0,-1)]}function Fy(e,t,n,r){Ny.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new zy}function By(e,t,n,r,i,a){Bh.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Uy(){Dy.call(this,new By(-5,5,5,-5,.5,500))}function Hy(e,t){Ny.call(this,e,t),this.type="DirectionalLight",this.position.copy(Bc.DefaultUp),this.updateMatrix(),this.target=new Bc,this.shadow=new Uy}function Gy(e,t){Ny.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Vy(e,t,n,r){Ny.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Wy(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new fc)}function qy(e,t){Ny.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Wy}function Xy(e){ty.call(this,e),this.textures={}}Py.prototype=Object.assign(Object.create(cy.prototype),{constructor:Py,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Sy(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){cy.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=cy.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){cy.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Ay[r.type]).fromJSON(r))}return this}}),Oy.prototype=Object.assign(Object.create(Py.prototype),{constructor:Oy,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Sy(this.currentPoint.clone(),new rc(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new Cy(this.currentPoint.clone(),new rc(e,t),new rc(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,a){var o=new _y(this.currentPoint.clone(),new rc(e,t),new rc(n,r),new rc(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this},splineThru:function(e){var t=new Ly([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this},absarc:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this},ellipse:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this},absellipse:function(e,t,n,r,i,a,o,s){var l=new dy(e,t,n,r,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Py.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Py.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Py.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ry.prototype=Object.assign(Object.create(Oy.prototype),{constructor:Ry,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Oy.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Oy.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Oy.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Oy).fromJSON(r))}return this}}),Ny.prototype=Object.assign(Object.create(Bc.prototype),{constructor:Ny,isLight:!0,copy:function(e){return Bc.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Bc.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ky.prototype=Object.assign(Object.create(Ny.prototype),{constructor:ky,isHemisphereLight:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Dy.prototype,{_projScreenMatrix:new _c,_lightPositionWorld:new fc,_lookTarget:new fc,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Iy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:Iy,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*nc.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Dy.prototype.updateMatrices.call(this,e)}}),jy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:jy,isSpotLight:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),zy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:zy,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),Fy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:Fy,isPointLight:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),By.prototype=Object.assign(Object.create(Bh.prototype),{constructor:By,isOrthographicCamera:!0,copy:function(e,t){return Bh.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Bc.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Uy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:Uy,isDirectionalLightShadow:!0,updateMatrices:function(e){Dy.prototype.updateMatrices.call(this,e)}}),Hy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:Hy,isDirectionalLight:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Gy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:Gy,isAmbientLight:!0}),Vy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:Vy,isRectAreaLight:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ny.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Wy.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(Wy,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),qy.prototype=Object.assign(Object.create(Ny.prototype),{constructor:qy,isLightProbe:!0,copy:function(e){return Ny.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=Ny.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),Xy.prototype=Object.assign(Object.create(ty.prototype),{constructor:Xy,load:function(e,t,n,r){var i=this,a=new ry(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Ig[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new Od).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new Od).setHex(a.value);break;case"v2":r.uniforms[i].value=(new rc).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new fc).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new lc).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new ic).fromArray(a.value);case"m4":r.uniforms[i].value=(new _c).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new rc).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new rc).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r},setTextures:function(e){return this.textures=e,this}});var Zy=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Yy(){oh.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Jy(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ud.call(this,e,t,n),this.meshPerAttribute=r||1}function Qy(e){ty.call(this,e)}Yy.prototype=Object.assign(Object.create(oh.prototype),{constructor:Yy,isInstancedBufferGeometry:!0,copy:function(e){return oh.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=oh.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Jy.prototype=Object.assign(Object.create(Ud.prototype),{constructor:Jy,isInstancedBufferAttribute:!0,copy:function(e){return Ud.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Ud.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Qy.prototype=Object.assign(Object.create(ty.prototype),{constructor:Qy,load:function(e,t,n,r){var i=this,a=new ry(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)},parse:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),o=new cm(new Ky[i.type](a),i.stride);return o.uuid=i.uuid,t[r]=o,o}var i=e.isInstancedBufferGeometry?new Yy:new oh,a=e.data.index;if(void 0!==a){var o=new Ky[a.type](a.array);i.setIndex(new Ud(o,1))}var s=e.data.attributes;for(var l in s){var u=s[l],c=void 0;if(u.isInterleavedBufferAttribute){c=new pm(r(e.data,u.data),u.itemSize,u.offset,u.normalized)}else{var d=new Ky[u.type](u.array);c=new(u.isInstancedBufferAttribute?Jy:Ud)(d,u.itemSize,u.normalized)}void 0!==u.name&&(c.name=u.name),i.setAttribute(l,c)}var h=e.data.morphAttributes;if(h)for(var p in h){for(var f=h[p],m=[],v=0,g=f.length;v<g;v++){var y=f[v],b=void 0;if(y.isInterleavedBufferAttribute)b=new pm(r(e.data,y.data),y.itemSize,y.offset,y.normalized);else b=new Ud(new Ky[y.type](y.array),y.itemSize,y.normalized);void 0!==y.name&&(b.name=y.name),m.push(b)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var x=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==x)for(var w=0,_=x.length;w!==_;++w){var M=x[w];i.addGroup(M.start,M.count,M.materialIndex)}var S=e.data.boundingSphere;if(void 0!==S){var E=new fc;void 0!==S.center&&E.fromArray(S.center),i.boundingSphere=new id(E,S.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}});var Ky={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function $y(e){ty.call(this,e)}$y.prototype=Object.assign(Object.create(ty.prototype),{constructor:$y,load:function(e,t,n,r){var i=this,a=""===this.path?Zy(e):this.path;this.resourcePath=this.resourcePath||a;var o=new ry(i.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Ry).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n,r={};if(void 0!==e)for(var i=new Qy,a=0,o=e.length;a<o;a++){var s=void 0,l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Eg[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Eg[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Eg[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Eg[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Eg[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Eg[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Eg[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Eg[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Eg[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Eg[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Eg[l.type]((new Ay[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Eg[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Eg[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var u=0,c=l.shapes.length;u<c;u++){var d=t[l.shapes[u]];n.push(d)}s=new Eg[l.type](n,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var h=0,p=l.shapes.length;h<p;h++){var f=t[l.shapes[h]];n.push(f)}var m=l.options.extrudePath;void 0!==m&&(l.options.extrudePath=(new Ay[m.type]).fromJSON(m)),s=new Eg[l.type](n,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),r[l.uuid]=s}return r},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Xy;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),l.push(n[c.uuid])}r[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Jg.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n,r=this,i={};function a(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new $g(t);(n=new sy(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s],c=u.url;if(Array.isArray(c)){i[u.uuid]=[];for(var d=0,h=c.length;d<h;d++){var p=c[d],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;i[u.uuid].push(a(f))}}else{var m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.resourcePath+u.url;i[u.uuid]=a(m)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0;(s=Array.isArray(t[o.image])?new vp(t[o.image]):new sc(t[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,tb)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],nb),s.wrapT=n(o.wrap[1],nb)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,rb)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,rb)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r},parseObject:function(e,t,n){var r,i,a;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Uc,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new Od(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new um(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new lm(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Uh(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new By(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Gy(e.color,e.intensity);break;case"DirectionalLight":r=new Hy(e.color,e.intensity);break;case"PointLight":r=new Fy(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Vy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new jy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ky(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=(new qy).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=new Sh(i=o(e.geometry),a=s(e.material));break;case"InstancedMesh":i=o(e.geometry),a=s(e.material);var l=e.count,u=e.instanceMatrix;(r=new Um(i,a,l)).instanceMatrix=new Ud(new Float32Array(u.array),16);break;case"LOD":r=new Om;break;case"Line":r=new Zm(o(e.geometry),s(e.material),e.mode);break;case"LineLoop":r=new Km(o(e.geometry),s(e.material));break;case"LineSegments":r=new Qm(o(e.geometry),s(e.material));break;case"PointCloud":case"Points":r=new iv(o(e.geometry),s(e.material));break;case"Sprite":r=new Tm(s(e.material));break;case"Group":r=new nm;break;default:r=new Bc}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(r.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,d=0;d<c.length;d++)r.add(this.parseObject(c[d],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);for(var h=e.levels,p=0;p<h.length;p++){var f=h[p],m=r.getObjectByProperty("uuid",f.object);void 0!==m&&r.addLevel(m,f.distance)}}return r}});var eb,tb={UVMapping:300,CubeReflectionMapping:el,CubeRefractionMapping:tl,EquirectangularReflectionMapping:nl,EquirectangularRefractionMapping:rl,CubeUVReflectionMapping:il,CubeUVRefractionMapping:al},nb={RepeatWrapping:ol,ClampToEdgeWrapping:sl,MirroredRepeatWrapping:ll},rb={NearestFilter:ul,NearestMipmapNearestFilter:cl,NearestMipmapLinearFilter:dl,LinearFilter:hl,LinearMipmapNearestFilter:pl,LinearMipmapLinearFilter:fl};function ib(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),ty.call(this,e),this.options={premultiplyAlpha:"none"}}function ab(){this.type="ShapePath",this.color=new Od,this.subPaths=[],this.currentPath=null}function ob(e){this.type="Font",this.data=e}function sb(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,l,u,c,d,h,p,f=new ab;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*t+n,s=m[v++]*t+r,f.moveTo(o,s);break;case"l":o=m[v++]*t+n,s=m[v++]*t+r,f.lineTo(o,s);break;case"q":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,d=m[v++]*t+r,f.quadraticCurveTo(c,d,l,u);break;case"b":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,d=m[v++]*t+r,h=m[v++]*t+n,p=m[v++]*t+r,f.bezierCurveTo(c,d,h,p,l,u)}}return{offsetX:a.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function lb(e){ty.call(this,e)}ib.prototype=Object.assign(Object.create(ty.prototype),{constructor:ib,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Kg.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(n){Kg.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(ab.prototype,{moveTo:function(e,t){return this.currentPath=new Oy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Ry;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i=eg.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new Ry).curves=s.curves,u.push(l),u;var c=!i(a[0].getPoints());c=e?!c:c;var d,h,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=i(d=(s=a[g]).getPoints()),(o=e?!o:o)?(!c&&f[v]&&v++,f[v]={s:new Ry,p:d},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:d[0]});if(!f[0])return n(a);if(f.length>1){for(var b=!1,x=[],w=0,_=f.length;w<_;w++)p[w]=[];for(var M=0,S=f.length;M<S;M++)for(var E=m[M],C=0;C<E.length;C++){for(var T=E[C],L=!0,A=0;A<f.length;A++)r(T.p,f[A].p)&&(M!==A&&x.push({froms:M,tos:A,hole:C}),L?(L=!1,p[A].push(T)):b=!0);L&&p[M].push(T)}x.length>0&&(b||(m=p))}for(var P=0,O=f.length;P<O;P++){l=f[P].s,u.push(l);for(var R=0,N=(h=m[P]).length;R<N;R++)l.holes.push(h[R].h)}return u}}),Object.assign(ob.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];if("\n"===c)s=0,l-=a;else{var d=sb(c,i,s,l,n);s+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),lb.prototype=Object.assign(Object.create(ty.prototype),{constructor:lb,load:function(e,t,n,r){var i=this,a=new ry(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new ob(e)}});var ub={getContext:function(){return void 0===eb&&(eb=new(window.AudioContext||window.webkitAudioContext)),eb},setContext:function(e){eb=e}};function cb(e){ty.call(this,e)}function db(e,t,n){qy.call(this,void 0,n);var r=(new Od).set(e),i=(new Od).set(t),a=new fc(r.r,r.g,r.b),o=new fc(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function hb(e,t){qy.call(this,void 0,t);var n=(new Od).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}cb.prototype=Object.assign(Object.create(ty.prototype),{constructor:cb,load:function(e,t,n,r){var i=this,a=new ry(i.manager);a.setResponseType("arraybuffer"),a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.load(e,(function(n){try{var a=n.slice(0);ub.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}),db.prototype=Object.assign(Object.create(qy.prototype),{constructor:db,isHemisphereLightProbe:!0,copy:function(e){return qy.prototype.copy.call(this,e),this},toJSON:function(e){return qy.prototype.toJSON.call(this,e)}}),hb.prototype=Object.assign(Object.create(qy.prototype),{constructor:hb,isAmbientLightProbe:!0,copy:function(e){return qy.prototype.copy.call(this,e),this},toJSON:function(e){return qy.prototype.toJSON.call(this,e)}});var pb=new _c,fb=new _c;function mb(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Uh,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Uh,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(nc.DEG2RAD*t.fov*.5)/t.zoom;fb.elements[12]=-a,pb.elements[12]=a,n=-s*t.aspect+o,r=s*t.aspect+o,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-o,r=s*t.aspect-o,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(pb)}}),Object.assign(mb.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var vb=new fc,gb=new dc,yb=new fc,bb=new fc;function xb(){Bc.call(this),this.type="AudioListener",this.context=ub.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mb}function wb(e){Bc.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}xb.prototype=Object.assign(Object.create(Bc.prototype),{constructor:xb,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Bc.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vb,gb,yb),bb.set(0,0,-1).applyQuaternion(gb),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vb.x,r),t.positionY.linearRampToValueAtTime(vb.y,r),t.positionZ.linearRampToValueAtTime(vb.z,r),t.forwardX.linearRampToValueAtTime(bb.x,r),t.forwardY.linearRampToValueAtTime(bb.y,r),t.forwardZ.linearRampToValueAtTime(bb.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(vb.x,vb.y,vb.z),t.setOrientation(bb.x,bb.y,bb.z,n.x,n.y,n.z)}}),wb.prototype=Object.assign(Object.create(Bc.prototype),{constructor:wb,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var _b=new fc,Mb=new dc,Sb=new fc,Eb=new fc;function Cb(e){wb.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Tb(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Lb(e,t,n){var r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Cb.prototype=Object.assign(Object.create(wb.prototype),{constructor:Cb,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(Bc.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(_b,Mb,Sb),Eb.set(0,0,1).applyQuaternion(Mb);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_b.x,n),t.positionY.linearRampToValueAtTime(_b.y,n),t.positionZ.linearRampToValueAtTime(_b.z,n),t.orientationX.linearRampToValueAtTime(Eb.x,n),t.orientationY.linearRampToValueAtTime(Eb.y,n),t.orientationZ.linearRampToValueAtTime(Eb.z,n)}else t.setPosition(_b.x,_b.y,_b.z),t.setOrientation(Eb.x,Eb.y,Eb.z)}}}),Object.assign(Tb.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Lb.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){dc.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){var a=this._workIndex*i;dc.multiplyQuaternionsFlat(e,a,e,t,e,n),dc.slerpFlat(e,t,e,t,e,a,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}},_lerpAdditive:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}});var Ab="\\[\\]\\.:\\/",Pb=new RegExp("["+Ab+"]","g"),Ob="[^"+Ab+"]",Rb="[^"+Ab.replace("\\.","")+"]",Nb=/((?:WC+[\/:])*)/.source.replace("WC",Ob),kb=/(WCOD+)?/.source.replace("WCOD",Rb),Db=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ob),Ib=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ob),jb=new RegExp("^"+Nb+kb+Db+Ib+"$"),zb=["material","materials","bones"];function Fb(e,t,n){var r=n||Bb.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Bb(e,t,n){this.path=t,this.parsedPath=n||Bb.parseTrackName(t),this.node=Bb.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ub(e,t,n,r){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=r||t.blendMode;for(var i=t.tracks,a=i.length,o=new Array(a),s={endingStart:Ou,endingEnd:Ou},l=0;l!==a;++l){var u=i[l].createInterpolant(null);o[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Tu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Hb(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Gb(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Vb(e,t,n){cm.call(this,e,t),this.meshPerAttribute=n||1}function Wb(e,t,n,r){this.ray=new hd(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Cc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function qb(e,t){return e.distance-t.distance}function Xb(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)Xb(i[a],t,n,!0)}Object.assign(Fb.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Bb,{Composite:Fb,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Bb.Composite(e,t,n):new Bb(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Pb,"")},parseTrackName:function(e){var t=jb.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==zb.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}),Object.assign(Bb.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Bb.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Bb.prototype,{_getValue_unbound:Bb.prototype.getValue,_setValue_unbound:Bb.prototype.setValue}),Object.assign(function(){this.uuid=nc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var d=arguments[u],h=d.uuid,p=t[h];if(void 0===p){p=s++,t[h]=p,e.push(d);for(var f=0,m=a;f!==m;++f)i[f].push(new Bb(d,n[f],r[f]))}else if(p<l){o=e[p];var v=--l,g=e[v];t[g.uuid]=p,e[p]=g,t[h]=v,e[v]=d;for(var y=0,b=a;y!==b;++y){var x=i[y],w=x[v],_=x[p];x[p]=w,void 0===_&&(_=new Bb(d,n[y],r[y])),x[v]=_}}else e[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&u>=i){var c=i++,d=e[c];t[d.uuid]=u,e[u]=d,t[l]=c,e[c]=s;for(var h=0,p=r;h!==p;++h){var f=n[h],m=f[c],v=f[u];f[u]=m,f[c]=v}}}this.nCachedObjects_=i},uncache:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=t[l];if(void 0!==u)if(delete t[l],u<i){var c=--i,d=e[c],h=--a,p=e[h];t[d.uuid]=u,e[u]=d,t[p.uuid]=c,e[c]=p,e.pop();for(var f=0,m=r;f!==m;++f){var v=n[f],g=v[c],y=v[h];v[u]=g,v[c]=y,v.pop()}}else{var b=--a,x=e[b];t[x.uuid]=u,e[u]=x,e.pop();for(var w=0,_=r;w!==_;++w){var M=n[w];M[u]=M[b],M.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var d=u,h=s.length;d!==h;++d){var p=s[d];c[d]=new Bb(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}),Object.assign(Ub.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(2501===this.blendMode)for(var c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var h=0,p=l.length;h!==p;++h)l[h].evaluate(o),u[h].accumulate(r,s)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Ru,r.endingEnd=Ru):(r.endingStart=e?this.zeroSlopeAtStart?Ru:Ou:Nu,r.endingEnd=t?this.zeroSlopeAtEnd?Ru:Ou:Nu)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}),Hb.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Hb,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var d=r[c],h=d.name,p=u[h];if(void 0!==p)a[c]=p;else{if(void 0!==(p=a[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new Lb(Bb.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),a[c]=p}o[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Bg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?Jg.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:ku),void 0!==s){var u=s.actionByRoot[i];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new Ub(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Jg.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Gb.prototype.clone=function(){return new Gb(void 0===this.value.clone?this.value:this.value.clone())},Vb.prototype=Object.assign(Object.create(cm.prototype),{constructor:Vb,isInstancedInterleavedBuffer:!0,copy:function(e){return cm.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){var t=cm.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){var t=cm.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.assign(Wb.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Xb(e,this,r,t),r.sort(qb),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)Xb(e[i],this,r,t);return r.sort(qb),r}});var Zb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(this,e),this.radius=t,this.phi=n,this.theta=i,this}return s(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(nc.clamp(t/this.radius,-1,1))),this}}]),e}();Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var Yb=new rc;function Jb(e,t){this.min=void 0!==e?e:new rc(1/0,1/0),this.max=void 0!==t?t:new rc(-1/0,-1/0)}Object.assign(Jb.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Yb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new rc),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new rc),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new rc),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new rc),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Yb.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Qb=new fc,Kb=new fc;function $b(e,t){this.start=void 0!==e?e:new fc,this.end=void 0!==t?t:new fc}function ex(e){Bc.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign($b.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new fc),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new fc),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new fc),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){Qb.subVectors(e,this.start),Kb.subVectors(this.end,this.start);var n=Kb.dot(Kb),r=Kb.dot(Qb)/n;return t&&(r=nc.clamp(r,0,1)),r},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new fc),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),ex.prototype=Object.create(Bc.prototype),ex.prototype.constructor=ex,ex.prototype.isImmediateRenderObject=!0;var tx=new fc;function nx(e,t){Bc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new oh,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Yd(r,3));var l=new Hm({fog:!1,toneMapped:!1});this.cone=new Qm(n,l),this.add(this.cone),this.update()}nx.prototype=Object.create(Bc.prototype),nx.prototype.constructor=nx,nx.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},nx.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tx.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tx),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var rx=new fc,ix=new _c,ax=new _c;function ox(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,ox(e.children[n]));return t}function sx(e){for(var t=ox(e),n=new oh,r=[],i=[],a=new Od(0,0,1),o=new Od(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Yd(r,3)),n.setAttribute("color",new Yd(i,3));var u=new Hm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Qm.call(this,n,u),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function lx(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new cg(t,4,2),i=new zd({wireframe:!0,fog:!1,toneMapped:!1});Sh.call(this,r,i),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}sx.prototype=Object.create(Qm.prototype),sx.prototype.constructor=sx,sx.prototype.isSkeletonHelper=!0,sx.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");ax.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<t.length;i++){var o=t[i];o.parent&&o.parent.isBone&&(ix.multiplyMatrices(ax,o.matrixWorld),rx.setFromMatrixPosition(ix),r.setXYZ(a,rx.x,rx.y,rx.z),ix.multiplyMatrices(ax,o.parent.matrixWorld),rx.setFromMatrixPosition(ix),r.setXYZ(a+1,rx.x,rx.y,rx.z),a+=2)}n.getAttribute("position").needsUpdate=!0,Bc.prototype.updateMatrixWorld.call(this,e)},lx.prototype=Object.create(Sh.prototype),lx.prototype.constructor=lx,lx.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},lx.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var ux=new fc,cx=new Od,dx=new Od;function hx(e,t,n){Bc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new yv(t);r.rotateY(.5*Math.PI),this.material=new zd({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new Ud(a,3)),this.add(new Sh(r,this.material)),this.update()}function px(e,t,n,r){e=e||10,t=t||10,n=new Od(void 0!==n?n:4473924),r=new Od(void 0!==r?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,d=-o;u<=t;u++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);var h=u===i?n:r;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var p=new oh;p.setAttribute("position",new Yd(s,3)),p.setAttribute("color",new Yd(l,3));var f=new Hm({vertexColors:!0,toneMapped:!1});Qm.call(this,p,f),this.type="GridHelper"}function fx(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new Od(void 0!==i?i:4473924),a=new Od(void 0!==a?a:8947848);for(var o=[],s=[],l=0;l<=t;l++){var u=l/t*(2*Math.PI),c=Math.sin(u)*e,d=Math.cos(u)*e;o.push(0,0,0),o.push(c,0,d);var h=1&l?i:a;s.push(h.r,h.g,h.b),s.push(h.r,h.g,h.b)}for(var p=0;p<=n;p++)for(var f=1&p?i:a,m=e-e/n*p,v=0;v<r;v++){var g=v/r*(2*Math.PI),y=Math.sin(g)*m,b=Math.cos(g)*m;o.push(y,0,b),s.push(f.r,f.g,f.b),g=(v+1)/r*(2*Math.PI),y=Math.sin(g)*m,b=Math.cos(g)*m,o.push(y,0,b),s.push(f.r,f.g,f.b)}var x=new oh;x.setAttribute("position",new Yd(o,3)),x.setAttribute("color",new Yd(s,3));var w=new Hm({vertexColors:!0,toneMapped:!1});Qm.call(this,x,w),this.type="PolarGridHelper"}hx.prototype=Object.create(Bc.prototype),hx.prototype.constructor=hx,hx.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},hx.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");cx.copy(this.light.color),dx.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?cx:dx;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(ux.setFromMatrixPosition(this.light.matrixWorld).negate())},px.prototype=Object.create(Qm.prototype),px.prototype.constructor=px,fx.prototype=Object.create(Qm.prototype),fx.prototype.constructor=fx;var mx=new fc,vx=new fc,gx=new fc;function yx(e,t,n){Bc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new oh;r.setAttribute("position",new Yd([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Hm({fog:!1,toneMapped:!1});this.lightPlane=new Zm(r,i),this.add(this.lightPlane),(r=new oh).setAttribute("position",new Yd([0,0,0,0,0,1],3)),this.targetLine=new Zm(r,i),this.add(this.targetLine),this.update()}yx.prototype=Object.create(Bc.prototype),yx.prototype.constructor=yx,yx.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},yx.prototype.update=function(){mx.setFromMatrixPosition(this.light.matrixWorld),vx.setFromMatrixPosition(this.light.target.matrixWorld),gx.subVectors(vx,mx),this.lightPlane.lookAt(vx),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vx),this.targetLine.scale.z=gx.length()};var bx=new fc,xx=new Bh;function wx(e){var t=new oh,n=new Hm({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={},o=new Od(16755200),s=new Od(16711680),l=new Od(43775),u=new Od(16777215),c=new Od(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}d("n1","n2",o),d("n2","n4",o),d("n4","n3",o),d("n3","n1",o),d("f1","f2",o),d("f2","f4",o),d("f4","f3",o),d("f3","f1",o),d("n1","f1",o),d("n2","f2",o),d("n3","f3",o),d("n4","f4",o),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.setAttribute("position",new Yd(r,3)),t.setAttribute("color",new Yd(i,3)),Qm.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function _x(e,t,n,r,i,a,o){bx.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],bx.x,bx.y,bx.z)}wx.prototype=Object.create(Qm.prototype),wx.prototype.constructor=wx,wx.prototype.update=function(){var e=this.geometry,t=this.pointMap;xx.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_x("c",t,e,xx,0,0,-1),_x("t",t,e,xx,0,0,1),_x("n1",t,e,xx,-1,-1,-1),_x("n2",t,e,xx,1,-1,-1),_x("n3",t,e,xx,-1,1,-1),_x("n4",t,e,xx,1,1,-1),_x("f1",t,e,xx,-1,-1,1),_x("f2",t,e,xx,1,-1,1),_x("f3",t,e,xx,-1,1,1),_x("f4",t,e,xx,1,1,1),_x("u1",t,e,xx,.7,1.1,-1),_x("u2",t,e,xx,-.7,1.1,-1),_x("u3",t,e,xx,0,2,-1),_x("cf1",t,e,xx,-1,0,1),_x("cf2",t,e,xx,1,0,1),_x("cf3",t,e,xx,0,-1,1),_x("cf4",t,e,xx,0,1,1),_x("cn1",t,e,xx,-1,0,-1),_x("cn2",t,e,xx,1,0,-1),_x("cn3",t,e,xx,0,-1,-1),_x("cn4",t,e,xx,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Mx=new td;function Sx(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new oh;i.setIndex(new Ud(n,1)),i.setAttribute("position",new Ud(r,3)),Qm.call(this,i,new Hm({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Ex(e,t){this.type="Box3Helper",this.box=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new oh;r.setIndex(new Ud(n,1)),r.setAttribute("position",new Yd([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Qm.call(this,r,new Hm({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function Cx(e,t,n){this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new oh;i.setAttribute("position",new Yd([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Zm.call(this,i,new Hm({color:r,toneMapped:!1})),this.type="PlaneHelper";var a=new oh;a.setAttribute("position",new Yd([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Sh(a,new zd({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}Sx.prototype=Object.create(Qm.prototype),Sx.prototype.constructor=Sx,Sx.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Mx.setFromObject(this.object),!Mx.isEmpty()){var t=Mx.min,n=Mx.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Sx.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Sx.prototype.copy=function(e){return Qm.prototype.copy.call(this,e),this.object=e.object,this},Ex.prototype=Object.create(Qm.prototype),Ex.prototype.constructor=Ex,Ex.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Bc.prototype.updateMatrixWorld.call(this,e))},Cx.prototype=Object.create(Zm.prototype),Cx.prototype.constructor=Cx,Cx.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ps:hs,this.lookAt(this.plane.normal),Bc.prototype.updateMatrixWorld.call(this,e)};var Tx,Lx,Ax=new fc;function Px(e,t,n,r,i,a){Bc.call(this),this.type="ArrowHelper",void 0===e&&(e=new fc(0,0,1)),void 0===t&&(t=new fc(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===Tx&&((Tx=new oh).setAttribute("position",new Yd([0,0,0,0,1,0],3)),(Lx=new xg(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Zm(Tx,new Hm({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sh(Lx,new zd({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}function Ox(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new oh;n.setAttribute("position",new Yd(t,3)),n.setAttribute("color",new Yd([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Hm({vertexColors:!0,toneMapped:!1});Qm.call(this,n,r),this.type="AxesHelper"}Px.prototype=Object.create(Bc.prototype),Px.prototype.constructor=Px,Px.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ax.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ax,t)}},Px.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Px.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Px.prototype.copy=function(e){return Bc.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Ox.prototype=Object.create(Qm.prototype),Ox.prototype.constructor=Ox;var Rx=4,Nx=8,kx=Math.pow(2,Nx),Dx=[.125,.215,.35,.446,.526,.582],Ix=Nx-Rx+1+Dx.length,jx=20,zx=(Or(ki={},Du,0),Or(ki,Iu,1),Or(ki,zu,2),Or(ki,Bu,3),Or(ki,Uu,4),Or(ki,Hu,5),Or(ki,ju,6),ki),Fx=new By,Bx=function(){for(var e=[],t=[],n=[],r=Nx,i=0;i<Ix;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>Nx-Rx?o=Dx[i-Nx+Rx-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),l=-s/2,u=1+s/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],d=new Float32Array(108),h=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,v=f>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];d.set(g,18*f),h.set(c,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var b=new oh;b.setAttribute("position",new Ud(d,3)),b.setAttribute("uv",new Ud(h,2)),b.setAttribute("faceIndex",new Ud(p,1)),e.push(b),r>Rx&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),Ux=Bx._lodPlanes,Hx=Bx._sizeLods,Gx=Bx._sigmas,Vx=null,Wx=(1+Math.sqrt(5))/2,qx=1/Wx,Xx=[new fc(1,1,1),new fc(-1,1,1),new fc(1,1,-1),new fc(-1,1,-1),new fc(0,Wx,qx),new fc(0,Wx,-qx),new fc(qx,0,Wx),new fc(-qx,0,Wx),new fc(Wx,qx,0),new fc(-Wx,qx,0)];function Zx(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new fc(0,1,0);return new Tg({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:zx[Du]},outputEncoding:{value:zx[Du]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:ms,depthTest:!1,depthWrite:!1})}(jx),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function Yx(e){return void 0!==e&&e.type===ml&&(e.encoding===Du||e.encoding===Iu||e.encoding===ju)}function Jx(e){var t=new uc(3*kx,3*kx,e);return t.texture.mapping=il,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Qx(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Kx(){return new Tg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new rc(1,1)},inputEncoding:{value:zx[Du]},outputEncoding:{value:zx[Du]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:ms,depthTest:!1,depthWrite:!1})}function $x(){return new Tg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:zx[Du]},outputEncoding:{value:zx[Du]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:ms,depthTest:!1,depthWrite:!1})}Zx.prototype={constructor:Zx,fromScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Vx=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=$x(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=Kx(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<Ux.length;e++)Ux[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Vx),e.scissorTest=!1,Qx(e,0,0,e.width,e.height)},_fromTexture:function(e){Vx=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){var t={magFilter:ul,minFilter:ul,generateMipmaps:!1,type:ml,format:Rl,encoding:Yx(e)?e.encoding:zu,depthBuffer:!1,stencilBuffer:!1},n=Jx(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Jx(t),n},_compileMaterial:function(e){var t=new Sh(Ux[0],e);this._renderer.compile(t,Fx)},_sceneToCubeUV:function(e,t,n,r){var i=new Uh(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,u=s.toneMapping,c=s.getClearColor(),d=s.getClearAlpha();s.toneMapping=Zs,s.outputEncoding=Du;var h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();var p=Math.max(h.r,h.g,h.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);h=h.multiplyScalar(Math.pow(2,-f));var m=(f+128)/255;s.setClearColor(h,m),e.background=null}for(var v=0;v<6;v++){var g=v%3;0==g?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==g?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),Qx(r,g*kx,v>2?kx:0,kx,kx),s.setRenderTarget(r),s.render(e,i)}s.toneMapping=u,s.outputEncoding=l,s.setClearColor(c,d)},_textureToCubeUV:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=$x()):null==this._equirectShader&&(this._equirectShader=Kx());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Sh(Ux[0],r),a=r.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=zx[e.encoding],a.outputEncoding.value=zx[t.texture.encoding],Qx(t,0,0,3*kx,2*kx),n.setRenderTarget(t),n.render(i,Fx)},_applyPMREM:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<Ix;r++){var i=Math.sqrt(Gx[r]*Gx[r]-Gx[r-1]*Gx[r-1]),a=Xx[(r-1)%Xx.length];this._blur(e,r-1,r,i,a)}t.autoClear=n},_blur:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)},_halfBlur:function(e,t,n,r,i,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new Sh(Ux[r],l),c=l.uniforms,d=Hx[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*jx-1),p=i/h,f=isFinite(i)?1+Math.floor(3*p):jx;f>jx&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(jx));for(var m=[],v=0,g=0;g<jx;++g){var y=g/p,b=Math.exp(-y*y/2);m.push(b),0==g?v+=b:g<f&&(v+=2*b)}for(var x=0;x<m.length;x++)m[x]=m[x]/v;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=h,c.mipInt.value=Nx-n,c.inputEncoding.value=zx[e.texture.encoding],c.outputEncoding.value=zx[e.texture.encoding];var w=Hx[r];Qx(t,3*Math.max(0,kx-2*w),(0===r?0:2*kx)+2*w*(r>Nx-Rx?r-Nx+Rx:0),3*w,2*w),s.setRenderTarget(t),s.render(u,Fx)}};function ew(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),yy.call(this,e),this.type="catmullrom"}cy.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(cy.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Py.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Oh,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new fc(i.x,i.y,i.z||0))}return t}}),Object.assign(Oy.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(yy.prototype),Object.create(yy.prototype),ew.prototype=Object.create(yy.prototype),Object.assign(ew.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),px.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},sx.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ty.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Zy(e)}}),ty.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign($y.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Jb.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(td.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(id.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Yh.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},$b.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(nc,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),nc.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),nc.ceilPowerOfTwo(e)}}),Object.assign(ic.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(_c.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new fc).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}}),vd.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},dc.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(hd.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Td.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Td,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Td.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Td.getNormal(e,t,n,r)}}),Object.assign(Ry.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new rg(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new mg(this,e)}}),Object.assign(rc.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(fc.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(lc.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Oh.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Bc.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Bc.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Sh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Sh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Om.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Dm.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Rm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(cy.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Uh.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ny.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ud.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ju},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ju)}}}),Object.assign(Ud.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ju:Yu),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(oh.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ud(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(oh.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Yy.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Wb.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(cm.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ju},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(cm.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ju:Yu),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ig.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Gb.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(jd.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Od}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Pg.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ag.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(Fh.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(om.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(om.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Iu:Du}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Qf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(uc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(wb.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new cb).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Tb.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Vh.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};ac.crossOrigin=void 0,ac.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new uy;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ac.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ly;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ac.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ac.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"119"}}));var tw=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new fc,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:is.ROTATE,MIDDLE:is.DOLLY,RIGHT:is.PAN},this.touches={ONE:as.ROTATE,TWO:as.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=function(){var t=new fc,i=(new dc).setFromUnitVectors(e.up,new fc(0,1,0)),a=i.clone().inverse(),f=new fc,m=new dc,v=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),u.setFromVector3(t),n.autoRotate&&s===o.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);var g=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=v:g>Math.PI&&(g-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),u.theta=g<y?Math.max(g,Math.min(y,u.theta)):u.theta>(g+y)/2?Math.max(g,u.theta):Math.min(y,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),t.setFromSpherical(u),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0)),d=1,!!(p||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",X,!1),n.domElement.removeEventListener("mousedown",F,!1),n.domElement.removeEventListener("wheel",H,!1),n.domElement.removeEventListener("touchstart",V,!1),n.domElement.removeEventListener("touchend",q,!1),n.domElement.removeEventListener("touchmove",W,!1),n.domElement.ownerDocument.removeEventListener("mousemove",B,!1),n.domElement.ownerDocument.removeEventListener("mouseup",U,!1),n.domElement.removeEventListener("keydown",G,!1)};var n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,l=1e-6,u=new Zb,c=new Zb,d=1,h=new fc,p=!1,f=new rc,m=new rc,v=new rc,g=new rc,y=new rc,b=new rc,x=new rc,w=new rc,_=new rc;function M(){return Math.pow(.95,n.zoomSpeed)}function S(e){c.theta-=e}function E(e){c.phi-=e}var C=function(){var e=new fc;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),T=function(){var e=new fc;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),L=function(){var e=new fc;return function(t,r){var i=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*o/i.clientHeight,n.object.matrix),T(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function A(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){f.set(e.clientX,e.clientY)}function R(e){g.set(e.clientX,e.clientY)}function N(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}}function k(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}}function D(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);x.set(0,r)}function I(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,r)}v.subVectors(m,f).multiplyScalar(n.rotateSpeed);var i=n.domElement;S(2*Math.PI*v.x/i.clientHeight),E(2*Math.PI*v.y/i.clientHeight),f.copy(m)}function j(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,r)}b.subVectors(y,g).multiplyScalar(n.panSpeed),L(b.x,b.y),g.copy(y)}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);w.set(0,i),_.set(0,Math.pow(w.y/x.y,n.zoomSpeed)),A(_.y),x.copy(w)}function F(e){if(!1!==n.enabled){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case is.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case is.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;R(e),s=o.PAN}else{if(!1===n.enableRotate)return;O(e),s=o.ROTATE}break;case is.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),s=o.ROTATE}else{if(!1===n.enablePan)return;R(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&(n.domElement.ownerDocument.addEventListener("mousemove",B,!1),n.domElement.ownerDocument.addEventListener("mouseup",U,!1),n.dispatchEvent(i))}}function B(e){if(!1!==n.enabled)switch(e.preventDefault(),s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),v.subVectors(m,f).multiplyScalar(n.rotateSpeed);var t=n.domElement;S(2*Math.PI*v.x/t.clientHeight),E(2*Math.PI*v.y/t.clientHeight),f.copy(m),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,x),_.y>0?A(M()):_.y<0&&P(M()),x.copy(w),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,g).multiplyScalar(n.panSpeed),L(b.x,b.y),g.copy(y),n.update()}(e)}}function U(e){!1!==n.enabled&&(n.domElement.ownerDocument.removeEventListener("mousemove",B,!1),n.domElement.ownerDocument.removeEventListener("mouseup",U,!1),n.dispatchEvent(a),s=o.NONE)}function H(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),function(e){e.deltaY<0?P(M()):e.deltaY>0&&A(M()),n.update()}(e),n.dispatchEvent(a))}function G(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:L(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:L(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function V(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case as.ROTATE:if(!1===n.enableRotate)return;N(e),s=o.TOUCH_ROTATE;break;case as.PAN:if(!1===n.enablePan)return;k(e),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case as.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&D(e),n.enablePan&&k(e)}(e),s=o.TOUCH_DOLLY_PAN;break;case as.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&D(e),n.enableRotate&&N(e)}(e),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}}function W(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;I(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&j(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&I(e)}(e),n.update();break;default:s=o.NONE}}function q(e){!1!==n.enabled&&(n.dispatchEvent(a),s=o.NONE)}function X(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",X,!1),n.domElement.addEventListener("mousedown",F,!1),n.domElement.addEventListener("wheel",H,!1),n.domElement.addEventListener("touchstart",V,!1),n.domElement.addEventListener("touchend",q,!1),n.domElement.addEventListener("touchmove",W,!1),n.domElement.addEventListener("keydown",G,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};tw.prototype=Object.create(Qu.prototype),tw.prototype.constructor=tw;var nw=function(e,t){tw.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=is.PAN,this.mouseButtons.RIGHT=is.ROTATE,this.touches.ONE=as.PAN,this.touches.TWO=as.DOLLY_ROTATE};(nw.prototype=Object.create(Qu.prototype)).constructor=nw;var rw,iw,aw,ow,sw,lw,uw,cw,dw,hw,pw,fw,mw,vw,gw,yw,bw,xw,ww,_w,Mw,Sw,Ew="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABE0lEQVRIS92Xyw3CMBBEZ45UBG1ABVRAE6CkAH4F0Aw3PgUg4AQNcAHJaKVEMlaieOP1hT3msC/PXm0mdM6NAOwAOAAbAGuSbxgXnXN7AEOv7xHAlOTJkiWgF4BB0FSMFgBKKzsByZG1lZldF0hewMQuBlTbJtlpQL5dQfKjGRYtqO59qCbzHAvrC1LbpYBUdhagKDsrUKedNajVLgfIt5uQvMqDnCDpf5OFTfKZGySwGcnl34Du1dE9chrJehqTvOQaBlm2JYC5/9G0NhILiQGydH/KCtRo4ZMsQK0WVqBOCwtQlEUKSCwKiWLaGKa5I7WF1qi3hQaUZBGCmiKxiUUICkO+mUUI8n9btgBW2omKyXZfmJLMIaAnJuMAAAAASUVORK5CYII=",Cw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAAiElEQVRIS+2WsQ2AIBRE7xp30OFcQysLK13D4XQHm7MQG4WIBZVHQ0jI+8kL5I6SKgAjgBbnWgAMJPdwztqSHEkTgO5GmUn2WeRwKcmRtAKob7CNZPNxQJwjSTEQSX4cEOd4wKUxacKKrCj7r/kVvaqyIit6GnCiXU7owPlH4BSvjsXLb9H6fgBDCQyem/8TjgAAAABJRU5ErkJggg==",Tw="https://darkdragonblade.github.io/svgeditor/build/three-preview/skin.png",Lw="https://darkdragonblade.github.io/svgeditor/build/three-preview/wa_B.jpg",Aw=[0,0,1800],Pw=15856113,Ow=[],Rw={minX:0,maxX:0,minY:0,maxY:0},Nw=.9,kw=.45,Dw=0,Iw=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.changeMaterial=function(e){_w=e,i.updateTexture()},i.cameraChange=function(e){var t;(t=rw.position).set.apply(t,H(e)),rw.rotation.set(0,0,0),rw.updateProjectionMatrix(),pw.time=i.state.maxDuration},i.changeAmbientLightIntensity=function(e){ow.intensity=e},i.changeSunIntensity=function(e){sw.intensity=e},i.changeSunAngle=function(e){Dw=e,i.changeShadowAngle()},i.changeBackground=function(e){lw.background=i.loadTexture(e)},i.switchScreen=function(){if(rw){var e=window.innerWidth,t=window.innerHeight;rw.aspect=e/t,rw.updateProjectionMatrix(),iw.setSize(e,t);var n=document.querySelector(".three-dom");n.removeChild(iw.domElement),n.appendChild(iw.domElement)}},i.updateTexture=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.createCanvas();case 2:t=e.sent,fw.map=new lv(t);case 4:case"end":return e.stop()}}),e)}))),i.initPerspectiveCamera=function(){var e,t=window.innerWidth,n=window.innerHeight;(e=(rw=new Uh(25,t/n,10,1e5)).position).set.apply(e,Aw),rw.lookAt(rs(fc,[0,0,0]))},i.initRender=function(){var e=window.innerWidth,t=window.innerHeight;(iw=new om({antialias:!0,alpha:!0,precision:"highp",preserveDrawingBuffer:!0})).setPixelRatio(window.devicePixelRatio),iw.setSize(e,t),iw.shadowMap.enabled=!0,iw.shadowMap.type=cs,iw.sortObjects=!0,document.querySelector(".three-dom").appendChild(iw.domElement)},i.initControls=function(){aw=new tw(rw,iw.domElement)},i.setSunLight=function(){sw&&i.removeScene(sw),sw=new Hy(16777215,kw);var e=xw/2*Math.cos(-Dw/57.2),t=xw/2*Math.sin(-Dw/57.2);sw.position.set(t,ww,e),lw.add(sw),sw.castShadow=!0,sw.shadow.mapSize.width=3e3,sw.shadow.mapSize.height=3e3;var n=2500;sw.shadow.camera.left=-n,sw.shadow.camera.right=n,sw.shadow.camera.top=n,sw.shadow.camera.bottom=-n,sw.shadow.camera.far=2500,sw.shadow.bias=-1e-4},i.changeShadowAngle=function(){var e=xw/2*Math.cos(-Dw/57.2),t=xw/2*Math.sin(-Dw/57.2);sw.position.set(t,ww,e)},i.initAmbientLight=function(){ow&&i.removeScene(ow),ow=new Gy("#ffffff",Nw),i.addScene(ow)},i.initLight=function(){i.initAmbientLight(),i.setSunLight()},i.initScene=function(){(lw=new Uc).background=new Od(15921906)},i.addScene=function(e){lw.add(e)},i.removeScene=function(e){lw.remove(e)},i.loadTexture=function(e){var t=new uy;return t.setCrossOrigin("anonymous"),t.load(e)},i.animate=function(){window.cancelAnimationFrame(uw),uw=requestAnimationFrame(i.animate),i.renderThree(),aw.update()},i.renderThree=function(){iw.render(lw,rw)},i.createCanvas=function(){var e=5*bw.width,t=5*bw.height;return new Promise((function(n){var r=document.createElement("canvas"),i=r.getContext("2d"),a=new Image;a.src=_w||Lw,a.setAttribute("crossOrigin","Anonymous"),r.width=1*e,r.height=1*t,i.fillStyle="#ffffff",i.fillRect(0,0,r.width,r.height),a.onload=function(){var o=i.createPattern(a,"repeat");i.fillStyle=o,i.fillRect(0,0,r.width,r.height);var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.getElementById("lux-svg-root");s.append(l.cloneNode(!0)),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var u=new Image;u.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(s.outerHTML))),u.setAttribute("crossOrigin","Anonymous"),u.onload=function(){i.drawImage(this,0,0,e,t),n(r)}}}))},i.createBox=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.createCanvas();case 2:t=e.sent,(dw=new nm).name="wrapGroup",fw=new Ng({color:Pw,side:fs,map:new lv(t)}),mw=new Ng({color:Pw,map:i.loadTexture(Lw)}),vw=new Ng({color:Pw,map:i.loadTexture(Tw)}),i.createCube(),lw.add(dw),dw.position.set(-xw/2,-ww/2,0);case 11:case"end":return e.stop()}}),e)}))),i.createCube=function(){Ow=[],yw.p.forEach((function(e,t){var n=new Bc;n.name=yw.b[t].split(":")[0];var r=yw.b[t].split(":")[1];n.renderOrder=t+1;for(var a=bw.z,o=new Ry,s=[],l=[],u=e.a.length,c=0;c<u/2;c++)s.push(e.a[2*c]),l.push(e.a[2*c+1]),0===c?o.moveTo(e.a[2*c],e.a[2*c+1]):o.lineTo(e.a[2*c],e.a[2*c+1]);var d,h,p,f,m,v,g,y,b=new rg(o,{depth:a,bevelEnabled:!1}),x=n.maxX=Math.max.apply(null,s),w=n.minX=Math.min.apply(null,s),_=n.maxY=Math.max.apply(null,l),M=n.minY=Math.min.apply(null,l),S=x-w,E=_-M,C=[],T=[],L=[];yw.b.forEach((function(e){var t=e.search(n.name);-1!=t&&C.push(0===t?e.split(":")[1]:e.split(":")[0])})),C.forEach((function(e){yw.b.forEach((function(t,n){if(e===t.split(":")[0])for(var r=yw.p[n].a.length,i=0;i<r/2;i++)T.push(yw.p[n].a[2*i]),L.push(yw.p[n].a[2*i+1])}))})),f=T.find((function(e){return e<w})),p=T.find((function(e){return e>x})),h=L.find((function(e){return e<M})),d=L.find((function(e){return e>_})),-1!==n.name.search("SG")&&-1===C.join(";").search("SG")&&(p=void 0,f=void 0),-1!==n.name.search("XG")&&-1===C.join(";").search("XG")&&(p=void 0,f=void 0),m=void 0===f?vw:fw,v=void 0===p?vw:fw,g=void 0===d?vw:fw,y=void 0===h?vw:fw,b.faceVertexUvs[0]=[],b.faceVertexUvs[0][0]=[new rc(0,0),new rc(1,0),new rc(1,1)],b.faceVertexUvs[0][1]=[new rc(1,1),new rc(0,1),new rc(0,0)],b.faceVertexUvs[0][2]=[new rc(w/xw,1-(ww-_)/ww),new rc(w/xw,(_-E)/ww),new rc(x/xw,(_-E)/ww)],b.faceVertexUvs[0][3]=[new rc(x/xw,(_-E)/ww),new rc(x/xw,1-(ww-_)/ww),new rc(w/xw,1-(ww-_)/ww)],b.faceVertexUvs[0][4]=void 0===p?[new rc(1e-4,1),new rc(0,1),new rc(1e-4,1-bw.l/10)]:[new rc(x/xw,(_-E)/ww),new rc(x/xw,1-(ww-_)/ww),new rc(x/xw,(_-E)/ww)],b.faceVertexUvs[0][5]=void 0===p?[new rc(0,1),new rc(0,1-bw.l/10),new rc(1e-4,1-bw.l/10)]:[new rc(x/xw,1-(ww-_)/ww),new rc(x/xw,1-(ww-_)/ww),new rc(x/xw,(_-E)/ww)],b.faceVertexUvs[0][6]=void 0===d?[new rc(Math.ceil(S/11.45),1),new rc(0,1),new rc(Math.ceil(S/11.45),1-bw.l/10)]:[new rc(x/xw,1e-4),new rc(w/xw,1e-4),new rc(x/xw,0)],b.faceVertexUvs[0][7]=void 0===d?[new rc(0,1),new rc(0,1-bw.l/10),new rc(Math.ceil(S/11.45),1-bw.l/10)]:[new rc(w/xw,1e-4),new rc(w/xw,0),new rc(x/xw,0)],b.faceVertexUvs[0][8]=void 0===f?[new rc(1e-4,1),new rc(0,1),new rc(1e-4,1-bw.l/10)]:[new rc(w/xw,1-(ww-_)/ww),new rc(w/xw,(_-E)/ww),new rc(w/xw,1-(ww-_)/ww)],b.faceVertexUvs[0][9]=void 0===f?[new rc(0,1),new rc(0,1-bw.l/10),new rc(1e-4,1-bw.l/10)]:[new rc(w/xw,(_-E)/ww),new rc(w/xw,(_-E)/ww),new rc(w/xw,1-(ww-_)/ww)],b.faceVertexUvs[0][10]=void 0===h?[new rc(1,1),new rc(Math.ceil(S/11.45),1),new rc(1,1-bw.l/10)]:[new rc(0,0),new rc(1,0),new rc(0,1e-5)],b.faceVertexUvs[0][11]=void 0===h?[new rc(Math.ceil(S/11.45),1),new rc(Math.ceil(S/11.45),1-bw.l/10),new rc(1,1-bw.l/10)]:[new rc(1,0),new rc(1,1e-5),new rc(0,1e-5)];for(var A=b.faces.length,P=0;P<A/2;P++)b.faces[2*P].materialIndex=P,b.faces[2*P+1].materialIndex=P;b.computeFaceNormals();var O=new Sh(b,[mw,fw,v,g,m,y]);if(n.add(O),O.material.forEach((function(e){e.map.wrapS=e.map.wrapT=ol})),O.castShadow=!0,r){n.width=S,n.height=E,i.findCube(Ow,r).add(n);var R=-1!=n.name.search("XG"),N=-1!=n.name.search("SG");w<Rw.minX&&!N&&!R?(n.position.set(w+S,0,0),O.position.set(-(w+S),0,0),n.parent.name===yw.b[0]?n.sideType="left":n.position.set(-n.parent.width,0,0)):w>Rw.minX&&!N&&!R?(n.position.set(w,0,0),O.position.set(-w,0,0),n.parent.name===yw.b[0]?n.sideType="right":n.position.set(n.parent.width,0,0)):M>Rw.minY&&N&&n.parent.name!==yw.b[0]?(n.position.set(w<Rw.minX?-n.parent.maxX:-n.parent.position.x,ww-E,0),O.position.set(0,-(ww-E),0)):M>Rw.minY&&N&&n.parent.name===yw.b[0]?(n.position.set(0,ww-E,0),O.position.set(0,-(ww-E),0)):M<Rw.minY&&R&&n.parent.name!==yw.b[0]?(n.position.set(w<Rw.minX?-n.parent.maxX:-n.parent.position.x,E,0),O.position.set(0,-E,0)):M<Rw.minY&&R&&n.parent.name===yw.b[0]&&(n.position.set(0,E,0),O.position.set(0,-E,0)),t===yw.p.length-1&&(dw.add(Ow[0]),i.initPlaneGeometry(),setTimeout((function(){i.initAnimationAction()}),1e3))}else Rw={minX:w,minY:M,maxX:x,maxY:_},n.position.z=a/2,Ow[0]=n;O.position.z=-a/2}))},i.findCube=function(e,t){var n;return(e||[]).map((function(e){if(e.name===t)n=e;else{var r=i.findCube(e.children,t);r&&(n=r)}})),n},i.initPlaneGeometry=function(){(Mw=new Sh(new ep(1e4,1e4),new Pg({color:16777215,depthWrite:!1,transparent:!0,opacity:.5}))).rotation.x=-Math.PI/2,Mw.receiveShadow=!0,Mw.name="ground",dw.add(Mw),(Sw=new px(1e4,100,16777215,16777215)).name="grid";for(var e=yw.p[0].a,t=[],n=[],r=e.length,i=0;i<r/2;i++)t.push(e[2*i]),n.push(e[2*i+1]);var a=Math.max.apply(null,t)-Math.min.apply(null,t);Sw.position.x=Rw.maxX-a/2,Mw.position.x=Rw.maxX-a/2,dw.add(Sw)},i.clipChange=function(e){var t=e.target.value;pw.time=t/100,pw.paused=!0,i.setState({paused:!pw.paused,changeFlag:!0})},i.switchPlayPause=function(){i.setState({changeFlag:!1}),pw&&(pw.paused?pw.paused=!1:pw.paused=!0),i.setState({paused:!pw.paused}),pw.time!==i.state.maxDuration||i.state.changeFlag||(pw.time=null)},i.animateRender=function(){i.setState({time:100*pw.time});var e=document.querySelector("#three-slider");null===e||void 0===e||e.setAttribute("value",(100*pw.time).toString()),(0!==pw.time||i.state.changeFlag)&&(pw.time!==i.state.maxDuration||i.state.changeFlag)||i.setState({paused:!pw.paused}),cw=requestAnimationFrame(i.animateRender),hw.update(gw.getDelta())},i.dispose3d=function(){try{iw.dispose(),iw.forceContextLoss(),iw.content=null,window.cancelAnimationFrame(uw),window.cancelAnimationFrame(cw),document.querySelector(".three-dom").removeChild(iw.domElement),iw.domElement=null,iw=null,pw=null}catch(e){}},i.initThreePreview=function(){i.initScene(),i.initPerspectiveCamera(),i.initRender(),i.initControls(),i.createBox(),i.initLight(),i.animate()},i.render=function(){return(0,m.jsxs)("div",{id:"three-dom",children:[(0,m.jsx)("div",{class:"three-dom",ref:"threeDom"}),(0,m.jsxs)("div",{class:"play-wrap",children:[(0,m.jsx)("x-slider",{id:"three-slider",value:"0",min:"0",max:"900",step:"1"}),(0,m.jsx)("img",{onClick:function(){return i.switchPlayPause},style:{marginLeft:"10px",width:"13px",height:"16px",cursor:"pointer"},src:i.state.paused?Cw:Ew})]})]})},i.state={time:0,threeDom:void 0,paused:!1,changeFlag:!1,maxDuration:0},i}return s(n,[{key:"initAnimationAction",value:function(){hw=new Hb(dw);for(var e=yw.p[0].a,t=[],n=[],r=e.length,i=0;i<r/2;i++)t.push(e[2*i]),n.push(e[2*i+1]);var a=Math.max.apply(null,t),o=Math.min.apply(null,t),s=Math.max.apply(null,n),l=a-o,u=s-Math.min.apply(null,n),c=[new Hg("wrapGroup.position[x]",[0,3],[dw.position.x,-(a-l/2)]),new Hg("wrapGroup.position[y]",[6,9],[dw.position.y,-(s-u/2)]),new Hg("wrapGroup.position[z]",[0,3],[dw.position.z,-1!=yw.b.join(",").search("SG")&&-1!=yw.b.join(",").search("XG")?(bw.height-u)/2:bw.height-u]),new Hg("ground.position[y]",[6,9],[Mw.position.y,-1!=yw.b.join(",").search("SG")&&-1!=yw.b.join(",").search("XG")?(bw.height-u)/2:bw.height-u]),new Hg("grid.position[y]",[6,9],[Sw.position.y,-1!=yw.b.join(",").search("SG")&&-1!=yw.b.join(",").search("XG")?(bw.height-u)/2:bw.height-u])];yw.p.forEach((function(e,t){for(var n=[],r=[],i=e.a.length,a=0;a<i/2;a++)n.push(e.a[2*a]),r.push(e.a[2*a+1]);var o=Math.min.apply(null,n);if(t>0){var s=-1!=yw.b[t].search("SG")||-1!=yw.b[t].search("XG")?".rotation[x]":".rotation[y]",l=o<Rw.minX?[e.c[0],-Math.PI/(180/e.c[1])]:[e.c[0],Math.PI/(180/e.c[1])];-1!=yw.b[t].search("SG")&&(l=[e.c[0],-Math.PI/(180/e.c[1])]),-1!=yw.b[t].search("XG")&&(l=[e.c[0],Math.PI/(180/e.c[1])]),c.push(new Hg(yw.b[t].split(":")[0]+s,e.t,l))}}));var d=new Jg("Action",this.state.maxDuration,c);(pw=hw.clipAction(d)).loop=2200,pw.clampWhenFinished=!0,pw.timeScale=1,this.setState({paused:!0}),gw=new mb,this.animateRender(),pw.play()}},{key:"componentDidMount",value:function(){var e,t=window.threeData;yw=t.ge,bw=t.de,xw=t.de.width,ww=t.de.height,this.setState({maxDuration:null===(e=bw)||void 0===e?void 0:e.duration}),this.initThreePreview();var n=document.querySelector("#three-slider");null===n||void 0===n||n.addEventListener("change",this.clipChange)}},{key:"componentWillUnmount",value:function(){this.dispose3d()}}]),n}(e.Component),jw=Iw,zw=.566928,Fw=function(e,t,n,r){var i=Bw(r+2*e+2*t,n+t),a=1.5*i.z,o=0+r,s=o+e,l=s-3,u=s+3,c=s+t,d=c-3,h=c+3,p=c+e,f=p-3,m=p+3,v=p+t,g=0+t/2,y=g+5,b=g+n,x=b-5,w=b+t/2,_=[];return Uw(_,[c*zw,g*zw,c*zw,b*zw,p*zw,b*zw,p*zw,g*zw],[0,90],[0,3]),Uw(_,[s*zw,g*zw,s*zw,(b-a)*zw,c*zw,(b-a)*zw,c*zw,(g+a)*zw],[0,90],[0,3]),Uw(_,[o*zw,g*zw,o*zw,b*zw,s*zw,b*zw,s*zw,g*zw],[0,90],[0,3]),Uw(_,[p*zw,g*zw,p*zw,(b-a)*zw,v*zw,(b-a)*zw,v*zw,(g+a)*zw],[0,90],[0,3]),Uw(_,[0,y*zw,0,x*zw,o*zw,b*zw,o*zw,g*zw],[0,91],[0,3]),Uw(_,[u*zw,(b-a)*zw,u*zw,w*zw,d*zw,w*zw,d*zw,(b-a)*zw],[0,95],[3,6]),Uw(_,[o*zw,b*zw,o*zw,w*zw,l*zw,w*zw,l*zw,b*zw],[0,90],[6,9]),Uw(_,[h*zw,b*zw,h*zw,w*zw,f*zw,w*zw,f*zw,b*zw],[0,90],[6,9]),Uw(_,[m*zw,(b-a)*zw,m*zw,w*zw,v*zw,w*zw,v*zw,(b-a)*zw],[0,95],[3,6]),Uw(_,[u*zw,0,u*zw,(g+a)*zw,d*zw,(g+a)*zw,d*zw,0],[0,95],[3,6]),Uw(_,[o*zw,0,o*zw,g*zw,l*zw,g*zw,l*zw,0],[0,90],[6,9]),Uw(_,[h*zw,0,h*zw,g*zw,f*zw,g*zw,f*zw,0],[0,90],[6,9]),Uw(_,[m*zw,0,m*zw,(g+a)*zw,v*zw,(g+a)*zw,v*zw,0],[0,95],[3,6]),{de:i,ge:{b:["C","B:C","A:B","D:C","E:A","SGB:B","SGA:A","SGC:C","SGD:D","XGB:B","XGA:A","XGC:C","XGD:D"],p:_}}},Bw=function(e,t){return{width:e*zw,height:t*zw,z:1.700784,l:3,duration:9}},Uw=function(e,t,n,r){var i={a:t,c:n,t:r};e.push(i)},Hw=function(e){u(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).state=void 0,i.changeType=function(e){if(i.setState({type:e}),3===e){var t,n,r,a,o,s=null===(t=i.state.stage)||void 0===t||null===(n=t.svgRoot)||void 0===n?void 0:n.querySelector("#\u8fb9\u6846"),l=null===s||void 0===s?void 0:s.querySelector("#A"),u=null===s||void 0===s?void 0:s.querySelector("#B"),c=Number(null===l||void 0===l?void 0:l.getAttribute("width"))/Number(null===(r=i.state.stage)||void 0===r?void 0:r.mmUnit),d=Number(null===u||void 0===u?void 0:u.getAttribute("width"))/Number(null===(a=i.state.stage)||void 0===a?void 0:a.mmUnit),h=Number(null===l||void 0===l?void 0:l.getAttribute("height"))/Number(null===(o=i.state.stage)||void 0===o?void 0:o.mmUnit);window.threeData=Fw(c,d,h,35)}},i.render=function(){return(0,m.jsxs)("div",{className:"App",children:[i.state.stage&&(0,m.jsx)(T,{}),(0,m.jsxs)("div",{id:"editor",className:"flex",children:[i.state.stage&&(0,m.jsx)(x,{}),(0,m.jsx)("div",{id:"board",className:"svg"}),i.state.stage&&(0,m.jsx)(ns,{}),i.state.stage&&(0,m.jsx)(es,{})]}),3===i.state.type&&(0,m.jsx)(jw,{}),(0,m.jsx)("div",{className:"toggle-3d-wrapper",children:(0,m.jsxs)("div",{className:"toggle-3d-inner flex flex-align-center",children:[(0,m.jsx)("div",{onClick:function(){return i.changeType(2)},className:2===i.state.type?"toggle-3d-item toggle-3d-item-active":"toggle-3d-item",children:(0,m.jsx)("span",{className:"flex flex-justify-center flex-align-center",children:"2D"})}),(0,m.jsx)("div",{onClick:function(){return i.changeType(3)},className:3===i.state.type?"toggle-3d-item toggle-3d-item-active":i.state.has3D?"toggle-3d-item":"toggle-3d-item disabled",children:(0,m.jsx)("span",{className:"flex flex-justify-center flex-align-center",children:"3D"})})]})})]})},i.state={stage:void 0,type:2,threeData:void 0,has3D:!1},i}return s(n,[{key:"componentDidMount",value:function(){var e=this,t=window.stage=new Ja("board",1980,1200);setTimeout((function(){var n=document.querySelector("#board"),r=null===n||void 0===n?void 0:n.getBoundingClientRect(),i=600,a=600;try{a=Number((null===r||void 0===r?void 0:r.height)||680)-80,i=Number((null===r||void 0===r?void 0:r.height)||680)-80}catch(o){}t.setViewSize(a,i),t.setBoardSize(1,20,20),t.watch(t.actions().UPDATED,(function(){var n,r=null===t||void 0===t||null===(n=t.svgRoot)||void 0===n?void 0:n.querySelector("#\u8fb9\u6846");e.setState({has3D:!!r})}))}),100),this.setState({stage:t})}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Gw=Hw,Vw=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,m.jsx)(Gw,{})),Vw()}()}();
//# sourceMappingURL=main.ad371741.js.map