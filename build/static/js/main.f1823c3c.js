/*! For license information please see main.f1823c3c.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var i=n(791),r=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function v(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var I,j=Object.assign;function z(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case M:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case L:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){Q(e,t);var n=V(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),i=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ve(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Me=null,Se=null;function Ee(e){if(e=br(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wr(t),_e(e.stateNode,e.type,t))}}function Ce(e){Me?Se?Se.push(e):Se=[e]:Me=e}function Te(){if(Me){var e=Me,t=Se;if(Se=Me=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Le(e,t){return e(t)}function Ae(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Le(e,t,n)}finally{Pe=!1,(null!==Me||null!==Se)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ue){Ne=!1}function De(e,t,n,i,r,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ie=!1,je=null,ze=!1,Be=null,Fe={onError:function(e){Ie=!0,je=e}};function Ue(e,t,n,i,r,a,o,s,l){Ie=!1,je=null,De.apply(Fe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ve(r),e;if(o===i)return Ve(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ze=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Je=r.unstable_requestPaint,Qe=r.unstable_now,Ke=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=dt(s):0!==(a&=o)&&(i=dt(a))}else 0!==(o=n&~r)?i=dt(o):0!==a&&(i=dt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Mt,St,Et,Ct=!1,Tt=[],Lt=null,At=null,Pt=null,Ot=new Map,Rt=new Map,Nt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function It(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=yr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Et(e.priority,(function(){Mt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==Lt&&zt(Lt)&&(Lt=null),null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),Ot.forEach(Bt),Rt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Lt&&Ut(Lt,e),null!==At&&Ut(At,e),null!==Pt&&Ut(Pt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(i=Nt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var Gt=x.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,n,i){var r=bt,a=Gt.transition;Gt.transition=null;try{bt=1,Xt(e,t,n,i)}finally{bt=r,Gt.transition=a}}function qt(e,t,n,i){var r=bt,a=Gt.transition;Gt.transition=null;try{bt=4,Xt(e,t,n,i)}finally{bt=r,Gt.transition=a}}function Xt(e,t,n,i){if(Vt){var r=Yt(e,t,n,i);if(null===r)Vi(e,t,i,Zt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Lt=It(Lt,e,t,n,i,r),!0;case"dragenter":return At=It(At,e,t,n,i,r),!0;case"mouseover":return Pt=It(Pt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Ot.set(a,It(Ot.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Rt.set(a,It(Rt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<kt.indexOf(e)){for(;null!==r;){var a=br(r);if(null!==a&&wt(a),null===(a=Yt(e,t,n,i))&&Vi(e,t,i,Zt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Vi(e,t,i,null,n)}}var Zt=null;function Yt(e,t,n,i){if(Zt=null,null!==(e=yr(e=we(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Kt=null,$t=null;function en(){if($t)return $t;var e,t,n=Kt,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=j({},cn,{view:0,detail:0}),hn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),vn=an(j({},pn,{dataTransfer:0})),mn=an(j({},dn,{relatedTarget:0})),gn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function En(){return Sn}var Cn=j({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),Ln=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),Nn=[9,13,27,32],kn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var In=u&&"TextEvent"in window&&!Dn,jn=u&&(!kn||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,i){Ce(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Zn(e){zi(e,0)}function Yn(e){if(X(xr(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Kn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Kn=$n}else Kn=!1;Qn=Kn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,we(e)),Oe(Zn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ai(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ui(n,a);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,gi=null,yi=null,bi=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Z(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(gi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Mi={},Si={};function Ei(e){if(Mi[e])return Mi[e];if(!_i[e])return e;var t,n=_i[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return Mi[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ci=Ei("animationend"),Ti=Ei("animationiteration"),Li=Ei("animationstart"),Ai=Ei("transitionend"),Pi=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Pi.set(e,t),l(t,[e])}for(var Ni=0;Ni<Oi.length;Ni++){var ki=Oi[Ni];Ri(ki.toLowerCase(),"on"+(ki[0].toUpperCase()+ki.slice(1)))}Ri(Ci,"onAnimationEnd"),Ri(Ti,"onAnimationIteration"),Ri(Li,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(a(198));var u=je;Ie=!1,je=null,ze||(ze=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;ji(r,s,c),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;ji(r,s,c),a=l}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Bi(e,t){var n=t[vr];void 0===n&&(n=t[vr]=new Set);var i=e+"__bubble";n.has(i)||(Gi(t,e,2,!1),n.add(i))}function Fi(e,t,n){var i=0;t&&(i|=4),Gi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Ui]){e[Ui]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ii.has(t)||Fi(t,!1,e),Fi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Fi("selectionchange",!1,t))}}function Gi(e,t,n,i){switch(Jt(t)){case 1:var r=Wt;break;case 4:r=qt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=yr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}Oe((function(){var i=a,r=we(n),o=[];e:{var s=Pi.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ci:case Ti:case Li:l=gn;break;case Ai:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ln}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var v=(p=f).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==h&&(null!=(v=Re(f,h))&&u.push(Wi(f,v,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,v="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ln,v="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:xr(l),p=null==c?s:xr(c),(s=new u(v,f+"leave",l,n,r)).target=d,s.relatedTarget=p,v=null,yr(r)===i&&((u=new u(h,f+"enter",c,n,r)).target=p,u.relatedTarget=d,v=u),d=v,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Xi(p))f++;for(p=0,v=h;v;v=Xi(v))p++;for(;0<f-p;)u=Xi(u),f--;for(;0<p-f;)h=Xi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xi(u),h=Xi(h)}u=null}else u=null;null!==l&&Zi(o,s,l,u,!1),null!==c&&null!==d&&Zi(o,d,c,u,!0)}if("select"===(l=(s=i?xr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Jn;else if(Vn(s))if(Qn)m=oi;else{m=ri;var g=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ai);switch(m&&(m=m(e,i))?Wn(o,m,n,r):(g&&g(e,s,i),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=i?xr(i):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(mi=g,gi=i,yi=null);break;case"focusout":yi=gi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,xi(o,n,r);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":xi(o,n,r)}var y;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Kt="value"in(Qt=r)?Qt.value:Qt.textContent,Hn=!0)),0<(g=qi(i,b)).length&&(b=new xn(b,e,null,n,r),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!kn&&Fn(e,t)?(e=en(),$t=Kt=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}zi(o,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Re(e,n))&&i.unshift(Wi(e,a,r)),null!=(a=Re(e,t))&&i.push(Wi(e,a,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Re(n,a))&&o.unshift(Wi(n,l,s)):r||null!=(l=Re(n,a))&&o.push(Wi(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Ji,"")}function Ki(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(a(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,vr="__reactEvents$"+dr,mr="__reactListeners$"+dr,gr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wr(e){return e[pr]||null}var _r=[],Mr=-1;function Sr(e){return{current:e}}function Er(e){0>Mr||(e.current=_r[Mr],_r[Mr]=null,Mr--)}function Cr(e,t){Mr++,_r[Mr]=e.current,e.current=t}var Tr={},Lr=Sr(Tr),Ar=Sr(!1),Pr=Tr;function Or(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Nr(){Er(Ar),Er(Lr)}function kr(e,t,n){if(Lr.current!==Tr)throw Error(a(168));Cr(Lr,t),Cr(Ar,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,G(e)||"Unknown",r));return j({},n,i)}function Ir(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Pr=Lr.current,Cr(Lr,e),Cr(Ar,Ar.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Dr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Er(Ar),Er(Lr),Cr(Lr,e)):Er(Ar),Cr(Ar,n)}var zr=null,Br=!1,Fr=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Hr(){if(!Fr&&null!==zr){Fr=!0;var e=0,t=bt;try{var n=zr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zr=null,Br=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Xe($e,Hr),r}finally{bt=t,Fr=!1}}return null}var Gr=[],Vr=0,Wr=null,qr=0,Xr=[],Zr=0,Yr=null,Jr=1,Qr="";function Kr(e,t){Gr[Vr++]=qr,Gr[Vr++]=Wr,Wr=e,qr=t}function $r(e,t,n){Xr[Zr++]=Jr,Xr[Zr++]=Qr,Xr[Zr++]=Yr,Yr=e;var i=Jr;e=Qr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var a=32-ot(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jr=1<<32-ot(t)+r|n<<r|i,Qr=a+e}else Jr=1<<a|n<<r|i,Qr=e}function ea(e){null!==e.return&&(Kr(e,1),$r(e,1,0))}function ta(e){for(;e===Wr;)Wr=Gr[--Vr],Gr[Vr]=null,qr=Gr[--Vr],Gr[Vr]=null;for(;e===Yr;)Yr=Xr[--Zr],Xr[Zr]=null,Qr=Xr[--Zr],Xr[Zr]=null,Jr=Xr[--Zr],Xr[Zr]=null}var na=null,ia=null,ra=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Jr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ra){var t=ia;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=cr(n.nextSibling);var i=na;t&&sa(e,t)?oa(i,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ra)return ua(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=cr(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?cr(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ia;e;)e=cr(e.nextSibling)}function pa(){ia=na=null,ra=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var va=x.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Sr(null),ya=null,ba=null,xa=null;function wa(){xa=ba=ya=null}function _a(e){var t=ga.current;Er(ga),e._currentValue=t}function Ma(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,xa=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function La(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ta(t)):(n.next=r.next,r.next=n),t.interleaved=n,Aa(e,i)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ka(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Aa(e,n)}return null===(r=i.interleaved)?(t.next=t,Ta(i)):(t.next=r.next,r.next=t),i.interleaved=t,Aa(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ia(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,i){var r=e.updateQueue;Pa=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,v=s;switch(h=t,p=n,v.tag){case 1:if("function"===typeof(f=v.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=v.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(h=s).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=d}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Ba=(new i.Component).refs;function Fa(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),a=Na(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,r))&&(ic(t,e,r,i),Da(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),a=Na(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,r))&&(ic(t,e,r,i),Da(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Na(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ka(e,r,i))&&(ic(t,e,i,n),Da(t,e,i))}};function Ha(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function Ga(e,t,n){var i=!1,r=Tr,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(r=Rr(t)?Pr:Lr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Or(e,r):Tr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Va(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Ba,Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ea(a):(a=Rr(t)?Pr:Lr.current,r.context=Or(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Fa(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ua.enqueueReplaceState(r,r.state,null),ja(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ba&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=kc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===M?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Za(a)===t.type)?((i=r(t,n.props)).ref=qa(e,t,n),i.return=e,i):((i=Dc(n.type,n.key,n.props,null,e.mode,i)).ref=qa(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case _:return(t=Bc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Ic(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case _:return n.key===r?u(e,t,n,i):null;case R:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:d(e,t,n,i,null);Xa(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case R:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return d(t,e=e.get(n)||null,i,r,null);Xa(t,i)}return null}function v(r,a,s,l){for(var c=null,u=null,d=a,v=a=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=p(r,d,s[v],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(r,d),a=o(g,a,v),null===u?c=g:u.sibling=g,u=g,d=m}if(v===s.length)return n(r,d),ra&&Kr(r,v),c;if(null===d){for(;v<s.length;v++)null!==(d=h(r,s[v],l))&&(a=o(d,a,v),null===u?c=d:u.sibling=d,u=d);return ra&&Kr(r,v),c}for(d=i(r,d);v<s.length;v++)null!==(m=f(d,r,v,s[v],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=o(m,a,v),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(r,e)})),ra&&Kr(r,v),c}function m(r,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,v=s,m=s=0,g=null,y=l.next();null!==v&&!y.done;m++,y=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=p(r,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(r,v),s=o(b,s,m),null===d?u=b:d.sibling=b,d=b,v=g}if(y.done)return n(r,v),ra&&Kr(r,m),u;if(null===v){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,c))&&(s=o(y,s,m),null===d?u=y:d.sibling=y,d=y);return ra&&Kr(r,m),u}for(v=i(r,v);!y.done;m++,y=l.next())null!==(y=f(v,r,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(r,e)})),ra&&Kr(r,m),u}return function e(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===M&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===M){if(7===u.tag){n(i,u.sibling),(a=r(u,o.props.children)).return=i,i=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Za(c)===u.type){n(i,u.sibling),(a=r(u,o.props)).ref=qa(i,u,o),a.return=i,i=a;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===M?((a=Ic(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Dc(o.type,o.key,o.props,null,i.mode,l)).ref=qa(i,a,o),l.return=i,i=l)}return s(i);case _:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Bc(o,i.mode,l)).return=i,i=a}return s(i);case R:return e(i,a,(u=o._init)(o._payload),l)}if(te(o))return v(i,a,o,l);if(D(o))return m(i,a,o,l);Xa(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=zc(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var Ja=Ya(!0),Qa=Ya(!1),Ka={},$a=Sr(Ka),eo=Sr(Ka),to=Sr(Ka);function no(e){if(e===Ka)throw Error(a(174));return e}function io(e,t){switch(Cr(to,t),Cr(eo,e),Cr($a,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er($a),Cr($a,t)}function ro(){Er($a),Er(eo),Er(to)}function ao(e){no(to.current);var t=no($a.current),n=le(t,e.type);t!==n&&(Cr(eo,e),Cr($a,n))}function oo(e){eo.current===e&&(Er($a),Er(eo))}var so=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,vo=null,mo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function _o(){throw Error(a(321))}function Mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(fo=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(i,r),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=cs,e=n(i,r)}while(bo)}if(ho.current=os,t=null!==mo&&null!==mo.next,fo=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Lo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((fo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=i):c=c.next=h,vo.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==o);null===c?s=i:c.next=l,si(i,t.memoizedState)||(xs=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,vo.lanes|=o,jl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);si(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Oo(){}function Ro(e,t){var n=vo,i=To(),r=t(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,xs=!0),i=i.queue,Vo(Do.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Bo(9,ko.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&fo)||No(n,t,r)}return r}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,i){t.value=n,t.getSnapshot=i,Io(t)&&jo(e)}function Do(e,t,n){return n((function(){Io(t)&&jo(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function jo(e){var t=Aa(e,1);null!==t&&ic(t,e,1,-1)}function zo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Fo(){return To().memoizedState}function Uo(e,t,n,i){var r=Co();vo.flags|=e,r.memoizedState=Bo(1|t,n,void 0,void 0===i?null:i)}function Ho(e,t,n,i){var r=To();i=void 0===i?null:i;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==i&&Mo(i,o.deps))return void(r.memoizedState=Bo(t,n,a,i))}vo.flags|=e,r.memoizedState=Bo(1|t,n,a,i)}function Go(e,t){return Uo(8390656,8,e,t)}function Vo(e,t){return Ho(2048,8,e,t)}function Wo(e,t){return Ho(4,2,e,t)}function qo(e,t){return Ho(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Xo.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Mo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Mo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(si(n,t)||(n=vt(),vo.lanes|=n,jl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=po.transition;po.transition={};try{e(!1),t()}finally{bt=n,po.transition=i}}function es(){return To().memoizedState}function ts(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))rs(t,n);else if(null!==(n=La(e,t,n,i))){ic(n,e,i,tc()),as(n,t,i)}}function ns(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))rs(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ta(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=La(e,t,r,i))&&(ic(n,e,i,r=tc()),as(n,t,i))}}function is(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function rs(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Co();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ts.bind(null,vo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:zo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=$o.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=vo,r=Co();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&fo)||No(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Go(Do.bind(null,i,o,e),[e]),i.flags|=2048,Bo(9,ko.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Pl.identifierPrefix;if(ra){var n=Qr;t=":"+t+"R"+(n=(Jr&~(1<<32-ot(Jr)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Vo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Ao,useRef:Fo,useState:function(){return Ao(Lo)},useDebugValue:Yo,useDeferredValue:function(e){return Ko(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Lo)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Vo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Po,useRef:Fo,useState:function(){return Po(Lo)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Ko(t,mo.memoizedState,e)},useTransition:function(){return[Po(Lo)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",i=t;do{n+=U(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,ql=i),hs(0,t)},n}function vs(e,t,n){(n=Na(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ps;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,ka(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,i){t.child=null===e?Qa(t,null,n,i):Ja(t,e.child,n,i)}function _s(e,t,n,i,r){n=n.render;var a=t.ref;return Sa(t,r),i=So(e,t,n,i,a,r),n=Eo(),null===e||xs?(ra&&n&&ea(t),t.flags|=1,ws(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function Ms(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Nc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ws(e,t,r)}return t.flags|=1,(e=kc(a,i)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(li(a,i)&&e.ref===t.ref){if(xs=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Ws(e,t,r);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,i,r)}function Es(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(kl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(kl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Cr(kl,Nl),Nl|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,Cr(kl,Nl),Nl|=i;return ws(e,t,r,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,i,r){var a=Rr(n)?Pr:Lr.current;return a=Or(t,a),Sa(t,r),n=So(e,t,n,i,a,r),i=Eo(),null===e||xs?(ra&&i&&ea(t),t.flags|=1,ws(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function Ls(e,t,n,i,r){if(Rr(n)){var a=!0;Ir(t)}else a=!1;if(Sa(t,r),null===t.stateNode)Vs(e,t),Ga(t,n,i),Wa(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Or(t,c=Rr(n)?Pr:Lr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Va(t,o,i,c),Pa=!1;var h=t.memoizedState;o.state=h,ja(t,i,o,r),l=t.memoizedState,s!==i||h!==l||Ar.current||Pa?("function"===typeof u&&(Fa(t,n,u,i),l=t.memoizedState),(s=Pa||Ha(t,n,s,i,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Or(t,l=Rr(n)?Pr:Lr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Va(t,o,i,l),Pa=!1,h=t.memoizedState,o.state=h,ja(t,i,o,r);var f=t.memoizedState;s!==d||h!==f||Ar.current||Pa?("function"===typeof p&&(Fa(t,n,p,i),f=t.memoizedState),(c=Pa||Ha(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return As(e,t,n,i,a,r)}function As(e,t,n,i,r,a){Cs(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&jr(t,n,!1),Ws(e,t,a);i=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):ws(e,t,s,a),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?kr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&kr(0,t.context,!1),io(e,t.containerInfo)}function Os(e,t,n,i,r){return pa(),fa(r),t.flags|=256,ws(e,t,n,i),t.child}var Rs,Ns,ks,Ds,Is={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var i,r=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Cr(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,r,0,null),e=Ic(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Is,e):Bs(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,i=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=jc({mode:"visible",children:i.children},r,0,null),(o=Ic(o,r,s,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Is,o);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fs(e,t,s,i=ds(o=Error(a(419)),i,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(i=Pl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Aa(e,r),ic(i,e,r,-1))}return mc(),Fs(e,t,s,i=ds(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ia=cr(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(Xr[Zr++]=Jr,Xr[Zr++]=Qr,Xr[Zr++]=Yr,Jr=e.id,Qr=e.overflow,Yr=t),t=Bs(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(s){s=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=kc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=kc(i,s):(s=Ic(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Is,r}return e=(s=e.child).sibling,r=kc(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,i){return null!==i&&fa(i),Ja(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ma(e.return,t,n)}function Hs(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Gs(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(ws(e,t,i.children,n),0!==(2&(i=so.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(so,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Hs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Hs(t,!0,n,null,a);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=kc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=kc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Zs(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Rr(t.type)&&Nr(),Xs(t),null;case 3:return i=t.stateNode,ro(),Er(Ar),Er(Lr),uo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ns(e,t),Xs(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)ks(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Xs(t),null}if(e=no($a.current),da(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[hr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Bi(Di[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":J(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":re(i,o),Bi("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ki(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ki(i.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":q(i),$(i,o,!0);break;case"textarea":q(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),r=i;break;case"iframe":case"object":case"embed":Bi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Bi(Di[r],e);r=i;break;case"source":Bi("error",e),r=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),r=i;break;case"details":Bi("toggle",e),r=i;break;case"input":J(e,i),r=Y(e,i),Bi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Bi("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Bi("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),$(e,i,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),da(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(o=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Ki(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ki(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Xs(t),null;case 13:if(Er(so),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hr]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return ro(),Ns(e,t),null===e&&Hi(t.stateNode.containerInfo),Xs(t),null;case 10:return _a(t.type._context),Xs(t),null;case 19:if(Er(so),null===(o=t.memoizedState))return Xs(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)qs(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Gl&&(t.flags|=128,i=!0,qs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ra)return Xs(t),null}else 2*Qe()-o.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,i=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Cr(so,i?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Rr(t.type)&&Nr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Er(Ar),Er(Lr),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Er(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(so),null;case 4:return ro(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},ks=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ds=function(e,t,n,i){n!==i&&(t.flags|=4)};var Js=!1,Qs=!1,Ks="function"===typeof WeakSet?WeakSet:Set,$s=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Ec(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&tl(t,n,a)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[vr],delete t[mr],delete t[gr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Qs||el(n,t);case 6:var i=dl,r=hl;dl=null,pl(e,t,n),hl=r,null!==(dl=i)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!Qs&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Ec(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(i=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=i):pl(e,t,n);break;default:pl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));fl(o,s,r),dl=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){Ec(e,e.return,m)}try{il(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Ec(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(r,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):b(r,d,h,u)}switch(l){case"input":K(r,o);break;case"textarea":ae(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qe())),4&i&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||d,ml(t,e),Qs=u):ml(t,e),yl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(f=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){i=p,n=p.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,$s=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&i&&vl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$s=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==$s;){var r=$s,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Js;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Js;var c=Qs;if(Js=o,(Qs=l)&&!c)for($s=r;null!==$s;)l=(o=$s).child,22===o.tag&&null!==o.memoizedState?Ml(r):null!==l?(l.return=o,$s=l):Ml(r);for(;null!==a;)$s=a,xl(a,t,n),a=a.sibling;$s=r,Js=s,Qs=c}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,$s=a):wl(e)}}function wl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qs)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&za(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&al(t)}catch(p){Ec(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function _l(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Ml(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ec(t,r,l)}}var a=t.return;try{al(t)}catch(l){Ec(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Ll=x.ReactCurrentBatchConfig,Al=0,Pl=null,Ol=null,Rl=0,Nl=0,kl=Sr(0),Dl=0,Il=null,jl=0,zl=0,Bl=0,Fl=null,Ul=null,Hl=0,Gl=1/0,Vl=null,Wl=!1,ql=null,Xl=null,Zl=!1,Yl=null,Jl=0,Ql=0,Kl=null,$l=-1,ec=0;function tc(){return 0!==(6&Al)?Qe():-1!==$l?$l:$l=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ic(e,t,n,i){if(50<Ql)throw Ql=0,Kl=null,Error(a(185));gt(e,n,i),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(zl|=n),4===Dl&&lc(e,Rl)),rc(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Gl=Qe()+500,Br&&Hr()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=ht(e,e===Pl?Rl:0);if(0===i)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Br=!0,Ur(e)}(cc.bind(null,e)):Ur(cc.bind(null,e)),or((function(){0===(6&Al)&&Hr()})),n=null;else{switch(xt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($l=-1,ec=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(Mc()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Al;Al|=2;var o=vc();for(Pl===e&&Rl===t||(Vl=null,Gl=Qe()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}wa(),Cl.current=o,Al=r,null!==Ol?t=0:(Pl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=Il,pc(e,0),lc(e,i),rc(e,Qe()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(o=ft(e))&&(i=o,t=oc(e,o))),1===t))throw n=Il,pc(e,0),lc(e,i),rc(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Ul,Vl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Hl+500-Qe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_c.bind(null,e,Ul,Vl),t);break}_c(e,Ul,Vl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-ot(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=ir(_c.bind(null,e,Ul,Vl),i);break}_c(e,Ul,Vl);break;default:throw Error(a(329))}}}return rc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Bl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Al))throw Error(a(327));Mc();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Il,pc(e,0),lc(e,t),rc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Vl),rc(e,Qe()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Gl=Qe()+500,Br&&Hr())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Mc();var t=Al;Al|=1;var n=Ll.transition,i=bt;try{if(Ll.transition=null,bt=1,e)return e()}finally{bt=i,Ll.transition=n,0===(6&(Al=t))&&Hr()}}function hc(){Nl=kl.current,Er(kl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Nr();break;case 3:ro(),Er(Ar),Er(Lr),uo();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Er(so);break;case 10:_a(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Ol=e=kc(e.current,null),Rl=Nl=t,Dl=0,Il=null,Bl=zl=jl=0,Ul=Fl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(i=(n=Ca[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}Ca=null}return e}function fc(e,t){for(;;){var n=Ol;try{if(wa(),ho.current=os,yo){for(var i=vo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}yo=!1}if(fo=0,go=mo=vo=null,bo=!1,xo=0,Tl.current=null,null===n||null===n.return){Dl=1,Il=t,Ol=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&ms(o,u,t),c=u;var v=(t=f).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,u,t),mc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),fa(us(c,l));break e}}o=c=us(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[o]:Fl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,fs(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,vs(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(x){t=x,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function vc(){var e=Cl.current;return Cl.current=os,null===e?os:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&jl)&&0===(268435455&zl)||lc(Pl,Rl)}function gc(e,t){var n=Al;Al|=2;var i=vc();for(Pl===e&&Rl===t||(Vl=null,pc(e,t));;)try{yc();break}catch(r){fc(e,r)}if(wa(),Al=n,Cl.current=i,null!==Ol)throw Error(a(261));return Pl=null,Rl=0,Dl}function yc(){for(;null!==Ol;)xc(Ol)}function bc(){for(;null!==Ol&&!Ye();)xc(Ol)}function xc(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ol=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Zs(n,t,Nl)))return void(Ol=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Dl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,n){var i=bt,r=Ll.transition;try{Ll.transition=null,bt=1,function(e,t,n,i){do{Mc()}while(null!==Yl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===Pl&&(Ol=Pl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Pc(tt,(function(){return Mc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ll.transition,Ll.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(er=Vt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=s+r),h!==o||0!==i&&3!==h.nodeType||(c=s+i),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=s),p===o&&++d===i&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Vt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=nl,nl=!1}(e,n),gl(n,e),fi(tr),Vt=!!er,tr=er=null,e.current=n,bl(n,e,r),Je(),Al=l,bt=s,Ll.transition=o}else e.current=n;if(Zl&&(Zl=!1,Yl=e,Jl=r),o=e.pendingLanes,0===o&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Jl)&&0!==e.tag&&Mc(),o=e.pendingLanes,0!==(1&o)?e===Kl?Ql++:(Ql=0,Kl=e):Ql=0,Hr()}(e,t,n,i)}finally{Ll.transition=r,bt=i}return null}function Mc(){if(null!==Yl){var e=xt(Jl),t=Ll.transition,n=bt;try{if(Ll.transition=null,bt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Al))throw Error(a(331));var r=Al;for(Al|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:il(8,d,o)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var p=(d=$s).sibling,f=d.return;if(ol(d),d===u){$s=null;break}if(null!==p){p.return=f,$s=p;break}$s=f}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===s){$s=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$s=w;break e}$s=l.return}}if(Al=r,Hr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(_){}i=!0}return i}finally{bt=n,Ll.transition=t}}return!1}function Sc(e,t,n){e=ka(e,t=fs(0,t=us(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=ka(t,e=vs(t,e=us(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Qe()-Hl?pc(e,0):Bl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Aa(e,t))&&(gt(e,t,n),rc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Tc(e,n)}function Pc(e,t){return Xe(e,t)}function Oc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Oc(e,t,n,i)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function kc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)Nc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case M:return Ic(n.children,r,o,t);case S:s=8,r|=8;break;case E:return(e=Rc(12,n,t,2|r)).elementType=E,e.lanes=o,e;case A:return(e=Rc(13,n,t,r)).elementType=A,e.lanes=o,e;case P:return(e=Rc(19,n,t,r)).elementType=P,e.lanes=o,e;case N:return jc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case L:s=11;break e;case O:s=14;break e;case R:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Ic(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function jc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,a,o,s,l){return e=new Fc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Hc(e){if(!e)return Tr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Rr(n))return Dr(e,n,t)}return t}function Gc(e,t,n,i,r,a,o,s,l){return(e=Uc(n,i,!0,e,0,a,0,s,l)).context=Hc(null),n=e.current,(a=Na(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,ka(n,a,r),e.current.lanes=r,gt(e,r,i),rc(e,i),e}function Vc(e,t,n,i){var r=t.current,a=tc(),o=nc(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=ka(r,t,o))&&(ic(e,r,o,a),Da(e,r,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),pa();break;case 5:ao(t);break;case 1:Rr(t.type)&&Ir(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ga,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Cr(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Cr(so,1&so.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Gs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(so,so.current),i)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ws(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ra&&0!==(1048576&t.flags)&&$r(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Vs(e,t),e=t.pendingProps;var r=Or(t,Lr.current);Sa(t,n),r=So(null,t,i,e,r,n);var o=Eo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(o=!0,Ir(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oa(t),r.updater=Ua,t.stateNode=r,r._reactInternals=t,Wa(t,i,e,n),t=As(null,t,i,!0,o,n)):(t.tag=0,ra&&o&&ea(t),ws(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===L)return 11;if(e===O)return 14}return 2}(i),e=ma(i,e),r){case 0:t=Ts(null,t,i,e,n);break e;case 1:t=Ls(null,t,i,e,n);break e;case 11:t=_s(null,t,i,e,n);break e;case 14:t=Ms(null,t,i,ma(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ts(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ls(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ra(e,t),ja(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Os(e,t,i,n,r=us(Error(a(423)),t));break e}if(i!==r){t=Os(e,t,i,n,r=us(Error(a(424)),t));break e}for(ia=cr(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=Qa(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),i===r){t=Ws(e,t,n);break e}ws(e,t,i,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return zs(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ja(t,null,i,n):ws(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_s(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,Cr(ga,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Ar.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Na(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ma(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ma(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Sa(t,n),i=i(r=Ea(r)),t.flags|=1,ws(e,t,i,n),t.child;case 14:return r=ma(i=t.type,t.pendingProps),Ms(e,t,i,r=ma(i.type,r),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),Vs(e,t),t.tag=1,Rr(i)?(e=!0,Ir(t)):e=!1,Sa(t,n),Ga(t,i,r),Wa(t,i,r,n),As(null,t,i,!0,e,n);case 19:return Gs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}Vc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}var o=Gc(t,i,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[fr]=o.current,Hi(8===e.nodeType?e.parentNode:e),dc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Wc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fr]=l.current,Hi(8===e.nodeType?e.parentNode:e),dc((function(){Vc(t,l,n,i)})),l}(n,t,e,r,i);return Wc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Vc(null,e,null,null)})),t[fr]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Al)&&(Gl=Qe()+500,Hr()))}break;case 13:dc((function(){var t=Aa(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Xc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)ic(t,e,134217728,tc());Xc(e,134217728)}},Mt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)ic(n,e,t,tc());Xc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(a(90));X(i),K(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Le=uc,Ae=dc;var tu={usingClientEntryPoint:!1,Events:[br,xr,wr,Ce,Te,uc]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var n=!1,i="",r=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Kc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,r,0,o,s),e[fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Jc(t)},t.render=function(e,t,n){if(!Kc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Kc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var i=n(164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var i=n(791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,a={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,v(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,M={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:M.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===a?"."+L(l,0):a,w(o)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+L(s=e[c],c);l+=A(s,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,r,u=a+L(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},k={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:M};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=M.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,x(e),!v)if(null!==i(c))v=!0,N(_);else{var t=i(u);null!==t&&k(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(C),C=-1),f=!0;var a=p;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&k(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,E=null,C=-1,T=5,L=-1;function A(){return!(t.unstable_now()-L<T)}function P(){if(null!==E){var e=t.unstable_now();L=e;var n=!0;try{n=E(!0,e)}finally{n?M():(S=!1,E=null)}}else S=!1}if("function"===typeof b)M=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,M=function(){R.postMessage(null)}}else M=function(){g(P,0)};function N(e){E=e,S||(S=!0,M())}function k(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(m?(y(C),C=-1):m=!0,k(w,a-o))):(e.sortIndex=s,n(c,e),v||f||(v=!0,N(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".70079b53.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="editor:";n.l=function(i,r,a,o){if(e[i])e[i].push(r);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=i),e[i]=[r];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,i){var r,a,o=i[0],s=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkeditor=self.webpackChunkeditor||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){var e=n(791),t=n(250);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=d();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}var f,v=n(184),m=[{value:"Select",href:"#transform-tool"},{value:"Pan",href:"#pan-tool"},{value:"Spline",href:"#cubic-bezier-spline"},{value:"Freehand",href:"#freehand-tool"},{value:"Rectangle",href:"#object-rect"},{value:"Ellipse",href:"#object-ellipse"},{value:"Triangle",href:"#object-triangle"},{value:"Line",href:"#object-line"},{value:"OtherShape",href:"#o-1"},{value:"Text",href:"#text-tool"},{value:"View",href:"#view-tool"}],g=[[{href:"#o-1",d:"M 8.5 4.095 C 12.004 -5.959 25.735 4.095 8.5 17.021 C -8.736 4.095 4.995 -5.959 8.5 4.095 Z"},{href:"#o-2",d:"M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 10.754 0 12.916 0.896 14.51 2.49 C 16.104 4.084 17 6.246 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z M 4.25 8.5 C 4.25 10.847 6.153 12.75 8.5 12.75 C 10.847 12.75 12.75 10.847 12.75 8.5 C 12.75 6.153 10.847 4.25 8.5 4.25 C 6.153 4.25 4.25 6.153 4.25 8.5 Z"},{href:"#o-3",d:"M 0 6.168 L 6.494 6.168 L 8.5 0 L 10.507 6.168 L 17 6.168 L 11.747 9.981 L 13.754 16.15 L 8.5 12.337 L 3.247 16.15 L 5.254 9.981 L 0 6.168 Z"},{href:"#o-4",d:"M 3.893 12.207 C 6.964 14.316 10.032 14.316 13.096 12.207 M 4.891 5.958 C 4.891 5.469 5.288 5.072 5.777 5.072 C 6.266 5.072 6.662 5.469 6.662 5.958 C 6.662 6.447 6.266 6.843 5.777 6.843 C 5.288 6.843 4.891 6.447 4.891 5.958 M 10.338 5.958 C 10.338 5.469 10.734 5.072 11.223 5.072 C 11.712 5.072 12.109 5.469 12.109 5.958 C 12.109 6.447 11.712 6.843 11.223 6.843 C 10.734 6.843 10.338 6.447 10.338 5.958 M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 13.194 0 17 3.806 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z M 0 8.5 C 0 3.806 3.806 0 8.5 0 C 13.194 0 17 3.806 17 8.5 C 17 13.194 13.194 17 8.5 17 C 3.806 17 0 13.194 0 8.5 Z"}],[{href:"#o-5",d:"M 0 7.685 L 17 7.685 M 8.539 14.982 L 16.845 23.132 M 8.539 14.904 L 0.776 23.132 M 8.5 5.201 L 8.5 14.904 M 11.08 2.58 C 11.08 4.006 9.925 5.161 8.5 5.161 C 7.075 5.161 5.92 4.006 5.92 2.58 C 5.92 1.155 7.075 0 8.5 0 C 9.925 0 11.08 1.155 11.08 2.58 Z"},{href:"#o-6",d:"M 0 1.995 C 0 0.893 0.872 0 1.948 0 L 2.833 0 L 7.083 0 L 15.052 0 C 15.569 0 16.064 0.21 16.429 0.584 C 16.795 0.958 17 1.466 17 1.995 L 17 6.981 L 17 9.973 C 17 11.075 16.128 11.968 15.052 11.968 L 7.083 11.968 L 1.531 17.04 L 2.833 11.968 L 1.948 11.968 C 0.872 11.968 0 11.075 0 9.973 L 0 6.981 L 0 1.995 Z"},{href:"#o-7",d:"M 10.323 0 C 10.286 0.002 10.251 0.005 10.214 0.008 C 9.624 0.067 9.104 0.441 8.839 0.999 L 8.699 1.421 C 8.729 1.275 8.776 1.133 8.839 0.999 C 8.367 0.511 7.706 0.285 7.051 0.391 C 6.397 0.497 5.829 0.921 5.519 1.536 C 4.643 0.996 3.55 1.029 2.705 1.621 C 1.86 2.214 1.41 3.262 1.546 4.32 L 1.636 4.75 C 1.596 4.609 1.565 4.466 1.546 4.32 L 1.533 4.36 C 0.798 4.44 0.196 5.01 0.039 5.773 C -0.117 6.536 0.208 7.318 0.845 7.713 L 1.84 7.954 C 1.493 7.983 1.146 7.899 0.845 7.713 C 0.354 8.263 0.241 9.078 0.565 9.752 C 0.889 10.425 1.582 10.813 2.296 10.725 L 2.73 10.61 C 2.591 10.668 2.446 10.706 2.296 10.725 C 2.702 11.471 3.374 12.016 4.164 12.233 C 4.953 12.449 5.791 12.321 6.491 11.878 C 7.061 12.777 8.073 13.25 9.088 13.091 C 10.103 12.931 10.941 12.168 11.238 11.133 L 11.341 10.554 C 11.326 10.751 11.292 10.944 11.238 11.133 C 11.936 11.591 12.815 11.616 13.536 11.2 C 14.257 10.784 14.708 9.99 14.714 9.126 L 14.455 7.834 L 13.437 6.96 C 14.224 7.453 14.721 8.205 14.714 9.126 C 15.651 9.135 16.447 8.333 16.804 7.411 C 17.161 6.49 17.026 5.44 16.449 4.651 C 16.688 4.064 16.674 3.396 16.41 2.82 C 16.146 2.245 15.66 1.817 15.074 1.649 C 14.943 0.886 14.403 0.273 13.69 0.072 C 12.976 -0.129 12.216 0.119 11.739 0.71 L 11.448 1.199 C 11.523 1.022 11.619 0.857 11.739 0.71 C 11.402 0.245 10.874 -0.017 10.323 0 Z"},{href:"#o-8",d:"M 0.017 8.165 C -0.018 6.777 0.669 5.413 1.826 4.637 C 3.711 3.205 6.199 2.552 8.537 2.946 C 9.695 2.768 10.208 3.97 9.8 4.896 C 9.171 5.511 8.075 4.926 7.26 5.244 C 4.616 5.585 2.006 6.734 0.219 8.754 C 0.208 8.538 -0.069 8.394 0.017 8.165 Z M 0.049 9.396 C 0.19 8.417 1.166 7.907 1.845 7.313 C 4.13 5.695 6.995 5.054 9.766 5.162 C 9.835 6.278 9.31 7.342 8.678 8.226 C 7.811 8.71 6.732 8.159 5.813 8.599 C 4.201 8.99 2.406 9.481 1.374 10.887 C 0.999 12.016 0.207 10.867 0.145 10.202 C 0.058 9.938 0.07 9.667 0.049 9.396 Z M 0.492 6.049 C 0.63 4.82 1.439 3.805 2.182 2.869 C 3.019 1.871 4.159 1.14 5.44 0.872 C 6.455 0.607 7.501 0.496 8.542 0.385 C 9.331 0.991 9.833 2.046 9.701 3.043 C 9.088 3.198 8.004 2.673 7.177 2.801 C 4.833 2.823 2.436 3.763 0.852 5.516 C 0.72 5.685 0.601 5.864 0.492 6.049 Z M 0.366 10.894 C 1.243 11.597 1.271 12.816 1.81 13.733 C 1.164 12.901 0.596 11.93 0.366 10.894 Z M 1.06 11.564 C 1.335 10.806 2.197 9.741 2.917 9.82 C 3.204 10.561 3.329 11.364 3.796 12.031 C 5.051 14.335 7.347 16.328 10.078 16.39 C 10.524 16.481 11.708 16.18 11.66 16.305 C 10.518 16.865 9.197 16.988 7.94 16.943 C 5.605 16.788 3.279 15.666 1.876 13.769 C 1.478 13.087 1.252 12.324 1.06 11.564 Z M 2.982 9.632 C 3.612 9.339 4.793 8.447 5.266 9.166 C 6.421 11.442 8.375 13.377 10.78 14.287 C 12.028 14.703 13.433 14.696 14.65 14.177 C 14.143 14.965 13.302 15.471 12.51 15.935 C 10.487 16.799 8.04 16.331 6.335 14.984 C 4.684 13.677 3.389 11.807 2.986 9.721 L 2.984 9.673 L 2.982 9.632 Z M 3.826 1.437 C 5.358 0.384 7.256 -0.11 9.108 0.021 C 8.16 0.626 6.971 0.396 5.932 0.724 C 5.207 0.881 4.487 1.094 3.826 1.437 Z M 5.149 8.861 C 6.157 8.383 7.305 8.391 8.395 8.456 C 9.052 9.48 9.521 10.669 10.541 11.407 C 11.73 12.469 13.46 12.768 14.958 12.27 C 15.472 11.922 16.044 12.144 15.763 12.833 C 15.424 13.978 14.224 14.481 13.123 14.536 C 10.872 14.761 8.812 13.482 7.291 11.937 C 6.404 11.049 5.654 10.013 5.149 8.861 Z M 8.569 0.349 C 9.39 -0.302 10.507 0.287 11.347 0.599 C 12.182 1.313 12.294 2.502 12.515 3.517 C 12.884 5.9 12.734 8.459 11.62 10.634 C 11.354 11.397 10.588 11.81 10.098 10.986 C 9.527 10.357 9.091 9.625 8.68 8.889 C 8.437 8.184 9.233 7.687 9.4 7.042 C 9.725 6.4 9.808 5.677 9.844 4.974 C 9.997 3.922 9.847 2.831 9.57 1.812 C 9.376 1.248 9.061 0.702 8.569 0.349 Z M 10.928 11.602 C 12.543 9.777 12.799 7.186 12.678 4.853 C 12.603 3.477 12.394 2.055 11.669 0.857 C 12.419 0.881 13.225 1.585 13.812 2.103 C 15.477 4.22 15.966 7.316 14.701 9.748 C 14.203 10.731 13.529 11.619 12.737 12.384 C 12.074 12.33 11.403 12.079 10.928 11.602 Z M 12.77 12.395 C 14.509 10.718 15.769 8.308 15.393 5.837 C 15.244 4.68 14.821 3.562 14.188 2.583 C 15.347 3.305 15.992 4.584 16.571 5.772 C 17.405 7.849 16.952 10.381 15.463 12.041 C 14.698 12.475 13.619 12.541 12.77 12.395 Z M 15.634 12.007 C 16.231 10.964 16.908 9.907 16.97 8.671 C 17.063 8.257 16.919 9.482 16.869 9.74 C 16.71 10.65 16.503 11.621 15.939 12.364 C 15.809 12.292 15.867 11.941 15.634 12.007 Z"}],[{href:"#o-9",d:"M 4.862 13.912 C 5.376 12.596 6.777 11.82 8.137 11.721 C 8.137 11.441 8.137 11.16 8.137 10.88 C 5.954 10.723 3.794 9.805 2.343 8.128 C 1.017 6.705 0.315 4.79 0.218 2.86 C -0.548 2.314 0.935 1.917 1.115 2.521 C 0.702 3.022 1.102 3.809 1.161 4.423 C 1.815 7.324 4.375 9.643 7.304 10.055 C 8.053 10.387 8.252 9.941 8.124 9.257 C 8.284 8.717 7.7 8.881 7.351 8.78 C 5.041 8.375 3.035 6.577 2.443 4.292 C 2.273 3.638 2.218 2.917 2.011 2.382 C 2.45 2.038 3.504 2.29 2.922 2.903 C 2.984 5.5 5.139 7.791 7.689 8.118 C 8.216 8.375 8.156 7.934 8.137 7.581 C 8.416 6.723 7.583 6.852 7.023 6.641 C 5.449 6.106 4.295 4.569 4.186 2.907 C 3.432 2.251 5.083 1.908 5.095 2.591 C 4.662 3.095 5.15 3.914 5.411 4.452 C 5.999 5.412 7.02 6.06 8.137 6.189 C 8.137 5.76 8.137 5.331 8.137 4.903 C 7.099 4.742 6.27 3.836 6.153 2.795 C 5.446 2.22 6.984 1.942 7.095 2.494 C 6.711 2.795 7 3.277 7.225 3.604 C 7.386 3.796 8.183 4.468 8.137 3.962 C 8.137 3.39 8.137 2.818 8.137 2.247 C 7.651 1.938 8.32 1.732 8.028 1.368 C 8.196 0.99 8.272 0.012 8.398 0 C 8.82 0.601 8.662 1.435 9.06 1.958 C 8.841 2.194 8.802 2.456 8.84 2.806 C 8.84 3.266 8.84 3.725 8.84 4.184 C 9.469 3.999 10.038 3.476 10.078 2.789 C 9.359 1.945 11.827 2.132 10.803 2.88 C 10.696 3.898 9.829 4.736 8.84 4.908 C 8.84 5.335 8.84 5.762 8.84 6.189 C 10.532 6.019 12.024 4.527 12.054 2.799 C 11.35 2.021 13.645 2.073 12.859 2.769 C 12.679 3.613 12.504 4.51 11.931 5.199 C 11.207 6.178 10.047 6.759 8.854 6.896 C 8.863 7.417 8.588 8.518 9.488 8.079 C 11.729 7.698 13.634 5.82 13.976 3.552 C 14.303 3.048 13.48 2.127 14.448 2.254 C 15.047 2.114 15.131 2.616 14.783 2.922 C 14.666 4.968 13.534 6.938 11.757 7.972 C 10.872 8.492 9.867 8.82 8.84 8.875 C 8.85 9.305 8.813 9.74 8.875 10.164 C 10.888 10.004 12.869 9.133 14.182 7.561 C 15.351 6.248 15.954 4.516 16.054 2.774 C 15.459 2.201 16.703 2.112 17 2.372 C 16.665 3.037 16.702 3.914 16.48 4.682 C 15.757 7.707 13.151 10.144 10.105 10.695 C 9.688 10.785 9.263 10.83 8.84 10.883 C 8.8 11.402 8.811 11.929 9.501 11.83 C 10.675 12.077 11.801 12.887 12.176 14.064 C 9.72 14.064 7.265 14.064 4.809 14.064 C 4.827 14.013 4.844 13.963 4.862 13.912 L 4.862 13.912 Z M 0.138 2.024 C 0.107 1.562 0.385 0.575 0.461 0.461 C 0.59 0.884 1.178 1.816 0.73 2.091 C 0.543 2.069 0.272 2.181 0.138 2.024 Z M 2.106 2.056 C 2.008 1.485 2.417 0.949 2.363 0.36 C 2.546 0.841 3.296 2.04 2.475 2.094 C 2.352 2.089 2.225 2.096 2.106 2.056 Z M 4.136 2.046 C 4.049 1.486 4.433 0.956 4.399 0.378 C 4.626 0.863 5.391 2.242 4.352 2.092 L 4.243 2.085 L 4.136 2.046 Z M 6.108 2.061 C 5.997 1.49 6.416 0.951 6.361 0.36 C 6.548 0.844 7.29 2.033 6.475 2.106 C 6.352 2.101 6.225 2.107 6.108 2.061 Z M 10.053 2.039 C 9.964 1.465 10.356 0.922 10.301 0.326 C 10.455 0.616 10.661 1.109 10.752 1.495 C 11.024 2.124 10.527 2.209 10.053 2.039 Z M 12.088 2.064 C 11.923 1.508 12.39 0.95 12.32 0.36 C 12.515 0.834 13.027 1.68 12.693 2.089 C 12.491 2.09 12.286 2.113 12.088 2.064 Z M 14.075 2.053 C 13.948 1.589 14.323 0.638 14.364 0.443 C 14.564 0.922 15.306 2.357 14.205 2.092 L 14.075 2.053 Z M 16.076 2.044 C 15.967 1.535 16.372 0.802 16.351 0.408 C 16.549 0.865 17.319 2.249 16.297 2.095 L 16.189 2.086 L 16.076 2.044 Z"},{href:"#o-10",d:"M 14.059 8.44 C 14.059 11.361 11.533 13.729 8.417 13.729 C 5.301 13.729 2.775 11.361 2.775 8.44 C 2.775 5.519 5.301 3.15 8.417 3.15 C 11.533 3.15 14.059 5.519 14.059 8.44 Z M 13.601 15.997 C 13.337 16.326 10.396 13.033 10.009 13.195 C 9.622 13.357 9.037 18.618 8.628 18.678 C 8.218 18.738 7.514 13.344 7.115 13.215 C 6.716 13.086 4.406 16.333 4.059 16.089 C 3.713 15.845 4.882 11.882 4.689 11.468 C 4.497 11.053 0.092 10.858 0.001 10.396 C -0.09 9.933 3.993 8.719 4.027 8.261 C 4.061 7.803 1.286 5.214 1.445 4.812 C 1.604 4.411 5.319 6.131 5.571 5.778 C 5.822 5.426 5.081 0.993 5.462 0.861 C 5.843 0.728 8.132 3.84 8.538 3.826 C 8.945 3.811 10.169 -0.09 10.585 0.002 C 11 0.093 10.793 4.139 11.115 4.409 C 11.436 4.679 14.617 3.396 14.853 3.764 C 15.089 4.131 13.029 7.704 13.153 8.128 C 13.277 8.551 17.051 8.956 16.999 9.394 C 16.947 9.832 12.281 10.018 12.086 10.443 C 11.892 10.867 13.865 15.667 13.601 15.997 Z"},{href:"#o-11",d:"M 10.504 5.109 L 8.569 4.766 L 9.282 4.394 C 9.674 4.189 10.03 3.991 10.072 3.953 C 10.177 3.86 8.865 1.833 8.701 1.834 C 8.628 1.835 8.124 2.62 7.581 3.579 C 7.033 4.545 6.488 5.281 6.359 5.228 C 4.828 4.61 3.579 3.984 3.579 3.836 C 3.579 3.734 4.06 2.83 4.647 1.826 L 5.714 0 L 8.623 0 L 11.533 0 L 12.292 1.201 L 13.052 2.402 L 13.844 1.996 C 14.393 1.714 14.602 1.674 14.526 1.864 C 13.851 3.54 12.843 5.494 12.664 5.475 C 12.54 5.462 11.568 5.297 10.504 5.109 Z M 1.48 12.586 C 0.744 11.318 0.084 10.131 0.014 9.948 C -0.058 9.76 0.152 9.089 0.496 8.407 L 1.106 7.199 L 0.482 6.83 C -0.347 6.34 -0.039 6.189 2.162 6.008 L 3.901 5.865 L 4.583 7.668 C 4.959 8.659 5.314 9.598 5.372 9.755 C 5.434 9.918 5.141 9.81 4.685 9.5 L 3.892 8.961 L 3.338 10.03 C 3.033 10.619 2.78 11.165 2.774 11.245 C 2.769 11.326 3.704 11.417 4.852 11.449 L 6.94 11.507 L 7.076 13.034 C 7.151 13.874 7.197 14.572 7.178 14.586 C 7.159 14.6 6.171 14.674 4.981 14.751 L 2.819 14.891 L 1.48 12.586 Z M 9.721 14.826 C 8.457 12.918 8.435 13.06 10.314 10.998 L 11.52 9.674 L 11.392 10.642 L 11.263 11.609 L 12.615 11.609 C 13.358 11.609 13.966 11.55 13.966 11.477 C 13.966 11.404 13.554 10.588 13.05 9.663 C 12.546 8.739 12.135 7.905 12.138 7.81 C 12.143 7.597 14.785 5.843 14.911 5.968 C 14.961 6.018 15.451 6.904 16.001 7.938 L 17 9.818 L 15.655 11.986 C 14.916 13.179 14.205 14.271 14.076 14.413 C 13.948 14.556 13.227 14.729 12.475 14.8 C 11.04 14.934 11.079 14.901 10.868 16.127 C 10.832 16.341 10.402 15.855 9.721 14.826 Z"},{href:"#o-12",d:"M 8.544 0 C 8.366 0 8.208 0.073 8.074 0.206 C 7.94 0.338 7.83 0.528 7.738 0.765 C 7.554 1.239 7.441 1.904 7.379 2.702 C 7.318 3.498 7.307 4.424 7.333 5.416 C 5.134 6.318 0.675 8.18 0.317 8.596 C -0.16 9.15 -0.006 9.784 0.186 10.206 L 7.517 8.714 C 7.672 10.658 7.892 12.584 8.084 14.093 C 7.367 14.303 6.029 14.717 5.753 14.974 C 5.372 15.328 5.372 16.471 5.372 16.471 L 8.373 16.227 C 8.444 16.72 8.488 17.007 8.488 17.007 L 8.492 17.033 L 8.516 17.033 L 8.571 17.033 L 8.595 17.033 L 8.599 17.007 C 8.599 17.007 8.643 16.72 8.714 16.227 L 11.715 16.471 C 11.715 16.471 11.715 15.328 11.335 14.974 C 11.058 14.717 9.719 14.302 9.002 14.092 C 9.194 12.588 9.414 10.669 9.569 8.731 L 16.814 10.206 C 17.006 9.784 17.161 9.15 16.684 8.596 C 16.331 8.186 11.979 6.365 9.753 5.451 C 9.78 4.446 9.77 3.507 9.707 2.702 L 9.707 2.7 C 9.646 1.903 9.532 1.238 9.349 0.765 C 9.257 0.528 9.147 0.338 9.014 0.206 C 8.88 0.073 8.722 0 8.544 0 Z"}],[{href:"#o-13",d:"M 0 0 C 0.128 1.695 0.614 3.247 1.328 4.61 L 2.656 2.538 L 2.273 2.396 L 1.741 2.208 L 2.019 1.724 L 2.993 0 L 0 0 Z M 4.079 0 L 3.117 1.7 L 3.53 1.848 L 4.091 2.048 L 3.772 2.544 L 1.859 5.537 C 3.235 7.625 5.248 9.067 7.556 9.379 L 7.556 15.489 L 3.778 15.489 L 3.778 17 L 13.222 17 L 13.222 15.489 L 9.444 15.489 L 9.444 9.379 C 13.47 8.841 16.629 4.907 17 0 L 4.079 0 Z"},{href:"#o-14",d:"M 9.138 2.865 C 9.462 2.277 10.056 1.512 9.036 1.327 C 8.751 1.181 8.467 0.923 8.183 1.211 C 7.552 1.46 7.005 1.809 7.669 2.462 C 7.963 2.883 8.231 3.803 8.565 3.905 C 8.764 3.563 8.95 3.214 9.138 2.865 Z M 7.743 4.488 C 7.163 3.453 6.696 2.343 5.987 1.389 C 5.124 0.467 3.424 0.878 3.037 2.066 C 2.524 3.241 3.631 4.644 4.885 4.497 C 5.837 4.513 6.793 4.556 7.743 4.488 Z M 12.56 4.523 C 13.792 4.357 14.501 2.805 13.8 1.775 C 13.177 0.675 11.388 0.636 10.763 1.754 C 10.222 2.658 9.752 3.602 9.256 4.53 C 10.353 4.593 11.461 4.578 12.56 4.523 Z M 14.601 5.846 C 15.022 5.476 16.649 5.04 15.417 4.689 C 15.111 4.602 14.755 4.205 14.481 4.314 C 13.885 5.055 12.969 5.489 12.012 5.444 C 11.825 5.505 10.869 5.35 11.127 5.526 C 11.802 5.911 12.46 6.329 13.158 6.671 C 13.647 6.41 14.122 6.123 14.601 5.846 Z M 4.999 6.055 C 5.358 5.846 5.718 5.637 6.077 5.427 C 4.978 5.373 3.721 5.531 2.891 4.647 C 2.657 4.385 2.432 4.085 2.108 4.415 C 1.719 4.683 0.524 4.957 1.444 5.284 C 2.245 5.757 3.041 6.242 3.862 6.681 C 4.254 6.497 4.623 6.268 4.999 6.055 Z M 10.266 8.392 C 10.732 8.017 11.86 7.661 11.898 7.259 C 10.845 6.653 9.822 5.979 8.721 5.466 C 8.342 5.323 8.034 5.544 7.729 5.736 C 6.827 6.273 5.902 6.776 5.029 7.36 C 6.171 8.066 7.327 8.751 8.493 9.415 C 9.089 9.082 9.676 8.734 10.266 8.392 Z M 14.939 9.56 C 15.423 9.255 15.906 8.95 16.389 8.645 C 16.385 7.624 16.401 6.602 16.373 5.582 C 15.398 6.126 14.437 6.697 13.491 7.292 C 13.388 8.345 13.441 9.416 13.463 10.475 C 13.962 10.181 14.448 9.866 14.939 9.56 Z M 3.606 8.916 C 3.655 8.046 3.761 7.054 2.711 6.796 C 2.048 6.487 1.13 5.694 0.619 5.702 C 0.603 6.683 0.611 7.664 0.61 8.645 C 1.589 9.256 2.551 9.897 3.551 10.473 C 3.648 9.967 3.585 9.431 3.606 8.916 Z M 10.619 12.287 C 11.198 11.921 11.777 11.556 12.356 11.19 C 12.354 10.136 12.397 9.08 12.35 8.027 C 11.713 8.209 10.985 8.773 10.314 9.124 C 9.812 9.418 9.31 9.712 8.808 10.006 C 8.818 11.132 8.781 12.26 8.844 13.384 C 9.445 13.033 10.029 12.655 10.619 12.287 Z M 8.191 11.695 C 8.191 11.132 8.191 10.569 8.191 10.006 C 7.028 9.327 5.869 8.641 4.702 7.969 C 4.637 9.046 4.674 10.126 4.664 11.205 C 5.827 11.932 6.977 12.68 8.154 13.384 C 8.2 12.823 8.183 12.258 8.191 11.695 Z M 14.968 13.958 C 15.442 13.643 15.916 13.327 16.39 13.011 C 16.37 12.011 16.439 10.997 16.339 10.008 C 15.353 10.57 14.402 11.21 13.434 11.81 C 13.458 12.845 13.387 13.892 13.494 14.919 C 13.994 14.612 14.478 14.281 14.968 13.958 Z M 3.596 13.397 C 3.592 12.873 3.588 12.348 3.584 11.824 C 2.605 11.211 1.638 10.578 0.645 9.99 C 0.583 10.995 0.618 12.003 0.609 13.01 C 1.596 13.664 2.573 14.335 3.574 14.968 C 3.612 14.446 3.593 13.921 3.596 13.397 Z M 10.644 16.844 C 11.219 16.462 11.794 16.08 12.369 15.698 C 12.368 14.633 12.39 13.567 12.361 12.502 C 11.19 13.224 10.027 13.96 8.872 14.708 C 8.742 15.736 8.827 16.797 8.826 17.837 C 9.185 18.055 10.101 17.088 10.644 16.844 Z M 8.191 16.388 C 8.121 15.654 8.49 14.62 7.556 14.335 C 6.615 13.739 5.677 13.136 4.723 12.56 C 4.584 13.568 4.73 14.619 4.623 15.639 C 5.767 16.466 6.94 17.257 8.136 18.008 C 8.231 17.481 8.172 16.924 8.191 16.388 Z M 4.19 16.194 C 2.798 15.265 1.406 14.335 0.014 13.406 C 0.015 10.538 -0.025 7.669 0.026 4.801 C 0.724 4.371 1.465 4.018 2.183 3.624 C 1.72 2.297 2.388 0.685 3.732 0.188 C 4.858 -0.274 6.216 0.143 6.934 1.116 C 7.456 0.849 7.978 0.581 8.499 0.314 C 9.024 0.584 9.548 0.854 10.073 1.124 C 10.824 0.232 12.111 -0.276 13.227 0.223 C 14.566 0.694 15.296 2.302 14.816 3.627 C 15.539 4.035 16.325 4.354 16.987 4.852 C 17.017 7.703 16.988 10.555 16.985 13.406 C 14.215 15.239 11.489 17.143 8.674 18.906 C 7.856 18.906 7.149 18.017 6.389 17.657 C 5.655 17.171 4.922 16.683 4.19 16.194 Z"},{href:"#o-15",d:"M 1.833 12.681 L 15.157 12.686 L 14.725 13.326 L 2.27 13.31 L 1.833 12.681 Z M 1.924 4.18 L 15.071 4.165 L 15.452 4.821 L 1.537 4.826 L 1.924 4.18 Z M 0.627 8.44 L 16.358 8.425 L 16.338 9.08 L 0.637 9.07 L 0.627 8.44 Z M 16.371 8.501 C 16.371 12.841 12.84 16.372 8.498 16.372 C 4.159 16.372 0.628 12.84 0.628 8.501 C 0.628 4.162 4.16 0.631 8.498 0.631 C 12.84 0.63 16.371 4.162 16.371 8.501 Z M 8.499 0 C 3.813 0 0 3.813 0 8.5 C 0 13.188 3.813 17.001 8.499 17.001 C 13.187 17.001 17 13.188 17 8.5 C 17 3.813 13.187 0 8.499 0 Z M 10.884 8.501 C 10.884 13.139 9.628 16.372 8.499 16.372 C 7.372 16.372 6.115 13.139 6.115 8.501 C 6.115 3.862 7.371 0.631 8.499 0.631 C 9.627 0.63 10.884 3.862 10.884 8.501 Z M 8.499 0 C 6.541 0 5.485 4.38 5.485 8.5 C 5.485 12.622 6.541 17.001 8.499 17.001 C 10.457 17.001 11.515 12.621 11.515 8.5 C 11.514 4.38 10.457 0 8.499 0 Z M 14.085 8.501 C 14.085 12.841 11.578 16.372 8.499 16.372 C 5.421 16.372 2.915 12.84 2.915 8.501 C 2.915 4.162 5.421 0.631 8.499 0.631 C 11.578 0.63 14.085 4.162 14.085 8.501 Z M 8.499 0 C 5.073 0 2.285 3.813 2.285 8.5 C 2.285 13.188 5.073 17.001 8.499 17.001 C 11.926 17.001 14.714 13.188 14.714 8.5 C 14.714 3.813 11.926 0 8.499 0 Z"},{href:"#o-16",d:"M 9.351 16.374 C 9.351 15.364 9.351 14.785 9.351 13.775 C 9.351 12.354 11.288 10.283 12.543 8.831 C 12.887 8.492 13.504 8.361 13.831 8.683 C 14.12 8.968 14.098 9.67 13.868 10.019 C 13.447 10.652 13.025 11.286 12.603 11.919 C 12.392 12.28 12.911 12.573 13.221 12.187 C 14.84 9.994 15.283 9.55 15.283 8.668 C 15.283 6.866 15.283 6.891 15.283 5.09 C 15.283 4.574 15.661 4.08 16.143 4.08 C 16.601 4.08 17 4.555 17 5.003 C 17 7.913 17 9.009 17 11.919 C 17 12.815 14.169 15.526 14.169 16.789 C 14.169 17.086 14.169 17.383 14.169 17.68 C 12.563 17.68 10.956 17.68 9.35 17.68 C 9.35 17.245 9.351 16.809 9.351 16.374 Z M 7.649 16.374 C 7.649 15.364 7.649 14.785 7.649 13.775 C 7.649 12.354 5.712 10.283 4.457 8.831 C 4.113 8.492 3.496 8.361 3.169 8.683 C 2.88 8.968 2.902 9.67 3.132 10.019 C 3.553 10.652 3.975 11.286 4.397 11.919 C 4.608 12.28 4.089 12.573 3.779 12.187 C 2.16 9.994 1.717 9.55 1.717 8.668 C 1.717 6.866 1.717 6.891 1.717 5.09 C 1.717 4.574 1.339 4.08 0.857 4.08 C 0.399 4.08 0 4.555 0 5.003 C 0 7.913 0 9.009 0 11.919 C 0 12.815 2.831 15.526 2.831 16.789 C 2.831 17.086 2.831 17.383 2.831 17.68 C 4.437 17.68 6.044 17.68 7.65 17.68 C 7.65 17.245 7.649 16.809 7.649 16.374 Z M 5.1 3.613 L 7.99 5.78 L 7.99 9.18 L 5.1 7.013 L 5.1 3.613 Z M 11.9 3.613 L 9.01 5.78 L 9.01 9.18 L 11.9 7.013 L 11.9 3.613 Z M 5.1 2.55 L 8.5 0 L 11.9 2.55 L 8.5 5.1 L 5.1 2.55 Z"}],[{href:"#o-17",d:"M 14.909 14.822 C 14.909 15.043 14.73 15.223 14.508 15.223 L 11.935 15.223 C 11.713 15.223 11.533 15.043 11.533 14.822 L 11.533 9.356 C 11.533 9.134 11.713 8.954 11.935 8.954 L 14.508 8.954 C 14.73 8.954 14.909 9.134 14.909 9.356 L 14.909 14.822 Z M 5.384 14.822 C 5.384 15.043 5.204 15.223 4.982 15.223 L 2.41 15.223 C 2.188 15.223 2.008 15.043 2.008 14.822 L 2.008 9.356 C 2.008 9.134 2.188 8.954 2.41 8.954 L 4.982 8.954 C 5.204 8.954 5.384 9.134 5.384 9.356 L 5.384 14.822 Z M 8.493 0 C 3.837 0 0.058 3.745 0 8.386 L 1.474 8.386 C 1.521 4.55 4.645 1.455 8.493 1.455 C 12.34 1.455 15.464 4.55 15.511 8.386 L 16.985 8.386 C 16.927 3.745 13.147 0 8.493 0 Z M 0.012 12.638 L 1.459 12.638 L 1.459 8.378 L 0.012 8.378 L 0.012 12.638 Z M 15.499 8.377 L 15.499 12.637 L 17 12.637 L 17 8.377 L 15.499 8.377 Z"},{href:"#o-18",d:"M 7.197 16.915 C 4.436 16.498 1.965 14.642 0.79 12.11 C -0.629 9.116 -0.111 5.301 2.145 2.851 C 4.35 0.268 8.177 -0.662 11.354 0.483 C 14.671 1.616 17.069 4.988 16.999 8.501 C 17.068 11.95 14.765 15.259 11.539 16.45 C 10.16 16.99 8.657 17.098 7.197 16.915 Z M 7.694 11.674 C 7.689 11.259 7.684 10.843 7.679 10.427 C 6.512 11.595 5.345 12.762 4.178 13.93 C 5.181 14.732 6.408 15.228 7.679 15.394 C 7.695 14.154 7.709 12.914 7.694 11.674 Z M 10.452 15.156 C 11.278 14.913 12.071 14.524 12.74 13.982 C 12.21 13.215 11.451 12.602 10.81 11.916 C 10.304 11.411 9.799 10.906 9.294 10.4 C 9.294 12.066 9.294 13.732 9.294 15.398 C 9.685 15.345 10.072 15.265 10.452 15.156 Z M 7.707 4.898 C 7.707 3.8 7.707 2.703 7.707 1.605 C 4.759 1.923 2.145 4.308 1.687 7.258 C 1.351 9.197 1.813 11.291 3.072 12.824 C 4.617 11.28 6.162 9.735 7.707 8.19 C 7.707 7.093 7.707 5.995 7.707 4.898 Z M 14.303 12.305 C 16.005 9.764 15.757 6.09 13.641 3.857 C 12.523 2.618 10.957 1.785 9.294 1.605 C 9.294 3.8 9.294 5.995 9.294 8.189 C 10.807 9.681 12.271 11.224 13.836 12.662 C 14.055 12.922 14.165 12.392 14.303 12.305 Z"},{href:"#o-19",d:"M 4.25 0 L 2.975 2.125 L 1.7 4.25 L 2.89 4.25 L 2.89 15.3 L 5.61 15.3 L 5.61 4.25 L 6.8 4.25 L 5.525 2.125 L 4.25 0 Z M 12.75 0 L 11.475 2.125 L 10.2 4.25 L 11.39 4.25 L 11.39 15.3 L 14.11 15.3 L 14.11 4.25 L 15.3 4.25 L 14.025 2.125 L 12.75 0 Z M 0 16.15 L 0 17.85 L 17 17.85 L 17 16.15 L 0 16.15 Z"},{href:"#o-20",d:"M 3.965 6.538 C 5.021 8.561 5.227 9.175 4.878 9.259 C 4.196 9.422 4.333 10.354 5.287 12.045 C 6.483 14.165 8.826 15.467 11.027 15.235 C 11.881 15.145 12.847 14.958 13.173 14.821 C 13.499 14.683 13.299 14.939 12.728 15.39 C 9.873 17.642 6.347 17.485 3.534 14.981 C 2.413 13.982 0.869 11.064 0.869 9.942 C 0.869 9.624 0.615 9.316 0.304 9.257 C -0.204 9.162 -0.136 8.909 0.983 6.748 C 1.668 5.427 2.312 4.251 2.415 4.135 C 2.518 4.02 3.216 5.101 3.965 6.538 Z M 13.035 10.438 C 11.98 8.415 11.774 7.801 12.123 7.717 C 12.804 7.554 12.667 6.622 11.713 4.931 C 10.517 2.811 8.174 1.508 5.974 1.741 C 5.119 1.831 4.154 2.017 3.827 2.155 C 3.501 2.292 3.701 2.036 4.272 1.586 C 7.127 -0.667 10.653 -0.51 13.466 1.995 C 14.588 2.994 16.131 5.912 16.131 7.034 C 16.131 7.352 16.385 7.66 16.696 7.718 C 17.205 7.814 17.137 8.066 16.017 10.227 C 15.333 11.549 14.688 12.724 14.585 12.84 C 14.482 12.956 13.785 11.875 13.035 10.438 Z"}],[{href:"#o-21",d:"M 13.705 0 C 12.13 1.273 9.954 1.285 8.367 0.038 C 6.842 1.238 4.769 1.272 3.212 0.141 L 0.413 3.148 C 2.135 5.032 2.125 8.058 0.383 9.928 C 0.152 10.567 0.031 10.536 0.006 11.179 C -0.054 12.728 0.294 14.172 1.381 15.26 C 2.353 16.232 3.672 16.644 4.939 16.497 C 7.054 16.614 8.068 17.598 8.494 18.187 C 9.068 17.558 9.962 16.547 12.678 16.421 C 14.299 16.17 14.885 15.764 15.645 15.013 C 16.67 13.989 17.028 12.692 16.997 11.251 C 16.985 10.653 16.917 10.445 16.58 9.681 C 14.831 7.802 14.829 4.756 16.576 2.875 L 13.705 0 Z"},{href:"#o-22",d:"M 7.82 0 L 7.82 1.721 C 3.446 1.964 0 4.526 0 7.65 C 0 7.087 0.952 6.63 2.125 6.63 C 3.298 6.63 4.25 7.087 4.25 7.65 C 4.25 7.087 5.202 6.63 6.375 6.63 C 6.934 6.63 7.441 6.737 7.82 6.906 L 7.82 15.3 C 7.82 15.675 7.515 15.98 7.14 15.98 C 6.765 15.98 6.46 15.675 6.46 15.3 L 6.46 14.96 L 5.1 14.96 L 5.1 15.3 C 5.1 16.426 6.014 17.34 7.14 17.34 C 8.266 17.34 9.18 16.426 9.18 15.3 L 9.18 6.906 C 9.559 6.737 10.066 6.63 10.625 6.63 C 11.798 6.63 12.75 7.087 12.75 7.65 C 12.75 7.087 13.702 6.63 14.875 6.63 C 16.048 6.63 17 7.087 17 7.65 C 17 4.526 13.554 1.964 9.18 1.721 L 9.18 0 L 7.82 0 Z"},{href:"#o-23",d:"M 0 1.7 C 0 2.639 1.903 3.4 4.25 3.4 C 6.597 3.4 8.5 2.639 8.5 1.7 C 8.5 0.761 10.403 0 12.75 0 C 15.097 0 17 0.761 17 1.7 L 17 15.3 C 17 14.361 15.097 13.6 12.75 13.6 C 10.403 13.6 8.5 14.361 8.5 15.3 C 8.5 16.239 6.597 17 4.25 17 C 1.903 17 0 16.239 0 15.3 L 0 1.7 Z"},{href:"#o-24",d:"M 8.5 17 C 3.805 17 0 13.195 0 8.5 C 0 3.806 3.805 0 8.5 0 C 10.754 0 12.916 0.896 14.51 2.49 C 16.104 4.084 17 6.246 17 8.5 C 17 10.755 16.104 12.917 14.51 14.511 L 17 14.511 L 17 17 L 8.5 17 Z"}],[{href:"#o-25",d:"M 0 1.995 C 0 0.893 0.872 0 1.948 0 L 2.834 0 L 7.084 0 L 15.052 0 C 15.569 0 16.064 0.21 16.43 0.584 C 16.795 0.958 17 1.466 17 1.995 L 17 6.981 L 17 9.973 C 17 11.075 16.128 11.968 15.052 11.968 L 7.084 11.968 L 1.532 17.04 L 2.834 11.968 L 1.948 11.968 C 0.872 11.968 0 11.075 0 9.973 L 0 6.981 L 0 1.995 Z"},{href:"#o-26",d:"M 0 0 L 2.833 0 L 7.083 0 L 17 0 L 17 6.611 L 17 9.444 L 17 11.333 L 7.083 11.333 L 0.027 16.888 L 2.833 11.333 L 0 11.333 L 0 9.444 L 0 6.611 L 0 0 Z"},{href:"#o-27",d:"M 0.164 16.847 L 3.51 10.84 C -0.035 9.028 -1.046 5.615 1.173 2.955 C 3.392 0.294 8.115 -0.742 12.085 0.56 C 16.055 1.862 17.971 5.076 16.513 7.986 C 15.055 10.896 10.699 12.549 6.45 11.805 L 0.164 16.847 Z"},{href:"#o-28",d:"M 17 7.495 L 14.967 7.607 L 14.423 10.341 L 12.624 9.68 L 10.015 11.779 L 9.022 10.554 L 0.655 15.791 L 5.304 9.951 L 1.443 9.191 L 2.651 8.062 L 0 5.988 L 1.905 5.487 L 1.306 2.758 L 3.303 3.044 L 4.946 0.525 L 6.401 1.508 L 9.765 0 L 10.216 1.367 L 14.232 1.348 L 13.535 2.666 L 16.929 4.142 L 15.307 4.992 L 17 7.495 Z"}],[{href:"#o-29",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.194 3.806 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 9.277 13.396 L 7.694 13.396 L 7.694 11.877 L 9.277 11.877 L 9.277 13.396 Z M 9.277 10.256 L 9.277 10.758 L 7.694 10.758 L 7.694 10.14 C 7.694 8.274 9.816 7.978 9.816 6.653 C 9.816 6.048 9.276 5.585 8.568 5.585 C 7.835 5.585 7.192 6.125 7.192 6.125 L 6.29 5.005 C 6.29 5.005 7.179 4.079 8.71 4.079 C 10.164 4.079 11.515 4.979 11.515 6.498 C 11.515 8.622 9.277 8.867 9.277 10.256 Z"},{href:"#o-30",d:"M 8.5 0 C 3.805 0 0 3.806 0 8.5 C 0 13.194 3.805 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 7.773 3.821 L 9.188 3.821 L 9.188 5.327 L 7.773 5.327 L 7.773 3.821 Z M 10.115 12.958 L 8.558 12.958 C 7.954 12.958 7.696 12.7 7.696 12.083 L 7.696 8.068 C 7.696 7.875 7.593 7.785 7.413 7.785 L 6.898 7.785 L 6.898 6.395 L 8.455 6.395 C 9.06 6.395 9.317 6.665 9.317 7.27 L 9.317 11.297 C 9.317 11.478 9.42 11.58 9.6 11.58 L 10.115 11.58 L 10.115 12.958 Z"},{href:"#o-31",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.195 3.806 17 8.5 17 C 13.194 17 17 13.195 17 8.5 C 17 3.806 13.194 0 8.5 0 Z M 8.5 16.415 C 4.137 16.415 0.585 12.864 0.585 8.5 C 0.585 4.137 4.137 0.585 8.5 0.585 C 12.864 0.585 16.416 4.136 16.416 8.5 C 16.415 12.864 12.864 16.415 8.5 16.415 Z M 5.637 7.331 C 6.182 7.331 6.624 6.463 6.624 5.394 C 6.624 4.324 6.182 3.457 5.637 3.457 C 5.091 3.457 4.649 4.324 4.649 5.394 C 4.649 6.463 5.092 7.331 5.637 7.331 Z M 11.266 7.331 C 11.812 7.331 12.253 6.463 12.253 5.394 C 12.253 4.324 11.811 3.457 11.266 3.457 C 10.721 3.457 10.278 4.324 10.278 5.394 C 10.278 6.463 10.721 7.331 11.266 7.331 Z M 3.905 11.535 C 5.259 13.321 6.832 14.349 8.512 14.349 C 10.249 14.349 11.872 13.256 13.255 11.361 C 11.784 12.387 10.16 12.96 8.451 12.96 C 6.841 12.96 5.307 12.451 3.905 11.535 Z"},{href:"#o-32",d:"M 8.5 0 C 3.806 0 0 3.806 0 8.5 C 0 13.195 3.806 17 8.5 17 C 13.195 17 17 13.195 17 8.5 C 17 3.806 13.195 0 8.5 0 Z M 11.266 3.456 C 11.812 3.456 12.253 4.323 12.253 5.393 C 12.253 6.463 11.811 7.331 11.266 7.331 C 10.721 7.331 10.279 6.463 10.279 5.394 C 10.279 4.324 10.722 3.456 11.266 3.456 Z M 5.637 3.456 C 6.182 3.456 6.624 4.323 6.624 5.393 C 6.624 6.463 6.183 7.331 5.637 7.331 C 5.091 7.331 4.65 6.463 4.65 5.394 C 4.65 4.324 5.092 3.456 5.637 3.456 Z M 8.513 14.349 C 6.832 14.349 5.259 13.321 3.905 11.535 C 5.307 12.45 6.841 12.96 8.451 12.96 C 10.161 12.96 11.785 12.387 13.256 11.361 C 11.873 13.256 10.249 14.349 8.513 14.349 Z"}],[{href:"#o-33",d:"M 8.5 17 C 13.195 17 17 13.194 17 8.5 C 17 3.805 13.195 0 8.5 0 C 3.806 0 0 3.805 0 8.5 C 0 13.194 3.806 17 8.5 17 Z M 9.866 2.813 L 11.934 4.882 L 8.316 8.5 L 11.934 12.119 L 9.866 14.187 L 4.18 8.5 L 9.866 2.813 Z"},{href:"#o-34",d:"M 8.5 0 C 3.805 0 0 3.805 0 8.5 C 0 13.194 3.805 17 8.5 17 C 13.194 17 17 13.194 17 8.5 C 17 3.805 13.194 0 8.5 0 Z M 7.134 14.187 L 5.066 12.117 L 8.684 8.499 L 5.066 4.881 L 7.134 2.813 L 12.821 8.499 L 7.134 14.187 Z"},{href:"#o-35",d:"M 10.965 0 C 10.569 0.975 9.616 1.664 8.5 1.664 C 7.384 1.664 6.431 0.975 6.035 0 L 0 2.56 L 1.698 6.562 L 3.563 5.77 L 3.563 13.929 L 13.503 13.929 L 13.503 5.799 L 15.301 6.562 L 17 2.56 L 10.965 0 Z"},{href:"#o-36",d:"M 17 8.499 C 17 7.124 15.886 6.01 14.511 6.01 C 14.961 5.559 15.24 4.937 15.24 4.249 C 15.24 2.874 14.126 1.759 12.751 1.759 C 12.064 1.759 11.441 2.038 10.99 2.489 C 10.99 1.114 9.876 0 8.501 0 C 7.126 0 6.011 1.114 6.011 2.489 C 5.56 2.038 4.938 1.759 4.251 1.759 C 2.875 1.759 1.761 2.874 1.761 4.249 C 1.761 4.936 2.039 5.559 2.49 6.009 C 1.115 6.009 0 7.124 0 8.499 C 0 9.874 1.115 10.989 2.49 10.989 C 2.039 11.439 1.761 12.062 1.761 12.749 C 1.761 14.124 2.875 15.238 4.251 15.238 C 4.938 15.238 5.56 14.96 6.011 14.509 C 6.011 15.884 7.126 16.999 8.501 16.999 C 9.876 16.999 10.99 15.884 10.99 14.509 C 11.441 14.96 12.064 15.238 12.751 15.238 C 14.126 15.238 15.24 14.124 15.24 12.749 C 15.24 12.062 14.961 11.439 14.511 10.988 C 14.511 10.988 14.511 10.988 14.511 10.988 C 15.886 10.988 17 9.874 17 8.499 Z M 12.725 11.402 C 12.734 11.402 12.742 11.401 12.751 11.401 C 13.496 11.401 14.099 12.004 14.099 12.749 C 14.099 13.493 13.496 14.097 12.751 14.097 C 12.007 14.097 11.404 13.493 11.404 12.749 C 11.404 12.74 11.404 12.732 11.404 12.723 L 9.436 10.754 L 9.436 13.539 C 9.69 13.783 9.849 14.128 9.849 14.509 C 9.849 15.253 9.245 15.857 8.501 15.857 C 7.757 15.857 7.153 15.253 7.153 14.509 C 7.153 14.127 7.312 13.783 7.566 13.539 L 7.566 10.754 L 5.598 12.723 C 5.598 12.732 5.599 12.74 5.599 12.749 C 5.599 13.493 4.996 14.097 4.251 14.097 C 3.507 14.097 2.904 13.493 2.904 12.749 C 2.904 12.004 3.507 11.401 4.251 11.401 C 4.26 11.401 4.268 11.402 4.277 11.402 L 6.246 9.433 L 3.462 9.433 C 3.217 9.688 2.873 9.846 2.491 9.846 C 1.747 9.846 1.144 9.243 1.144 8.499 C 1.144 7.755 1.747 7.151 2.491 7.151 C 2.873 7.151 3.217 7.31 3.462 7.565 L 6.246 7.565 L 4.277 5.596 C 4.268 5.596 4.26 5.597 4.251 5.597 C 3.507 5.597 2.904 4.994 2.904 4.249 C 2.904 3.505 3.507 2.902 4.252 2.902 C 4.996 2.902 5.599 3.505 5.599 4.249 C 5.599 4.258 5.599 4.266 5.599 4.275 L 7.567 6.244 L 7.567 3.46 C 7.313 3.215 7.154 2.871 7.154 2.489 C 7.154 1.745 7.758 1.141 8.502 1.141 C 9.246 1.141 9.849 1.744 9.849 2.489 C 9.849 2.871 9.69 3.215 9.436 3.46 L 9.436 6.244 L 11.405 4.275 C 11.405 4.266 11.404 4.258 11.404 4.249 C 11.404 3.505 12.007 2.902 12.752 2.902 C 13.496 2.902 14.099 3.505 14.099 4.249 C 14.099 4.994 13.496 5.597 12.752 5.597 C 12.743 5.597 12.735 5.596 12.726 5.596 L 10.757 7.565 L 13.541 7.565 C 13.786 7.31 14.131 7.151 14.512 7.151 C 15.256 7.151 15.859 7.755 15.859 8.499 C 15.859 9.243 15.256 9.846 14.512 9.846 C 14.13 9.846 13.786 9.688 13.541 9.433 L 10.757 9.433 L 12.725 11.402 Z"}],[{href:"#o-37",d:"M 9.033 14.96 C 8.849 14.977 8.661 14.989 8.468 14.989 C 8.295 14.989 8.127 14.979 7.963 14.965 L 6.545 16.788 L 6.196 16.69 C 5.786 16.574 5.389 16.43 5.007 16.257 L 4.675 16.107 L 4.76 13.817 C 4.459 13.606 4.177 13.372 3.917 13.114 L 1.674 13.596 L 1.47 13.295 C 1.229 12.942 1.025 12.572 0.843 12.197 L 0.686 11.871 L 2.208 10.185 C 2.113 9.828 2.05 9.46 2.017 9.085 L 0 8.018 L 0.036 7.656 C 0.079 7.224 0.163 6.81 0.263 6.413 L 0.352 6.06 L 2.603 5.748 C 2.763 5.409 2.952 5.089 3.165 4.787 L 2.306 2.673 L 2.566 2.419 C 2.87 2.122 3.197 1.853 3.537 1.607 L 3.832 1.394 L 5.775 2.614 C 6.102 2.464 6.444 2.339 6.799 2.244 L 7.504 0.059 L 7.867 0.031 C 8.062 0.017 8.272 0 8.501 0 C 8.729 0 8.938 0.017 9.134 0.031 L 9.497 0.059 L 10.209 2.267 C 10.55 2.362 10.88 2.484 11.197 2.631 L 13.167 1.394 L 13.463 1.606 C 13.804 1.852 14.13 2.122 14.434 2.417 L 14.695 2.671 L 13.81 4.848 C 14.002 5.129 14.176 5.425 14.325 5.737 L 16.646 6.059 L 16.736 6.411 C 16.838 6.808 16.921 7.222 16.963 7.655 L 17 8.017 L 14.911 9.121 C 14.88 9.463 14.824 9.8 14.741 10.129 L 16.315 11.867 L 16.156 12.195 C 15.975 12.571 15.772 12.942 15.53 13.294 L 15.326 13.594 L 13.027 13.101 C 12.784 13.345 12.52 13.569 12.238 13.771 L 12.326 16.106 L 11.994 16.256 C 11.611 16.429 11.214 16.573 10.804 16.688 L 10.454 16.787 L 9.033 14.96 Z M 10.857 15.544 C 10.979 15.503 11.1 15.46 11.219 15.413 L 11.137 13.207 L 11.396 13.042 C 11.783 12.79 12.136 12.488 12.449 12.146 L 12.657 11.918 L 14.832 12.383 C 14.897 12.274 14.961 12.162 15.022 12.048 L 13.534 10.404 L 13.626 10.11 C 13.758 9.687 13.832 9.233 13.854 8.759 L 13.868 8.451 L 15.844 7.407 C 15.823 7.28 15.799 7.155 15.772 7.029 L 13.574 6.725 L 13.456 6.44 C 13.279 6.015 13.045 5.617 12.766 5.25 L 12.581 5.005 L 13.417 2.948 C 13.321 2.863 13.221 2.781 13.119 2.701 L 11.253 3.872 L 10.978 3.728 C 10.571 3.513 10.131 3.351 9.666 3.245 L 9.366 3.176 L 8.692 1.086 C 8.626 1.083 8.563 1.081 8.501 1.081 C 8.437 1.081 8.374 1.083 8.308 1.086 L 7.639 3.163 L 7.334 3.227 C 6.861 3.329 6.411 3.494 5.991 3.711 L 5.717 3.854 L 3.881 2.701 C 3.779 2.781 3.68 2.863 3.584 2.948 L 4.398 4.951 L 4.207 5.196 C 3.908 5.579 3.661 5.998 3.475 6.449 L 3.357 6.734 L 1.229 7.029 C 1.202 7.155 1.179 7.28 1.159 7.407 L 3.066 8.415 L 3.078 8.726 C 3.098 9.228 3.181 9.709 3.326 10.159 L 3.42 10.455 L 1.98 12.048 C 2.04 12.163 2.103 12.275 2.169 12.384 L 4.284 11.928 L 4.495 12.157 C 4.82 12.512 5.19 12.821 5.599 13.077 L 5.862 13.241 L 5.782 15.413 C 5.901 15.46 6.022 15.503 6.145 15.544 L 7.484 13.823 L 7.789 13.86 C 8.02 13.89 8.245 13.908 8.468 13.908 C 8.709 13.908 8.951 13.887 9.199 13.852 L 9.507 13.809 L 10.857 15.544 Z M 11.467 11.073 L 11.762 11.526 L 9.891 12.743 L 9.228 11.722 C 8.986 11.781 8.732 11.815 8.468 11.815 C 6.64 11.815 5.159 10.334 5.159 8.508 C 5.159 6.68 6.64 5.199 8.468 5.199 C 10.294 5.199 11.775 6.68 11.775 8.508 C 11.775 9.258 11.523 9.954 11.1 10.509 L 11.467 11.073 M 10.209 11.248 L 10.267 11.21 L 9.734 10.39 L 10.043 10.081 C 10.447 9.676 10.695 9.123 10.695 8.508 C 10.692 7.278 9.696 6.282 8.468 6.28 C 7.236 6.282 6.241 7.277 6.239 8.508 C 6.241 9.737 7.237 10.733 8.468 10.735 C 8.743 10.735 9.007 10.679 9.263 10.581 L 9.672 10.424 L 10.209 11.248 Z"},{href:"#o-38",d:"M 15.919 12.023 C 16.206 11.444 16.429 10.828 16.576 10.183 C 17.148 7.985 16.976 6.069 16.976 6.069 L 16.779 7.332 C 16.779 7.332 16.498 4.993 16.153 4.119 C 15.624 2.78 15.389 2.79 15.388 2.792 C 15.713 3.62 15.685 4.094 15.678 4.165 C 15.672 4.156 15.667 4.146 15.662 4.137 C 15.583 3.943 15.183 3.045 14.326 2.41 C 12.825 0.921 10.759 0.001 8.477 0 C 6.043 0 3.853 1.047 2.332 2.716 C 2.14 2.438 1.984 2.101 1.969 1.728 C 1.969 1.728 1.968 1.729 1.966 1.731 C 1.966 1.724 1.964 1.718 1.964 1.712 C 1.964 1.712 0.998 2.461 1.102 4.481 C 0.923 4.825 0.766 5.184 0.636 5.556 C 0.411 6.046 0.185 6.758 0 7.804 C 0 7.804 0.08 7.551 0.239 7.211 C 0.201 7.5 0.178 7.794 0.17 8.091 C 0.116 8.599 0.099 9.211 0.146 9.945 C 0.146 9.945 0.166 9.701 0.228 9.332 C 0.729 13.446 4.23 16.634 8.477 16.634 C 9.593 16.634 10.659 16.411 11.631 16.012 C 13.841 15.205 15.148 13.66 15.919 12.023 Z M 8.477 0.551 C 9.945 0.551 11.316 0.959 12.487 1.667 C 11.122 1.35 10.426 1.511 10.432 1.519 C 10.44 1.528 12.463 1.872 12.822 2.365 C 12.822 2.365 11.963 2.365 11.107 2.612 C 11.068 2.623 14.254 3.009 14.905 6.192 C 14.905 6.192 14.556 5.464 14.124 5.34 C 14.408 6.204 14.335 7.843 14.064 8.658 C 14.029 8.762 13.993 8.205 13.461 7.965 C 13.632 9.187 13.451 11.127 12.602 11.661 C 12.537 11.703 13.134 9.747 12.723 10.502 C 10.266 14.269 7.345 12.026 6.16 11.227 C 7.111 11.46 8.121 11.292 8.706 10.892 C 9.295 10.489 9.645 10.195 9.959 10.264 C 10.272 10.334 10.481 10.019 10.237 9.74 C 9.994 9.46 9.402 9.077 8.602 9.286 C 8.037 9.434 7.337 10.058 6.269 9.426 C 5.358 8.886 5.365 8.447 5.365 8.168 C 5.365 7.949 5.519 7.64 5.805 7.551 C 6.153 7.588 6.432 7.68 6.728 7.831 C 6.731 7.75 6.731 7.642 6.727 7.519 C 6.751 7.473 6.736 7.333 6.699 7.162 C 6.677 6.989 6.641 6.812 6.585 6.651 C 6.591 6.65 6.595 6.647 6.597 6.638 C 6.643 6.432 7.886 5.712 7.977 5.643 C 8.069 5.574 8.307 5.416 8.281 4.933 C 8.272 4.773 8.246 4.756 6.941 4.761 C 6.391 4.763 6.086 4.224 5.988 4.014 C 6.121 3.275 6.506 2.747 7.139 2.391 C 7.151 2.384 7.148 2.378 7.135 2.374 C 7.266 2.298 5.62 2.371 4.878 3.337 C 4.679 3.365 4.406 3.308 4.101 3.308 C 3.718 3.308 3.417 3.35 3.138 3.421 C 3.108 3.428 3.065 3.427 3.014 3.42 C 2.936 3.362 2.819 3.266 2.693 3.141 C 2.79 3.033 2.888 2.928 2.99 2.826 C 4.395 1.42 6.333 0.552 8.477 0.551 Z"},{href:"#o-39",d:"M 16.532 0.48 C 15.127 -0.785 11.943 0.733 10.187 1.759 C 9.683 1.68 9.155 1.637 8.604 1.637 C 6.385 1.637 4.594 2.289 3.233 3.521 C 1.685 4.938 0.826 6.794 0.826 8.94 C 0.826 8.958 0.827 8.977 0.827 8.995 C 3.005 5.582 6.355 3.833 7.243 3.371 C 7.384 3.305 7.467 3.474 7.337 3.539 C 7.327 3.566 7.327 3.539 7.337 3.539 C 5.843 4.433 3.073 7.024 1.276 10.753 L 1.274 10.748 C 0.136 13.099 -0.825 16.4 1.097 17.612 C 2.553 18.528 5.159 17.448 7.257 16.076 C 7.763 16.148 8.295 16.185 8.857 16.185 C 12.727 16.185 15.442 14.049 16.411 10.934 L 11.095 10.925 C 10.871 12.026 10.125 12.613 8.959 12.613 C 7.494 12.613 6.488 11.811 6.422 9.955 L 16.514 9.945 C 16.532 9.562 16.486 9.293 16.486 8.994 C 16.486 5.514 14.403 2.794 11.015 1.928 C 12.394 1.07 14.974 -0.199 16.216 0.814 C 17.148 1.569 16.636 3.155 16.412 3.808 C 16.374 3.976 16.571 4.004 16.608 3.845 C 17.073 2.672 17.213 1.095 16.532 0.48 Z M 6.773 15.994 C 5.137 16.971 2.881 17.676 1.777 16.848 C 0.954 16.228 1.316 14.55 2.041 12.913 C 2.481 13.57 3.032 14.163 3.68 14.656 C 4.556 15.315 5.585 15.761 6.773 15.994 Z M 6.404 7.624 C 6.431 6.01 7.588 5.311 8.801 5.311 C 10.078 5.311 11.113 6.048 11.113 7.624 L 6.404 7.624 Z"},{href:"#o-40",d:"M 8.5 2.294 C 8.156 2.294 7.817 2.315 7.484 2.355 L 7.459 2.232 C 7.445 2.161 7.418 2.096 7.382 2.038 C 7.643 1.828 7.809 1.507 7.809 1.146 C 7.809 0.513 7.296 0 6.663 0 C 6.03 0 5.517 0.513 5.517 1.146 C 5.517 1.655 5.848 2.086 6.307 2.236 C 6.293 2.308 6.293 2.383 6.307 2.46 L 6.33 2.574 C 2.687 3.534 0 6.85 0 10.795 C 0 15.489 3.806 19.295 8.5 19.295 C 13.194 19.295 17 15.489 17 10.795 C 17 6.1 13.194 2.294 8.5 2.294 Z M 8.647 4.32 C 11.691 4.32 14.238 6.448 14.88 9.298 L 14.486 9.458 C 14.385 8.993 13.97 8.644 13.475 8.644 C 12.903 8.644 12.439 9.108 12.439 9.68 C 12.439 9.731 12.445 9.781 12.452 9.831 L 10.559 9.812 C 10.522 9.733 10.481 9.657 10.434 9.584 L 12.756 6.093 L 12.794 6.036 L 9.538 8.81 C 9.297 8.702 9.032 8.64 8.754 8.635 L 8.812 8.622 L 8.008 6.856 C 8.445 6.735 8.767 6.335 8.767 5.86 C 8.767 5.288 8.304 4.824 7.732 4.824 C 7.68 4.824 7.631 4.829 7.582 4.837 L 7.622 4.404 C 7.956 4.348 8.298 4.32 8.647 4.32 Z M 5.762 1.146 C 5.762 0.649 6.166 0.246 6.662 0.246 C 7.159 0.246 7.563 0.649 7.563 1.146 C 7.563 1.437 7.424 1.694 7.21 1.859 C 7.085 1.775 6.928 1.738 6.768 1.77 C 6.614 1.801 6.486 1.889 6.403 2.008 C 6.032 1.896 5.762 1.552 5.762 1.146 Z M 2.258 10.709 C 2.258 7.673 4.374 5.132 7.212 4.481 L 7.415 4.872 C 6.998 5.006 6.697 5.397 6.697 5.857 C 6.697 6.429 7.16 6.893 7.732 6.893 C 7.779 6.893 7.824 6.889 7.869 6.883 L 7.829 8.827 L 7.865 8.819 C 7.563 8.959 7.302 9.17 7.102 9.431 L 7.166 9.33 L 6.09 8.918 L 6.891 9.765 L 6.909 9.736 C 6.779 9.989 6.7 10.274 6.688 10.576 L 6.686 10.565 L 4.894 11.391 C 4.758 10.978 4.369 10.679 3.911 10.679 C 3.339 10.679 2.875 11.143 2.875 11.715 C 2.875 11.759 2.879 11.803 2.884 11.846 L 2.349 11.794 C 2.289 11.441 2.258 11.079 2.258 10.709 Z M 8.647 17.099 C 5.621 17.099 3.087 14.996 2.426 12.172 L 2.898 11.931 C 2.998 12.4 3.412 12.751 3.91 12.751 C 4.482 12.751 4.945 12.287 4.945 11.715 C 4.945 11.643 4.938 11.574 4.924 11.505 L 6.877 11.526 C 6.908 11.591 6.942 11.654 6.979 11.715 L 4.622 15.32 L 4.777 15.187 L 7.872 12.508 C 8.101 12.613 8.353 12.678 8.619 12.69 L 8.606 12.693 L 9.444 14.488 C 8.996 14.601 8.663 15.007 8.663 15.491 C 8.663 16.062 9.127 16.526 9.699 16.526 C 9.751 16.526 9.802 16.521 9.853 16.513 L 9.856 16.983 C 9.465 17.059 9.061 17.099 8.647 17.099 Z M 10.214 16.905 L 9.948 16.495 C 10.399 16.383 10.735 15.976 10.735 15.491 C 10.735 14.919 10.27 14.455 9.699 14.455 C 9.654 14.455 9.61 14.458 9.567 14.464 L 9.567 12.51 L 9.55 12.513 C 9.83 12.387 10.076 12.2 10.271 11.968 L 11.307 12.418 L 10.552 11.527 C 10.66 11.298 10.727 11.046 10.742 10.779 L 12.486 9.984 C 12.616 10.406 13.009 10.714 13.474 10.714 C 14.047 10.714 14.51 10.25 14.51 9.678 C 14.51 9.631 14.506 9.584 14.499 9.539 L 14.943 9.621 C 15.004 9.974 15.036 10.337 15.036 10.708 C 15.037 13.697 12.985 16.207 10.214 16.905 Z"}],[{href:"#twitter",d:"M 98.914 17.39 C 95.052 19.107 91.191 20.394 87.329 20.823 C 91.62 18.248 94.623 13.957 96.34 8.809 C 92.478 11.384 88.187 13.1 83.467 13.957 C 79.606 9.667 74.457 7.093 68.879 7.093 C 57.723 7.093 48.713 16.962 48.713 28.975 C 48.713 30.692 48.713 32.408 49.142 33.695 C 32.408 32.837 17.391 24.256 7.522 10.954 C 5.806 13.957 4.948 17.82 4.948 21.681 C 4.948 29.404 8.38 35.84 13.958 39.702 C 10.525 39.702 7.522 38.415 4.948 37.128 L 4.948 37.556 C 4.948 47.855 11.813 56.865 21.252 58.581 C 19.536 59.01 17.82 59.439 16.103 59.439 C 14.816 59.439 13.529 59.439 12.242 59.01 C 14.816 67.591 22.11 74.027 31.121 74.027 C 24.256 80.035 15.674 83.468 5.806 83.468 C 4.089 83.468 2.373 83.468 1.086 83.038 C 10.096 89.045 20.823 92.907 31.979 92.907 C 69.308 92.907 89.474 59.869 89.474 31.12 L 89.474 28.117 C 92.478 25.543 95.911 21.681 98.914 17.39 Z"},{href:"#facebook",d:"M 8.333 0.414 C 3.75 0.414 0 4.149 0 8.713 L 0 91.701 C 0 96.266 3.75 100 8.333 100 L 49.167 100 L 49.167 61.826 L 37.083 61.826 L 37.917 45.228 L 49.583 45.228 L 49.583 33.195 C 49.583 33.195 47.917 17.012 66.25 17.012 C 84.167 17.012 80 17.012 80 17.012 L 80 32.366 C 80 32.366 66.346 32.521 67.083 34.44 L 67.083 45.228 L 82.917 45.228 L 79.167 61.826 L 66.25 61.826 L 66.25 99.586 L 91.667 99.586 C 96.25 99.586 100 95.851 100 91.287 L 100 8.299 C 100 3.734 96.25 0 91.667 0 L 8.333 0.414 L 8.333 0.414 Z"},{href:"#github",d:"M 49.995 0 C 22.385 0 0 22.952 0 51.267 C 0 73.916 14.325 93.13 34.194 99.911 C 36.696 100.38 37.607 98.797 37.607 97.438 C 37.607 96.223 37.564 92.998 37.54 88.721 C 23.631 91.818 20.697 81.847 20.697 81.847 C 18.423 75.927 15.145 74.351 15.145 74.351 C 10.605 71.17 15.489 71.232 15.489 71.232 C 20.507 71.598 23.146 76.516 23.146 76.516 C 27.607 84.35 34.85 82.087 37.699 80.777 C 38.153 77.463 39.442 75.203 40.872 73.923 C 29.77 72.629 18.097 68.229 18.097 48.585 C 18.097 42.99 20.047 38.413 23.245 34.829 C 22.729 33.532 21.013 28.32 23.733 21.262 C 23.733 21.262 27.932 19.883 37.484 26.518 C 41.471 25.381 45.75 24.812 50.002 24.793 C 54.247 24.812 58.525 25.381 62.519 26.518 C 72.065 19.883 76.254 21.262 76.254 21.262 C 78.984 28.32 77.268 33.532 76.751 34.829 C 79.956 38.413 81.892 42.99 81.892 48.585 C 81.892 68.28 70.201 72.613 59.062 73.882 C 60.858 75.465 62.457 78.593 62.457 83.377 C 62.457 90.228 62.396 95.758 62.396 97.438 C 62.396 98.81 63.295 100.406 65.834 99.906 C 85.687 93.111 100 73.91 100 51.267 C 100 22.952 77.611 0 49.995 0"},{href:"#google",d:"M 94.984 51.04 C 94.984 65.02 89.976 76.787 81.295 84.779 C 73.701 91.792 63.312 95.902 50.918 95.902 C 32.975 95.902 17.45 85.615 9.897 70.615 C 6.79 64.418 5.016 57.406 5.016 50 C 5.016 42.589 6.79 35.582 9.897 29.385 C 17.45 14.385 32.975 4.098 50.918 4.098 C 63.291 4.098 73.681 8.647 81.632 16.053 L 68.463 29.216 C 63.71 24.667 57.655 22.351 50.918 22.351 C 38.963 22.351 28.844 30.425 25.233 41.279 C 24.315 44.033 23.795 46.976 23.795 50 C 23.795 53.024 24.315 55.967 25.233 58.722 C 28.844 69.57 38.963 77.644 50.918 77.644 C 57.094 77.644 62.353 76.017 66.464 73.262 C 71.324 70.008 74.558 65.148 75.624 59.41 L 50.918 59.41 L 50.918 41.651 L 94.148 41.651 C 94.694 44.655 94.984 47.787 94.984 51.04 Z"}],[{href:"#register",d:"M 0 100 L 0 0 L 100 0 L 100 100 Z M 50.027 50.366 C 58.647 50.366 65.631 43.384 65.631 34.762 C 65.631 26.142 58.647 19.157 50.027 19.157 C 41.406 19.157 34.422 26.142 34.422 34.762 C 34.422 43.384 41.406 50.366 50.027 50.366 Z M 50.001 59.841 C 40.087 59.841 20.298 64.531 20.298 73.843 L 20.298 80.844 L 79.702 80.844 L 79.702 73.843 C 79.702 64.531 59.913 59.841 50.001 59.841 Z"},{href:"#open",d:"M 88.889 49.999 L 100 49.999 L 100 88.888 C 100 89.03 99.997 89.171 99.992 89.311 L 100 89.311 L 100 100 C 99.987 100 88.902 100 88.889 100 L 11.112 100 C 11.099 100 11.085 100 11.072 100 L 11.072 100 L 0 100 L 0 89.311 L 0.008 89.311 C 0.003 89.171 0 89.03 0 88.888 L 0 11.111 C 0 10.97 0.003 10.829 0.008 10.689 L 0 10.689 L 0 0 C 0.013 0 11.099 0 11.112 0 L 50.001 0 L 50.001 11.111 L 11.112 11.111 L 11.112 88.888 L 88.889 88.888 Z M 100 38.889 L 88.889 38.889 L 88.889 18.944 L 34.279 73.555 L 26.445 65.721 L 81.056 11.111 L 61.111 11.111 L 61.111 0 L 100 0 Z"},{href:"#cloud",d:"M 80.412 41.89 C 77.547 27.365 64.806 16.894 50 16.898 C 38.042 16.898 27.656 23.684 22.484 33.615 C 9.889 34.976 0.345 45.609 0.347 58.276 C 0.347 71.973 11.477 83.103 25.173 83.103 L 78.964 83.103 C 90.385 83.103 99.653 73.834 99.653 62.414 C 99.653 51.49 91.171 42.635 80.412 41.89 Z M 78.964 73.787 L 25.173 74.11 C 16.028 74.11 9.749 67.34 9.749 58.195 C 9.749 49.051 16.502 42.585 25.647 42.585 L 28.585 42.585 C 31.36 32.795 39.945 25.922 50.121 25.919 C 62.7 25.919 71.887 36.209 71.887 48.788 L 71.887 50.856 L 78.093 50.856 C 84.962 50.856 90.605 55.545 90.605 62.414 C 90.605 69.282 85.833 73.787 78.964 73.787 Z"},{href:"#auth",d:"M 52.939 40.957 C 49.122 30.121 38.883 22.871 27.392 22.872 C 12.427 22.872 0.265 35.034 0.265 50 C 0.265 64.966 12.427 77.129 27.392 77.129 C 38.883 77.129 49.122 69.88 52.939 59.043 L 72.608 59.043 L 72.608 77.129 L 90.693 77.129 L 90.693 59.043 L 99.735 59.043 L 99.735 40.957 L 52.939 40.957 Z M 27.392 59.043 C 22.419 59.043 18.35 54.974 18.35 50 C 18.35 45.026 22.419 40.957 27.392 40.957 C 32.366 40.957 36.435 45.026 36.435 50 C 36.435 54.974 32.366 59.043 27.392 59.043 Z"}],[{href:"#reverse",d:"M 22.693 44.55 L 0.945 66.352 L 22.693 88.153 L 22.693 71.802 L 60.901 71.802 L 60.901 60.901 L 22.693 60.901 L 22.693 44.55 Z M 99.055 33.649 L 77.307 11.847 L 77.307 28.199 L 39.099 28.199 L 39.099 39.099 L 77.307 39.099 L 77.307 55.451 L 99.055 33.649 Z"},{href:"#boolop-unite",d:"M 0 67.2 L 0 0 L 67.2 0 L 67.2 32.8 L 100 32.8 L 100 100 L 32.8 100 L 32.8 67.2 Z"},{href:"#arrow",d:"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z"},{href:"#plus",d:"M 60.82 60.82 C 60.82 60.82 97.29 61.07 97.29 61.07 C 98.59 61.07 99.88 59.78 99.87 58.48 C 99.87 58.48 99.75 42.85 99.75 42.85 C 99.74 41.55 98.43 40.24 97.13 40.23 C 97.13 40.23 60.66 39.98 60.66 39.98 C 60.66 39.98 60.38 2.87 60.38 2.87 C 60.37 1.56 59.05 0.25 57.75 0.24 C 57.75 0.24 42.13 0.14 42.13 0.14 C 40.82 0.13 39.53 1.42 39.54 2.73 C 39.54 2.73 39.83 39.84 39.83 39.84 C 39.83 39.84 2.71 39.59 2.71 39.59 C 1.41 39.58 0.12 40.87 0.13 42.17 C 0.13 42.17 0.25 57.8 0.25 57.8 C 0.26 59.1 1.57 60.41 2.87 60.42 C 2.87 60.42 39.34 60.67 39.34 60.67 C 39.34 60.67 39.62 97.13 39.62 97.13 C 39.63 98.43 40.94 99.75 42.24 99.76 C 42.24 99.76 57.87 99.86 57.87 99.86 C 59.17 99.87 60.46 98.58 60.45 97.27 C 60.45 97.27 60.82 60.82 60.82 60.82 Z"}],[{href:"#blog",d:"M 0 79.2846 L 0 100 L 20.7154 100 L 81.8031 38.9081 L 61.0919 18.1969 L 0 79.2846 Z M 97.8208 22.8904 C 99.9764 20.7411 99.9764 17.2513 97.8208 15.102 L 84.898 2.1792 C 82.7487 0.0236 79.2589 0.0236 77.1096 2.1792 L 67.0016 12.2851 L 87.7149 32.9984 L 97.8208 22.8904 Z"},{href:"#tutorials",d:"M 90.769 9.231 L 9.231 9.231 C 4.202 9.231 0.171 13.262 0.171 18.29 L 0.171 72.65 C 0.171 77.655 4.225 81.71 9.231 81.71 L 31.88 81.71 L 31.88 90.769 L 68.12 90.769 L 68.12 81.71 L 90.769 81.71 C 95.752 81.71 99.784 77.633 99.784 72.65 L 99.829 18.29 C 99.829 13.285 95.775 9.231 90.769 9.231 Z M 90.769 72.65 L 9.231 72.65 L 9.231 18.29 L 90.769 18.29 L 90.769 72.65 Z M 68.12 45.47 L 36.41 63.59 L 36.41 27.35 Z"},{href:"#home",d:"M 39.8886 92 L 39.8886 61.7068 L 60.0841 61.7068 L 60.0841 92 L 84.3186 92 L 84.3186 51.609 L 99.4652 51.609 L 49.9863 7.179 L 0.5074 51.609 L 15.654 51.609 L 15.654 92 Z"},{href:"#bugs",d:"M 93.284 28.359 L 78.081 28.359 C 75.64 24.126 72.274 20.5 68.234 17.754 L 77.052 8.936 L 69.424 1.306 L 57.683 13.047 C 55.194 12.452 52.651 12.127 50.001 12.127 C 47.35 12.127 44.808 12.452 42.373 13.047 L 30.578 1.306 L 22.949 8.936 L 31.714 17.754 C 27.709 20.513 24.355 24.138 21.92 28.359 L 6.717 28.359 L 6.717 39.179 L 18.025 39.179 C 17.755 40.965 17.539 42.75 17.539 44.589 L 17.539 50 L 6.717 50 L 6.717 60.82 L 17.539 60.82 L 17.539 66.231 C 17.539 68.071 17.755 69.856 18.025 71.641 L 6.717 71.641 L 6.717 82.461 L 21.92 82.461 C 27.548 92.146 37.99 98.694 50.001 98.694 C 62.012 98.694 72.454 92.146 78.081 82.461 L 93.284 82.461 L 93.284 71.641 L 81.976 71.641 C 82.246 69.856 82.462 68.071 82.462 66.231 L 82.462 60.82 L 93.284 60.82 L 93.284 50 L 82.462 50 L 82.462 44.589 C 82.462 42.75 82.246 40.965 81.976 39.179 L 93.284 39.179 L 93.284 28.359 Z M 60.821 71.641 L 39.18 71.641 L 39.18 60.82 L 60.821 60.82 L 60.821 71.641 Z M 60.821 50 L 39.18 50 L 39.18 39.179 L 60.821 39.179 L 60.821 50 Z"}],[{href:"#ideas",d:"M 35.1175 94.6475 C 35.1175 97.3755 37.3505 99.6075 40.0795 99.6075 L 59.9215 99.6075 C 62.6505 99.6075 64.8835 97.3755 64.8835 94.6475 L 64.8835 89.6875 L 35.1175 89.6875 L 35.1175 94.6475 Z M 50.0005 0.3925 C 30.8525 0.3925 15.2755 15.9695 15.2755 35.1175 C 15.2755 46.9255 21.1785 57.2925 30.1565 63.5935 L 30.1565 74.8045 C 30.1565 77.5325 32.3895 79.7645 35.1175 79.7645 L 64.8835 79.7645 C 67.6115 79.7645 69.8435 77.5325 69.8435 74.8045 L 69.8435 63.5935 C 78.8225 57.2925 84.7245 46.9255 84.7245 35.1175 C 84.7245 15.9695 69.1495 0.3925 50.0005 0.3925 Z M 64.1375 55.4575 L 59.9215 58.4345 L 59.9215 69.8435 L 40.0795 69.8435 L 40.0795 58.4345 L 35.8625 55.4575 C 29.1925 50.8325 25.2075 43.2345 25.1965 35.1175 C 25.1965 21.4275 36.3085 10.3135 50.0005 10.3135 C 63.6925 10.3135 74.8045 21.4275 74.8045 35.1175 C 74.8045 43.2045 70.8365 50.7935 64.1375 55.4575 Z"},{href:"#questions",d:"M 91.2875 22.4755 L 82.1125 22.4755 L 82.1125 63.7625 L 22.4755 63.7625 L 22.4755 72.9375 C 22.4755 75.4605 24.5395 77.5245 27.0625 77.5245 L 77.5245 77.5245 L 95.8745 95.8745 L 95.8745 27.0625 C 95.8745 24.5395 93.8105 22.4755 91.2875 22.4755 Z M 72.9375 49.9995 L 72.9375 8.7125 C 72.9375 6.1895 70.8725 4.1255 68.3495 4.1255 L 8.7125 4.1255 C 6.1895 4.1255 4.1255 6.1895 4.1255 8.7125 L 4.1255 72.9375 L 22.4755 54.5875 L 68.3495 54.5875 C 70.8725 54.5875 72.9375 52.5225 72.9375 49.9995 Z"},{href:"#logo-js",d:"M 0 0 L 100 0 L 100 100 L 0 100 Z M 59.538 82.561 C 62.296 88.013 67.935 92.171 76.661 92.171 C 85.586 92.171 92.232 87.536 92.232 79.076 C 92.232 71.229 87.724 67.738 79.741 64.314 L 77.391 63.308 C 73.36 61.562 71.613 60.42 71.613 57.602 C 71.613 55.32 73.359 53.575 76.111 53.575 C 78.809 53.575 80.547 54.713 82.158 57.602 L 89.475 52.903 C 86.38 47.459 82.084 45.38 76.111 45.38 C 67.719 45.38 62.35 50.745 62.35 57.792 C 62.35 65.443 66.854 69.061 73.635 71.95 L 75.983 72.959 C 80.268 74.834 82.824 75.974 82.824 79.197 C 82.824 81.886 80.337 83.831 76.443 83.831 C 71.809 83.831 69.189 81.414 67.175 78.125 Z M 26.33 83.571 C 28.547 88.259 32.904 92.152 40.427 92.152 C 48.754 92.152 54.459 87.724 54.459 77.994 L 54.459 45.917 L 45.062 45.917 L 45.062 77.868 C 45.062 82.565 43.114 83.772 40.026 83.772 C 36.798 83.772 35.456 81.558 33.979 78.94 Z"},{href:"#logo-html",d:"M 13.974 89.934 L 5.958 0 L 94.041 0 L 86.018 89.934 L 49.947 99.931 L 13.974 89.934 Z M 35.405 40.73 L 34.4 29.436 L 50 29.436 L 50 29.402 L 76.602 29.402 L 76.822 26.927 L 77.323 21.334 L 77.588 18.374 L 49.966 18.374 L 49.966 18.408 L 22.352 18.408 L 22.616 21.369 L 25.329 51.758 L 63.539 51.758 L 62.262 66.062 L 49.966 69.384 L 49.966 69.416 L 49.955 69.419 L 37.678 66.107 L 36.894 57.316 L 25.812 57.316 L 27.355 74.633 L 49.937 80.903 L 49.966 80.852 L 72.566 74.589 L 72.734 72.722 L 75.325 43.689 L 75.598 40.73 L 35.405 40.73 Z"}]],y="",b=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.selectOtherShape=function(e,t){window.stage.shape.plugin(t.d)},r.tool=function(e){var t,n,i,a,o,s,l,c,u,d,h;switch(e.value){case"Select":null===(t=r.state.stage)||void 0===t||t.tool(r.state.stage.tools().SELECT);break;case"Pan":null===(n=r.state.stage)||void 0===n||n.tool(r.state.stage.tools().PAN);break;case"Spline":null===(i=r.state.stage)||void 0===i||i.tool(r.state.stage.tools().SPLINE);break;case"Freehand":null===(a=r.state.stage)||void 0===a||a.tool(r.state.stage.tools().FREEHAND);break;case"Rectangle":null===(o=r.state.stage)||void 0===o||o.tool(r.state.stage.tools().RECT);break;case"Ellipse":null===(s=r.state.stage)||void 0===s||s.tool(r.state.stage.tools().ELLIPSE);break;case"Triangle":null===(l=r.state.stage)||void 0===l||l.tool(r.state.stage.tools().TRIANGLE);break;case"Line":null===(c=r.state.stage)||void 0===c||c.tool(r.state.stage.tools().LINE);break;case"OtherShape":y===e.value&&r.setState({toggleOtherShape:!r.state.toggleOtherShape}),null===(u=r.state.stage)||void 0===u||u.tool(r.state.stage.tools().OTHER_SHAPE);break;case"Text":null===(d=r.state.stage)||void 0===d||d.tool(r.state.stage.tools().TEXT);break;case"View":null===(h=r.state.stage)||void 0===h||h.tool(r.state.stage.tools().VIEW)}y=e.value},r.keydown=function(e){var t,n,i,a,o,s,l,c,u,d,h,p,f,v,m,g,y,b;e.preventDefault();var x,w,_,M,S=e.ctrlKey,E=e.shiftKey;switch(e.code){case"Delete":case"Backspace":null===(t=r.state.stage)||void 0===t||null===(n=t.select)||void 0===n||n.nodesRemove();break;case"KeyV":case"Escape":null===(i=r.state.stage)||void 0===i||i.tool(r.state.stage.tools().SELECT);break;case"Space":null===(a=r.state.stage)||void 0===a||a.tool(r.state.stage.tools().PAN);break;case"KeyT":null===(o=r.state.stage)||void 0===o||o.tool(r.state.stage.tools().TEXT);break;case"KeyM":null===(s=r.state.stage)||void 0===s||s.tool(r.state.stage.tools().RECT);break;case"KeyL":null===(l=r.state.stage)||void 0===l||l.tool(r.state.stage.tools().ELLIPSE);break;case"Backslash":null===(c=r.state.stage)||void 0===c||c.tool(r.state.stage.tools().LINE);break;case"ArrowUp":null===(u=r.state.stage)||void 0===u||u.nodesMove("up",1);break;case"ArrowDown":null===(d=r.state.stage)||void 0===d||d.nodesMove("down",1);break;case"ArrowLeft":null===(h=r.state.stage)||void 0===h||h.nodesMove("left",1);break;case"ArrowRight":null===(p=r.state.stage)||void 0===p||p.nodesMove("right",1)}(S&&"c"===e.key.toLowerCase()&&(null===(f=r.state.stage)||void 0===f||null===(v=f.clipboard)||void 0===v||v.copy()),S&&"x"===e.key.toLowerCase()&&(null===(m=r.state.stage)||void 0===m||null===(g=m.clipboard)||void 0===g||g.cut()),S&&"v"===e.key.toLowerCase()&&(null===(y=r.state.stage)||void 0===y||null===(b=y.clipboard)||void 0===b||b.paste()),S&&"z"===e.key.toLocaleLowerCase())&&(E?null===(x=r.state.stage)||void 0===x||null===(w=x.history)||void 0===w||w.redo():null===(_=r.state.stage)||void 0===_||null===(M=_.history)||void 0===M||M.undo())},r.keyup=function(){var e,t,n;(null===(e=r.state.stage)||void 0===e?void 0:e.currentType)===(null===(t=r.state.stage)||void 0===t?void 0:t.tools().PAN)&&(null===(n=r.state.stage)||void 0===n||n.tool(f))},r.init=function(){var e,t,n,i;null===(e=r.state.stage)||void 0===e||e.watch(r.state.stage.actions().TOOL,(function(e){var t,n;e!==(null===(t=r.state.stage)||void 0===t?void 0:t.tools().PAN)&&(f=e),"OtherShape"===y&&e!==(null===(n=r.state.stage)||void 0===n?void 0:n.tools().OTHER_SHAPE)&&r.setState({toggleOtherShape:!1});var i=document.querySelector("#toolbar"),a=null===i||void 0===i?void 0:i.querySelector("x-buttons");null===a||void 0===a||a.childNodes.forEach((function(t){var n,i,a,o,s,l,c,u,d,h,p;t.removeAttribute("toggled"),e===(null===(n=r.state.stage)||void 0===n?void 0:n.tools().SELECT)?"Select"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(i=r.state.stage)||void 0===i?void 0:i.tools().PAN)?"Pan"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(a=r.state.stage)||void 0===a?void 0:a.tools().SPLINE)?"Spline"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(o=r.state.stage)||void 0===o?void 0:o.tools().FREEHAND)?"Freehand"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(s=r.state.stage)||void 0===s?void 0:s.tools().RECT)?"Rectangle"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(l=r.state.stage)||void 0===l?void 0:l.tools().ELLIPSE)?"Ellipse"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(c=r.state.stage)||void 0===c?void 0:c.tools().TRIANGLE)?"Triangle"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(u=r.state.stage)||void 0===u?void 0:u.tools().LINE)?"Line"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(d=r.state.stage)||void 0===d?void 0:d.tools().OTHER_SHAPE)?"OtherShape"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(h=r.state.stage)||void 0===h?void 0:h.tools().TEXT)?"Text"===t.textContent&&t.toggleAttribute("toggled"):e===(null===(p=r.state.stage)||void 0===p?void 0:p.tools().VIEW)&&"View"===t.textContent&&t.toggleAttribute("toggled")}))})),null===(t=r.state.stage)||void 0===t||t.watch(null===(n=r.state.stage)||void 0===n?void 0:n.actions().TEXT,(function(e,t){var n;"quit"===t&&(null===(n=r.state.stage)||void 0===n||n.tool(r.state.stage.tools().SELECT))})),null===(i=r.state.stage)||void 0===i||i.tool(r.state.stage.tools().SELECT)},r.chooseOtherShape=function(){var e=document.querySelector(".other-shape"),t=null===e||void 0===e?void 0:e.querySelectorAll("x-button");null===t||void 0===t||t.forEach((function(e){e.onclick=function(){t.forEach((function(e){e.removeAttribute("toggled")})),e.toggleAttribute("toggled");var n=document.querySelector("#buttons");null===n||void 0===n||n.childNodes.forEach((function(t){if("OtherShape"===t.textContent){var n=e.childNodes[0].getAttribute("href")||"";t.childNodes[0].setAttribute("href",n)}}))}}))},r.render=function(){return(0,v.jsxs)("div",{id:"toolbar",className:"flex",children:[(0,v.jsx)("x-buttons",{id:"buttons",vertical:"",children:m.map((function(e,t){return(0,v.jsxs)("x-button",{skin:"dock",value:e.value,onClick:function(){return r.tool(e)},children:[(0,v.jsx)("x-icon",{href:e.href}),"OtherShape"===e.value&&(0,v.jsx)("x-icon",{href:"#arrow-expand",class:"modal-icon"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:e.value})})]},t)}))}),(0,v.jsxs)("div",{style:{transform:r.state.toggleOtherShape?"translateX(10px)":"translateX(-281px)"},className:"other-shape",children:[(0,v.jsx)("header",{children:(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"Other Shape"})})}),(0,v.jsx)("main",{children:(0,v.jsxs)("section",{style:{padding:"12px 14px"},children:[(0,v.jsx)("h3",{children:(0,v.jsx)("x-message",{children:"Drawing"})}),(0,v.jsx)("h4",{children:(0,v.jsx)("x-message",{children:"Type"})}),g.map((function(e,t){return(0,v.jsx)("x-buttons",{style:{marginTop:"-1px"},children:e.map((function(e,t){return(0,v.jsx)("x-button",{onClick:function(t){return r.selectOtherShape(t,e)},children:(0,v.jsx)("x-icon",{href:e.href})},t)}))},t)}))]})})]})]})},r.state={stage:void 0,toggleOtherShape:!1},r}return s(n,[{key:"componentDidMount",value:function(){this.setState({stage:window.stage}),document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup),this.chooseOtherShape()}},{key:"componentDidUpdate",value:function(e,t,n){t.stage||this.init()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("keyup",this.keyup)}}]),n}(e.Component),x=b;function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),s=new T(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=u;var h={};function p(){}function f(){}function v(){}var m={};c(m,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==t&&n.call(y,o)&&(m=y);var b=v.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function a(i,o,s,l){var c=d(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==r(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,s,l)}),(function(e){a("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return a("throw",e,s,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){a(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function M(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return A()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=d(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=v,i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:f,configurable:!0}),f.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(_.prototype),c(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new _(u(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),c(b,l,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function _(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){_(a,i,r,o,s,"next",e)}function s(e){_(a,i,r,o,s,"throw",e)}o(void 0)}))}}var S,E=!1,C=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.openSvg=M(w().mark((function e(){var t,n,i,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.stage,n={types:[{description:"svg",accept:{"svg/*":[".svg"]}}],excludeAcceptAllOption:!0,multiple:!1},e.next=4,window.showOpenFilePicker(n);case 4:return i=e.sent,e.next=7,i[0].getFile();case 7:r=e.sent,(a=new FileReader).readAsText(r),a.onload=function(e){var n=document.querySelector("#board"),i=(null===n||void 0===n?void 0:n.getBoundingClientRect()).height,r=(new DOMParser).parseFromString(e.target.result,"text/html").querySelector("svg"),a=null===r||void 0===r?void 0:r.viewBox.baseVal,o=a.width,s=a.height;t.svgRoot.innerHTML=null===r||void 0===r?void 0:r.innerHTML,t.setViewSize(o,s),t.setBoardSize(Number(i-40)/s,20,20)};case 11:case"end":return e.stop()}}),e)}))),r.saveSvg=M(w().mark((function e(){var t,n,i,r,a,o,s,l,c,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.stage,n={types:[{description:"Svg file",accept:{"svg/image":[".svg"]}}]},e.next=4,window.showSaveFilePicker(n);case 4:return i=e.sent,e.next=7,i.createWritable();case 7:return r=e.sent,a=document.querySelector("#background-outlines rect"),o=Number(null===a||void 0===a?void 0:a.getAttribute("x")),s=Number(null===a||void 0===a?void 0:a.getAttribute("y")),l=Number(null===a||void 0===a?void 0:a.getAttribute("width")),c=Number(null===a||void 0===a?void 0:a.getAttribute("height")),u='<svg\n    viewBox="'.concat(o," ").concat(s," ").concat(l," ").concat(c,'"\n    width="').concat(l,'"\n    height="').concat(c,'"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n  >').concat(t.svgRoot.innerHTML,"</svg>"),e.next=16,r.write(u);case 16:return e.next=18,r.close();case 18:case"end":return e.stop()}}),e)}))),r.openSmatr=function(){var e,t=document.querySelector("#smart");null===t||void 0===t||t.toggleAttribute("toggled"),null===(e=window.stage.select)||void 0===e||e.disSmartGuides(E=!E)},r.toggleMaunalGuides=function(){var e=document.querySelector("#maunal");null===e||void 0===e||e.toggleAttribute("toggled");var t=document.querySelector("#lux-rulers");"none"===t.style.display?t.style.display="block":t.style.display="none"},r.action=function(e){var t,n,i,a,o,s=window.stage;switch(e){case"open":r.openSvg();break;case"save":r.saveSvg();break;case"smart":r.openSmatr();break;case"maunal":r.toggleMaunalGuides();break;case"undo":null===(t=s.history)||void 0===t||t.undo();break;case"redo":null===(n=s.history)||void 0===n||n.redo();break;case"cut":null===(i=s.clipboard)||void 0===i||i.cut();break;case"copy":null===(a=s.clipboard)||void 0===a||a.copy();break;case"paste":null===(o=s.clipboard)||void 0===o||o.paste()}},r.state={stage:void 0},r}return s(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return(0,v.jsx)("header",{id:"header",children:(0,v.jsxs)("x-menubar",{children:[(0,v.jsxs)("x-menuitem",{children:[(0,v.jsx)("x-label",{children:"File"}),(0,v.jsxs)("x-menu",{children:[(0,v.jsx)("x-menuitem",{onClick:function(){return e.action("open")},children:(0,v.jsx)("x-label",{children:"Open"})}),(0,v.jsx)("hr",{}),(0,v.jsx)("x-menuitem",{onClick:function(){return e.action("save")},children:(0,v.jsx)("x-label",{children:"Save As.."})})]})]}),(0,v.jsxs)("x-menuitem",{children:[(0,v.jsx)("x-label",{children:"Edit"}),(0,v.jsxs)("x-menu",{children:[(0,v.jsxs)("x-menuitem",{onClick:function(){return e.action("undo")},children:[(0,v.jsx)("x-label",{children:"Undo"}),(0,v.jsx)("x-shortcut",{value:"Control+Z"})]}),(0,v.jsxs)("x-menuitem",{onClick:function(){return e.action("redo")},children:[(0,v.jsx)("x-label",{children:"Redo"}),(0,v.jsx)("x-shortcut",{value:"Control+Shift+Z"})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("x-menuitem",{onClick:function(){return e.action("cut")},children:[(0,v.jsx)("x-label",{children:"Cut"}),(0,v.jsx)("x-shortcut",{value:"Control+X"})]}),(0,v.jsxs)("x-menuitem",{onClick:function(){return e.action("copy")},children:[(0,v.jsx)("x-label",{children:"Copy"}),(0,v.jsx)("x-shortcut",{value:"Control+C"})]}),(0,v.jsxs)("x-menuitem",{onClick:function(){return e.action("paste")},children:[(0,v.jsx)("x-label",{children:"Paste"}),(0,v.jsx)("x-shortcut",{value:"Control+V"})]})]})]}),(0,v.jsxs)("x-menuitem",{children:[(0,v.jsx)("x-label",{children:"View"}),(0,v.jsxs)("x-menu",{children:[(0,v.jsx)("x-menuitem",{id:"maunal",onClick:function(){return e.action("maunal")},toggled:"true",children:(0,v.jsx)("x-label",{children:"Maunal Guides"})}),(0,v.jsx)("x-menuitem",{id:"smart",onClick:function(){return e.action("smart")},toggled:"true",children:(0,v.jsx)("x-label",{children:"Smart Guides"})})]})]}),(0,v.jsxs)("x-menuitem",{children:[(0,v.jsx)("x-label",{children:"Help"}),(0,v.jsx)("x-menu",{children:(0,v.jsx)("x-menuitem",{children:(0,v.jsx)("x-label",{children:"wechat:13696977423"})})})]})]})})}}]),n}(e.Component),T=C,L=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).colorChange=function(t){e.chageAttribute("fill",t.target.value)},e.opacitySliderChange=function(t){e.chageAttribute("opacity",t.target.value);var n=document.querySelector("#opacity-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.opacityInputChange=function(t){e.chageAttribute("opacity",t.target.value);var n=document.querySelector("#opacity-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.chageAttribute=function(e,t){var n,i,r,a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().EDIT,e),null===(i=a.select)||void 0===i||i.get().forEach((function(n){for(var i=n.node,r=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=r.currentNode;a;)"g"!==a.localName&&a.setAttribute(e,t),a=r.nextNode()})),null===(r=a.history)||void 0===r||r.end()},e.watch=function(){var e,t=window.stage,n=document.querySelector("#opacity-slider"),i=document.querySelector("#opacity-input");0===(null===(e=t.select)||void 0===e?void 0:e.size())?(null===n||void 0===n||n.setAttribute("disabled",""),null===i||void 0===i||i.setAttribute("disabled","")):(null===n||void 0===n||n.removeAttribute("disabled"),null===i||void 0===i||i.removeAttribute("disabled"));try{var r;null===(r=t.select)||void 0===r||r.get().forEach((function(e){for(var t=e.node,n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),i=n.currentNode;i;){if("g"!==i.localName){var r=document.querySelector("#rect-picker"),a=document.querySelector("#opacity-slider"),o=document.querySelector("#opacity-input"),s=window.getComputedStyle(t).fill,l=window.getComputedStyle(t).opacity;throw null===r||void 0===r||r.setAttribute("value",s),null===a||void 0===a||a.setAttribute("value",l),null===o||void 0===o||o.setAttribute("value",l),new Error("ok color")}i=n.nextNode()}}))}catch(a){}},e.getAttrFirst=function(t,n){var i;if(t.hasAttribute(n)&&"g"!==t.nodeName&&(i=t.getAttribute(n)),t.children.length)for(var r=0;r<t.children.length;r++)if(t.children[r].hasAttribute(n)&&"g"!==t.children[r].nodeName)i=t.children[r].getAttribute(n);else{var a=e.getAttrFirst(t.children[r],n);a&&(i=a)}return i},e.init=function(){var t=document.querySelector("#rect-picker");null===t||void 0===t||t.addEventListener("changeend",e.colorChange);var n=document.querySelector("#opacity-slider");null===n||void 0===n||n.addEventListener("changeend",e.opacitySliderChange);var i=document.querySelector("#opacity-input");null===i||void 0===i||i.addEventListener("change",e.opacityInputChange),null===i||void 0===i||i.addEventListener("keydown",(function(e){e.stopPropagation()}));var r=window.stage;r.watch(r.actions().SELECTED,e.watch)},e.render=function(){return(0,v.jsxs)("div",{id:"fill",children:[(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{href:"#fill",children:"Fill"})}),(0,v.jsxs)("section",{id:"paint-section",children:[(0,v.jsx)("h3",{id:"section-heading",children:(0,v.jsx)("x-message",{href:"#paint",children:"Paint"})}),(0,v.jsx)("x-rectcolorpicker",{id:"rect-picker",value:"#bada55",alphaslider:""})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("div",{id:"opacity-section",children:[(0,v.jsx)("h3",{id:"opacity-section-heading",children:(0,v.jsx)("x-message",{children:"Opacity"})}),(0,v.jsxs)("div",{className:"box",children:[(0,v.jsx)("x-slider",{id:"opacity-slider",value:"0",min:"0",max:"1",step:"0.01",disabled:""}),(0,v.jsx)("x-numberinput",{id:"opacity-input",value:"0",min:"0",max:"1",step:"0.01",condensed:"",role:"input",tabindex:"0",disabled:"",children:(0,v.jsx)("x-stepper",{})})]})]})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),A=L,P=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).colorChange=function(t){e.chageAttribute("stroke",t.target.value)},e.opacitySliderChange=function(t){e.chageAttribute("stroke-opacity",t.target.value);var n=document.querySelector("#opacity-width-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.opacityInputChange=function(t){e.chageAttribute("stroke-opacity",t.target.value);var n=document.querySelector("#opacity-width-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.strokeWidthSliderChange=function(t){e.chageAttribute("stroke-width",t.target.value);var n=document.querySelector("#stroke-width-input");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.strokeWidthInputChange=function(t){e.chageAttribute("stroke-width",t.target.value);var n=document.querySelector("#stroke-width-slider");null===n||void 0===n||n.setAttribute("value",t.target.value)},e.chageAttribute=function(e,t){var n,i,r,a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().EDIT,e),null===(i=a.select)||void 0===i||i.get().forEach((function(n){for(var i=n.node,r=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=r.currentNode;a;)"g"!==a.localName&&a.setAttribute(e,t),a=r.nextNode()})),null===(r=a.history)||void 0===r||r.end()},e.watch=function(){var e,t=window.stage,n=document.querySelector("#opacity-width-slider"),i=document.querySelector("#opacity-width-input"),r=document.querySelector("#stroke-width-input"),a=document.querySelector("#stroke-width-slider");0===(null===(e=t.select)||void 0===e?void 0:e.size())?(null===n||void 0===n||n.setAttribute("disabled",""),null===i||void 0===i||i.setAttribute("disabled",""),null===r||void 0===r||r.setAttribute("disabled",""),null===a||void 0===a||a.setAttribute("disabled","")):(null===n||void 0===n||n.removeAttribute("disabled"),null===i||void 0===i||i.removeAttribute("disabled"),null===r||void 0===r||r.removeAttribute("disabled"),null===a||void 0===a||a.removeAttribute("disabled"));try{var o;null===(o=t.select)||void 0===o||o.get().forEach((function(e){for(var t=e.node,n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),i=n.currentNode;i;){if("g"!==i.localName){var r=document.querySelector("#rect-stroke-picker"),a=document.querySelector("#opacity-width-slider"),o=document.querySelector("#opacity-width-input"),s=document.querySelector("#stroke-width-input"),l=document.querySelector("#stroke-width-slider"),c=window.getComputedStyle(t).stroke,u=window.getComputedStyle(t).strokeOpacity,d=parseFloat(window.getComputedStyle(t).strokeWidth);throw null===r||void 0===r||r.setAttribute("value",c),null===a||void 0===a||a.setAttribute("value",u),null===o||void 0===o||o.setAttribute("value",u),null===s||void 0===s||s.setAttribute("value",d.toString()),null===l||void 0===l||l.setAttribute("value",d.toString()),new Error("ok color")}i=n.nextNode()}}))}catch(s){}},e.getAttrFirst=function(t,n){var i;if(t.hasAttribute(n)&&"g"!==t.nodeName&&(i=t.getAttribute(n)),t.children.length)for(var r=0;r<t.children.length;r++)if(t.children[r].hasAttribute(n)&&"g"!==t.children[r].nodeName)i=t.children[r].getAttribute(n);else{var a=e.getAttrFirst(t.children[r],n);a&&(i=a)}return i},e.init=function(){var t=document.querySelector("#rect-stroke-picker");null===t||void 0===t||t.addEventListener("changeend",e.colorChange);var n=document.querySelector("#opacity-width-slider");null===n||void 0===n||n.addEventListener("changeend",e.opacitySliderChange);var i=document.querySelector("#opacity-width-input");null===i||void 0===i||i.addEventListener("change",e.opacityInputChange),null===i||void 0===i||i.addEventListener("keydown",(function(e){e.stopPropagation()}));var r=document.querySelector("#stroke-width-slider");null===r||void 0===r||r.addEventListener("changeend",e.strokeWidthSliderChange);var a=document.querySelector("#stroke-width-input");null===a||void 0===a||a.addEventListener("change",e.strokeWidthInputChange),null===a||void 0===a||a.addEventListener("keydown",(function(e){e.stopPropagation()}));var o=window.stage;o.watch(o.actions().SELECTED,e.watch)},e.render=function(){return(0,v.jsxs)("div",{id:"stroke",children:[(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"Stroke"})}),(0,v.jsxs)("section",{id:"paint-section",children:[(0,v.jsx)("h3",{id:"section-heading",children:(0,v.jsx)("x-message",{children:"Paint"})}),(0,v.jsx)("x-rectcolorpicker",{id:"rect-stroke-picker",value:"#bada55",alphaslider:""})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("div",{id:"opacity-width-section",children:[(0,v.jsx)("h3",{id:"opacity-width-section-heading",children:(0,v.jsx)("x-message",{children:"Opacity"})}),(0,v.jsxs)("div",{className:"box",children:[(0,v.jsx)("x-slider",{id:"opacity-width-slider",value:"0",min:"0",max:"1",step:"0.01"}),(0,v.jsx)("x-numberinput",{id:"opacity-width-input",value:"0",min:"0",max:"1",step:"0.01",condensed:"",role:"input",tabindex:"0",children:(0,v.jsx)("x-stepper",{})})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("div",{id:"stroke-width-section",children:[(0,v.jsx)("h3",{id:"stroke-width-section-heading",children:(0,v.jsx)("x-message",{children:"Width"})}),(0,v.jsxs)("div",{className:"box",children:[(0,v.jsx)("x-slider",{id:"stroke-width-slider",value:"0",min:"0",max:"50",step:"1"}),(0,v.jsx)("x-numberinput",{id:"stroke-width-input",value:"0",min:"0",max:"50",step:"1",condensed:"",role:"input",tabindex:"0",children:(0,v.jsx)("x-stepper",{})})]})]})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),O=P,R=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.changeAttribute=function(e,t){var n,i,r=window.stage,a=e.target,o=a.toggled,s=document.querySelector("#text-anchor-buttons"),l=null===s||void 0===s?void 0:s.querySelectorAll("x-button");null===(n=r.select)||void 0===n||n.checkedsTexts().forEach((function(e){switch(t){case"bold":o?(e.removeAttribute("font-weight"),a.removeAttribute("toggled")):(e.setAttribute("font-weight","700"),a.setAttribute("toggled",""));break;case"italic":o?(e.removeAttribute("font-style"),a.removeAttribute("toggled")):(e.setAttribute("font-style","italic"),a.setAttribute("toggled",""));break;case"start":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","start"),a.setAttribute("toggled","");break;case"middle":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","middle"),a.setAttribute("toggled","");break;case"end":null===l||void 0===l||l.forEach((function(e){return e.removeAttribute("toggled")})),e.setAttribute("text-anchor","end"),a.setAttribute("toggled","")}})),null===(i=r.select)||void 0===i||i.autoResetBoxSelect(!0)},r.letterChange=function(e){var t,n,i=window.stage,r=document.querySelector("#letter-spacing-slider"),a=document.querySelector("#letter-spacing-input"),o=e.target;null===r||void 0===r||r.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=i.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("letter-spacing",o.value)})),null===(n=i.select)||void 0===n||n.autoResetBoxSelect(!0)},r.lineChange=function(e){var t,n,i=window.stage,r=document.querySelector("#line-spacing-slider"),a=document.querySelector("#line-spacing-input"),o=e.target;null===r||void 0===r||r.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=i.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.querySelectorAll("tspan").forEach((function(e){e.setAttribute("dy",o.value+"em")}))})),null===(n=i.select)||void 0===n||n.autoResetBoxSelect(!0)},r.fontSizeChange=function(e){var t,n,i=window.stage,r=document.querySelector("#font-size-slider"),a=document.querySelector("#font-size-input"),o=e.target;null===r||void 0===r||r.setAttribute("value",o.value),null===a||void 0===a||a.setAttribute("value",o.value),null===(t=i.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("font-size",o.value)})),null===(n=i.select)||void 0===n||n.autoResetBoxSelect(!0)},r.queryLocalFonts=M(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.next=4,window.queryLocalFonts();case 4:e.sent.forEach((function(e){t.includes(e.family)||(t.push(e.family),n.push(e))})),r.setState({fonts:n});case 7:case"end":return e.stop()}}),e)}))),r.fontChange=function(e){var t,n,i=e.detail.newValue,r=window.stage;null===(t=r.select)||void 0===t||t.checkedsTexts().forEach((function(e){e.setAttribute("font-family",i)})),null===(n=r.select)||void 0===n||n.autoResetBoxSelect(!0)},r.init=function(){var e=document.querySelector("#font-size-slider"),t=document.querySelector("#font-size-input");null===e||void 0===e||e.addEventListener("changeend",r.fontSizeChange),null===t||void 0===t||t.addEventListener("changeend",r.fontSizeChange),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()}));var n=document.querySelector("#letter-spacing-slider"),i=document.querySelector("#letter-spacing-input");null===n||void 0===n||n.addEventListener("changeend",r.letterChange),null===i||void 0===i||i.addEventListener("changeend",r.letterChange),null===i||void 0===i||i.addEventListener("keydown",(function(e){e.stopPropagation()}));var a=document.querySelector("#line-spacing-slider"),o=document.querySelector("#line-spacing-input");null===a||void 0===a||a.addEventListener("changeend",r.lineChange),null===o||void 0===o||o.addEventListener("changeend",r.lineChange),null===o||void 0===o||o.addEventListener("keydown",(function(e){e.stopPropagation()}));var s=document.querySelector("#font-select");null===s||void 0===s||s.addEventListener("change",r.fontChange)},r.watch=function(){var e=window.stage,t=document.querySelector("#bold"),n=document.querySelector("#italic"),i=document.querySelector("#start-text-anchor-button"),r=document.querySelector("#middle-text-anchor-button"),a=document.querySelector("#end-text-anchor-button"),o=document.querySelector("#font-size-slider"),s=document.querySelector("#font-size-input"),l=document.querySelector("#letter-spacing-slider"),c=document.querySelector("#letter-spacing-input"),u=document.querySelector("#line-spacing-slider"),d=document.querySelector("#line-spacing-input"),h=document.querySelector("#font-select");e.watch(e.actions().SELECTED,(function(){var p;null===o||void 0===o||o.setAttribute("value","0"),null===s||void 0===s||s.setAttribute("value","0"),null===l||void 0===l||l.setAttribute("value","0"),null===c||void 0===c||c.setAttribute("value","0"),null===u||void 0===u||u.setAttribute("value","0"),null===d||void 0===d||d.setAttribute("value","0"),null===t||void 0===t||t.removeAttribute("toggled"),null===n||void 0===n||n.removeAttribute("toggled"),null===i||void 0===i||i.removeAttribute("toggled"),null===r||void 0===r||r.removeAttribute("toggled"),null===a||void 0===a||a.removeAttribute("toggled"),null===o||void 0===o||o.removeAttribute("disabled"),null===s||void 0===s||s.removeAttribute("disabled"),null===l||void 0===l||l.removeAttribute("disabled"),null===c||void 0===c||c.removeAttribute("disabled"),null===u||void 0===u||u.removeAttribute("disabled"),null===d||void 0===d||d.removeAttribute("disabled"),null===t||void 0===t||t.removeAttribute("disabled"),null===n||void 0===n||n.removeAttribute("disabled"),null===i||void 0===i||i.removeAttribute("disabled"),null===r||void 0===r||r.removeAttribute("disabled"),null===a||void 0===a||a.removeAttribute("disabled");var f=null===(p=e.select)||void 0===p?void 0:p.checkedsTexts().keys().next().value;if(f){var v,m=window.getComputedStyle(f).fontWeight,g=window.getComputedStyle(f).fontStyle,y=parseFloat(window.getComputedStyle(f).fontSize),b=window.getComputedStyle(f).textAnchor,x=window.getComputedStyle(f).fontFamily,w="normal"===window.getComputedStyle(f).letterSpacing?"0":parseFloat(window.getComputedStyle(f).letterSpacing).toString();null===o||void 0===o||o.setAttribute("value",y.toString()),null===s||void 0===s||s.setAttribute("value",y.toString()),null===l||void 0===l||l.setAttribute("value",w),null===c||void 0===c||c.setAttribute("value",w);var _=null===(v=x.split(",").pop())||void 0===v?void 0:v.toString().replace(/\"/gim,""),M=null===h||void 0===h?void 0:h.querySelectorAll("x-menuitem");switch(null===M||void 0===M||M.forEach((function(e){e.removeAttribute("toggled"),e.getAttribute("value")===(null===_||void 0===_?void 0:_.trim())&&e.setAttribute("toggled","")})),b){case"start":null===i||void 0===i||i.setAttribute("toggled","");break;case"middle":null===r||void 0===r||r.setAttribute("toggled","");break;case"end":null===a||void 0===a||a.setAttribute("toggled","")}700===parseFloat(m)&&(null===t||void 0===t||t.setAttribute("toggled","")),"italic"===g&&(null===n||void 0===n||n.setAttribute("toggled",""));try{var S;null===(S=e.select)||void 0===S||S.checkedsTexts().forEach((function(e){if(e.querySelector("tspan")){var t,n=null===(t=e.querySelector("tspan"))||void 0===t?void 0:t.getAttribute("dy");throw null===u||void 0===u||u.setAttribute("value",parseFloat(n||"1").toString()),null===d||void 0===d||d.setAttribute("value",parseFloat(n||"1").toString()),new Error("exit")}}))}catch(E){}}else null===o||void 0===o||o.setAttribute("disabled",""),null===s||void 0===s||s.setAttribute("disabled",""),null===l||void 0===l||l.setAttribute("disabled",""),null===c||void 0===c||c.setAttribute("disabled",""),null===u||void 0===u||u.setAttribute("disabled",""),null===d||void 0===d||d.setAttribute("disabled",""),null===t||void 0===t||t.setAttribute("disabled",""),null===n||void 0===n||n.setAttribute("disabled",""),null===i||void 0===i||i.setAttribute("disabled",""),null===r||void 0===r||r.setAttribute("disabled",""),null===a||void 0===a||a.setAttribute("disabled","")}))},r.render=function(){return(0,v.jsx)("div",{id:"typography",children:(0,v.jsxs)("main",{children:[(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"typography"})}),(0,v.jsxs)("section",{id:"font-section",children:[(0,v.jsx)("h3",{id:"font-section-heading",children:(0,v.jsx)("x-message",{children:"Font"})}),(0,v.jsxs)("x-box",{id:"font-family-subsection",vertical:"",children:[(0,v.jsx)("h4",{id:"font-family-heading",children:(0,v.jsx)("x-message",{children:"Family"})}),(0,v.jsx)("x-select",{id:"font-select",onClick:function(){return r.queryLocalFonts()},children:(0,v.jsx)("x-menu",{id:"menu-wrap",children:r.state.fonts.map((function(e,t){return(0,v.jsx)("x-menuitem",{value:e.family,children:(0,v.jsx)("x-label",{children:e.family})},t)}))})})]}),(0,v.jsxs)("x-box",{id:"font-face-subsection",vertical:"",children:[(0,v.jsx)("h4",{id:"font-face-heading",children:(0,v.jsx)("x-message",{children:"Face"})}),(0,v.jsx)("x-box",{id:"font-face-box",children:(0,v.jsxs)("x-buttons",{children:[(0,v.jsx)("x-button",{id:"bold",onClick:function(e){return r.changeAttribute(e,"bold")},children:"Bold"}),(0,v.jsx)("x-button",{id:"italic",onClick:function(e){return r.changeAttribute(e,"italic")},children:"Italic"})]})})]}),(0,v.jsxs)("x-box",{id:"font-size-subsection",vertical:"",children:[(0,v.jsx)("h4",{id:"font-size-heading",children:(0,v.jsx)("x-message",{children:"Size"})}),(0,v.jsxs)("x-box",{id:"font-size-box",children:[(0,v.jsx)("x-slider",{id:"font-size-slider",value:"26",min:"1",max:"150",step:"1","aria-disabled":"false",tabindex:"0"}),(0,v.jsx)("x-numberinput",{id:"font-size-input",value:"26",min:"1",step:"1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",hasstepper:"",children:(0,v.jsx)("x-stepper",{})})]})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("section",{id:"text-section",children:[(0,v.jsx)("h3",{id:"text-section-heading",disabled:"",children:(0,v.jsx)("x-message",{href:"#text",children:"Text"})}),(0,v.jsxs)("x-box",{id:"text-anchor-box",vertical:"",children:[(0,v.jsx)("h4",{id:"text-anchor-heading",disabled:"",children:(0,v.jsx)("x-message",{href:"#anchor",children:"Anchor"})}),(0,v.jsxs)("x-buttons",{id:"text-anchor-buttons",children:[(0,v.jsx)("x-button",{id:"start-text-anchor-button",value:"start",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return r.changeAttribute(e,"start")},children:(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Start"})})}),(0,v.jsx)("x-button",{id:"middle-text-anchor-button",value:"middle",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return r.changeAttribute(e,"middle")},children:(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{href:"#text-anchor.middle",children:"Middle"})})}),(0,v.jsx)("x-button",{id:"end-text-anchor-button",value:"end",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(e){return r.changeAttribute(e,"end")},children:(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"End"})})})]})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("section",{id:"spacing-section",children:[(0,v.jsx)("h3",{id:"spacing-section-heading",children:(0,v.jsx)("x-message",{href:"#spacing",children:"Spacing"})}),(0,v.jsxs)("x-box",{id:"letter-spacing-box",vertical:"",children:[(0,v.jsx)("h4",{id:"letter-spacing-heading",children:(0,v.jsx)("x-message",{children:"Letter"})}),(0,v.jsxs)("x-box",{id:"letter-spacing-inner-box",children:[(0,v.jsx)("x-slider",{id:"letter-spacing-slider",value:"0",min:"-20",max:"20",step:"0.1","aria-disabled":"false",tabindex:"0"}),(0,v.jsx)("x-numberinput",{id:"letter-spacing-input",value:"0",step:"0.1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",children:(0,v.jsx)("x-stepper",{})})]})]}),(0,v.jsxs)("x-box",{id:"line-spacing-box",vertical:"",children:[(0,v.jsx)("h4",{id:"line-spacing-heading",children:(0,v.jsx)("x-message",{children:"Line"})}),(0,v.jsxs)("x-box",{id:"line-spacing-inner-box",children:[(0,v.jsx)("x-slider",{id:"line-spacing-slider",value:"0",min:"-3",max:"3",step:"0.1","aria-disabled":"false",tabindex:"0"}),(0,v.jsx)("x-numberinput",{id:"line-spacing-input",value:"0",step:"0.1",condensed:"",role:"input","aria-disabled":"true",tabindex:"-1",children:(0,v.jsx)("x-stepper",{})})]})]})]})]})})},r.state={fonts:[]},r}return s(n,[{key:"componentDidMount",value:function(){this.init(),this.watch(),this.queryLocalFonts()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),N=R,k=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).xInputChange=function(e){var t,n,i,r=null===(t=document.querySelector("#y-input"))||void 0===t?void 0:t.getAttribute("value"),a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().NODE_X,"X"),a.nodesPosition(e.target.value,r),null===(i=a.select)||void 0===i||i.autoResetBoxSelect(!0)},e.yInputChange=function(e){var t,n,i,r=null===(t=document.querySelector("#x-input"))||void 0===t?void 0:t.getAttribute("value"),a=window.stage;null===(n=a.history)||void 0===n||n.add(a.history.actions().NODE_Y,"Y"),a.nodesPosition(r,e.target.value),null===(i=a.select)||void 0===i||i.autoResetBoxSelect(!0)},e.wInputChange=function(){var e,t,n,i,r,a=null===(e=document.querySelector("#w-input"))||void 0===e?void 0:e.getAttribute("value"),o=null===(t=document.querySelector("#h-input"))||void 0===t?void 0:t.getAttribute("value"),s=window.stage,l=null===(n=s.select)||void 0===n?void 0:n.boxSelect().getBoundingClientRect(),c=l.width,u=l.height,d=s.matrix.a,h=(Number(a)-Math.round(c/d))*d,p=(Number(o)-Math.round(u/d))*d;null===(i=s.history)||void 0===i||i.add(s.history.actions().NODE_WIDTH,"Width"),null===(r=s.resize)||void 0===r||r.resize({dataX:h,dataY:p,pos:"right"})},e.hInputChange=function(){var e,t,n,i,r,a=null===(e=document.querySelector("#w-input"))||void 0===e?void 0:e.getAttribute("value"),o=null===(t=document.querySelector("#h-input"))||void 0===t?void 0:t.getAttribute("value"),s=window.stage,l=null===(n=s.select)||void 0===n?void 0:n.boxSelect().getBoundingClientRect(),c=l.width,u=l.height,d=s.matrix.a,h=(Number(a)-Math.round(c/d))*d,p=(Number(o)-Math.round(u/d))*d;null===(i=s.history)||void 0===i||i.add(s.history.actions().NODE_HEIGHT,"Height"),null===(r=s.resize)||void 0===r||r.resize({dataX:h,dataY:p,pos:"bottom"})},e.watch=function(){var e=window.stage;clearTimeout(S),S=setTimeout((function(){var t=e.select.boxSelect().getBoundingClientRect(),n=t.x,i=t.y,r=t.width,a=t.height,o=document.querySelector("#x-input"),s=document.querySelector("#y-input"),l=document.querySelector("#w-input"),c=document.querySelector("#h-input"),u=e.matrix.a,d=document.querySelector("#background-outlines"),h=null===d||void 0===d?void 0:d.getBoundingClientRect(),p=Math.round((n-h.x)/u),f=Math.round((i-h.y)/u),v=Math.round(r/u),m=Math.round(a/u);null===o||void 0===o||o.setAttribute("value",Math.round(p).toString()),null===s||void 0===s||s.setAttribute("value",Math.round(f).toString()),null===l||void 0===l||l.setAttribute("value",Math.round(v).toString()),null===c||void 0===c||c.setAttribute("value",Math.round(m).toString()),v,m;var g=document.querySelector("#geometry"),y=null===g||void 0===g?void 0:g.querySelectorAll("x-numberinput");null===y||void 0===y||y.forEach((function(e){v>0&&m>0?e.removeAttribute("disabled"):e.setAttribute("disabled","")}))}),50)},e.init=function(){var t=document.querySelector("#x-input");null===t||void 0===t||t.addEventListener("changeend",e.xInputChange),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()}));var n=document.querySelector("#y-input");null===n||void 0===n||n.addEventListener("changeend",e.yInputChange),null===n||void 0===n||n.addEventListener("keydown",(function(e){e.stopPropagation()}));var i=document.querySelector("#w-input");null===i||void 0===i||i.addEventListener("changeend",e.wInputChange),null===i||void 0===i||i.addEventListener("keydown",(function(e){e.stopPropagation()}));var r=document.querySelector("#h-input");null===r||void 0===r||r.addEventListener("changeend",e.hInputChange),null===r||void 0===r||r.addEventListener("keydown",(function(e){e.stopPropagation()}));var a=window.stage;a.watch(a.actions().BOX_SELECT,e.watch)},e.render=function(){return(0,v.jsx)("div",{id:"geometry",children:(0,v.jsxs)("main",{children:[(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"Geometry"})}),(0,v.jsxs)("div",{className:"geometry-content",children:[(0,v.jsx)("h3",{children:(0,v.jsx)("x-message",{children:"Object"})}),(0,v.jsxs)("section",{id:"position-section",children:[(0,v.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,v.jsx)("h4",{id:"x-heading",children:(0,v.jsx)("x-message",{children:"X"})}),(0,v.jsx)("x-numberinput",{id:"x-input",value:"0",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]}),(0,v.jsxs)("x-box",{id:"y-box",vertical:"",children:[(0,v.jsx)("h4",{id:"y-heading",children:(0,v.jsx)("x-message",{children:"Y"})}),(0,v.jsx)("x-numberinput",{id:"y-input",value:"0",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]})]}),(0,v.jsxs)("section",{id:"position-section",children:[(0,v.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,v.jsx)("h4",{id:"x-heading",children:(0,v.jsx)("x-message",{children:"width"})}),(0,v.jsx)("x-numberinput",{id:"w-input",value:"263.7",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]}),(0,v.jsxs)("x-box",{id:"y-box",vertical:"",children:[(0,v.jsx)("h4",{id:"y-heading",children:(0,v.jsx)("x-message",{children:"height"})}),(0,v.jsx)("x-numberinput",{id:"h-input",value:"86.2",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]})]})]})]})})},e}return s(n,[{key:"componentDidMount",value:function(){this.init(),this.watch()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),D=k,I=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).nodeAlign=function(e,t){window.stage.nodeAlign(e,t)},e.transform=function(e){window.stage.filp(e)},e.raise=function(){window.stage.raise()},e.lower=function(){window.stage.lower()},e.front=function(){window.stage.front()},e.back=function(){window.stage.back()},e.group=function(){window.stage.group()},e.unGroup=function(){window.stage.unGroup()},e.watch=function(){var e=window.stage,t=document.querySelector("#arrangement"),n=null===t||void 0===t?void 0:t.querySelectorAll("x-button");null===n||void 0===n||n.forEach((function(t){var n;Number(null===(n=e.select)||void 0===n?void 0:n.size())>0?t.removeAttribute("disabled"):t.setAttribute("disabled","")}))},e.init=function(){var t=window.stage;t.watch(t.actions().SELECTED,e.watch)},e.render=function(){return(0,v.jsx)("div",{id:"arrangement",children:(0,v.jsxs)("main",{children:[(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"Arrangement"})}),(0,v.jsxs)("section",{id:"align-section",children:[(0,v.jsx)("h3",{id:"align-section-heading",children:(0,v.jsx)("x-message",{children:"Alignment"})}),(0,v.jsxs)("section",{className:"flex flex-justify-between",children:[(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","left")},children:[(0,v.jsx)("x-icon",{href:"#align-left"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Align left"})})]}),(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","top")},children:[(0,v.jsx)("x-icon",{href:"#align-top"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Align top"})})]}),(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","right")},children:[(0,v.jsx)("x-icon",{href:"#align-right"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Align right"})})]}),(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","bottom")},children:[(0,v.jsx)("x-icon",{href:"#align-bottom"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Align bottom"})})]}),(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("h","center")},children:[(0,v.jsx)("x-icon",{href:"#center-horizontally"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Center horizontally"})})]}),(0,v.jsxs)("x-button",{id:"align-top-button",value:"move-top-inside",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.nodeAlign("v","center")},children:[(0,v.jsx)("x-icon",{href:"#center-vertically"}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:"Center vertically"})})]})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("section",{id:"transform-section",children:[(0,v.jsx)("h3",{id:"transform-heading",children:(0,v.jsx)("x-message",{children:"Transform"})}),(0,v.jsxs)("x-box",{id:"flip-buttons",children:[(0,v.jsxs)("x-button",{id:"flip-horizontally-button",value:"flipX",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.transform("x")},children:[(0,v.jsx)("x-icon",{href:"#flip-x"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Flip X"})})]}),(0,v.jsxs)("x-button",{id:"flip-vertically-button",value:"flipY",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.transform("y")},children:[(0,v.jsx)("x-icon",{href:"#flip-y"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Flip Y"})})]})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("section",{id:"order-section",children:[(0,v.jsx)("h3",{id:"order-section-heading",children:(0,v.jsx)("x-message",{children:"Order"})}),(0,v.jsxs)("x-box",{id:"order-buttons-1",children:[(0,v.jsxs)("x-button",{id:"raise-button",value:"raise",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.raise()},children:[(0,v.jsx)("x-icon",{href:"#raise"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Raise"})})]}),(0,v.jsxs)("x-button",{id:"lower-button",value:"lower",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.lower()},children:[(0,v.jsx)("x-icon",{href:"#lower"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Lower"})})]})]}),(0,v.jsxs)("x-box",{id:"order-buttons-2",children:[(0,v.jsxs)("x-button",{id:"front-button",value:"raiseToFront",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.front()},children:[(0,v.jsx)("x-icon",{href:"#raise-to-front"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Front"})})]}),(0,v.jsxs)("x-button",{id:"back-button",value:"lowerToBack",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.back()},children:[(0,v.jsx)("x-icon",{href:"#lower-to-back"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Back"})})]})]})]}),(0,v.jsx)("hr",{}),(0,v.jsxs)("section",{id:"grouping-section",children:[(0,v.jsx)("h3",{id:"grouping-section-heading",children:(0,v.jsx)("x-message",{href:"#grouping",children:"Grouping"})}),(0,v.jsxs)("x-box",{id:"grouping-buttons",children:[(0,v.jsxs)("x-button",{id:"group-button",value:"group",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.group()},children:[(0,v.jsx)("x-icon",{href:"#group"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Group"})})]}),(0,v.jsxs)("x-button",{id:"ungroup-button",value:"ungroup",condensed:"",role:"button","aria-disabled":"true",tabindex:"-1",skin:"default",onClick:function(){return e.unGroup()},children:[(0,v.jsx)("x-icon",{href:"#ungroup"}),(0,v.jsx)("x-label",{children:(0,v.jsx)("x-message",{children:"Ungroup"})})]})]})]})]})})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),j=I;function z(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var B=0;function F(e){return"__private_"+B+++"_"+e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function H(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Element.prototype.getBox||(Element.prototype.getBox=function(){var e,t=null===(e=this.ownerSVGElement)||void 0===e?void 0:e.getBoundingClientRect(),n=this.getBoundingClientRect();return{x:n.x-t.x,right:n.right-t.x,left:n.left-t.x,y:n.y-t.y,top:n.top-t.y,bottom:n.bottom-t.y,width:n.width,height:n.height}}),Element.prototype.getMatrix||(Element.prototype.getMatrix=function(){var e=getComputedStyle(this).transform;if("none"===e||!e)return{a:1,b:0,c:0,d:1,e:0,f:0,sx:1,sy:1,angle:0};var t=e.replace(/matrix\(|\)/g,"").split(","),n=+t[0],i=+t[1],r=+t[2],a=+t[3];return{a:n,b:i,c:r,d:a,e:+t[4],f:+t[5],sx:Math.sqrt(n*n+i*i),sy:Math.sqrt(r*r+a*a),angle:Math.round(Math.atan2(i,n)*(180/Math.PI))}}),Element.prototype.getAngle||(Element.prototype.getAngle=function(){var e=this.getMatrix(),t=e.a,n=e.b;return Math.round(Math.atan2(n,t)*(180/Math.PI))}),Element.prototype.getScale||(Element.prototype.getScale=function(){var e=this.getMatrix(),t=e.a,n=e.b,i=e.c,r=e.d;return{sx:Math.sqrt(t*t+n*n),sy:Math.sqrt(i*i+r*r)}}),Element.prototype.getMatrixIterator||(Element.prototype.getMatrixIterator=function(){var e=this.getMatrix(),t=this.parentNode;if(t&&"svg"!==t.nodeName){var n=t.getMatrixIterator();e.e=e.e*(null===n||void 0===n?void 0:n.a),e.f=e.f*(null===n||void 0===n?void 0:n.d),e.a*=null===n||void 0===n?void 0:n.a,e.d*=null===n||void 0===n?void 0:n.d,e.e+=null===n||void 0===n?void 0:n.e,e.f+=null===n||void 0===n?void 0:n.f,e.sx*=n.sx,e.sy*=n.sy,e.angle+=n.angle}return e}),Element.prototype.scale||(Element.prototype.scale=function(e,t,n,i){var r=this.getMatrix(),a=e*r.a,o=t*r.d,s=n-a*n,l=i-o*i;this.setAttribute("transform","matrix(\n      ".concat(a,",\n      0,\n      0,\n      ").concat(o,",\n      ").concat(s,",\n      ").concat(l,"\n    )"))});var G={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"};SVGPathElement.prototype.getPathData||(SVGPathElement.prototype.getPathData=function(){var e=function(e){for(var t=[],n=0;n<=e.length;){var i=e[n];G.hasOwnProperty(i)&&("v"!==i.toLowerCase()&&"h"!==i.toLowerCase()||t.push({type:i,values:[Number(e[n+1])]}),"m"!==i.toLowerCase()&&"l"!==i.toLowerCase()&&"t"!==i.toLowerCase()||t.push({type:i,values:[Number(e[n+1]),Number(e[n+2])]}),"q"!==i.toLowerCase()&&"s"!==i.toLowerCase()||t.push({type:i,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4])]}),"c"===i.toLowerCase()&&t.push({type:i,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4]),Number(e[n+5]),Number(e[n+6])]}),"a"===i.toLowerCase()&&t.push({type:i,values:[Number(e[n+1]),Number(e[n+2]),Number(e[n+3]),Number(e[n+4]),Number(e[n+5]),Number(e[n+6]),Number(e[n+7])]}),"z"===i.toLowerCase()&&t.push({type:i,values:[]})),n++}return t}(this.getAttribute("d").replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").replace(/([A-Za-z])(\d+\.\d+ || \d+)/g,"$1 $2 ").replace(/(\d+\.\d+ || \d+)([A-Za-z])/g,"$1 $2 ").trim().split(/\s*,|\s+/));return e}),SVGRectElement.prototype.getPathData||(SVGRectElement.prototype.getPathData=function(){var e=this.x.baseVal.value,t=this.y.baseVal.value,n=this.width.baseVal.value,i=this.height.baseVal.value,r=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,a=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;return r>n/2&&(r=n/2),a>i/2&&(a=i/2),[{type:"M",values:[e+r,t]},{type:"H",values:[e+n-r]},{type:"A",values:[r,a,0,0,1,e+n,t+a]},{type:"V",values:[t+i-a]},{type:"A",values:[r,a,0,0,1,e+n-r,t+i]},{type:"H",values:[e+r]},{type:"A",values:[r,a,0,0,1,e,t+i-a]},{type:"V",values:[t+a]},{type:"A",values:[r,a,0,0,1,e+r,t]},{type:"Z",values:[]}]}),SVGCircleElement.prototype.getPathData||(SVGCircleElement.prototype.getPathData=function(){var e=this.cx.baseVal.value,t=this.cy.baseVal.value,n=this.r.baseVal.value;return[{type:"M",values:[e+n,t]},{type:"A",values:[n,n,0,0,1,e,t+n]},{type:"A",values:[n,n,0,0,1,e-n,t]},{type:"A",values:[n,n,0,0,1,e,t-n]},{type:"A",values:[n,n,0,0,1,e+n,t]},{type:"Z",values:[]}]}),SVGEllipseElement.prototype.getPathData||(SVGEllipseElement.prototype.getPathData=function(){var e=this.cx.baseVal.value,t=this.cy.baseVal.value,n=this.rx.baseVal.value,i=this.ry.baseVal.value;return[{type:"M",values:[e+n,t]},{type:"A",values:[n,i,0,0,1,e,t+i]},{type:"A",values:[n,i,0,0,1,e-n,t]},{type:"A",values:[n,i,0,0,1,e,t-i]},{type:"A",values:[n,i,0,0,1,e+n,t]},{type:"Z",values:[]}]}),SVGLineElement.prototype.getPathData||(SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]}),SVGPolylineElement.prototype.getPathData||(SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e}),SVGPolygonElement.prototype.getPathData||(SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e}),SVGPathElement.prototype.toUpperCase||(SVGPathElement.prototype.toUpperCase=function(){var e=this.getAttribute("d");if(null!==e&&void 0!==e&&e.includes(G.A)||null!==e&&void 0!==e&&e.includes(G.a)||null!==e&&void 0!==e&&e.includes(G.t)||null!==e&&void 0!==e&&e.includes(G.T)||null!==e&&void 0!==e&&e.includes(G.q)||null!==e&&void 0!==e&&e.includes(G.Q)||null!==e&&void 0!==e&&e.includes(G.h)||null!==e&&void 0!==e&&e.includes(G.H)||null!==e&&void 0!==e&&e.includes(G.v)||null!==e&&void 0!==e&&e.includes(G.V)||null!==e&&void 0!==e&&e.includes(G.s)||null!==e&&void 0!==e&&e.includes(G.S)||null!==e&&void 0!==e&&e.includes(G.m)||null!==e&&void 0!==e&&e.includes(G.l)||null!==e&&void 0!==e&&e.includes(G.c)){var t="",n=0,i=0;this.getPathData().forEach((function(e){var r=e.type.toUpperCase();switch(e.type){case"m":t+="".concat(r," ").concat(n+e.values[0]," ").concat(i+e.values[1]," "),n+=e.values[0],i+=e.values[1];break;case"M":case"L":case"T":t+="".concat("T"===r?"L":r," ").concat(e.values[0]," ").concat(e.values[1]," "),n=e.values[0],i=e.values[1];break;case"h":t+="L ".concat(n+e.values[0]," ").concat(i," "),n+=e.values[0];break;case"H":t+="L ".concat(e.values[0]," ").concat(i," "),n=e.values[0];break;case"v":t+="L ".concat(n," ").concat(i+e.values[0]," "),i+=e.values[0];break;case"V":t+="L ".concat(n," ").concat(e.values[0]," "),i=e.values[0];break;case"l":case"t":t+="L ".concat(n+e.values[0]," ").concat(i+e.values[1]," "),n+=e.values[0],i+=e.values[1];break;case"q":var a=(n+e.values[0]-n)*(2/3)+n,o=(i+e.values[1]-i)*(2/3)+i,s=(n+e.values[2]-n)*(1/3)+a,l=(i+e.values[3]-i)*(1/3)+o;t+="C ".concat(a," ").concat(o," ").concat(s," ").concat(l," ").concat(n+e.values[2]," ").concat(i+e.values[3]),n+=e.values[2],i+=e.values[3];break;case"Q":var c=(e.values[0]-n)*(2/3)+n,u=(e.values[1]-i)*(2/3)+i,d=(e.values[2]-n)*(1/3)+c,h=(e.values[3]-i)*(1/3)+u;t+="C ".concat(c," ").concat(u," ").concat(d," ").concat(h," ").concat(e.values[2]," ").concat(e.values[3]),n=e.values[2],i=e.values[3];break;case"s":t+="C ".concat(n," ").concat(i," ").concat(n+e.values[0]," ").concat(i+e.values[1]," ").concat(n+e.values[2]," ").concat(i+e.values[3]),n+=e.values[2],i+=e.values[3];break;case"S":t+="C ".concat(n," ").concat(i," ").concat(e.values[0]," ").concat(e.values[1]," ").concat(e.values[2]," ").concat(e.values[3]," "),n=e.values[2],i=e.values[3];break;case"c":t+="".concat(r," ").concat(n+e.values[0]," ").concat(i+e.values[1]," ").concat(n+e.values[2]," ").concat(i+e.values[3]," ").concat(n+e.values[4]," ").concat(i+e.values[5]," "),n+=e.values[4],i+=e.values[5];break;case"C":t+="".concat(r," ").concat(e.values[0]," ").concat(e.values[1]," ").concat(e.values[2]," ").concat(e.values[3]," ").concat(e.values[4]," ").concat(e.values[5]," "),n=e.values[4],i=e.values[5];break;case"a":t+="".concat(r," ").concat(e.values[0]," ").concat(e.values[1]," ").concat(e.values[2]," ").concat(e.values[3]," ").concat(e.values[4]," ").concat(n+e.values[5]," ").concat(i+e.values[6]),n+=e.values[5],i+=e.values[6];break;case"A":t+="".concat(r," ").concat(e.values[0]," ").concat(e.values[1]," ").concat(e.values[2]," ").concat(e.values[3]," ").concat(e.values[4]," ").concat(e.values[5]," ").concat(e.values[6]," "),n=e.values[5],i=e.values[6];break;case"z":case"Z":t+=r}})),this.setAttribute("d",t)}});var V=F("stage"),W=F("isOver"),q=F("isRecording"),X=F("history"),Z=F("firstRecord"),Y=F("index"),J=F("listen"),Q=F("action"),K=F("CN_label"),$=F("actions"),ee=F("callBack"),te=F("matrixNodes"),ne=F("updated"),ie=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:!0}),Object.defineProperty(this,q,{writable:!0,value:!1}),Object.defineProperty(this,X,{writable:!0,value:[]}),Object.defineProperty(this,Z,{writable:!0,value:[]}),Object.defineProperty(this,Y,{writable:!0,value:0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:{ADD:Symbol(),DELETE:Symbol(),NODE_WIDTH:Symbol(),NODE_HEIGHT:Symbol(),SCALE:Symbol(),MOUSE_SCALE:Symbol(),NODE_X:Symbol(),NODE_Y:Symbol(),MOUSE_MOVE:Symbol(),KEYBOARD_MOVE:Symbol(),TITLE:Symbol(),EDIT:Symbol(),REORDER:Symbol(),GROUP:Symbol(),UNGROUP:Symbol()}}),Object.defineProperty(this,ee,{writable:!0,value:[]}),Object.defineProperty(this,te,{writable:!0,value:["g","image","text"]}),this.watch=function(e){var t;null===(t=z(n,ee)[ee])||void 0===t||t.push(e)},Object.defineProperty(this,ne,{writable:!0,value:function(){z(n,J)[J]=new MutationObserver((function(e){var t;if(z(n,q)[q]){if(0===z(n,Z)[Z].length&&(z(n,Z)[Z]=e),z(n,W)[W]){var i=[];e.forEach((function(e){var t=e.addedNodes,n=e.nextSibling,r=e.previousSibling,a=e.removedNodes,o=e.attributeName,s=e.oldValue,l=e.target,c=e.type;i.push({addedNodes:t,nextSibling:n,previousSibling:r,removedNodes:a,attributeName:o,newValue:"",oldValue:s,target:l,type:c})})),z(n,Z)[Z].forEach((function(e){i.forEach((function(t){e.target===t.target&&z(n,te)[te].includes(e.target.nodeName)&&(t.oldValue=e.oldValue)}))})),z(n,X)[X].splice(z(n,Y)[Y]-1,1,{record:i,action:z(n,Q)[Q],CN_label:z(n,K)[K]})}null===(t=z(n,ee)[ee])||void 0===t||t.forEach((function(e){e(z(n,Q)[Q])}))}})),z(n,J)[J].observe(z(n,V)[V].svgRoot,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}}),this.add=function(e,t){if(!e)throw new Error("action not found!");z(n,W)[W]=!1,z(n,Z)[Z]=[],z(n,q)[q]=!0,z(n,Q)[Q]=e,z(n,K)[K]=t;var i=z(n,X)[X].length-z(n,Y)[Y];z(n,X)[X].splice(z(n,Y)[Y],i,{action:e,CN_label:t}),z(n,Y)[Y]++},this.end=function(){z(n,q)[q]&&(z(n,W)[W]=!0,setTimeout((function(){z(n,q)[q]=!1})))},this.undo=function(){var e,t,i;if(n.has(z(n,Y)[Y]-1)){z(n,Y)[Y]--;var r=n.item(z(n,Y)[Y]),a=r.record,o=r.action,s=r.CN_label,l=[n.actions().SCALE,n.actions().MOUSE_MOVE,n.actions().MOUSE_SCALE,n.actions().KEYBOARD_MOVE];null===a||void 0===a||null===(e=a.reverse())||void 0===e||e.forEach((function(e){var t=e.addedNodes,i=e.removedNodes,r=e.type,a=e.oldValue,s=e.target,c=e.nextSibling,u=e.attributeName||"";e.newValue=s.getAttribute(u)||null,"attributes"===r&&("g"!==s.localName&&"transform"===u&&l.includes(o)&&!z(n,te)[te].includes(s.nodeName)||(a?s.setAttribute(u,a):s.removeAttribute(u))),t.forEach((function(e){var t,i=e;null===(t=z(n,V)[V].select)||void 0===t||t.delete(i),i.remove()})),i.forEach((function(e){var t,i=e;null===(t=z(n,V)[V].select)||void 0===t||t.set(e,{node:e}),c?c.before(i):s.append(i)}))})),z(n,X)[X].splice(z(n,Y)[Y],1,{record:null===a||void 0===a?void 0:a.reverse(),action:o,CN_label:s}),null===(t=z(n,V)[V].select)||void 0===t||t.autoResetBoxSelect(!0),null===(i=z(n,ee)[ee])||void 0===i||i.forEach((function(e){e("undo")}))}},this.redo=function(){var e,t;if(n.has(z(n,Y)[Y])){var i=n.item(z(n,Y)[Y]),r=i.record,a=i.action,o=[n.actions().SCALE,n.actions().MOUSE_MOVE,n.actions().MOUSE_SCALE,n.actions().KEYBOARD_MOVE];null===r||void 0===r||r.forEach((function(e){var t=e.addedNodes,i=e.removedNodes,r=e.type,s=e.target,l=e.nextSibling,c=e.attributeName||"";if("attributes"===r&&("g"===s.localName||"transform"!==c||!o.includes(a)||z(n,te)[te].includes(s.nodeName))){var u=e.newValue;u?s.setAttribute(c,u):s.removeAttribute(c)}t.forEach((function(e){var t,i=e;null===(t=z(n,V)[V].select)||void 0===t||t.set(e,{node:e}),l?l.before(i):s.append(i)})),i.forEach((function(e){var t,i=e;null===(t=z(n,V)[V].select)||void 0===t||t.delete(i),i.remove()}))})),null===(e=z(n,V)[V].select)||void 0===e||e.autoResetBoxSelect(!0),z(n,Y)[Y]++,null===(t=z(n,ee)[ee])||void 0===t||t.forEach((function(e){e("redo")}))}},this.clear=function(){z(n,X)[X].splice(0,z(n,X)[X].length)},this.item=function(e){return z(n,X)[X][e]},this.get=function(){return z(n,X)[X]},this.size=function(){return z(n,X)[X].length},this.has=function(e){try{return z(n,X)[X][e]}catch(t){return!1}},this.push=function(e){z(n,X)[X].push(e)},this.setIndex=function(e){z(n,Y)[Y]=e},this.index=function(){return z(n,Y)[Y]},this.actions=function(){return z(n,$)[$]},this.removeWatch=function(e){var t=z(n,ee)[ee].findIndex((function(t){return t===e}));z(n,ee)[ee].splice(t,1)},this.uninstall=function(){z(n,ee)[ee]=[]},!t)throw new Error("stage not found!");z(this,V)[V]=t,z(this,ne)[ne]()})),re=ie,ae=function(e,t){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ae(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function se(e,t){var n=e[0],i=e[1];return[n*Math.cos(t)-i*Math.sin(t),n*Math.sin(t)+i*Math.cos(t)]}function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)if("number"!=typeof e[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof e[n]+" == typeof "+e[n]);return!0}var ce=Math.PI;function ue(e,t,n){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var i=e.rX,r=e.rY,a=e.x,o=e.y;i=Math.abs(e.rX),r=Math.abs(e.rY);var s=se([(t-a)/2,(n-o)/2],-e.xRot/180*ce),l=s[0],c=s[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(c,2)/Math.pow(r,2);1<u&&(i*=Math.sqrt(u),r*=Math.sqrt(u)),e.rX=i,e.rY=r;var d=Math.pow(i,2)*Math.pow(c,2)+Math.pow(r,2)*Math.pow(l,2),h=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(r,2)-d)/d)),p=i*c/r*h,f=-r*l/i*h,v=se([p,f],e.xRot/180*ce);e.cX=v[0]+(t+a)/2,e.cY=v[1]+(n+o)/2,e.phi1=Math.atan2((c-f)/r,(l-p)/i),e.phi2=Math.atan2((-c-f)/r,(-l-p)/i),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*ce),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*ce),e.phi1*=180/ce,e.phi2*=180/ce}function de(e,t,n){le(e,t,n);var i=e*e+t*t-n*n;if(0>i)return[];if(0===i)return[[e*n/(e*e+t*t),t*n/(e*e+t*t)]];var r=Math.sqrt(i);return[[(e*n+t*r)/(e*e+t*t),(t*n-e*r)/(e*e+t*t)],[(e*n-t*r)/(e*e+t*t),(t*n+e*r)/(e*e+t*t)]]}var he,pe=Math.PI/180;function fe(e,t,n){return(1-n)*e+n*t}function ve(e,t,n,i){return e+Math.cos(i/180*ce)*t+Math.sin(i/180*ce)*n}function me(e,t,n,i){var r=1e-6,a=t-e,o=n-t,s=3*a+3*(i-n)-6*o,l=6*(o-a),c=3*a;return Math.abs(s)<r?[-c/l]:function(e,t,n){void 0===n&&(n=1e-6);var i=e*e/4-t;if(i<-n)return[];if(i<=n)return[-e/2];var r=Math.sqrt(i);return[-e/2-r,-e/2+r]}(l/s,c/s,r)}function ge(e,t,n,i,r){var a=1-r;return e*(a*a*a)+t*(3*a*a*r)+n*(3*a*r*r)+i*(r*r*r)}!function(e){function t(){return r((function(e,t,n){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=n),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=n),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=n),e.relative=!1),e}))}function n(){var e=NaN,t=NaN,n=NaN,i=NaN;return r((function(r,a,o){return r.type&Me.SMOOTH_CURVE_TO&&(r.type=Me.CURVE_TO,e=isNaN(e)?a:e,t=isNaN(t)?o:t,r.x1=r.relative?a-e:2*a-e,r.y1=r.relative?o-t:2*o-t),r.type&Me.CURVE_TO?(e=r.relative?a+r.x2:r.x2,t=r.relative?o+r.y2:r.y2):(e=NaN,t=NaN),r.type&Me.SMOOTH_QUAD_TO&&(r.type=Me.QUAD_TO,n=isNaN(n)?a:n,i=isNaN(i)?o:i,r.x1=r.relative?a-n:2*a-n,r.y1=r.relative?o-i:2*o-i),r.type&Me.QUAD_TO?(n=r.relative?a+r.x1:r.x1,i=r.relative?o+r.y1:r.y1):(n=NaN,i=NaN),r}))}function i(){var e=NaN,t=NaN;return r((function(n,i,r){if(n.type&Me.SMOOTH_QUAD_TO&&(n.type=Me.QUAD_TO,e=isNaN(e)?i:e,t=isNaN(t)?r:t,n.x1=n.relative?i-e:2*i-e,n.y1=n.relative?r-t:2*r-t),n.type&Me.QUAD_TO){e=n.relative?i+n.x1:n.x1,t=n.relative?r+n.y1:n.y1;var a=n.x1,o=n.y1;n.type=Me.CURVE_TO,n.x1=((n.relative?0:i)+2*a)/3,n.y1=((n.relative?0:r)+2*o)/3,n.x2=(n.x+2*a)/3,n.y2=(n.y+2*o)/3}else e=NaN,t=NaN;return n}))}function r(e){var t=0,n=0,i=NaN,r=NaN;return function(a){if(isNaN(i)&&!(a.type&Me.MOVE_TO))throw new Error("path must start with moveto");var o=e(a,t,n,i,r);return a.type&Me.CLOSE_PATH&&(t=i,n=r),void 0!==a.x&&(t=a.relative?t+a.x:a.x),void 0!==a.y&&(n=a.relative?n+a.y:a.y),a.type&Me.MOVE_TO&&(i=t,r=n),o}}function a(e,t,n,i,a,o){return le(e,t,n,i,a,o),r((function(r,s,l,c){var u=r.x1,d=r.x2,h=r.relative&&!isNaN(c),p=void 0!==r.x?r.x:h?0:s,f=void 0!==r.y?r.y:h?0:l;function v(e){return e*e}r.type&Me.HORIZ_LINE_TO&&0!==t&&(r.type=Me.LINE_TO,r.y=r.relative?0:l),r.type&Me.VERT_LINE_TO&&0!==n&&(r.type=Me.LINE_TO,r.x=r.relative?0:s),void 0!==r.x&&(r.x=r.x*e+f*n+(h?0:a)),void 0!==r.y&&(r.y=p*t+r.y*i+(h?0:o)),void 0!==r.x1&&(r.x1=r.x1*e+r.y1*n+(h?0:a)),void 0!==r.y1&&(r.y1=u*t+r.y1*i+(h?0:o)),void 0!==r.x2&&(r.x2=r.x2*e+r.y2*n+(h?0:a)),void 0!==r.y2&&(r.y2=d*t+r.y2*i+(h?0:o));var m=e*i-t*n;if(void 0!==r.xRot&&(1!==e||0!==t||0!==n||1!==i))if(0===m)delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag,r.type=Me.LINE_TO;else{var g=r.xRot*Math.PI/180,y=Math.sin(g),b=Math.cos(g),x=1/v(r.rX),w=1/v(r.rY),_=v(b)*x+v(y)*w,M=2*y*b*(x-w),S=v(y)*x+v(b)*w,E=_*i*i-M*t*i+S*t*t,C=M*(e*i+t*n)-2*(_*n*i+S*e*t),T=_*n*n-M*e*n+S*e*e,L=(Math.atan2(C,E-T)+Math.PI)%Math.PI/2,A=Math.sin(L),P=Math.cos(L);r.rX=Math.abs(m)/Math.sqrt(E*v(P)+C*A*P+T*v(A)),r.rY=Math.abs(m)/Math.sqrt(E*v(A)-C*A*P+T*v(P)),r.xRot=180*L/Math.PI}return void 0!==r.sweepFlag&&0>m&&(r.sweepFlag=+!r.sweepFlag),r}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),le(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return r((function(e,t,n){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=n),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=n),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=n),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),r((function(i,r,a,o,s){if(isNaN(o)&&!(i.type&Me.MOVE_TO))throw new Error("path must start with moveto");return t&&i.type&Me.HORIZ_LINE_TO&&(i.type=Me.LINE_TO,i.y=i.relative?0:a),n&&i.type&Me.VERT_LINE_TO&&(i.type=Me.LINE_TO,i.x=i.relative?0:r),e&&i.type&Me.CLOSE_PATH&&(i.type=Me.LINE_TO,i.x=i.relative?o-r:o,i.y=i.relative?s-a:s),i.type&Me.ARC&&(0===i.rX||0===i.rY)&&(i.type=Me.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},e.NORMALIZE_ST=n,e.QT_TO_C=i,e.INFO=r,e.SANITIZE=function(e){void 0===e&&(e=0),le(e);var t=NaN,n=NaN,i=NaN,a=NaN;return r((function(r,o,s,l,c){var u=Math.abs,d=!1,h=0,p=0;if(r.type&Me.SMOOTH_CURVE_TO&&(h=isNaN(t)?0:o-t,p=isNaN(n)?0:s-n),r.type&(Me.CURVE_TO|Me.SMOOTH_CURVE_TO)?(t=r.relative?o+r.x2:r.x2,n=r.relative?s+r.y2:r.y2):(t=NaN,n=NaN),r.type&Me.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,a=isNaN(a)?s:2*s-a):r.type&Me.QUAD_TO?(i=r.relative?o+r.x1:r.x1,a=r.relative?s+r.y1:r.y2):(i=NaN,a=NaN),r.type&Me.LINE_COMMANDS||r.type&Me.ARC&&(0===r.rX||0===r.rY||!r.lArcFlag)||r.type&Me.CURVE_TO||r.type&Me.SMOOTH_CURVE_TO||r.type&Me.QUAD_TO||r.type&Me.SMOOTH_QUAD_TO){var f=void 0===r.x?0:r.relative?r.x:r.x-o,v=void 0===r.y?0:r.relative?r.y:r.y-s;h=isNaN(i)?void 0===r.x1?h:r.relative?r.x:r.x1-o:i-o,p=isNaN(a)?void 0===r.y1?p:r.relative?r.y:r.y1-s:a-s;var m=void 0===r.x2?0:r.relative?r.x:r.x2-o,g=void 0===r.y2?0:r.relative?r.y:r.y2-s;u(f)<=e&&u(v)<=e&&u(h)<=e&&u(p)<=e&&u(m)<=e&&u(g)<=e&&(d=!0)}return r.type&Me.CLOSE_PATH&&u(o-l)<=e&&u(s-c)<=e&&(d=!0),d?[]:r}))},e.MATRIX=a,e.ROTATE=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),le(e,t,n);var i=Math.sin(e),r=Math.cos(e);return a(r,i,-i,r,t-t*r+n*i,n-t*i-n*r)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),le(e,t),a(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),le(e,t),a(e,0,0,t,0,0)},e.SKEW_X=function(e){return le(e),a(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return le(e),a(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),le(e),a(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),le(e),a(1,0,0,-1,0,e)},e.A_TO_C=function(){return r((function(e,t,n){return Me.ARC===e.type?function(e,t,n){var i,r,a,o;e.cX||ue(e,t,n);for(var s=Math.min(e.phi1,e.phi2),l=Math.max(e.phi1,e.phi2)-s,c=Math.ceil(l/90),u=new Array(c),d=t,h=n,p=0;p<c;p++){var f=fe(e.phi1,e.phi2,p/c),v=fe(e.phi1,e.phi2,(p+1)/c),m=v-f,g=4/3*Math.tan(m*pe/4),y=[Math.cos(f*pe)-g*Math.sin(f*pe),Math.sin(f*pe)+g*Math.cos(f*pe)],b=y[0],x=y[1],w=[Math.cos(v*pe),Math.sin(v*pe)],_=w[0],M=w[1],S=[_+g*Math.sin(v*pe),M-g*Math.cos(v*pe)],E=S[0],C=S[1];u[p]={relative:e.relative,type:Me.CURVE_TO};var T=function(t,n){var i=se([t*e.rX,n*e.rY],e.xRot),r=i[0],a=i[1];return[e.cX+r,e.cY+a]};i=T(b,x),u[p].x1=i[0],u[p].y1=i[1],r=T(E,C),u[p].x2=r[0],u[p].y2=r[1],a=T(_,M),u[p].x=a[0],u[p].y=a[1],e.relative&&(u[p].x1-=d,u[p].y1-=h,u[p].x2-=d,u[p].y2-=h,u[p].x-=d,u[p].y-=h),d=(o=[u[p].x,u[p].y])[0],h=o[1]}return u}(e,e.relative?0:t,e.relative?0:n):e}))},e.ANNOTATE_ARCS=function(){return r((function(e,t,n){return e.relative&&(t=0,n=0),Me.ARC===e.type&&ue(e,t,n),e}))},e.CLONE=function(){return function(e){var t={};for(var n in e)t[n]=e[n];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),a=i(),o=n(),s=r((function(t,n,i){var r=o(a(e(function(e){var t={};for(var n in e)t[n]=e[n];return t}(t))));function l(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function c(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(r.type&Me.DRAWING_COMMANDS&&(l(n),c(i)),r.type&Me.HORIZ_LINE_TO&&l(r.x),r.type&Me.VERT_LINE_TO&&c(r.y),r.type&Me.LINE_TO&&(l(r.x),c(r.y)),r.type&Me.CURVE_TO){l(r.x),c(r.y);for(var u=0,d=me(n,r.x1,r.x2,r.x);u<d.length;u++)0<(T=d[u])&&1>T&&l(ge(n,r.x1,r.x2,r.x,T));for(var h=0,p=me(i,r.y1,r.y2,r.y);h<p.length;h++)0<(T=p[h])&&1>T&&c(ge(i,r.y1,r.y2,r.y,T))}if(r.type&Me.ARC){l(r.x),c(r.y),ue(r,n,i);for(var f=r.xRot/180*Math.PI,v=Math.cos(f)*r.rX,m=Math.sin(f)*r.rX,g=-Math.sin(f)*r.rY,y=Math.cos(f)*r.rY,b=r.phi1<r.phi2?[r.phi1,r.phi2]:-180>r.phi2?[r.phi2+360,r.phi1+360]:[r.phi2,r.phi1],x=b[0],w=b[1],_=function(e){var t=e[0],n=e[1],i=180*Math.atan2(n,t)/Math.PI;return i<x?i+360:i},M=0,S=de(g,-v,0).map(_);M<S.length;M++)(T=S[M])>x&&T<w&&l(ve(r.cX,v,g,T));for(var E=0,C=de(y,-m,0).map(_);E<C.length;E++){var T;(T=C[E])>x&&T<w&&c(ve(r.cY,m,y,T))}}return t}));return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(he||(he={}));var ye,be=function(){function e(){}return e.prototype.round=function(e){return this.transform(he.ROUND(e))},e.prototype.toAbs=function(){return this.transform(he.TO_ABS())},e.prototype.toRel=function(){return this.transform(he.TO_REL())},e.prototype.normalizeHVZ=function(e,t,n){return this.transform(he.NORMALIZE_HVZ(e,t,n))},e.prototype.normalizeST=function(){return this.transform(he.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(he.QT_TO_C())},e.prototype.aToC=function(){return this.transform(he.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(he.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(he.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(he.SCALE(e,t))},e.prototype.rotate=function(e,t,n){return this.transform(he.ROTATE(e,t,n))},e.prototype.matrix=function(e,t,n,i,r,a){return this.transform(he.MATRIX(e,t,n,i,r,a))},e.prototype.skewX=function(e){return this.transform(he.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(he.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(he.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(he.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(he.ANNOTATE_ARCS())},e}(),xe=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},we=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},_e=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return oe(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var n=this;void 0===t&&(t=[]);for(var i=function(e){t.push(e),n.curArgs.length=0,n.canParseCommandOrComma=!0},r=0;r<e.length;r++){var a=e[r],o=!(this.curCommandType!==Me.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=we(a)&&("0"===this.curNumber&&"0"===a||o);if(!we(a)||s)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var l=Number(this.curNumber);if(isNaN(l))throw new SyntaxError("Invalid number ending at "+r);if(this.curCommandType===Me.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>l)throw new SyntaxError('Expected positive number, got "'+l+'" at index "'+r+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+r+'"');this.curArgs.push(l),this.curArgs.length===Se[this.curCommandType]&&(Me.HORIZ_LINE_TO===this.curCommandType?i({type:Me.HORIZ_LINE_TO,relative:this.curCommandRelative,x:l}):Me.VERT_LINE_TO===this.curCommandType?i({type:Me.VERT_LINE_TO,relative:this.curCommandRelative,y:l}):this.curCommandType===Me.MOVE_TO||this.curCommandType===Me.LINE_TO||this.curCommandType===Me.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Me.MOVE_TO===this.curCommandType&&(this.curCommandType=Me.LINE_TO)):this.curCommandType===Me.CURVE_TO?i({type:Me.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Me.SMOOTH_CURVE_TO?i({type:Me.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Me.QUAD_TO?i({type:Me.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Me.ARC&&i({type:Me.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!xe(a))if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(s)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+r+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+r+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=Me.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=Me.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=Me.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=Me.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=Me.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=Me.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=Me.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=Me.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw new SyntaxError('Unexpected character "'+a+'" at index '+r+".");this.curCommandType=Me.ARC,this.curCommandRelative="a"===a}else t.push({type:Me.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,n){void 0===n&&(n=[]);for(var i=0,r=Object.getPrototypeOf(this).parse.call(this,t);i<r.length;i++){var a=r[i],o=e(a);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}}})},t}(be),Me=function(e){function t(n){var i=e.call(this)||this;return i.commands="string"==typeof n?t.parse(n):n,i}return oe(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=he.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],n=0,i=this.commands;n<i.length;n++){var r=e(i[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return this.commands=t,this},t.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];if(i.type===Me.CLOSE_PATH)t+="z";else if(i.type===Me.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===Me.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===Me.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===Me.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===Me.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===Me.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===Me.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===Me.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==Me.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+n+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}(e)},t.parse=function(e){var t=new _e,n=[];return t.parse(e,n),t.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(be),Se=((ye={})[Me.MOVE_TO]=2,ye[Me.LINE_TO]=2,ye[Me.HORIZ_LINE_TO]=1,ye[Me.VERT_LINE_TO]=1,ye[Me.CLOSE_PATH]=0,ye[Me.QUAD_TO]=4,ye[Me.SMOOTH_QUAD_TO]=2,ye[Me.CURVE_TO]=6,ye[Me.SMOOTH_CURVE_TO]=4,ye[Me.ARC]=7,ye),Ee=F("stage"),Ce=F("drawingNode"),Te=F("startX"),Le=F("startY"),Ae=F("isDrawing"),Pe=F("isMoving"),Oe=F("isDisabled"),Re=F("start"),Ne=F("done"),ke=F("cacheWidth"),De=F("cacheHeight"),Ie=F("d"),je=F("install"),ze=F("mousedown"),Be=F("mousemove"),Fe=F("mouseup"),Ue=F("setAttr"),He=F("createNode"),Ge=F("EN2CN"),Ve=s((function e(t,n){var r=this;if(i(this,e),Object.defineProperty(this,Ee,{writable:!0,value:void 0}),Object.defineProperty(this,Ce,{writable:!0,value:void 0}),Object.defineProperty(this,Te,{writable:!0,value:0}),Object.defineProperty(this,Le,{writable:!0,value:0}),Object.defineProperty(this,Ae,{writable:!0,value:!1}),Object.defineProperty(this,Pe,{writable:!0,value:!1}),Object.defineProperty(this,Oe,{writable:!0,value:!0}),Object.defineProperty(this,Re,{writable:!0,value:void 0}),Object.defineProperty(this,Ne,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:0}),Object.defineProperty(this,De,{writable:!0,value:0}),Object.defineProperty(this,Ie,{writable:!0,value:"M 8.5 4.095 C 12.004 -5.959 25.735 4.095 8.5 17.021 C -8.736 4.095 4.995 -5.959 8.5 4.095 Z"}),Object.defineProperty(this,je,{writable:!0,value:function(){var e;null===(e=z(r,Ee)[Ee].stage)||void 0===e||e.addEventListener("mousedown",z(r,ze)[ze]),document.addEventListener("mouseup",z(r,Fe)[Fe]),document.addEventListener("mousemove",z(r,Be)[Be])}}),Object.defineProperty(this,ze,{writable:!0,value:function(e){var t,n=e.button,i=e.clientX,a=e.clientY;0!==n||z(r,Ae)[Ae]||z(r,Oe)[Oe]||(z(r,Re)[Re]&&z(r,Re)[Re](),z(r,Ae)[Ae]=!0,z(r,Te)[Te]=i,z(r,Le)[Le]=a,null===(t=z(r,Ee)[Ee].history)||void 0===t||t.add(z(r,Ee)[Ee].history.actions().ADD,z(r,Ge)[Ge]()))}}),Object.defineProperty(this,Be,{writable:!0,value:function(e){var t;if(z(r,Ae)[Ae]){var n=e.clientX,i=e.clientY,a=e.shiftKey;if(!(Math.max(n,z(r,Te)[Te])-Math.min(n,z(r,Te)[Te])<1||Math.max(i,z(r,Le)[Le])-Math.min(i,z(r,Le)[Le])<1)){z(r,Pe)[Pe]=!0;var o=z(r,Ce)[Ce]||z(r,He)[He]();if(!z(r,Ce)[Ce]&&z(r,Ie)[Ie]&&z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().OTHER_SHAPE){o.setAttribute("d",z(r,Ie)[Ie]);var s=o.getBoundingClientRect(),l=1/s.width,c=1/s.height;z(r,ke)[ke]=s.width*l,z(r,De)[De]=s.height*c;var u=new Me(z(r,Ie)[Ie]).matrix(l,0,0,c,0,0).encode();z(r,Ie)[Ie]=u,o.setAttribute("d",u)}z(r,Ce)[Ce]=o;var d=null===(t=o.ownerSVGElement)||void 0===t?void 0:t.getBoundingClientRect(),h=d.left,p=d.top,f=o.parentElement.getCTM(),v=f.e,m=f.a,g=f.d,y=f.f,b=[(z(r,Te)[Te]-h-v)/m,(n-h-v)/m],x=[(z(r,Le)[Le]-p-y)/g,(i-p-y)/g],w=Math.max.apply(null,b),_=Math.min.apply(null,b),M=Math.max.apply(null,x),S=Math.min.apply(null,x),E=w-_,C=M-S;a&&(_=E>C&&_!==b[0]?b[0]-C:_,S=C>E&&S!==x[0]?x[0]-E:S,C=C>(E=E>C?C:E)?E:C);var T={element:o,minX:_,minY:S,width:E,height:C,xArr:b,yArr:x};z(r,Ue)[Ue](e,T)}}}}),Object.defineProperty(this,Fe,{writable:!0,value:function(){if(z(r,Ae)[Ae]){var e=z(r,Ce)[Ce];z(r,Pe)[Pe]&&e&&z(r,Ne)[Ne]&&z(r,Ne)[Ne](e),z(r,Ae)[Ae]=!1,z(r,Pe)[Pe]=!1,z(r,Ce)[Ce]=void 0,z(r,Te)[Te]=0,z(r,Le)[Le]=0}}}),Object.defineProperty(this,Ue,{writable:!0,value:function(e,t){var n=t.element,i=t.minX,a=t.minY,o=t.width,s=t.height,l=t.xArr,c=t.yArr,u=e.shiftKey,d=e.clientX,h=e.clientY;if(z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().RECT)n.setAttribute("x",i),n.setAttribute("y",a),n.setAttribute("width",o),n.setAttribute("height",s);else if(z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().ELLIPSE)n.setAttribute("cx",i+o/2),n.setAttribute("cy",a+s/2),n.setAttribute("rx",o/2),n.setAttribute("ry",s/2);else if(z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().TRIANGLE){var p="M ".concat(i," ").concat(a+s," L ").concat(i+o," ").concat(a+s," L ").concat(i+o/2," ").concat(a," Z");n.setAttribute("d",p)}else if(z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().LINE){var f=180*Math.atan2(c[1]-c[0],l[1]-l[0])/Math.PI+180;n.setAttribute("x1",l[0]),n.setAttribute("y1",c[0]),n.setAttribute("x2",u&&f<315&&f>225||u&&f<=135&&f>=45?l[0]:l[1]),n.setAttribute("y2",u&&(f<45||f>=315)||u&&f<=225&&f>135?c[0]:c[1])}else if(z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().OTHER_SHAPE){var v;if(!z(r,Ie)[Ie])return;var m=null===(v=n.ownerSVGElement)||void 0===v?void 0:v.getBoundingClientRect(),g=m.left,y=m.top,b=n.parentElement.getCTM(),x=d-z(r,Te)[Te],w=h-z(r,Le)[Le],_=new Me(z(r,Ie)[Ie]).matrix((x+z(r,ke)[ke])/z(r,ke)[ke],0,0,(w+z(r,De)[De])/z(r,De)[De],(z(r,Te)[Te]-g-b.e)/b.a,(z(r,Le)[Le]-y-b.f)/b.a).encode();n.setAttribute("d",_)}}}),Object.defineProperty(this,He,{writable:!0,value:function(){var e,t,n,i,a,o=z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().RECT?"rect":z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().ELLIPSE?"ellipse":z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().LINE?"line":"path",s=document.createElementNS("http://www.w3.org/2000/svg",o);return null===(e=z(r,Ee)[Ee].history)||void 0===e||e.end(),null===(t=z(r,Ee)[Ee].select)||void 0===t||t.clear(),null===(n=z(r,Ee)[Ee].select)||void 0===n||n.set(s,{node:s}),z(r,Ee)[Ee].layer.append(s),s.setAttribute("fill",z(r,Ee)[Ee].options.fill||"#d8d8d8"),s.setAttribute("stroke",z(r,Ee)[Ee].options.stroke||"#000000"),s.setAttribute("stroke-width",(null===(i=z(r,Ee)[Ee].options.strokeWidth)||void 0===i?void 0:i.toString())||"#000000"),s.setAttribute("fill-opacity",(null===(a=z(r,Ee)[Ee].options.fillOpacity)||void 0===a?void 0:a.toString())||"1"),s}}),Object.defineProperty(this,Ge,{writable:!0,value:function(){return z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().RECT?"\u77e9\u5f62":z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().ELLIPSE?"\u692d\u5706":z(r,Ee)[Ee].currentType===z(r,Ee)[Ee].tools().LINE?"\u76f4\u7ebf":"\u8def\u5f84"}}),this.plugin=function(e){z(r,Ie)[Ie]=e},this.isDrawing=function(){return z(r,Ae)[Ae]},this.disabled=function(e){z(r,Oe)[Oe]=e},!t)throw new Error("stage not found!");z(this,Ee)[Ee]=t,z(this,Ne)[Ne]=null===n||void 0===n?void 0:n.done,z(this,Re)[Re]=null===n||void 0===n?void 0:n.start,z(this,je)[je]()})),We=Ve,qe=function(){function e(t){i(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.element=void 0,this.element=t}return s(e,[{key:"add",value:function(e,t,n,i,r,a){var o=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=r*this.a+a*this.c,this.f+=r*this.b+a*this.d,this.c=n*this.a+i*this.c,this.d=n*this.b+i*this.d,this.a=o,this.b=s,this}},{key:"translate",value:function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this}},{key:"scale",value:function(e,t,n,i){return null==t&&(t=e),(n||i)&&this.translate(n,i),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(n||i)&&this.translate(-n,-i),this}},{key:"rotate",value:function(e,t,n){e=this.rad(e),t=t||0,n=n||0;var i=+Math.cos(e).toFixed(9),r=+Math.sin(e).toFixed(9);return this.add(i,r,-r,i,t,n),this.add(1,0,0,1,-t,-n)}},{key:"skewX",value:function(e){return this.skew(e,0)}},{key:"skewY",value:function(e){return this.skew(0,e)}},{key:"skew",value:function(e,t){}},{key:"rad",value:function(e){return e%360*Math.PI/180}},{key:"deg",value:function(e){return 180*e/Math.PI%360}},{key:"getMatrix",value:function(e){e=this.element||e;var t=window.getComputedStyle(e).transform;if("none"===t)return{a:1,b:0,c:0,d:1,e:0,f:0};var n=t.replace(/matrix\(|\)/g,""),i=-1===n.search(",")?n.split(" "):n.split(",");return{a:+i[0],b:+i[1],c:+i[2],d:+i[3],e:+i[4],f:+i[5]}}},{key:"getScale",value:function(e,t){var n,i;return i=this.getMatrix(e.parentElement)["sx"===t?"a":"d"],"svg"!=(null===e||void 0===e||null===(n=e.parentElement)||void 0===n?void 0:n.tagName)&&(i*=this.getScale(e.parentElement,t)),i}},{key:"getTrans",value:function(e,t){var n;return n=this.getMatrix(e.parentElement)["sx"===t?"e":"f"]*this.getParentScale(e.parentElement,t),"svg"!=e.parentElement.tagName&&(n+=this.getTrans(e.parentElement,t)),n}},{key:"getParentScale",value:function(e,t){return"g"!=e.parentElement.tagName?1:(n=this.getMatrix(e.parentElement)["sx"===t?"a":"d"],"svg"!=e.parentElement.tagName&&(n*=this.getParentScale(e.parentElement,t)),n);var n}}]),e}(),Xe=qe,Ze=function(e,t){return'<g uid="canvas" transform="matrix('.concat(e.a,",0,0,").concat(e.d,",").concat(e.e,",").concat(e.f,')">\n    <style>\n      #background-outlines rect{\n        fill: white;\n        stroke: rgb(0 0 0 / 20%);\n        vector-effect: non-scaling-stroke;\n      }\n\n      #lux-svg-root .lux-disabled{\n        opacity:0.24 !important;\n      }\n    </style>\n    <g id="background-outlines">\n        <rect style="pointer-events: none;" x="0" y="0" width="500" height="500" />\n    </g>\n\n    <g id="lux-workspaces">\n        <g id="lux-svg-root"></g>\n    </g>\n\n    <g id="huds">\n        <g id="outline-hud" context="transform">\n            <style>\n                #outline-hud [uid="outline"] {\n                fill: none;\n                stroke: rgb(245, 92, 54);\n                stroke-width: 2;\n                pointer-events: none;\n                vector-effect: non-scaling-stroke;\n                }\n            </style>\n            <path uid="outline"></path>\n        </g>\n\n        <g id="smart-guides-hud" enabled="">\n            <style>\n                #smart-guides-hud .repr {\n                fill: none;\n                stroke: blue;\n                stroke-width: 1;\n                vector-effect: non-scaling-stroke;\n                opacity: 0.6;\n                pointer-events: none;\n                }\n            </style>\n            <g uid="reprs"></g>\n        </g>\n\n        <g id="spline-hud" mode="edit">\n        <style>\n            #spline-hud [uid="grippies"] {\n            cursor: default;\n            }\n            #spline-hud [uid="grippies"]:focus {\n            outline: none;\n            }\n\n            /**\n             * Primary node grippies\n             */\n\n            #spline-hud .primary-node-grippie .outer-circle {\n            fill: white;\n            stroke: #4d2782;\n            stroke-width: 2;\n            vector-effect: non-scaling-stroke;\n            }\n            #spline-hud .primary-node-grippie[data-selected] .outer-circle {\n            fill: #bc9aec;\n            }\n            #spline-hud #grippies:focus .primary-node-grippie[data-selected] .outer-circle {\n            fill: #a370ea;\n            }\n            #spline-hud[mode^="draw-"]   .primary-node-grippie[data-position="mid"],\n            #spline-hud[mode$="-basis"]  .primary-node-grippie:not([data-subpath-type="basis"]),\n            #spline-hud[mode$="-rom"]    .primary-node-grippie:not([data-subpath-type="rom"]),\n            #spline-hud[mode$="-levien"] .primary-node-grippie:not([data-subpath-type="levien"]) {\n            display: none;\n            }\n\n            #spline-hud .primary-node-grippie .inner-circle {\n            pointer-events: none;\n            fill: #4d2782;\n            }\n\n            /**\n             * Secondary node grippies\n             */\n\n            #spline-hud .secondary-node-grippie {\n            fill: white;\n            stroke: #ef6c6c;\n            stroke-width: 1.5;\n            vector-effect: non-scaling-stroke;\n            }\n            #spline-hud[mode^="draw-"]   .secondary-node-grippie,\n            #spline-hud[mode$="-basis"]  .secondary-node-grippie:not([data-subpath-type="basis"]),\n            #spline-hud[mode$="-rom"]    .secondary-node-grippie:not([data-subpath-type="rom"]),\n            #spline-hud[mode$="-levien"] .secondary-node-grippie:not([data-subpath-type="levien"]) {\n            display: none;\n            }\n\n            /**\n             * Helper lines\n             */\n\n            #spline-hud .helper-line {\n            fill: none;\n            stroke: red;\n            stroke-width: 2;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            opacity: 0.3;\n            }\n            #spline-hud[mode^="draw-freehand"] .helper-line,\n            #spline-hud[mode$="-rom"] .helper-line {\n            display: none;;\n            }\n\n            /**\n             * Curve grippies\n             */\n\n            #spline-hud[mode^="draw"] .curve-grippie {\n            display: none;\n            }\n            #spline-hud .curve-grippie path {\n            fill: none;\n            stroke: blue;\n            stroke-width: 10px;\n            vector-effect: non-scaling-stroke;\n            opacity: 0;\n            }\n            #spline-hud .curve-grippie path:hover {\n            opacity: 0.2;\n            }\n        </style>\n\n        <g uid="grippies" tabindex="-1">\n            <g uid="helper-lines"></g>\n            <g uid="curve-grippies" style=""></g>\n            <g uid="primary-node-grippies"></g>\n            <g uid="secondary-node-grippies"></g>\n        </g>\n        </g>\n\n        <g id="cubic-bezier-seg-hud" drawing>\n        <style>\n            #cubic-bezier-seg-hud [uid="control-line-1"],\n            #cubic-bezier-seg-hud [uid="control-line-2"] {\n            fill: none;\n            stroke: red;\n            stroke-width: 1;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            opacity: 0.4;\n            }\n\n            #cubic-bezier-seg-hud [uid="control-point-1-grippie"],\n            #cubic-bezier-seg-hud [uid="control-point-2-grippie"] {\n            fill: red;\n            stroke: none;\n            pointer-events: none;\n            opacity: 1;\n            }\n\n            #cubic-bezier-seg-hud [uid="outline"] {\n            fill: none;\n            stroke: red;\n            stroke-width: 2.5;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n            }\n        </style>\n\n        <g uid="container" transform="matrix(1, 0, 0, 1, 0, 0)" style="visibility: hidden;">\n            <path uid="outline"></path>\n            <line uid="control-line-1" x2="521.933" y1="141.132" x1="521.933" y2="141.132"></line>\n            <line uid="control-line-2" x2="745.073" y1="149.396" x1="745.073" y2="149.396"></line>\n            <circle uid="control-point-1-grippie" r="2.86078" cx="-9999999" cy="-9999999"></circle>\n            <circle uid="control-point-2-grippie" r="2.86078" cx="-9999999" cy="-9999999"></circle>\n        </g>\n        </g>\n\n        <g id="text-hud" tabindex="-1">\n        <style>\n        \n            /**\n            * Overlays\n            */\n            #text-hud{\n                pointer-events: none;\n            }\n\n            #text-hud [uid="caret-line"] {\n                stroke-width: 3;\n                vector-effect: non-scaling-stroke;\n                pointer-events: none;\n                stroke: gray;\n            }\n\n            #text-hud[inputmode] [uid="caret-line"] {\n                stroke: blue;\n            }\n            \n            #text-hud [uid="selection-rects"] rect {\n                fill:rgba(179, 179, 179, 0.3);\n                pointer-events: none;\n                stroke:none;\n            }\n\n            #text-hud[inputmode] [uid="selection-rects"] rect {\n                fill: rgb(53 132 228 / 20%);\n            }\n            \n            #text-hud [uid="html-input-object"] {\n                width: 1px;\n                height: 1px;\n                opacity: 0;\n                background: white;\n                pointer-events: none;\n            }\n\n\n            #text-hud [uid="html-input-object"] {\n            /* Needed for correct positioning of IME dialog */\n            font-size: 10px !important;\n            }\n            \n\n            #text-hud [uid="html-input"] {\n                width: 100%;\n                height: 100%;\n                padding: 0;\n                margin: 0;\n                white-space: pre;\n                text-align:left;\n                -webkit-user-modify: read-write-plaintext-only;\n                -webkit-user-select: text;\n            }\n\n        </style>\n\n        <g uid="overlays">\n            <line uid="caret-line"></line>\n            <g uid="selection-rects"></g>\n        </g>\n\n        <foreignObject uid="html-input-object" width="200" height="200" x="0" y="0">\n            <p uid="html-input" tabindex="0"></p>\n        </foreignObject>\n        </g>\n\n        <g id="frame-select-hud">\n            <style>\n                #frame-select-hud [uid="frame-select"] {\n                    // stroke-dasharray: 4;\n                    fill-opacity: 0;\n                    stroke: #1F83EA;\n                    stroke-width: 1;\n                    pointer-events: none;\n                    vector-effect: non-scaling-stroke;\n                    visibility:hidden;\n                }\n            </style>\n            <rect uid="frame-select" x="-99999" y="-99999" width="0" height="0" ></rect>\n        </g>\n\n        <g id="freehand-hud" drawing="">\n            <style>\n                #freehand-hud [uid="outline"] {\n                fill: none;\n                stroke: red;\n                stroke-width: 2.5;\n                vector-effect: non-scaling-stroke;\n                pointer-events: none;\n                }\n            </style>\n\n            <polyline uid="outline"></polyline>\n        </g>\n\n        <g id="view-hud" style="visibility:hidden">\n            <style>\n                #view-hud .grippie[data-position="left"],\n                #view-hud .grippie[data-position="right"],\n                #view-hud .grippie[data-position="top"],\n                #view-hud .grippie[data-position="bottom"] {\n                stroke: red;\n                vector-effect: non-scaling-stroke;\n                stroke-width: 8;\n                opacity: 0;\n                }\n\n                #view-hud .grippie[data-position="top-left"] path,\n                #view-hud .grippie[data-position="top-right"] path,\n                #view-hud .grippie[data-position="bottom-left"] path,\n                #view-hud .grippie[data-position="bottom-right"] path {\n\n                stroke-width: 1;\n                vector-effect: non-scaling-stroke;\n                fill: rgb(176, 214, 255);\n                stroke: rgb(2, 81, 165);\n                }\n\n                #view-hud .grippie[data-position="left"],\n                #view-hud .grippie[data-position="right"] {\n                cursor: ew-resize;\n                }\n                #view-hud .grippie[data-position="top"],\n                #view-hud .grippie[data-position="bottom"] {\n                cursor: ns-resize;\n                }\n                #view-hud .grippie[data-position="top-left"] {\n                cursor: nwse-resize;\n                }\n                #view-hud .grippie[data-position="top-right"] {\n                cursor: nesw-resize;\n                }\n                #view-hud .grippie[data-position="bottom-left"] {\n                cursor: nesw-resize;\n                }\n                #view-hud .grippie[data-position="bottom-right"] {\n                cursor: nwse-resize;\n                }\n       \n            </style>\n\n            <g uid="subhuds">\n                <g class="grippie" data-position="top-left" transform="matrix(1, 0, 0, 1, -15, -15)">\n                    <path d="M 15 15 h 15 v -5 h -20 v 20 h 5 z"></path>\n                </g>\n\n                <g class="grippie" data-position="top-right" transform="matrix(1, 0, 0, 1, 548, -15)">\n                    <path d="M 0 15 h 15 v 15 h 5 v -20 h -20 z"></path>\n                </g>\n\n                <g class="grippie" data-position="bottom-left" transform="matrix(1, 0, 0, 1, -15, 548)">\n                    <path d="M 15 15 h 15 v 5 h -20 v -20 h 5 z"></path>\n                </g>\n\n                <g class="grippie" data-position="bottom-right" transform="matrix(1, 0, 0, 1, 548, 548)">\n                    <path d="M 15 15 v -15 h 5 v 20 h -20 v -5 z"></path>\n                </g>\n                </g>\n            </g>\n        \n        <g id="rubber-band-hud">\n            <style>\n                #rubber-band-hud [uid="rubber-hand"] {\n                    fill: rgb(12 118 218 / 40%);\n                    stroke: rgb(12 118 218 / 100%);\n                    stroke-width: 1;\n                    pointer-events: none;\n                    vector-effect: non-scaling-stroke;\n                }\n            </style>\n            <rect uid="rubber-hand" x="0" y="0" width="0" height="0"></rect>\n        </g>\n\n        <g id="transform-hud">\n        <style>\n            #transform-hud .grippie {\n            fill: #ffffff;\n            stroke: #C3CBDD;\n            stroke-width: 1;\n            vector-effect: non-scaling-stroke;\n            fill: rgb(46, 102, 249);\n            stroke: white;\n            stroke-width: 2;\n            filter: url(#grippie-shadow);\n            filter: drop-shadow(0px 0px 1px black);\n            }\n        </style>\n        <g uid="grippies">\n            <g uid="scale-grippies" style="visibility:hidden;"><rect class="grippie"  data-position="top" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="right" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="top-left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="top-right" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom-left" width="').concat(t,'" height="').concat(t,'">\n            </rect><rect class="grippie" data-position="bottom-right" width="').concat(t,'" height="').concat(t,'">\n            </ellipse></g>\n            <svg uid="origin-grippie" fill="#00b706" viewBox="0 0 100 100"  width="10" height="10" style="pointer-events: none;visibility:hidden;display:none">\n            <rect x="41" width="17" height="100" fill="inherit"></rect>\n            <rect x="41" width="17" height="100" fill="inherit" transform="matrix(0, 1, -1, 0, 100, 0.5)"></rect>\n        </svg>\n        </g>\n        </g>\n        <g id="rotate-hud" style="display:none;">\n            <g uid="grippies"><rect rx="999" y="0" x="0" width="').concat(t,'" height="').concat(t,'" fill="red"></g>\n        </g>\n    </g>\n</g>')},Ye=F("stage"),Je=F("textHud"),Qe=F("htmlInput"),Ke=F("text"),$e=F("selectRects"),et=F("caretLine"),tt=F("startRange"),nt=F("range"),it=F("textListener"),rt=F("preTime"),at=F("blurTimer"),ot=F("startIndex"),st=F("endIndex"),lt=F("isSelecting"),ct=F("isDisabled"),ut=F("addCallBack"),dt=F("editCallBack"),ht=F("changeCallBack"),pt=F("keydownCallBack"),ft=F("quitCallBack"),vt=F("WATCH_ACTIONS"),mt=F("install"),gt=F("mousedown"),yt=F("mousemove"),bt=F("mouseup"),xt=F("keydown"),wt=F("focus"),_t=F("blur"),Mt=F("change"),St=F("textSelection"),Et=F("textListen"),Ct=F("queryTextRect"),Tt=F("createNode"),Lt=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Qe,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,et,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,rt,{writable:!0,value:0}),Object.defineProperty(this,at,{writable:!0,value:void 0}),Object.defineProperty(this,ot,{writable:!0,value:0}),Object.defineProperty(this,st,{writable:!0,value:0}),Object.defineProperty(this,lt,{writable:!0,value:!1}),Object.defineProperty(this,ct,{writable:!0,value:!0}),Object.defineProperty(this,ut,{writable:!0,value:void 0}),Object.defineProperty(this,dt,{writable:!0,value:void 0}),Object.defineProperty(this,ht,{writable:!0,value:void 0}),Object.defineProperty(this,pt,{writable:!0,value:void 0}),Object.defineProperty(this,ft,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:{ADD:Symbol(),EDIT:Symbol(),CHANGE:Symbol(),KEYDOWN:Symbol(),QUIT:Symbol()}}),Object.defineProperty(this,mt,{writable:!0,value:function(){var e,t,i,r,a;z(n,Je)[Je]=document.querySelector("#text-hud"),z(n,Qe)[Qe]=document.querySelector('[uid="html-input"]'),z(n,et)[et]=document.querySelector('[uid="caret-line"]'),z(n,$e)[$e]=document.querySelector('[uid="selection-rects"]'),null===(e=z(n,Qe)[Qe])||void 0===e||e.addEventListener("keydown",z(n,xt)[xt]),null===(t=z(n,Qe)[Qe])||void 0===t||t.addEventListener("input",z(n,Mt)[Mt]),null===(i=z(n,Qe)[Qe])||void 0===i||i.addEventListener("focus",z(n,wt)[wt]),null===(r=z(n,Qe)[Qe])||void 0===r||r.addEventListener("blur",z(n,_t)[_t]),null===(a=z(n,Ye)[Ye].stage)||void 0===a||a.addEventListener("mousedown",z(n,gt)[gt]),document.addEventListener("mousemove",z(n,yt)[yt]),document.addEventListener("mouseup",z(n,bt)[bt])}}),this.watch=function(e,t){e===n.actions().ADD?z(n,ut)[ut]=t:e===n.actions().EDIT?z(n,dt)[dt]=t:e===n.actions().CHANGE?z(n,ht)[ht]=t:e===n.actions().KEYDOWN?z(n,pt)[pt]=t:e===n.actions().QUIT&&(z(n,ft)[ft]=t)},this.add=function(e){var t;z(n,ct)[ct]||(null===(t=z(n,Ye)[Ye].history)||void 0===t||t.add(z(n,Ye)[Ye].history.actions().ADD,"\u6587\u672c"),setTimeout((function(){var t,i,r,a=e.offsetX,o=e.offsetY,s=null===(t=z(n,Ye)[Ye].canvas)||void 0===t?void 0:t.getMatrix().a,l=z(n,Tt)[Tt]("text"),c=Number(z(n,Ye)[Ye].options.fontSize)/s;l.setAttribute("font-size",c.toString()),l.setAttribute("font-family","MicrosoftYaHei,Microsoft YaHei,Microsoft YaHei"),l.style.whiteSpace="pre",z(n,Et)[Et](),l.append(document.createTextNode((null===(i=z(n,Ye)[Ye].options.textContent)||void 0===i?void 0:i.toString())||"")),z(n,Qe)[Qe].innerHTML=z(n,Ye)[Ye].options.textContent,z(n,Ye)[Ye].layer.append(l);var u=z(n,Ye)[Ye].layer.getCTM(),d=(a-u.e)/s,h=(o-u.f)/s;if(l.setAttribute("x",d.toFixed(9)),l.setAttribute("y",h.toFixed(9)),u.a!==u.d){var p=1/u.a*s,f=1/u.d*s,v=-(u.e-u.e)*p,m=-(u.f-u.f)*f;l.setAttribute("transform","matrix(\n            ".concat(p,",\n            ",0,",\n            ",0,",\n            ").concat(f,",\n            ").concat(v,",\n            ").concat(m,"\n          )"))}z(n,Ke)[Ke]=l,z(n,ut)[ut]&&z(n,ut)[ut](l),null===(r=z(n,Je)[Je])||void 0===r||r.setAttribute("inputmode","true"),z(n,St)[St](!0)})))},this.edit=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!z(n,ct)[ct]){if(e){e.stopPropagation();var r=e.clientX,a=e.clientY;z(n,nt)[nt]=document.caretRangeFromPoint(r,a)}z(n,Ke)[Ke]=t,z(n,Et)[Et](),n.closeRange(),z(n,Qe)[Qe].innerHTML="",z(n,Ke)[Ke].childNodes.forEach((function(e){var t=e;if("tspan"===t.localName){var i=document.createTextNode("\n");z(n,Qe)[Qe].append(i)}else{var r=t.cloneNode(!0);z(n,Qe)[Qe].append(r)}})),z(n,lt)[lt]=!1,z(n,tt)[tt]=z(n,nt)[nt],z(n,Ke)[Ke].onmousedown=function(e){e&&(z(n,lt)[lt]=!0)},e&&z(n,Ke)[Ke].onmousedown(e);z(n,Ke)[Ke].addEventListener("dblclick",(function e(){var t,i;"hidden"!==(null===(t=z(n,et)[et])||void 0===t?void 0:t.style.visibility)&&(z(n,St)[St](!0,!1,!0),null===(i=z(n,Ke)[Ke])||void 0===i||i.removeEventListener("dblclick",e))})),z(n,dt)[dt]&&z(n,dt)[dt](t),setTimeout((function(){var e;z(n,St)[St](i),null===(e=z(n,Je)[Je])||void 0===e||e.setAttribute("inputmode","true"),z(n,Qe)[Qe].focus()}))}},Object.defineProperty(this,gt,{writable:!0,value:function(e){if(0===e.button){var t=e.target;"text"===t.localName?null===n||void 0===n||n.edit(e,t):null===n||void 0===n||n.add(e)}}}),Object.defineProperty(this,yt,{writable:!0,value:function(e){var t;if(z(n,lt)[lt]){var i=e.clientX,r=e.clientY,a=null===(t=z(n,Ke)[Ke])||void 0===t?void 0:t.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,c=a.bottom,u=o<i&&i<l?i:i<o?o:l,d=s<r&&r<c?r:r<s?s:c;z(n,nt)[nt]=document.caretRangeFromPoint(u,d),z(n,St)[St](!1,!1)}}}),Object.defineProperty(this,bt,{writable:!0,value:function(){var e,t;if(z(n,tt)[tt]&&z(n,nt)[nt]&&z(n,lt)[lt]){z(n,lt)[lt]=!1,z(n,Ke)[Ke]&&(z(n,Ke)[Ke].onmousedown=null);var i=null===(e=z(n,tt)[tt])||void 0===e?void 0:e.startOffset,r=null===(t=z(n,nt)[nt])||void 0===t?void 0:t.endOffset,a=i,o=r,s=z(n,Qe)[Qe].childNodes[z(n,ot)[ot]],l=z(n,Qe)[Qe].childNodes[z(n,st)[st]];s===l&&(a=Math.min(i,r),o=Math.max(i,r));var c=2===s.compareDocumentPosition(l);c&&(a=r,o=i);var u=document.createRange();u.setStart(c?l:s,a),u.setEnd(c?s:l,o);var d=window.getSelection();null===d||void 0===d||d.removeAllRanges(),null===d||void 0===d||d.addRange(u)}}}),Object.defineProperty(this,xt,{writable:!0,value:function(e){if(e.stopPropagation(),z(n,pt)[pt]&&z(n,pt)[pt](e),z(n,Ke)[Ke]){e.ctrlKey&&"KeyA"===e.code?z(n,St)[St](!0):e.ctrlKey&&"KeyV"===e.code&&setTimeout((function(){z(n,Mt)[Mt]()})),27===e.keyCode&&(n.quit(),z(n,ft)[ft]&&z(n,ft)[ft]());[37,38,39,40].includes(e.keyCode)&&setTimeout((function(){z(n,Mt)[Mt]()}))}}}),Object.defineProperty(this,wt,{writable:!0,value:function(){var e;z(n,nt)[nt]&&""===(null===(e=z(n,$e)[$e])||void 0===e?void 0:e.innerHTML)&&z(n,et)[et]&&(clearTimeout(z(n,at)[at]),n.openCaretLine(),n.setCaretLine())}}),Object.defineProperty(this,_t,{writable:!0,value:function(){z(n,at)[at]=setTimeout((function(){var e;null===(e=z(n,Je)[Je])||void 0===e||e.removeAttribute("inputmode")}),10)}}),Object.defineProperty(this,Mt,{writable:!0,value:function(){var e,t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(z(n,Ke)[Ke]){n.closeRange();var r=window.getSelection(),a=null===(e=z(n,Ke)[Ke])||void 0===e?void 0:e.querySelector("tspan"),o=null===a||void 0===a?void 0:a.getAttribute("dy"),s=z(n,Ke)[Ke].getAttribute("x")||0,l=!1;""===z(n,Qe)[Qe].innerHTML&&(z(n,Qe)[Qe].innerHTML=" ",l=!0),-1!==z(n,Qe)[Qe].innerHTML.search("br")&&z(n,Qe)[Qe].childNodes.forEach((function(e){if(3!==e.nodeType)return e.remove()}));var c=null===(t=z(n,Qe)[Qe])||void 0===t?void 0:t.innerHTML.replace(/\n/gm,'<tspan x="'.concat(s,'" dy="').concat(o||"1em",'">&ZeroWidthSpace;</tspan>'));z(n,Ke)[Ke].innerHTML=c;try{var u,d=0;z(n,Qe)[Qe].childNodes.forEach((function(e,t){var i,a,o,s;(null!==(i=z(n,Ke)[Ke])&&void 0!==i&&null!==(a=i.childNodes[t])&&void 0!==a&&a.nextSibling||"\n"===(null===(o=e.nextSibling)||void 0===o?void 0:o.localName)||e.nextSibling&&(e.appendData(e.nextSibling.nodeValue),e.nextSibling.remove()),e===r.focusNode)&&(d=t,"\n"===(null===(s=e.previousSibling)||void 0===s?void 0:s.nodeValue)&&"\n"===e.nodeValue&&d--)}));var h,p=z(n,Ke)[Ke].childNodes[d],f="tspan"===(null===p||void 0===p?void 0:p.localName)?p.firstChild:p;if(z(n,nt)[nt]=document.createRange(),z(n,nt)[nt].setStart(f,r.focusOffset),z(n,nt)[nt].setEnd(f,r.focusOffset),z(n,et)[et])i&&(null===(h=z(n,Je)[Je])||void 0===h||h.setAttribute("inputmode","true"));n.openCaretLine(),n.setCaretLine(),z(n,ht)[ht]&&z(n,ht)[ht](),l&&z(n,St)[St](!0),null===(u=z(n,Ye)[Ye].select)||void 0===u||u.autoResetBoxSelect(!0)}catch(v){console.error(v)}}}}),Object.defineProperty(this,St,{writable:!0,value:function(){var e,t,i,r,a,o,s,l,c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n.closeRange(),c){var h,p,f;n.closeCaretLine();var v=z(n,Qe)[Qe].firstChild,m=z(n,Qe)[Qe].lastChild,g=document.createRange();g.setStart(v,0),g.setEnd(m,m.textContent.length);var y=window.getSelection();null===y||void 0===y||y.removeAllRanges(),z(n,nt)[nt]=z(n,tt)[tt]=document.createRange();var b=null===(h=z(n,Ke)[Ke])||void 0===h?void 0:h.firstChild,x=null===(p=z(n,Ke)[Ke])||void 0===p?void 0:p.lastChild,w=null===(f=x.textContent)||void 0===f?void 0:f.length;z(n,nt)[nt].setStart(b,0),z(n,nt)[nt].setEnd(x,w),u||null===y||void 0===y||y.addRange(g)}var _=null===(e=z(n,Ye)[Ye].canvas)||void 0===e?void 0:e.getMatrix(),M=_.e,S=_.f,E=_.sx,C=_.sy,T=null===(t=z(n,Ye)[Ye].canvas)||void 0===t||null===(i=t.ownerSVGElement)||void 0===i?void 0:i.getBoundingClientRect(),L=T.left,A=T.top,P=null===(r=z(n,tt)[tt])||void 0===r?void 0:r.startContainer,O=null===(a=z(n,nt)[nt])||void 0===a?void 0:a.endContainer,R=null===(o=z(n,tt)[tt])||void 0===o?void 0:o.startOffset,N=null===(s=z(n,nt)[nt])||void 0===s?void 0:s.endOffset,k=-1,D=-1,I=-1;null===(l=z(n,Ke)[Ke])||void 0===l||l.childNodes.forEach((function(e,t){var i;if(3===e.nodeType){if(e===P&&(z(n,ot)[ot]=t),e===O&&(z(n,st)[st]=t),P===O&&(I=1,k=Math.min(R,N),D=Math.max(R,N)),4===P.compareDocumentPosition(O)){var r,a;if(I=2,e===P)k=R,D=Number(null===(r=e.textContent)||void 0===r?void 0:r.length);if(e===O&&(k=0,D=N),e!==P&&e!==O)k=0,D=Number(null===(a=e.textContent)||void 0===a?void 0:a.length)}if(2===P.compareDocumentPosition(O)){var o,s;if(I=3,e===P&&(k=0,D=R),e===O)k=N,D=Number(null===(o=e.textContent)||void 0===o?void 0:o.length);if(e!==P&&e!==O)k=0,D=Number(null===(s=e.textContent)||void 0===s?void 0:s.length)}1===I&&e!==P||2===I&&4===e.compareDocumentPosition(P)||2===I&&2===e.compareDocumentPosition(O)||3===I&&2===e.compareDocumentPosition(P)||3===I&&4===e.compareDocumentPosition(O)||null===(i=e.textContent)||void 0===i||i.split("").forEach((function(t,i){if(k<=i&&i+1<=D||d){var r,a=z(n,Ct)[Ct](e,i,i+1),o=a.x,s=a.y,l=a.width,c=a.height,u=z(n,Tt)[Tt]("rect"),h=(o-L-M)/E,p=(s-A-S)/C,f=l/E,v=c/C;u.setAttribute("x",h.toFixed(9)),u.setAttribute("y",p.toFixed(9)),u.setAttribute("width",f.toFixed(9)),u.setAttribute("height",v.toFixed(9)),null===(r=z(n,$e)[$e])||void 0===r||r.append(u)}}))}})),P===O&&k===D&&z(n,lt)[lt]?n.openCaretLine():n.closeCaretLine()}}),Object.defineProperty(this,Et,{writable:!0,value:function(){setTimeout((function(){var e;z(n,Ke)[Ke]&&(null===(e=z(n,it)[it])||void 0===e||e.disconnect(),z(n,it)[it]=new MutationObserver((function(){n.autoSelection()})),z(n,Ke)[Ke]&&z(n,it)[it].observe(z(n,Ke)[Ke],{attributes:!0,subtree:!0}))}))}}),this.autoSelection=function(){var e,t,i,r=(new Date).getTime();if(!(r-z(n,rt)[rt]<20)){z(n,rt)[rt]=r;var a=null===(e=z(n,Je)[Je])||void 0===e?void 0:e.hasAttribute("inputmode");""!==(null===(t=z(n,$e)[$e])||void 0===t?void 0:t.innerHTML)&&z(n,St)[St](!1,!a),"visible"===(null===(i=z(n,et)[et])||void 0===i?void 0:i.style.visibility)&&(n.setCaretLine(),z(n,Mt)[Mt](a))}},this.closeRange=function(){z(n,$e)[$e]&&(z(n,$e)[$e].innerHTML="")},this.openCaretLine=function(){z(n,et)[et]&&(z(n,et)[et].style.visibility="visible")},this.closeCaretLine=function(){z(n,et)[et]&&(z(n,et)[et].style.visibility="hidden")},this.setCaretLine=function(){var e,t,i,r,a,o,s,l,c,u,d,h=null===(e=z(n,Ye)[Ye].stage)||void 0===e?void 0:e.getBoundingClientRect(),p=h.x,f=h.y,v=null===(t=z(n,nt)[nt])||void 0===t?void 0:t.getBoundingClientRect(),m=v.x,g=v.y,y=v.height,b=null===(i=z(n,Ke)[Ke])||void 0===i?void 0:i.getBoundingClientRect(),x=(b.x,b.y,null===(r=z(n,Ke)[Ke])||void 0===r?void 0:r.getBBox()),w=(x.x,x.y,x.height,null===(a=z(n,Ke)[Ke])||void 0===a||a.getCTM(),null===(o=z(n,Ke)[Ke])||void 0===o||o.getMatrix(),null===(s=z(n,Ye)[Ye].canvas)||void 0===s?void 0:s.getMatrix()),_=w.e,M=w.f,S=w.sx,E=w.sy,C=(m-p-_)/S,T=(g-f-M)/E,L=T+y/E;null===(l=z(n,et)[et])||void 0===l||l.setAttribute("x1",C.toFixed(9)),null===(c=z(n,et)[et])||void 0===c||c.setAttribute("y1",T.toFixed(9)),null===(u=z(n,et)[et])||void 0===u||u.setAttribute("x2",C.toFixed(9)),null===(d=z(n,et)[et])||void 0===d||d.setAttribute("y2",L.toFixed(9))},Object.defineProperty(this,Ct,{writable:!0,value:function(e,t,n){var i=Math.min(t,n),r=Math.max(t,n),a=document.createRange();return a.setStart(e,i),a.setEnd(e,r),a.getBoundingClientRect()}}),Object.defineProperty(this,Tt,{writable:!0,value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}),this.quit=function(){z(n,Qe)[Qe].blur(),n.closeRange(),n.closeCaretLine(),z(n,Ke)[Ke]&&(z(n,Ke)[Ke].onmousedown=null)},this.actions=function(){return z(n,vt)[vt]},this.disabled=function(e){z(n,ct)[ct]=e},this.uninstall=function(){var e,t,i,r,a;null===(e=z(n,Qe)[Qe])||void 0===e||e.removeEventListener("keydown",z(n,xt)[xt]),null===(t=z(n,Qe)[Qe])||void 0===t||t.removeEventListener("input",z(n,Mt)[Mt]),null===(i=z(n,Qe)[Qe])||void 0===i||i.removeEventListener("focus",z(n,wt)[wt]),null===(r=z(n,Qe)[Qe])||void 0===r||r.removeEventListener("blur",z(n,_t)[_t]),null===(a=z(n,Ye)[Ye].stage)||void 0===a||a.removeEventListener("mousedown",z(n,gt)[gt]),document.removeEventListener("mousemove",z(n,yt)[yt]),document.removeEventListener("mouseup",z(n,bt)[bt]),z(n,it)[it]&&z(n,it)[it].disconnect(),n.closeRange(),n.closeCaretLine(),z(n,tt)[tt]=z(n,nt)[nt]=void 0},!t)throw new Error("stage not found!");z(this,Ye)[Ye]=t,z(this,mt)[mt]()})),At=Lt,Pt=F("isDragging"),Ot=F("isFirst"),Rt=F("direction"),Nt=F("startX"),kt=F("startY"),Dt=F("un_shiftKey"),It=F("mousemove"),jt=F("mouseup"),zt=function(){function e(){var t=this;i(this,e),this.element=void 0,Object.defineProperty(this,Pt,{writable:!0,value:!1}),Object.defineProperty(this,Ot,{writable:!0,value:!0}),Object.defineProperty(this,Rt,{writable:!0,value:void 0}),Object.defineProperty(this,Nt,{writable:!0,value:0}),Object.defineProperty(this,kt,{writable:!0,value:0}),this.clientX=0,this.clientY=0,this.dataX=0,this.dataY=0,this.start=void 0,this.move=void 0,this.end=void 0,Object.defineProperty(this,Dt,{writable:!0,value:!1}),this.shiftKey=!1,this.stopPropagation=!1,this.mousedown=function(e){if(0===e.button){t.stopPropagation&&e.stopPropagation();var n=e.clientX,i=e.clientY;t.shiftKey=e.shiftKey,z(t,Pt)[Pt]=!0,z(t,Nt)[Nt]=n,z(t,kt)[kt]=i,t.start&&t.start(e,t.element)}},Object.defineProperty(this,It,{writable:!0,value:function(e){if(z(t,Pt)[Pt]){t.stopPropagation&&e.stopPropagation();var n=e.clientX,i=e.clientY;t.shiftKey=e.shiftKey,t.dataX=n-z(t,Nt)[Nt],t.dataY=i-z(t,kt)[kt],0===t.dataX&&0===t.dataY&&(z(t,Ot)[Ot]=!0),e.shiftKey&&!z(t,Dt)[Dt]&&(z(t,Ot)[Ot]&&0!==t.dataX&&0!==t.dataY&&(z(t,Ot)[Ot]=!1,z(t,Rt)[Rt]=Math.abs(t.dataX)>Math.abs(t.dataY)?"h":"v"),"v"===z(t,Rt)[Rt]?t.dataX=0:"h"===z(t,Rt)[Rt]&&(t.dataY=0)),t.clientX=n,t.clientY=i,t.move&&t.move(t,t.element)}}}),Object.defineProperty(this,jt,{writable:!0,value:function(e){if(z(t,Pt)[Pt]){t.stopPropagation&&e.stopPropagation();var n=e.clientX,i=e.clientY;t.shiftKey=e.shiftKey,z(t,Ot)[Ot]=!0,z(t,Rt)[Rt]="",z(t,Pt)[Pt]=!1,t.dataX=n-z(t,Nt)[Nt],t.dataY=i-z(t,kt)[kt],t.end&&t.end(t,t.element)}}}),this.uninstall=function(){t.element.onmousedown=null,document.removeEventListener("mousemove",z(t,It)[It]),document.removeEventListener("mouseup",z(t,jt)[jt])}}return s(e,[{key:"install",value:function(e){var t=e.element,n=e.start,i=e.move,r=e.end,a=e.un_shiftKey,o=void 0!==a&&a;this.element=t,z(this,Dt)[Dt]=o,this.start=n,this.move=i,this.end=r,this.element.onmousedown=this.mousedown,document.addEventListener("mousemove",z(this,It)[It]),document.addEventListener("mouseup",z(this,jt)[jt])}}]),e}(),Bt=F("stage"),Ft=F("draggable"),Ut=F("startX"),Ht=F("startY"),Gt=F("install"),Vt=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Bt,{writable:!0,value:void 0}),Object.defineProperty(this,Ft,{writable:!0,value:void 0}),Object.defineProperty(this,Ut,{writable:!0,value:0}),Object.defineProperty(this,Ht,{writable:!0,value:0}),Object.defineProperty(this,Gt,{writable:!0,value:function(){z(n,Ft)[Ft]=new zt,z(n,Ft)[Ft].install({element:z(n,Bt)[Bt].stage,start:function(){z(n,Ut)[Ut]=z(n,Bt)[Bt].matrix.e,z(n,Ht)[Ht]=z(n,Bt)[Bt].matrix.f,z(n,Bt)[Bt].stage.style.cursor="grabbing"},move:function(e){var t,i=z(n,Bt)[Bt].matrix,r=i.a,a=i.b,o=i.c,s=i.d,l=z(n,Ut)[Ut]+e.dataX,c=z(n,Ht)[Ht]+e.dataY;null===(t=z(n,Bt)[Bt].canvas)||void 0===t||t.setAttribute("transform","matrix(".concat(r,",").concat(a,",").concat(o,",").concat(s,",").concat(l,",").concat(c,")"))},end:function(){z(n,Bt)[Bt].stage.style.cursor="grab"}})}}),this.disabled=function(e){var t;e?null===(t=z(n,Ft)[Ft])||void 0===t||t.uninstall():z(n,Gt)[Gt]()},!t)throw new Error("stage not found!");z(this,Bt)[Bt]=t})),Wt=Vt,qt=F("stage"),Xt=F("splineHud"),Zt=F("secondaryNodeGrippies"),Yt=F("helperLines"),Jt=F("grippiesGroup"),Qt=F("bezierHud"),Kt=F("bezierG"),$t=F("bezierP"),en=F("bezierL1"),tn=F("bezierL2"),nn=F("bezierC1"),rn=F("bezierC2"),an=F("paths"),on=F("grippies"),sn=F("controls"),ln=F("isDragging"),cn=F("isGrippieMoving"),un=F("isDrawing"),dn=F("firstX"),hn=F("firstY"),pn=F("checkedGrippie"),fn=F("focusGrippie"),vn=F("startX"),mn=F("startY"),gn=F("sClientX"),yn=F("sClientY"),bn=F("isDisabled"),xn=F("times"),wn=F("install"),_n=F("watch"),Mn=F("addNodes"),Sn=F("removeNodes"),En=F("initGrippies"),Cn=F("mousedown"),Tn=F("mousemove"),Ln=F("mouseup"),An=F("grippieDrag"),Pn=F("BezierControlDrag"),On=F("createHelperLine"),Rn=F("createSecondaryGrippies"),Nn=F("setBezierP"),kn=F("setBezierC1"),Dn=F("setBezierC2"),In=F("setBezierL1"),jn=F("setBezierL2"),zn=F("createGrippies"),Bn=F("unSelect"),Fn=F("createSvgNode"),Un=F("closeBezierG"),Hn=F("reset"),Gn=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Fn,{value:Vn}),Object.defineProperty(this,qt,{writable:!0,value:void 0}),Object.defineProperty(this,Xt,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:void 0}),Object.defineProperty(this,Yt,{writable:!0,value:void 0}),Object.defineProperty(this,Jt,{writable:!0,value:void 0}),Object.defineProperty(this,Qt,{writable:!0,value:void 0}),Object.defineProperty(this,Kt,{writable:!0,value:void 0}),Object.defineProperty(this,$t,{writable:!0,value:void 0}),Object.defineProperty(this,en,{writable:!0,value:void 0}),Object.defineProperty(this,tn,{writable:!0,value:void 0}),Object.defineProperty(this,nn,{writable:!0,value:void 0}),Object.defineProperty(this,rn,{writable:!0,value:void 0}),Object.defineProperty(this,an,{writable:!0,value:new Map}),Object.defineProperty(this,on,{writable:!0,value:new Map}),Object.defineProperty(this,sn,{writable:!0,value:new Map}),Object.defineProperty(this,ln,{writable:!0,value:!1}),Object.defineProperty(this,cn,{writable:!0,value:!1}),Object.defineProperty(this,un,{writable:!0,value:!1}),Object.defineProperty(this,dn,{writable:!0,value:0}),Object.defineProperty(this,hn,{writable:!0,value:0}),Object.defineProperty(this,pn,{writable:!0,value:void 0}),Object.defineProperty(this,fn,{writable:!0,value:void 0}),Object.defineProperty(this,vn,{writable:!0,value:0}),Object.defineProperty(this,mn,{writable:!0,value:0}),Object.defineProperty(this,gn,{writable:!0,value:0}),Object.defineProperty(this,yn,{writable:!0,value:0}),Object.defineProperty(this,bn,{writable:!0,value:!0}),Object.defineProperty(this,xn,{writable:!0,value:0}),Object.defineProperty(this,wn,{writable:!0,value:function(){var e,t,i;null===(e=z(n,qt)[qt].stage)||void 0===e||e.addEventListener("mousedown",z(n,Cn)[Cn]),document.addEventListener("mousemove",z(n,Tn)[Tn]),document.addEventListener("mouseup",z(n,Ln)[Ln]),z(n,Xt)[Xt]=document.querySelector("#spline-hud"),z(n,Jt)[Jt]=null===(t=z(n,Xt)[Xt])||void 0===t?void 0:t.querySelector("[uid='primary-node-grippies']"),z(n,Zt)[Zt]=document.querySelector("[uid='secondary-node-grippies']"),z(n,Yt)[Yt]=document.querySelector("[uid='helper-lines']"),z(n,Qt)[Qt]=document.querySelector("#cubic-bezier-seg-hud"),z(n,Kt)[Kt]=z(n,Qt)[Qt].querySelector("[uid='container']"),z(n,$t)[$t]=null===(i=z(n,Qt)[Qt])||void 0===i?void 0:i.querySelector("[uid='outline']"),z(n,en)[en]=z(n,Qt)[Qt].querySelector("[uid='control-line-1']"),z(n,tn)[tn]=z(n,Qt)[Qt].querySelector("[uid='control-line-2']"),z(n,nn)[nn]=z(n,Qt)[Qt].querySelector("[uid='control-point-1-grippie']"),z(n,rn)[rn]=z(n,Qt)[Qt].querySelector("[uid='control-point-2-grippie']"),z(n,_n)[_n]()}}),Object.defineProperty(this,_n,{writable:!0,value:function(){var e;z(n,qt)[qt].watch(z(n,qt)[qt].actions().UPDATED,(function(e){z(n,bn)[bn]||e.forEach((function(e){z(n,Mn)[Mn](e),z(n,Sn)[Sn](e)}))})),null===(e=z(n,qt)[qt].history)||void 0===e||e.watch((function(e){var t;z(n,qt)[qt].currentType===z(n,qt)[qt].tools().SPLINE&&e!==(null===(t=z(n,qt)[qt].history)||void 0===t?void 0:t.actions().ADD)&&z(n,En)[En]()}))}}),Object.defineProperty(this,Mn,{writable:!0,value:function(e){}}),Object.defineProperty(this,Sn,{writable:!0,value:function(e){}}),Object.defineProperty(this,En,{writable:!0,value:function(){var e,t,i;z(n,Jt)[Jt].innerHTML="";var r=null===(e=z(n,qt)[qt].canvas)||void 0===e?void 0:e.getCTM(),a=document.createDocumentFragment();null===(t=z(n,qt)[qt].select)||void 0===t||t.checkedsPaths().forEach((function(e){var t=e.getAttribute("d").toLowerCase().includes("z"),i=e,o=i.getPathData(),s=e.getCTM(),l=s.a/r.a,c=s.d/r.d,u=(s.e-r.e)/r.a,d=(s.f-r.f)/r.d;o.forEach((function(e,r){if("z"!==e.type.toLowerCase()){var s="c"===e.type.toLowerCase()?e.values[4]:e.values[0],h="c"===e.type.toLowerCase()?e.values[5]:e.values[1],p=s+u-(1-l)*s,f=h+d-(1-c)*h,v="mid";t?r>0&&a.append(z(n,zn)[zn](p,f,v,i,r)):(v=0===r?"start":r===o.length-1?"end":"mid",a.append(z(n,zn)[zn](p,f,v,i,r)))}}))})),null===(i=z(n,Jt)[Jt])||void 0===i||i.append(a)}}),Object.defineProperty(this,Cn,{writable:!0,value:function(e){var t;if(0===e.button&&!z(n,bn)[bn]){e.stopPropagation(),z(n,fn)[fn]=void 0;var i=e.offsetX,r=e.offsetY,a=e.clientX,o=e.clientY,s=e.target;z(n,on)[on].has(s.parentNode)&&(z(n,fn)[fn]=s.parentNode);var l=null===(t=z(n,qt)[qt].canvas)||void 0===t?void 0:t.getCTM(),c=(i-l.e)/l.a,u=(r-l.f)/l.d;z(n,ln)[ln]=!0,z(n,vn)[vn]=c,z(n,mn)[mn]=u,z(n,gn)[gn]=a,z(n,yn)[yn]=o;var d=s.classList.contains("secondary-node-grippie")?z(n,fn)[fn]=s:void 0;0!==z(n,xn)[xn]||z(n,fn)[fn]?z(n,un)[un]||(d?z(n,Pn)[Pn](e,s):z(n,fn)[fn]&&z(n,An)[An](e,z(n,fn)[fn])):(z(n,dn)[dn]=c,z(n,hn)[hn]=u,z(n,kn)[kn](c,u),z(n,Dn)[Dn](c,u),z(n,un)[un]=!0,z(n,Kt)[Kt].style.visibility="visible",z(n,Yt)[Yt].innerHTML="",z(n,Zt)[Zt].innerHTML="")}}}),Object.defineProperty(this,Tn,{writable:!0,value:function(e){var t,i,r,a;if(z(n,un)[un]){var o=e.clientX,s=e.clientY,l=null===(t=z(n,qt)[qt].stage)||void 0===t?void 0:t.getBoundingClientRect(),c=l.left,u=l.top,d=null===(i=z(n,qt)[qt].svgRoot)||void 0===i?void 0:i.getMatrixIterator(),h=(o-c-d.e)/d.a,p=(s-u-d.f)/d.d,f=null===(r=z(n,nn)[nn])||void 0===r?void 0:r.getAttribute("cx"),v=null===(a=z(n,nn)[nn])||void 0===a?void 0:a.getAttribute("cy"),m=z(n,vn)[vn],g=z(n,mn)[mn],y=h-m,b=p-g,x=z(n,ln)[ln]?-y+m:h,w=z(n,ln)[ln]?-b+g:p,_=z(n,ln)[ln]?m:h,M=z(n,ln)[ln]?g:p;0===z(n,xn)[xn]?z(n,Nn)[Nn]("M ".concat(f," ").concat(v," L ").concat(h," ").concat(p)):(z(n,Nn)[Nn]("M ".concat(f," ").concat(v," C ").concat(f," ").concat(v," ").concat(x," ").concat(w," ").concat(_," ").concat(M)),z(n,jn)[jn](x,w,_,M),z(n,Dn)[Dn](x,w))}}}),Object.defineProperty(this,Ln,{writable:!0,value:function(){var e;if(z(n,ln)[ln]&&z(n,un)[un]){z(n,ln)[ln]=!1,z(n,xn)[xn]++;var t=document.elementFromPoint(z(n,gn)[gn],z(n,yn)[yn]),i=z(n,on)[on].has(null===t||void 0===t?void 0:t.parentNode)?null===t||void 0===t?void 0:t.parentNode:void 0,r=null===i||void 0===i?void 0:i.dataset.position,a=z(n,on)[on].get(z(n,pn)[pn]),o=a===z(n,on)[on].get(null===t||void 0===t?void 0:t.parentNode);if(("mid"===r||"end"===r)&&!z(n,cn)[cn]&&z(n,xn)[xn]>0)return console.log("click"),z(n,xn)[xn]=0,void z(n,Un)[Un]();if(2===z(n,xn)[xn]){var s,l,c,u,d,h;null===(s=z(n,qt)[qt].history)||void 0===s||s.add(z(n,qt)[qt].history.actions().ADD,"\u94a2\u7b14");var p=z(n,Fn)[Fn]("path");p.setAttribute("fill",z(n,qt)[qt].options.fill||"#d8d8d8"),p.setAttribute("stroke",z(n,qt)[qt].options.stroke||"#000000");var f=null===(l=z(n,$t)[$t])||void 0===l?void 0:l.getAttribute("d");p.setAttribute("d",f),null===(c=z(n,qt)[qt].svgRoot)||void 0===c||c.append(p),null===(u=z(n,qt)[qt].select)||void 0===u||u.set(p,{node:p});var v=z(n,zn)[zn](z(n,dn)[dn]||0,z(n,hn)[hn]||0,"start",p,0),m=z(n,zn)[zn](z(n,vn)[vn]||0,z(n,mn)[mn]||0,"end",p,1);null===(d=z(n,Jt)[Jt])||void 0===d||d.append(v),null===(h=z(n,Jt)[Jt])||void 0===h||h.append(m)}else if(z(n,xn)[xn]>2){var g,y,b,x;if("start"!==r)null===(x=z(n,qt)[qt].history)||void 0===x||x.add(z(n,qt)[qt].history.actions().EDIT,"\u94a2\u7b14");var w=a.getAttribute("d"),_=null===(g=z(n,$t)[$t])||void 0===g?void 0:g.getPathData()[1],M=Number(null===t||void 0===t?void 0:t.getAttribute("cx")),S=Number(null===t||void 0===t?void 0:t.getAttribute("cy")),E="start"===r&&o?M:z(n,vn)[vn],C="start"===r&&o?S:z(n,mn)[mn],T="start"===r&&o?"mid":"end",L="start"===r&&o?E:_.values[4],A="start"===r&&o?C:_.values[5];a.setAttribute("d","".concat(w," ").concat(_.type," ").concat(_.values[0]," ").concat(_.values[1]," ").concat(_.values[2]," ").concat(_.values[3]," ").concat(L," ").concat(A));var P=z(n,zn)[zn](E,C,T,a,z(n,xn)[xn]-1);null===(y=z(n,Jt)[Jt])||void 0===y||y.append(P);var O,R=null===(b=z(n,pn)[pn])||void 0===b?void 0:b.previousSibling;if("end"===R.dataset.position)null===R||void 0===R||R.setAttribute("data-position","mid"),null===R||void 0===R||null===(O=R.querySelector(".inner-circle"))||void 0===O||O.remove()}if(z(n,xn)[xn]>1&&z(n,kn)[kn](z(n,vn)[vn],z(n,mn)[mn]),"start"===r&&o){var N;null===(N=z(n,qt)[qt].history)||void 0===N||N.add(z(n,qt)[qt].history.actions().EDIT,"\u94a2\u7b14");var k=z(n,on)[on].get(i),D=k.getAttribute("d");k.setAttribute("d",D+" Z"),null===i||void 0===i||i.remove(),z(n,xn)[xn]=0,z(n,Un)[Un](),z(n,un)[un]=!1}null===(e=z(n,qt)[qt].history)||void 0===e||e.end()}}}),Object.defineProperty(this,An,{writable:!0,value:function(e,t){var i,r,a=new zt,o=t,s=o.querySelector(".outer-circle"),l=o.querySelector(".inner-circle"),c=0,u=0,d=z(n,on)[on].get(t),h=d.getPathData(),p=Number(o.getAttribute("index")),f=d.getAttribute("d"),v=f.toUpperCase().includes("Z"),m=h[0],g=h[1],y=h[p],b="Z"===(null===(i=h[p+1])||void 0===i?void 0:i.type.toUpperCase())?g:h[p+1],x=(v?h[h.length-2]:h[h.length-1],null===(r=z(n,qt)[qt].canvas)||void 0===r?void 0:r.getCTM()),w=d.getCTM(),_=w.a/x.a,M=w.d/x.d,S=(w.e-x.e)/x.a,E=(w.f-x.f)/x.d;a.install({element:o,start:function(){c=Number(null===s||void 0===s?void 0:s.getAttribute("cx")),u=Number(null===s||void 0===s?void 0:s.getAttribute("cy"))},move:function(e){var t=e.dataX,i=e.dataY;Math.abs(t)+Math.abs(i)>2&&(z(n,cn)[cn]=!0,z(n,Yt)[Yt].innerHTML="",z(n,Zt)[Zt].innerHTML="");var r=c+t/x.a,a=u+i/x.d;if(null===s||void 0===s||s.setAttribute("cx",r.toFixed(4)),null===s||void 0===s||s.setAttribute("cy",a.toFixed(4)),null===l||void 0===l||l.setAttribute("cx",r.toFixed(4)),null===l||void 0===l||l.setAttribute("cy",a.toFixed(4)),"C"===y.type){null===m||void 0===m||m.values[0],null===m||void 0===m||m.values[1];var h=null===b||void 0===b?void 0:b.values[0],p=null===b||void 0===b?void 0:b.values[1],v=y.values[2],w=y.values[3],C=y.values[4],T=y.values[5],L=v+t/x.a,A=w+i/x.d,P=C+t/x.a,O=T+i/x.d,R=h+t/x.a,N=p+i/x.d,k=v+S-(1-_)*v+t/x.a,D=w+E-(1-M)*w+i/x.d,I=h+S-(1-_)*h+t/x.a,j=p+E-(1-M)*p+i/x.d,B=z(n,Rn)[Rn](k,D,0);if(z(n,sn)[sn].set(B,{path:d,grippie:o}),"C"===(null===b||void 0===b?void 0:b.type)){z(n,On)[On](k,D,r,a,r,a,I,j);var F=z(n,Rn)[Rn](I,j,1);z(n,sn)[sn].set(F,{path:d,grippie:o});var U="".concat(v," ").concat(w," ").concat(C," ").concat(T),H="".concat(L," ").concat(A," ").concat(P," ").concat(O);d.setAttribute("d",f.replace(U,H).replace("".concat(h," ").concat(p),"".concat(R," ").concat(N)))}else{var G,V,W;console.log(b),console.log(m),z(n,On)[On](k,D,r,a);var q="".concat(v," ").concat(w," ").concat(C," ").concat(T),X="".concat(L," ").concat(A," ").concat(P," ").concat(O),Z="".concat(C," ").concat(T),Y=g.values[0],J=g.values[1],Q=(x.a,x.d,"".concat(Y," ").concat(J));new RegExp(Z+"(.*)"+Q+"(.*)"+q);null===(G=z(n,Zt)[Zt])||void 0===G||null===(V=G.querySelectorAll("circle"))||void 0===V||null===(W=V[1])||void 0===W||W.remove(),d.setAttribute("d",f.replace(q,X))}}else if("M"===y.type||"L"===y.type){var K=null===b||void 0===b?void 0:b.values[0],$=null===b||void 0===b?void 0:b.values[1],ee=y.values[0],te=y.values[1],ne=(null===b||void 0===b?void 0:b.values[0])+t/x.a,ie=(null===b||void 0===b?void 0:b.values[1])+i/x.d,re=y.values[0]+t/x.a,ae=y.values[1]+i/x.d,oe="".concat(ee," ").concat(te),se="".concat(re," ").concat(ae);d.setAttribute("d","C"===(null===b||void 0===b?void 0:b.type)?f.replace(oe,se).replace("".concat(K," ").concat($),"".concat(ne," ").concat(ie)):f.replace(oe,se))}z(n,qt)[qt].stage.style.cursor="auto"},end:function(){z(n,cn)[cn]=!1,null===a||void 0===a||a.uninstall(),z(n,qt)[qt].stage.style.cursor="crosshair"}}),null===a||void 0===a||a.mousedown(e)}}),Object.defineProperty(this,Pn,{writable:!0,value:function(e,t){var i,r,a=new zt,o=t,s=z(n,sn)[sn].get(t),l=s.path,c=s.grippie,u=null===(i=z(n,qt)[qt].canvas)||void 0===i?void 0:i.getCTM(),d=l.getAttribute("d"),h=null===(r=z(n,Yt)[Yt])||void 0===r?void 0:r.querySelector("polyline"),p=Number(c.getAttribute("index")),f=l.getPathData(),v=f[p],m=f[p+1],g=0,y=0;a.install({element:o,start:function(){g=Number(o.getAttribute("cx")),y=Number(o.getAttribute("cy"))},move:function(e){var t,i=e.dataX,r=e.dataY;z(n,qt)[qt].stage.style.cursor="auto";var a="0"===o.dataset.index?v.values[2]:m.values[0],s="0"===o.dataset.index?v.values[3]:m.values[1],c=(a+i/u.a).toString(),p=(s+r/u.d).toString(),f=(g+i/u.a).toString(),b=(y+r/u.d).toString();null===o||void 0===o||o.setAttribute("cx",f),null===o||void 0===o||o.setAttribute("cy",b);var x="0"===o.dataset.index?"".concat(v.values[2]," ").concat(v.values[3]):"".concat(m.values[0]," ").concat(m.values[1]),w="".concat(c," ").concat(p);l.setAttribute("d",d.replace(x,w));var _=null===(t=h.ownerSVGElement)||void 0===t?void 0:t.createSVGPoint();_.x=Number(f),_.y=Number(b);var M="0"===o.dataset.index?0:3;h.points.replaceItem(_,M)},end:function(){null===a||void 0===a||a.uninstall(),z(n,qt)[qt].stage.style.cursor="crosshair"}}),null===a||void 0===a||a.mousedown(e)}}),Object.defineProperty(this,On,{writable:!0,value:function(e,t,i,r,a,o,s,l){var c,u,d=document.querySelector(".helper-line");d||((d=z(n,Fn)[Fn]("polyline")).classList.add("helper-line"),null===(u=z(n,Yt)[Yt])||void 0===u||u.append(d));null===(c=d)||void 0===c||c.setAttribute("points","".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(a||""," ").concat(o||""," ").concat(s||""," ").concat(l||""))}}),Object.defineProperty(this,Rn,{writable:!0,value:function(e,t,i){var r,a,o,s=((z(n,qt)[qt].options.secondaryGgrippieSize||4)/z(n,qt)[qt].matrix.a).toFixed(4),l=null===(r=z(n,Zt)[Zt])||void 0===r||null===(a=r.querySelectorAll("circle"))||void 0===a?void 0:a[i];l||(l=z(n,Fn)[Fn]("circle"),null===(o=z(n,Zt)[Zt])||void 0===o||o.append(l),l.classList.add("secondary-node-grippie"));return l.setAttribute("cx",e.toString()),l.setAttribute("cy",t.toString()),l.setAttribute("r",s),l.setAttribute("data-index",i.toString()),l}}),Object.defineProperty(this,Nn,{writable:!0,value:function(e){var t;null===(t=z(n,$t)[$t])||void 0===t||t.setAttribute("d",e)}}),Object.defineProperty(this,kn,{writable:!0,value:function(e,t){var i,r,a,o=(z(n,qt)[qt].options.bezierControlSize||2.8)/z(n,qt)[qt].matrix.a;null===(i=z(n,nn)[nn])||void 0===i||i.setAttribute("cx",e.toFixed(9)),null===(r=z(n,nn)[nn])||void 0===r||r.setAttribute("cy",t.toFixed(9)),null===(a=z(n,nn)[nn])||void 0===a||a.setAttribute("r",o.toFixed(9)),z(n,Nn)[Nn]("M ".concat(e," ").concat(t))}}),Object.defineProperty(this,Dn,{writable:!0,value:function(e,t){var i,r,a,o=(z(n,qt)[qt].options.bezierControlSize||2.8)/z(n,qt)[qt].matrix.a;null===(i=z(n,rn)[rn])||void 0===i||i.setAttribute("cx",e.toFixed(9)),null===(r=z(n,rn)[rn])||void 0===r||r.setAttribute("cy",t.toFixed(9)),null===(a=z(n,rn)[rn])||void 0===a||a.setAttribute("r",o.toFixed(9))}}),Object.defineProperty(this,In,{writable:!0,value:function(e,t,i,r){var a,o,s,l;null===(a=z(n,en)[en])||void 0===a||a.setAttribute("x1",e.toFixed(9)),null===(o=z(n,en)[en])||void 0===o||o.setAttribute("y1",t.toFixed(9)),null===(s=z(n,en)[en])||void 0===s||s.setAttribute("x2",i.toFixed(9)),null===(l=z(n,en)[en])||void 0===l||l.setAttribute("y2",r.toFixed(9))}}),Object.defineProperty(this,jn,{writable:!0,value:function(e,t,i,r){var a,o,s,l;null===(a=z(n,tn)[tn])||void 0===a||a.setAttribute("x1",e.toFixed(9)),null===(o=z(n,tn)[tn])||void 0===o||o.setAttribute("y1",t.toFixed(9)),null===(s=z(n,tn)[tn])||void 0===s||s.setAttribute("x2",i.toFixed(9)),null===(l=z(n,tn)[tn])||void 0===l||l.setAttribute("y2",r.toFixed(9))}}),Object.defineProperty(this,zn,{writable:!0,value:function(e,t,i,r,a){var o=z(n,Fn)[Fn]("g");o.classList.add("primary-node-grippie"),null===o||void 0===o||o.setAttribute("data-position",i);var s=z(n,Fn)[Fn]("circle");s.classList.add("outer-circle");var l=z(n,qt)[qt].matrix.a,c=(z(n,qt)[qt].options.outerCircleSize||5)/l,u=(z(n,qt)[qt].options.innerCircleSize||1.5)/l;if(s.setAttribute("cx",e.toFixed(9)),s.setAttribute("cy",t.toFixed(9)),s.setAttribute("r",c.toFixed(9)),o.append(s),"mid"!==i){var d=z(n,Fn)[Fn]("circle");d.classList.add("inner-circle"),d.setAttribute("cx",e.toFixed(9)),d.setAttribute("cy",t.toFixed(9)),d.setAttribute("r",u.toFixed(9)),o.append(d)}o.setAttribute("index",a.toString()),z(n,on)[on].set(o,r);var h=z(n,an)[an].get(r)||[];return z(n,an)[an].set(r,[].concat(H(h),[o])),z(n,pn)[pn]=o,o}}),Object.defineProperty(this,Bn,{writable:!0,value:function(){document.querySelectorAll("[data-selected]").forEach((function(e){e.removeAttribute("data-selected")}))}}),Object.defineProperty(this,Un,{writable:!0,value:function(){z(n,Kt)[Kt].style.visibility="hidden",z(n,kn)[kn](0,0),z(n,Dn)[Dn](0,0),z(n,In)[In](0,0,0,0),z(n,jn)[jn](0,0,0,0)}}),Object.defineProperty(this,Hn,{writable:!0,value:function(){z(n,Un)[Un](),z(n,Jt)[Jt].innerHTML="",z(n,Yt)[Yt].innerHTML="",z(n,Zt)[Zt].innerHTML="",z(n,an)[an].clear(),z(n,un)[un]=!1,z(n,vn)[vn]=0,z(n,mn)[mn]=0,z(n,dn)[dn]=0,z(n,hn)[hn]=0,z(n,xn)[xn]=0}}),this.disabled=function(e){z(n,bn)[bn]=e,e?z(n,Hn)[Hn]():z(n,En)[En]()},this.uninstall=function(){var e;null===(e=z(n,qt)[qt].stage)||void 0===e||e.removeEventListener("mousedown",z(n,Cn)[Cn]),document.removeEventListener("mousemove",z(n,Tn)[Tn]),document.removeEventListener("mouseup",z(n,Ln)[Ln]),z(n,Hn)[Hn]()},!t)throw new Error("stage not found!");z(this,qt)[qt]=t,z(this,wn)[wn]()}));function Vn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}var Wn=Gn,qn=F("stage"),Xn=F("freehandLine"),Zn=F("isDrawing"),Yn=F("isMoveing"),Jn=F("point"),Qn=F("splineHud"),Kn=F("grippiesGroup"),$n=F("pathPoint"),ei=F("freeHand"),ti=F("sTarget"),ni=F("eTarget"),ii=F("startX"),ri=F("startY"),ai=F("shiftKey"),oi=F("isDisabled"),si=F("install"),li=F("watch"),ci=F("addNodes"),ui=F("removeNodes"),di=F("initGrippies"),hi=F("createGrippies"),pi=F("mousedown"),fi=F("mousemove"),vi=F("mouseup"),mi=F("convert2Path"),gi=F("l2c"),yi=F("smoothControlPoints"),bi=F("reset"),xi=F("clearPoints"),wi=F("clearGrippies"),_i=F("createSvgNode"),Mi=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,_i,{value:Li}),Object.defineProperty(this,yi,{value:Ti}),Object.defineProperty(this,hi,{value:Ci}),Object.defineProperty(this,di,{value:Ei}),Object.defineProperty(this,si,{value:Si}),Object.defineProperty(this,qn,{writable:!0,value:void 0}),Object.defineProperty(this,Xn,{writable:!0,value:void 0}),Object.defineProperty(this,Zn,{writable:!0,value:!1}),Object.defineProperty(this,Yn,{writable:!0,value:!1}),Object.defineProperty(this,Jn,{writable:!0,value:void 0}),Object.defineProperty(this,Qn,{writable:!0,value:void 0}),Object.defineProperty(this,Kn,{writable:!0,value:void 0}),Object.defineProperty(this,$n,{writable:!0,value:new Map}),Object.defineProperty(this,ei,{writable:!0,value:new Map}),Object.defineProperty(this,ti,{writable:!0,value:void 0}),Object.defineProperty(this,ni,{writable:!0,value:void 0}),Object.defineProperty(this,ii,{writable:!0,value:0}),Object.defineProperty(this,ri,{writable:!0,value:0}),Object.defineProperty(this,ai,{writable:!0,value:!1}),Object.defineProperty(this,oi,{writable:!0,value:!0}),Object.defineProperty(this,li,{writable:!0,value:function(){var e;z(n,qn)[qn].watch(z(n,qn)[qn].actions().UPDATED,(function(e){z(n,oi)[oi]||e.forEach((function(e){z(n,ci)[ci](e),z(n,ui)[ui](e)}))})),null===(e=z(n,qn)[qn].history)||void 0===e||e.watch((function(e){var t;z(n,qn)[qn].currentType===z(n,qn)[qn].tools().FREEHAND&&e!==(null===(t=z(n,qn)[qn].history)||void 0===t?void 0:t.actions().ADD)&&(z(n,bi)[bi](),z(n,xi)[xi](),z(n,wi)[wi](),z(n,di)[di]())}))}}),Object.defineProperty(this,ci,{writable:!0,value:function(e){e.addedNodes.forEach((function(e){var t=e;z(n,di)[di](t)}))}}),Object.defineProperty(this,ui,{writable:!0,value:function(e){e.removedNodes.forEach((function(e){var t,i;null===(t=z(n,ei)[ei])||void 0===t||null===(i=t.get(e))||void 0===i||i.forEach((function(e){e.remove()}))}))}}),Object.defineProperty(this,pi,{writable:!0,value:function(e){var t;if(0===e.button&&!z(n,oi)[oi]){z(n,Zn)[Zn]=!0;var i=e.clientX,r=e.clientY,a=e.target;null!==(t=z(n,Kn)[Kn])&&void 0!==t&&t.contains(a)&&(z(n,ti)[ti]=a),z(n,ii)[ii]=i,z(n,ri)[ri]=r}}}),Object.defineProperty(this,fi,{writable:!0,value:function(e){var t,i;if(z(n,Zn)[Zn]){var r=e.clientX,a=e.clientY,o=e.shiftKey;o&&(z(n,ai)[ai]=o),Math.abs(z(n,ii)[ii]-r)+Math.abs(z(n,ri)[ri]-a)>4&&(z(n,Yn)[Yn]=!0);var s=z(n,Xn)[Xn];z(n,Jn)[Jn]=s.ownerSVGElement.createSVGPoint();var l=null===(t=z(n,qn)[qn].stage)||void 0===t?void 0:t.getBoundingClientRect(),c=l.x,u=l.y,d=null===(i=z(n,qn)[qn].canvas)||void 0===i?void 0:i.getMatrix(),h=d.sx,p=d.sy,f=d.e,v=d.f;if(z(n,Jn)[Jn].x=(r-c-f)/h,z(n,Jn)[Jn].y=(a-u-v)/p,z(n,ai)[ai]){var m,g,y,b,x,w=s.ownerSVGElement.createSVGPoint();if(w.x=(z(n,ii)[ii]-c-f)/h,w.y=(z(n,ri)[ri]-u-v)/p,z(n,Xn)[Xn]&&(null===(m=z(n,Xn)[Xn])||void 0===m?void 0:m.points.length)>1)z(n,xi)[xi](),null===(g=z(n,Xn)[Xn])||void 0===g||g.points.appendItem(w),null===(y=z(n,Xn)[Xn])||void 0===y||y.points.appendItem(z(n,Jn)[Jn]);else null===(b=z(n,Xn)[Xn])||void 0===b||b.points.appendItem(w),null===(x=z(n,Xn)[Xn])||void 0===x||x.points.appendItem(z(n,Jn)[Jn])}else{var _;null===(_=z(n,Xn)[Xn])||void 0===_||_.points.appendItem(z(n,Jn)[Jn])}}}}),Object.defineProperty(this,vi,{writable:!0,value:function(e){var t,i,r,a,o;if(z(n,Zn)[Zn]){if(z(n,Zn)[Zn]=!1,!z(n,Yn)[Yn])return z(n,ai)[ai]=!1,z(n,xi)[xi](),z(n,ti)[ti]=void 0,z(n,ni)[ni]=void 0,void(z(n,Yn)[Yn]=!1);z(n,Yn)[Yn]=!1;var s=null===(t=z(n,qn)[qn].canvas)||void 0===t?void 0:t.getCTM(),l=null===(i=z(n,Xn)[Xn])||void 0===i?void 0:i.getPathData(),c=e.target,u=null===(r=z(n,qn)[qn].stage)||void 0===r?void 0:r.getBoundingClientRect(),d=u.x,h=u.y,p=null===(a=z(n,qn)[qn].canvas)||void 0===a?void 0:a.getMatrix(),f=p.sx,v=p.sy,m=p.e,g=p.f,y=(e.clientX-d-m)/f,b=(e.clientY-h-g)/v;if(null!==(o=z(n,Kn)[Kn])&&void 0!==o&&o.contains(c)&&(z(n,ni)[ni]=c),z(n,ti)[ti]||z(n,ni)[ni]){var x,w,_,M,S,E,C,T;null===(x=z(n,qn)[qn].history)||void 0===x||x.add(z(n,qn)[qn].history.actions().EDIT,"\u624b\u7ed8");var L=z(n,$n)[$n].get(null===(w=z(n,ti)[ti])||void 0===w?void 0:w.parentNode),A=z(n,$n)[$n].get(null===(_=z(n,ni)[ni])||void 0===_?void 0:_.parentNode),P=null===(M=z(n,ti)[ti])||void 0===M||null===(S=M.parentElement)||void 0===S?void 0:S.dataset.position,O=null===(E=z(n,ni)[ni])||void 0===E||null===(C=E.parentElement)||void 0===C?void 0:C.dataset.position;if(L===A){var R,N,k,D;z(n,ai)[ai]&&"start"===O&&l.pop();var I=L.getAttribute("d"),j="",B=L.getCTM();"start"===P?z(n,ai)[ai]||(l.reverse(),l.pop(),j+=z(n,gi)[gi](l,B,s)):z(n,ai)[ai]||(l.shift(),I+=z(n,gi)[gi](l,B,s)),L.setAttribute("d",I+" "+j+"Z"),null===(R=z(n,ti)[ti])||void 0===R||null===(N=R.parentElement)||void 0===N||N.remove(),null===(k=z(n,ni)[ni])||void 0===k||null===(D=k.parentElement)||void 0===D||D.remove()}else if(L&&A){var F="",U=L.getPathData(),H=A.getPathData(),G=L.getCTM();if("start"===P&&"end"===O)U.reverse().forEach((function(e,t){var n=e.type,i=e.values;if("C"===n){0===t&&(F+="M ".concat(i[4]," ").concat(i[5]));var r=null===U||void 0===U?void 0:U[t+1],a=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?4:0],o=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?5:1];F+="C ".concat(i[2]," ").concat(i[3]," ").concat(i[0]," ").concat(i[1]," ").concat(a," ").concat(o)}else 0===t&&(F+="M ".concat(i[0]," ").concat(i[1])),F+="L ".concat(i[0]," ").concat(i[1])})),F+=z(n,gi)[gi](l,G,s),H.reverse().forEach((function(e,t){var n=e.type,i=e.values;if("C"===n){var r=null===H||void 0===H?void 0:H[t+1],a=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?4:0],o=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?5:1];F+="C ".concat(i[2]," ").concat(i[3]," ").concat(i[0]," ").concat(i[1]," ").concat(a," ").concat(o)}else F+="L ".concat(i[0]," ").concat(i[1])}));else if("start"===P&&"start"===O)U.reverse().forEach((function(e,t){var n=e.type,i=e.values;if("C"===n){0===t&&(F+="M ".concat(i[4]," ").concat(i[5]));var r=null===U||void 0===U?void 0:U[t+1],a=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?4:0],o=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?5:1];F+="C ".concat(i[2]," ").concat(i[3]," ").concat(i[0]," ").concat(i[1]," ").concat(a," ").concat(o)}else 0===t&&(F+="M ".concat(i[0]," ").concat(i[1])),F+="L ".concat(i[0]," ").concat(i[1])})),F+=z(n,gi)[gi](l,G,s),F+=A.getAttribute("d").replace("M","L");else if("end"===P&&"end"===O)F=L.getAttribute("d"),F+=z(n,gi)[gi](l,G,s),H.reverse().forEach((function(e,t){var n=e.type,i=e.values;if("C"===n){var r=null===H||void 0===H?void 0:H[t+1],a=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?4:0],o=null===r||void 0===r?void 0:r.values["C"===(null===r||void 0===r?void 0:r.type)?5:1];F+="C ".concat(i[2]," ").concat(i[3]," ").concat(i[0]," ").concat(i[1]," ").concat(a," ").concat(o)}else F+="L ".concat(i[0]," ").concat(i[1])}));else if("end"===P&&"start"===O){F=L.getAttribute("d"),F+=z(n,gi)[gi](l,G,s),A.getPathData().forEach((function(e){var t=e.type,n=e.values;F+="C"===t?"C ".concat(n[0]," ").concat(n[1]," ").concat(n[2]," ").concat(n[3]," ").concat(n[4]," ").concat(n[5]):"L ".concat(n[0]," ").concat(n[1])}))}A.remove(),L.setAttribute("d",F)}else if(!L||!A)if("start"===P||"start"===O){var V,W,q="start"===P,X=L||A,Z=X.getCTM(),Y=Z.a/s.a,J=Z.d/s.d,Q=X.getAttribute("d");Q=Q.replace("M","L");var K="";q&&l.reverse();var $=l[0].values[0],ee=l[0].values[1],te=(Z.e-s.e)/s.a,ne=(Z.f-s.f)/s.d;K+="M ".concat(($-te)/Y," ").concat((ee-ne)/J," "),z(n,ai)[ai]?(l.pop(),K+=z(n,mi)[mi](l,Z,s)):K+=z(n,gi)[gi](l,Z,s),X.setAttribute("d",K+" "+Q);var ie=(null===(V=z(n,ti)[ti])||void 0===V?void 0:V.parentNode)||(null===(W=z(n,ni)[ni])||void 0===W?void 0:W.parentNode),re=l[0].values[0].toFixed(9),ae=l[0].values[1].toFixed(9);null===ie||void 0===ie||ie.childNodes.forEach((function(e){if(3!==e.nodeType){var t=e;null===t||void 0===t||t.setAttribute("cx",q?y.toFixed(9):re),null===t||void 0===t||t.setAttribute("cy",q?b.toFixed(9):ae)}}))}else if("end"===P||"end"===O){var oe,se,le="end"===P,ce=L||A,ue=ce.getAttribute("d"),de=ce.getCTM();if(le||l.reverse(),z(n,ai)[ai]){var he,pe,fe=null===ce||void 0===ce?void 0:ce.getPathData(),ve="C"===(null===(he=fe[fe.length-1])||void 0===he||null===(pe=he.type)||void 0===pe?void 0:pe.toUpperCase());l[0].values[0]=fe[fe.length-1].values[ve?4:0],l[0].values[1]=fe[fe.length-1].values[ve?5:1],ue+=z(n,mi)[mi](l,de,s)}else ue+=z(n,gi)[gi](l,de,s);ce.setAttribute("d",ue);var me=l[l.length-1].values[0].toFixed(9),ge=l[l.length-1].values[1].toFixed(9),ye=(null===(oe=z(n,ti)[ti])||void 0===oe?void 0:oe.parentNode)||(null===(se=z(n,ni)[ni])||void 0===se?void 0:se.parentNode);null===ye||void 0===ye||ye.childNodes.forEach((function(e){if(3!==e.nodeType){var t=e;null===t||void 0===t||t.setAttribute("cx",le?y.toFixed(9):me),null===t||void 0===t||t.setAttribute("cy",le?b.toFixed(9):ge)}}))}null===(T=z(n,qn)[qn].history)||void 0===T||T.end()}else{var be,xe,we,_e,Me="";if(z(n,ai)[ai])for(var Se=0;Se<l.length;Se++)Me+="".concat(0===Se?"M":"L"," ").concat(l[Se].values[0]," ").concat(l[Se].values[1]," ");else{var Ee=l[0].values[0],Ce=l[0].values[1];Me+="M ".concat(Ee," ").concat(Ce," "),Me+=z(n,gi)[gi](l,{a:1,b:0,c:0,d:1,e:0,f:0},{a:1,b:0,c:0,d:1,e:0,f:0})}null===(be=z(n,qn)[qn].history)||void 0===be||be.add(z(n,qn)[qn].history.actions().ADD,"\u624b\u7ed8");var Te=z(n,_i)[_i]("path");Te.setAttribute("d",Me),Te.setAttribute("fill",z(n,qn)[qn].options.fill||"#d8d8d8"),Te.setAttribute("stroke",z(n,qn)[qn].options.stroke||"#000000"),null===(xe=z(n,qn)[qn].svgRoot)||void 0===xe||xe.append(Te),null===(we=z(n,qn)[qn].select)||void 0===we||we.set(Te,{node:Te}),null===(_e=z(n,qn)[qn].select)||void 0===_e||_e.autoResetBoxSelect(!0)}z(n,ai)[ai]=!1,z(n,xi)[xi](),z(n,ti)[ti]=void 0,z(n,ni)[ni]=void 0}}}),Object.defineProperty(this,mi,{writable:!0,value:function(e,t,n){var i="",r=t.a/n.a,a=t.d/n.d,o=(t.e-n.e)/n.a,s=(t.f-n.f)/n.d;return e.forEach((function(e){var t=(e.values[0]-o)/r,n=(e.values[1]-s)/a;i+="L ".concat(t,"  ").concat(n," ")})),i}}),Object.defineProperty(this,gi,{writable:!0,value:function(e,t,i){for(var r="",a={x:e[0].values[0],y:e[0].values[1]},o=a,s=t.a/i.a,l=t.d/i.d,c=(t.e-i.e)/i.a,u=(t.f-i.f)/i.d,d=1;d<=e.length-2;d++){var h=e[d],p={x:h.values[0],y:h.values[1]},f={x:e[d+1].values[0],y:e[d+1].values[1]},v=z(n,yi)[yi](a,p,f),m=v[0],g=(o.x-c)/s,y=(o.y-u)/l,b=(m.x-c)/s,x=(m.y-u)/l,w=(p.x-c)/s,_=(p.y-u)/l;r+="C ".concat(g," ").concat(y," ").concat(b," ").concat(x," ").concat(w," ").concat(_," "),o=v[1],a=p}return r}}),Object.defineProperty(this,bi,{writable:!0,value:function(){z(n,$n)[$n].clear(),z(n,ei)[ei].clear()}}),Object.defineProperty(this,xi,{writable:!0,value:function(){var e;null===(e=z(n,Xn)[Xn])||void 0===e||e.points.clear()}}),Object.defineProperty(this,wi,{writable:!0,value:function(){z(n,Kn)[Kn]&&(z(n,Kn)[Kn].innerHTML="")}}),this.disabled=function(e){z(n,oi)[oi]=e,e?(z(n,bi)[bi](),z(n,xi)[xi](),z(n,wi)[wi]()):z(n,di)[di]()},!t)throw new Error("stage not found!");z(this,qn)[qn]=t,z(this,si)[si]()}));function Si(){var e,t;null===(e=z(this,qn)[qn].stage)||void 0===e||e.addEventListener("mousedown",z(this,pi)[pi]),document.addEventListener("mousemove",z(this,fi)[fi]),document.addEventListener("mouseup",z(this,vi)[vi]),z(this,Qn)[Qn]=document.querySelector("#spline-hud"),z(this,Kn)[Kn]=null===(t=z(this,Qn)[Qn])||void 0===t?void 0:t.querySelector("[uid='primary-node-grippies']"),z(this,Xn)[Xn]=document.querySelector("#freehand-hud polyline"),z(this,li)[li]()}function Ei(e){var t,n,i,r=this,a=null===(t=z(this,qn)[qn].canvas)||void 0===t?void 0:t.getCTM(),o=document.createDocumentFragment();null===(n=z(this,qn)[qn].select)||void 0===n||n.checkedsPaths().forEach((function(t){if((!e||e===t)&&!t.getAttribute("d").toUpperCase().includes("Z")){var n=t,i=n.getPathData(),s=i[0].values[0],l=i[0].values[1],c=i[i.length-1],u=0,d=0;switch(c.type.toUpperCase()){case"L":u=c.values[0],d=c.values[1];break;case"C":u=c.values[4],d=c.values[5]}var h=t.getCTM(),p=h.a/a.a,f=h.d/a.d,v=(1-p)*s,m=(1-f)*l,g=(1-p)*u,y=(1-f)*d,b=(h.e-a.e)/a.a,x=(h.f-a.f)/a.d,w=s+b-v,_=l+x-m,M=u+b-g,S=d+x-y,E=z(r,hi)[hi](w,_,"start",n),C=z(r,hi)[hi](M,S,"end",n);o.append(E),o.append(C),z(r,ei)[ei].set(n,[E,C])}})),null===(i=z(this,Kn)[Kn])||void 0===i||i.append(o)}function Ci(e,t,n,i){var r=z(this,_i)[_i]("g");r.classList.add("primary-node-grippie"),r.setAttribute("data-position",n);var a=z(this,_i)[_i]("circle");a.classList.add("outer-circle");var o=z(this,_i)[_i]("circle");o.classList.add("inner-circle"),a.setAttribute("cx",e.toFixed(9)),a.setAttribute("cy",t.toFixed(9)),o.setAttribute("cx",e.toFixed(9)),o.setAttribute("cy",t.toFixed(9));var s=z(this,qn)[qn].matrix.a,l=(z(this,qn)[qn].options.outerCircleSize||5)/s,c=(z(this,qn)[qn].options.innerCircleSize||1.5)/s;return a.setAttribute("r",l.toFixed(9)),o.setAttribute("r",c.toFixed(9)),r.append(a),r.append(o),z(this,$n)[$n].set(r,i),r}function Ti(e,t,n){var i=e.x-t.x,r=e.y-t.y,a=n.x-t.x,o=n.y-t.y,s=Math.atan2(r,i),l=Math.atan2(o,a),c=Math.sqrt(i*i+r*r),u=Math.sqrt(a*a+o*o),d={x:0,y:0},h={x:0,y:0};s<0&&(s+=2*Math.PI),l<0&&(l+=2*Math.PI);var p,f,v=Math.abs(s-l),m=Math.abs(Math.PI-v)/2;return s-l>0?(p=v<Math.PI?s+m:s-m,f=v<Math.PI?l-m:l+m):(p=v<Math.PI?s-m:s+m,f=v<Math.PI?l+m:l-m),d.x=c*Math.cos(p)/3+t.x,d.y=c*Math.sin(p)/3+t.y,h.x=u*Math.cos(f)/3+t.x,h.y=u*Math.sin(f)/3+t.y,[d,h]}function Li(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}var Ai=Mi,Pi=F("stage"),Oi=F("isDraging"),Ri=F("viewHud"),Ni=F("subhuds"),ki=F("view"),Di=F("viewObserver"),Ii=F("cacheX"),ji=F("cacheY"),zi=F("cacheWidth"),Bi=F("cacheHeight"),Fi=F("draggable"),Ui=F("isDisabled"),Hi=F("callback"),Gi=F("install"),Vi=F("scaleWatch"),Wi=F("initEvent"),qi=F("listenViewResize"),Xi=F("adjustViewGrippie"),Zi=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Gi,{value:Yi}),Object.defineProperty(this,Pi,{writable:!0,value:void 0}),Object.defineProperty(this,Oi,{writable:!0,value:!1}),Object.defineProperty(this,Ri,{writable:!0,value:void 0}),Object.defineProperty(this,Ni,{writable:!0,value:void 0}),Object.defineProperty(this,ki,{writable:!0,value:void 0}),Object.defineProperty(this,Di,{writable:!0,value:void 0}),Object.defineProperty(this,Ii,{writable:!0,value:0}),Object.defineProperty(this,ji,{writable:!0,value:0}),Object.defineProperty(this,zi,{writable:!0,value:0}),Object.defineProperty(this,Bi,{writable:!0,value:0}),Object.defineProperty(this,Fi,{writable:!0,value:void 0}),Object.defineProperty(this,Ui,{writable:!0,value:!1}),Object.defineProperty(this,Hi,{writable:!0,value:void 0}),Object.defineProperty(this,Vi,{writable:!0,value:function(){z(n,Xi)[Xi]()}}),Object.defineProperty(this,Wi,{writable:!0,value:function(){var e;null===(e=z(n,Ni)[Ni])||void 0===e||e.childNodes.forEach((function(e){var t;if(3!==e.nodeType){var i=e;z(n,Fi)[Fi]=new zt,null===(t=z(n,Fi)[Fi])||void 0===t||t.install({element:i,start:function(){var e,t,r,a;z(n,Oi)[Oi]=!0;var o=i.getMatrix(),s=o.e,l=o.f;i.setAttribute("e",s),i.setAttribute("f",l),z(n,zi)[zi]=Number(null===(e=z(n,ki)[ki])||void 0===e?void 0:e.getAttribute("width")),z(n,Bi)[Bi]=Number(null===(t=z(n,ki)[ki])||void 0===t?void 0:t.getAttribute("height")),z(n,Ii)[Ii]=Number(null===(r=z(n,ki)[ki])||void 0===r?void 0:r.getAttribute("x")),z(n,ji)[ji]=Number(null===(a=z(n,ki)[ki])||void 0===a?void 0:a.getAttribute("y"))},move:function(e){var t,r,a,o,s,l,c,u,d,h,p,f;if(z(n,Oi)[Oi]){var v=i.getAttribute("data-position"),m=e.dataX/z(n,Pi)[Pi].matrix.a,g=e.dataY/z(n,Pi)[Pi].matrix.d;switch(v){case"top-left":null===(t=z(n,ki)[ki])||void 0===t||t.setAttribute("x",(z(n,Ii)[Ii]+m).toFixed(9)),null===(r=z(n,ki)[ki])||void 0===r||r.setAttribute("width",(z(n,zi)[zi]-m).toFixed(9)),null===(a=z(n,ki)[ki])||void 0===a||a.setAttribute("y",(z(n,ji)[ji]+g).toFixed(9)),null===(o=z(n,ki)[ki])||void 0===o||o.setAttribute("height",(z(n,Bi)[Bi]-g).toFixed(9));break;case"top-right":null===(s=z(n,ki)[ki])||void 0===s||s.setAttribute("width",(z(n,zi)[zi]+m).toFixed(9)),null===(l=z(n,ki)[ki])||void 0===l||l.setAttribute("y",(z(n,ji)[ji]+g).toFixed(9)),null===(c=z(n,ki)[ki])||void 0===c||c.setAttribute("height",(z(n,Bi)[Bi]-g).toFixed(9));break;case"bottom-left":null===(u=z(n,ki)[ki])||void 0===u||u.setAttribute("x",(z(n,Ii)[Ii]+m).toFixed(9)),null===(d=z(n,ki)[ki])||void 0===d||d.setAttribute("width",(z(n,zi)[zi]-m).toFixed(9)),null===(h=z(n,ki)[ki])||void 0===h||h.setAttribute("height",(z(n,Bi)[Bi]+g).toFixed(9));break;case"bottom-right":null===(p=z(n,ki)[ki])||void 0===p||p.setAttribute("width",(z(n,zi)[zi]+m).toFixed(9)),null===(f=z(n,ki)[ki])||void 0===f||f.setAttribute("height",(z(n,Bi)[Bi]+g).toFixed(9))}}},end:function(){z(n,Oi)[Oi]&&(z(n,Oi)[Oi]=!1)}})}}))}}),this.watch=function(e){z(n,Hi)[Hi]=e},Object.defineProperty(this,qi,{writable:!0,value:function(){z(n,Di)[Di]=new MutationObserver((function(){var e,t;z(n,Xi)[Xi](),null===(e=(t=z(n,Hi))[Hi])||void 0===e||e.call(t)})),z(n,ki)[ki]&&z(n,Di)[Di].observe(z(n,ki)[ki],{attributes:!0,attributeFilter:["x","y","width","height"]})}}),Object.defineProperty(this,Xi,{writable:!0,value:function(){var e,t,i;if(!z(n,Ui)[Ui]){var r=null===(e=z(n,ki)[ki])||void 0===e?void 0:e.getBoundingClientRect(),a=r.x,o=r.y,s=r.right,l=r.bottom,c=null===(t=z(n,Pi)[Pi].stage)||void 0===t?void 0:t.getBoundingClientRect(),u=c.left,d=c.top,h=z(n,Pi)[Pi].matrix,p=h.a,f=h.d,v=h.e,m=h.f,g=15;null===(i=z(n,Ni)[Ni])||void 0===i||i.childNodes.forEach((function(e){if(3!==e.nodeType){var t=e,n=t.getAttribute("data-position"),i=0,r=0,c=1/p,h=1/f;switch(n){case"top-left":i=(a-u-v)/p-c*g,r=(o-d-m)/f-h*g;break;case"top-right":i=(s-u-v)/p-c*g,r=(o-d-m)/f-h*g;break;case"bottom-left":i=(a-u-v)/p-c*g,r=(l-d-m)/f-h*g;break;case"bottom-right":i=(s-u-v)/p-c*g,r=(l-d-m)/f-h*g}t.setAttribute("transform","matrix(".concat(c,",0,0,").concat(h,",").concat(i,",").concat(r,")"))}}))}}}),this.disabled=function(e){z(n,Ui)[Ui]=e,z(n,Ri)[Ri]&&(z(n,Ri)[Ri].setAttribute("style","visibility : ".concat(e?"hidden":"visible")),z(n,Xi)[Xi]())},this.uninstall=function(){var e,t;z(n,Pi)[Pi].removeWatch(z(n,Pi)[Pi].actions().SCALE,z(n,Vi)[Vi]),null===(e=z(n,Fi)[Fi])||void 0===e||e.uninstall(),null===(t=z(n,Di)[Di])||void 0===t||t.disconnect()},!t)throw new Error("stage not found!");z(this,Pi)[Pi]=t,z(this,Gi)[Gi](),z(this,Xi)[Xi](),z(this,qi)[qi]()}));function Yi(){var e;z(this,Ri)[Ri]=document.querySelector("#view-hud"),z(this,Ni)[Ni]=null===(e=z(this,Ri)[Ri])||void 0===e?void 0:e.querySelector("[uid='subhuds']"),z(this,ki)[ki]=document.querySelector("#background-outlines rect"),z(this,Wi)[Wi](),z(this,Pi)[Pi].watch(z(this,Pi)[Pi].actions().SCALE,z(this,Vi)[Vi])}var Ji=Zi,Qi=F("stage"),Ki=F("outline"),$i=F("install"),er=F("mousemove"),tr=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Qi,{writable:!0,value:void 0}),Object.defineProperty(this,Ki,{writable:!0,value:void 0}),Object.defineProperty(this,$i,{writable:!0,value:function(){var e;z(n,Ki)[Ki]=document.querySelector("#outline-hud [uid='outline']"),null===(e=z(n,Qi)[Qi].stage)||void 0===e||e.addEventListener("mousemove",z(n,er)[er])}}),Object.defineProperty(this,er,{writable:!0,value:function(e){var t,i,r;if(!(null!==(t=z(n,Qi)[Qi].select)&&void 0!==t&&t.isDragging()||null!==(i=z(n,Qi)[Qi].resize)&&void 0!==i&&i.isResizing())){var a;if(z(n,Qi)[Qi].currentType===z(n,Qi)[Qi].tools().SELECT)for(var o,s,l=e.path||e.composedPath(),c=null===(o=z(n,Qi)[Qi].layer)||void 0===o||null===(s=o.children)||void 0===s?void 0:s.length,u=0;u<c;u++)for(var d=l.length,h=0;h<d;h++){var p;l[h]===(null===(p=z(n,Qi)[Qi].layer)||void 0===p?void 0:p.children[u])&&(a=l[h])}else if(z(n,Qi)[Qi].currentType===z(n,Qi)[Qi].tools().ASELECT&&"g"!==(null===(r=e.target)||void 0===r?void 0:r.localName)||z(n,Qi)[Qi].currentType===z(n,Qi)[Qi].tools().TEXT){var f;"text"!==(null===(f=a=e.target)||void 0===f?void 0:f.localName)&&z(n,Qi)[Qi].currentType===z(n,Qi)[Qi].tools().TEXT&&(a=null)}if(a instanceof SVGElement){var v,m;if("none"===window.getComputedStyle(a).pointerEvents)return;if(null!==(v=z(n,Qi)[Qi].select)&&void 0!==v&&v.has(a))return;if(null===(m=z(n,Qi)[Qi].svgRoot)||void 0===m||!m.contains(a))return;n.highLight(a)}}}}),this.highLight=function(e){var t,i,r,a;if(e){var o="",s=e.getBBox(),l=s.x,c=s.y,u=s.width,d=s.height;switch(null===(t=z(n,Ki)[Ki])||void 0===t||t.removeAttribute("transform"),e.localName){case"path":o=e.getAttribute("d");break;case"ellipse":case"circle":var h=l+u/2,p=c+d/2,f=u/2,v=d/2;o="M ".concat(h-f," ").concat(p,"\n             A ").concat(f," ").concat(v," 0 0 1 ").concat(h+f," ").concat(p,"\n             A ").concat(f," ").concat(v," 0 0 1 ").concat(h," ").concat(p+v,"\n             A ").concat(f," ").concat(v," 0 0 1 ").concat(h-f," ").concat(p,"\n         Z");break;case"line":var m=e.getAttribute("x1"),g=e.getAttribute("y1"),y=e.getAttribute("x2"),b=e.getAttribute("y2");o="M ".concat(m," ").concat(g," L ").concat(y," ").concat(b," Z");break;case"polyline":case"polygon":for(var x=0;x<e.points.numberOfItems;x+=1){var w=e.points.getItem(x);o+="".concat(0===x?"M":"L"," ").concat(w.x," ").concat(w.y," ")}o+="Z";break;default:o="M ".concat(l," ").concat(c,"\n            H ").concat(l+u," V ").concat(c+d,"\n            H ").concat(l," V ").concat(c,"\n          Z")}var _=e.getCTM(),M=null===(i=z(n,Qi)[Qi].canvas)||void 0===i?void 0:i.getCTM();null===(r=z(n,Ki)[Ki])||void 0===r||r.setAttribute("transform","matrix(\n      ".concat(_.a/M.a,",\n      ").concat(_.b/M.a,",\n      ").concat(_.c/M.d,",\n      ").concat(_.d/M.d,",\n      ").concat((_.e-M.e)/M.a,",\n      ").concat((_.f-M.f)/M.d,")")),null===(a=z(n,Ki)[Ki])||void 0===a||a.setAttribute("d",o),e.onmouseout=n.closeOutline}},this.closeOutline=function(){var e;null===(e=z(n,Ki)[Ki])||void 0===e||e.removeAttribute("d")},this.disabled=function(e){e?n.uninstall():z(n,$i)[$i]()},this.uninstall=function(){document.removeEventListener("mousemove",z(n,er)[er])},!t)throw"stage not found!";z(this,Qi)[Qi]=t,z(this,$i)[$i]()})),nr=tr;function ir(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr=F("stage"),ar=F("isDisabled"),or=F("text2HTML"),sr=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,rr,{writable:!0,value:void 0}),Object.defineProperty(this,ar,{writable:!0,value:!1}),this.cut=function(){var e,t,i,r;0===(null===(e=z(n,rr)[rr].select)||void 0===e?void 0:e.size())||z(n,ar)[ar]||(n.copy(),null===(t=z(n,rr)[rr].select)||void 0===t||t.get().forEach((function(e){return e.node.remove()})),null===(i=z(n,rr)[rr].select)||void 0===i||i.clear(),null===(r=z(n,rr)[rr].select)||void 0===r||r.reset())},this.copy=function(){var e,t,i;if(0!==(null===(e=z(n,rr)[rr].select)||void 0===e?void 0:e.size())&&!z(n,ar)[ar]){var r="",a="";null===(t=z(n,rr)[rr].select)||void 0===t||t.get().forEach((function(e){r+=e.node.outerHTML}));var o=null===(i=z(n,rr)[rr].svgRoot)||void 0===i?void 0:i.querySelector("defs");null===o||void 0===o||o.childNodes.forEach((function(e){r.includes(e.id)&&(a+=e.outerHTML)}));var s="text/plain",l=o?"<svg>".concat("<defs>".concat(a,"</defs>"),r,"</svg>"):"<svg>".concat(r,"</svg>"),c=new Blob([l],{type:s}),u=[new ClipboardItem(ir({},s,c))];window.navigator.clipboard.write(u)}},this.paste=M(w().mark((function e(){var t,i,r,a,o,s,l,c,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z(n,ar)[ar]){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e,t,i,r,a,o;null===(e=z(n,rr)[rr].history)||void 0===e||e.add(z(n,rr)[rr].history.actions().ADD,"\u7c98\u8d34");var s=z(n,rr)[rr].matrix.a,l=null===(t=z(n,rr)[rr].stage)||void 0===t?void 0:t.getBoundingClientRect(),c=null===(i=z(n,rr)[rr].select)||void 0===i||null===(r=i.boxSelect())||void 0===r?void 0:r.getBoundingClientRect(),u=l.x+l.width/2,d=l.y+l.height/2,h=c.x+c.width/2,p=c.y+c.height/2,f=(u-h)/s,v=(d-p)/s;null===(a=z(n,rr)[rr].select)||void 0===a||a.get().forEach((function(e){var t=e.node,n=t.getMatrix();t.setAttribute("transform","matrix(".concat(n.a," ").concat(n.b," ").concat(n.c," ").concat(n.d," ").concat(n.e+f," ").concat(n.f+v,")"))})),null===(o=z(n,rr)[rr].select)||void 0===o||o.autoResetBoxSelect(!0)},i=function(e){var i,r,a,o,s=e.replace(/\t/g,"").replace(/[\n]/gm,'<tspan x="'.concat(0,'" dy="',"1em",'">&ZeroWidthSpace;</tspan>')),l=new To({x:0,y:0,content:s.replace("\n",""),fontSize:z(n,rr)[rr].options.fontSize});z(n,rr)[rr].currentType===z(n,rr)[rr].tools().SELECT?z(n,rr)[rr].layer.append(l.node):null===(o=z(n,rr)[rr].svgRoot)||void 0===o||o.append(l.node);null===(i=z(n,rr)[rr].select)||void 0===i||i.reset(),null===(r=z(n,rr)[rr].select)||void 0===r||r.set(l.node,{node:l.node}),null===(a=z(n,rr)[rr].select)||void 0===a||a.autoResetBoxSelect(!0),t()},r=function(e){var i,r;null===(i=z(n,rr)[rr].select)||void 0===i||i.reset(),null===e||void 0===e||e.childNodes.forEach((function(e){var t,i;(e=e.cloneNode(!0),z(n,rr)[rr].currentType===z(n,rr)[rr].tools().SELECT)?z(n,rr)[rr].layer.append(e):null===(i=z(n,rr)[rr].svgRoot)||void 0===i||i.append(e);z(n,rr)[rr].CAN_CEHCKED_NODE.includes(e.localName)&&(null===(t=z(n,rr)[rr].select)||void 0===t||t.set(e,{node:e}))})),null===(r=z(n,rr)[rr].select)||void 0===r||r.autoResetBoxSelect(!0),t()},a=function(e){var i=new Image;i.src=e,i.onload=function(){var r,a,o,s,l=i.width,c=i.height,u=new Lo({href:e,x:0,y:0,width:l,height:c});z(n,rr)[rr].currentType===z(n,rr)[rr].tools().SELECT?z(n,rr)[rr].layer.append(u.node):null===(s=z(n,rr)[rr].svgRoot)||void 0===s||s.append(u.node);null===(r=z(n,rr)[rr].select)||void 0===r||r.reset(),null===(a=z(n,rr)[rr].select)||void 0===a||a.set(u.node,{node:u.node}),null===(o=z(n,rr)[rr].select)||void 0===o||o.autoResetBoxSelect(!0),t()}},e.next=8,n.pasteTypes();case 8:o=e.sent,s=o.type,l=o.text,c=o.svg,u=o.href,e.t0=s,e.next="text/plain"===e.t0?16:"text/html"===e.t0?18:"image/png"===e.t0?20:22;break;case 16:return i(l),e.abrupt("break",22);case 18:return r(c),e.abrupt("break",22);case 20:return a(u),e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),this.pasteTypes=function(){return new Promise(function(){var e=M(w().mark((function e(t){var i,r,a,o,s,l,c,u,d,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.read();case 2:if(i=e.sent,!(r=i[0]).types.includes("image/png")){e.next=13;break}return e.next=7,r.getType("image/png");case 7:a=e.sent,(o=new FileReader).readAsDataURL(a),o.onload=function(e){t({type:"image/png",href:e.target.result})},e.next=41;break;case 13:if(!r.types.includes("text/html")){e.next=31;break}return e.next=16,r.getType("text/plain");case 16:return s=e.sent,e.next=19,s.text();case 19:if(!(l=e.sent).includes("</svg>")){e.next=22;break}return e.abrupt("return",t(z(n,or)[or](l)));case 22:return e.next=24,r.getType("text/plain");case 24:return c=e.sent,e.next=27,c.text();case 27:u=e.sent,t({type:"text/plain",text:u}),e.next=41;break;case 31:if(!r.types.includes("text/plain")){e.next=41;break}return e.next=34,r.getType("text/plain");case 34:return d=e.sent,e.next=37,d.text();case 37:if(!(h=e.sent).includes("</svg>")){e.next=40;break}return e.abrupt("return",t(z(n,or)[or](h)));case 40:t({type:"text/plain",text:h});case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Object.defineProperty(this,or,{writable:!0,value:function(e){return{type:"text/html",svg:(new DOMParser).parseFromString(e,"text/html").body.querySelector("svg")}}}),this.disabled=function(e){z(n,ar)[ar]=e},!t)throw new Error("stage not found!");z(this,rr)[rr]=t})),lr=sr,cr=F("stage"),ur=F("reprs"),dr=F("smartDistance"),hr=F("checkeds"),pr=F("checkedsTexts"),fr=F("checkedsPaths"),vr=F("checkedsGroups"),mr=F("exCludeGroupFirst"),gr=F("uncheckeds"),yr=F("boxSelect"),br=F("cacheRect"),xr=F("startX"),wr=F("startY"),_r=F("cacheX"),Mr=F("cahceY"),Sr=F("focusNode"),Er=F("once"),Cr=F("isMousedown"),Tr=F("isDragging"),Lr=F("isMoving"),Ar=F("isDrawingRubber"),Pr=F("canDrawRubber"),Or=F("isDisabled"),Rr=F("isDisDrag"),Nr=F("disDelete"),kr=F("disSmartGuides"),Dr=F("callback"),Ir=F("boxSelectCallback"),jr=F("dragBeforeCallback"),zr=F("timer"),Br=F("timeout"),Fr=F("listen"),Ur=F("WATCH_ACTIONS"),Hr=F("install"),Gr=F("listenenBoxSelect"),Vr=F("dblclick"),Wr=F("mousedown"),qr=F("mousemove"),Xr=F("mouseup"),Zr=F("drawRubber"),Yr=F("drawRubberEnd"),Jr=F("setRubberhand"),Qr=F("expandArea"),Kr=F("setBoxSelect"),$r=F("setGrippiePosition"),ea=F("autoHighLight"),ta=F("comparePosition"),na=F("setSmartLine"),ia=F("nodeMatrix"),ra=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Jr,{value:aa}),Object.defineProperty(this,cr,{writable:!0,value:void 0}),Object.defineProperty(this,ur,{writable:!0,value:void 0}),Object.defineProperty(this,dr,{writable:!0,value:10}),Object.defineProperty(this,hr,{writable:!0,value:new Map}),Object.defineProperty(this,pr,{writable:!0,value:new Map}),Object.defineProperty(this,fr,{writable:!0,value:new Map}),Object.defineProperty(this,vr,{writable:!0,value:new Map}),Object.defineProperty(this,mr,{writable:!0,value:SVGElement}),Object.defineProperty(this,gr,{writable:!0,value:[]}),Object.defineProperty(this,yr,{writable:!0,value:void 0}),Object.defineProperty(this,br,{writable:!0,value:void 0}),Object.defineProperty(this,xr,{writable:!0,value:0}),Object.defineProperty(this,wr,{writable:!0,value:0}),Object.defineProperty(this,_r,{writable:!0,value:0}),Object.defineProperty(this,Mr,{writable:!0,value:0}),Object.defineProperty(this,Sr,{writable:!0,value:void 0}),Object.defineProperty(this,Er,{writable:!0,value:!1}),Object.defineProperty(this,Cr,{writable:!0,value:!1}),Object.defineProperty(this,Tr,{writable:!0,value:!1}),Object.defineProperty(this,Lr,{writable:!0,value:!1}),Object.defineProperty(this,Ar,{writable:!0,value:!1}),Object.defineProperty(this,Pr,{writable:!0,value:!1}),Object.defineProperty(this,Or,{writable:!0,value:!1}),Object.defineProperty(this,Rr,{writable:!0,value:!1}),Object.defineProperty(this,Nr,{writable:!0,value:!1}),Object.defineProperty(this,kr,{writable:!0,value:!1}),Object.defineProperty(this,Dr,{writable:!0,value:void 0}),Object.defineProperty(this,Ir,{writable:!0,value:void 0}),Object.defineProperty(this,jr,{writable:!0,value:void 0}),Object.defineProperty(this,zr,{writable:!0,value:void 0}),Object.defineProperty(this,Br,{writable:!0,value:10}),Object.defineProperty(this,Fr,{writable:!0,value:void 0}),Object.defineProperty(this,Ur,{writable:!0,value:{SELECTED:Symbol(),BOX_SELECT:Symbol(),DRAG_BEFORE:Symbol()}}),Object.defineProperty(this,Hr,{writable:!0,value:function(){var e,t;z(n,ur)[ur]=document.querySelector("#smart-guides-hud g"),z(n,yr)[yr]=document.querySelector('[uid="frame-select"]'),null===(e=z(n,cr)[cr].stage)||void 0===e||e.addEventListener("dblclick",z(n,Vr)[Vr]),null===(t=z(n,cr)[cr].stage)||void 0===t||t.addEventListener("mousedown",z(n,Wr)[Wr]),document.addEventListener("mousemove",z(n,qr)[qr]),document.addEventListener("mouseup",z(n,Xr)[Xr])}}),this.watch=function(e,t){e===n.actions().SELECTED?z(n,Dr)[Dr]=t:e===n.actions().BOX_SELECT?z(n,Ir)[Ir]=t:e===n.actions().DRAG_BEFORE&&(z(n,jr)[jr]=t)},Object.defineProperty(this,Gr,{writable:!0,value:function(){z(n,Fr)[Fr]=new MutationObserver((function(){var e,t;null===(e=(t=z(n,Ir))[Ir])||void 0===e||e.call(t)})),z(n,Fr)[Fr].observe(z(n,yr)[yr],{attributes:!0,attributeFilter:["x","y","transform"]})}}),Object.defineProperty(this,Vr,{writable:!0,value:function(e){if(0===e.button){var t=e.target;z(n,cr)[cr].currentType===z(n,cr)[cr].tools().SELECT?1===n.size()&&"g"===n.first().node.localName?(z(n,cr)[cr].switchLayer(n.first().node),n.reset(),z(n,ea)[ea](e)):1===n.size()&&"text"===n.first().node.localName?z(n,cr)[cr].tool(z(n,cr)[cr].tools().TEXT,!0):0===n.size()&&(z(n,cr)[cr].switchLayer(),n.reset()):z(n,cr)[cr].currentType===z(n,cr)[cr].tools().ASELECT&&"text"===t.localName&&z(n,cr)[cr].tool(z(n,cr)[cr].tools().TEXT,!0)}}}),Object.defineProperty(this,Wr,{writable:!0,value:function(e){var t;z(n,cr)[cr].currentType!==z(n,cr)[cr].tools().SELECT&&z(n,cr)[cr].currentType!==z(n,cr)[cr].tools().ASELECT||z(n,Or)[Or]||null!==(t=z(n,cr)[cr].resize)&&void 0!==t&&t.isResizing()||(z(n,Cr)[Cr]=!0,z(n,Pr)[Pr]=!1,z(n,Sr)[Sr]=n.areaFocus(e),z(n,Sr)[Sr]&&0===e.button&&(z(n,Er)[Er]=!0),z(n,Sr)[Sr]||2===e.button||(z(n,Pr)[Pr]=!0),z(n,xr)[xr]=e.clientX,z(n,wr)[wr]=e.clientY)}}),Object.defineProperty(this,qr,{writable:!0,value:function(e){if(z(n,Cr)[Cr]){z(n,Pr)[Pr]&&z(n,Zr)[Zr](e);var t,i,r=e.clientX,a=e.clientY,o=e.shiftKey;if(Math.abs(z(n,xr)[xr]-r)+Math.abs(z(n,wr)[wr]-a)>=4&&z(n,Er)[Er]&&z(n,Sr)[Sr])z(n,Er)[Er]=!1,o||n.has(z(n,Sr)[Sr])||n.clear(),n.set(z(n,Sr)[Sr],{node:z(n,Sr)[Sr]}),null===(t=(i=z(n,jr))[jr])||void 0===t||t.call(i),z(n,Rr)[Rr]||n.drag(e,z(n,Sr)[Sr])}}}),Object.defineProperty(this,Xr,{writable:!0,value:function(e){z(n,Cr)[Cr]&&(z(n,Cr)[Cr]=!1,z(n,Yr)[Yr](e),z(n,Sr)[Sr]&&!n.has(z(n,Sr)[Sr])&&(e.shiftKey||n.has(z(n,Sr)[Sr])||n.clear(),n.set(z(n,Sr)[Sr],{node:z(n,Sr)[Sr]}),n.autoResetBoxSelect(!0)))}}),this.drag=function(e,t){var i,r,a;z(n,gr)[gr]=[z(n,cr)[cr].boardView];var o=t,s=new zt,l=(null===(i=z(n,yr)[yr])||void 0===i||null===(r=i.parentNode)||void 0===r?void 0:r.getCTM()).a,c=null===(a=z(n,cr)[cr].stage)||void 0===a?void 0:a.getBoundingClientRect(),u=c.left,d=c.top;s.install({element:o,start:function(){var e,i,r,a,o;z(n,Tr)[Tr]=!0;var s,l=[],c=[],h=null===(e=z(n,cr)[cr].canvas)||void 0===e?void 0:e.getCTM();n.get().forEach((function(e){var t=e.node,n=t.parentNode;s||(s=n),e.CTM=n.getCTM(),e.matrix=t.getMatrix(),e.box=t.getBoundingClientRect();var i=e.box,r=(i.x-u-h.e)/h.a,a=(i.right-u-h.e)/h.a,o=(i.y-d-h.f)/h.d,p=(i.bottom-d-h.f)/h.d;l.push(r,a),c.push(o,p)})),z(n,gr)[gr]=[].concat(H(z(n,gr)[gr]),H(null===(i=s)||void 0===i?void 0:i.childNodes));var p=Math.max.apply(null,l),f=Math.min.apply(null,l),v=Math.max.apply(null,c),m=Math.min.apply(null,c),g=p-f,y=v-m;z(n,Kr)[Kr](f,m,g,y),n.has(t)||n.toggleBoxSelect(!0),z(n,$r)[$r](f,m,p,v,g,y),z(n,_r)[_r]=Number(null===(r=z(n,yr)[yr])||void 0===r?void 0:r.getAttribute("x")),z(n,Mr)[Mr]=Number(null===(a=z(n,yr)[yr])||void 0===a?void 0:a.getAttribute("y")),z(n,br)[br]=null===(o=z(n,yr)[yr])||void 0===o?void 0:o.getBoundingClientRect()},move:function(e){var t,i,r;if(z(n,Tr)[Tr]){z(n,ur)[ur]&&(z(n,ur)[ur].innerHTML="");var a,o=e.dataX,s=e.dataY;if(!z(n,Lr)[Lr])null===(a=z(n,cr)[cr].history)||void 0===a||a.add(z(n,cr)[cr].history.actions().MOUSE_MOVE,"\u9f20\u6807\u79fb\u52a8"),n.toggleBoxSelect(!1),z(n,Lr)[Lr]=!0;null===(t=z(n,cr)[cr].hover)||void 0===t||t.closeOutline();var c=z(n,ta)[ta](o,s),u=c.sDx,d=c.sDy;n.get().forEach((function(e){var t=e.node,n=e.CTM,i=e.matrix,r=n.a*n.d,a=n.b*n.c,l=n.d/(r-a)*(o+u),c=n.a/(r-a)*(s+d),h=l-c/n.a*n.c,p=c-l/n.d*n.b,f=(i.e+h).toFixed(9),v=(i.f+p).toFixed(9),m=i.a,g=i.b,y=i.c,b=i.d;t.setAttribute("transform","matrix(".concat(m,",").concat(g,",").concat(y,",").concat(b,",").concat(f,",").concat(v,")"))}));var h=(z(n,_r)[_r]+(u+o)/l).toFixed(9),p=(z(n,Mr)[Mr]+(d+s)/l).toFixed(9);null===(i=z(n,yr)[yr])||void 0===i||i.setAttribute("x",h),null===(r=z(n,yr)[yr])||void 0===r||r.setAttribute("y",p),n.autoResetBoxSelect(!1)}},end:function(){z(n,Tr)[Tr]&&(z(n,ur)[ur]&&(z(n,ur)[ur].innerHTML=""),setTimeout((function(){z(n,Tr)[Tr]=!1,z(n,Lr)[Lr]=!1})),null===s||void 0===s||s.uninstall(),n.autoResetBoxSelect(!0,!0))}}),null===s||void 0===s||s.mousedown(e)},Object.defineProperty(this,Zr,{writable:!0,value:function(e){var t,i;if(!(null!==(t=z(n,cr)[cr].resize)&&void 0!==t&&t.isResizing()||z(n,Tr)[Tr])){var r=null===(i=z(n,cr)[cr].stage)||void 0===i?void 0:i.getBoundingClientRect(),a=r.left,o=r.top,s=z(n,cr)[cr].matrix,l=[(z(n,xr)[xr]-a-s.e)/s.a,(e.clientX-a-s.e)/s.a],c=[(z(n,wr)[wr]-o-s.f)/s.a,(e.clientY-o-s.f)/s.a],u=Math.max.apply(null,l),d=Math.min.apply(null,l),h=Math.max.apply(null,c),p=Math.min.apply(null,c),f=u-d,v=h-p;z(n,Jr)[Jr](d,p,f,v),z(n,Ar)[Ar]=!0}}}),Object.defineProperty(this,Yr,{writable:!0,value:function(e){var t,i;if(z(n,Ar)[Ar]&&(setTimeout((function(){z(n,Ar)[Ar]=!1})),(z(n,xr)[xr]!==e.clientX||z(n,wr)[wr]!==e.clientY)&&(null===(t=z(n,cr)[cr].resize)||void 0===t||!t.isResizing()))){!e.shiftKey&&n.size()>0&&n.clear();var r=document.querySelector('[uid="rubber-hand"]'),a=null===r||void 0===r?void 0:r.getBoundingClientRect(),o=[],s=[];if(z(n,cr)[cr].currentType===z(n,cr)[cr].tools().SELECT)for(var l=z(n,cr)[cr].layer.children.length,c=0;c<l;c++){var u=z(n,cr)[cr].layer.children[c],d=u.getBoundingClientRect();("none"!==window.getComputedStyle(u).pointerEvents&&z(n,cr)[cr].CAN_CEHCKED_NODE.includes(u.localName)&&n.checkIntersect(a,d)||e.shiftKey&&n.has(u))&&(o.push(d.x,d.right),s.push(d.y,d.bottom),n.set(u,{node:u}))}else for(var h=document.createNodeIterator(z(n,cr)[cr].svgRoot,NodeFilter.SHOW_ELEMENT),p=h.nextNode();null!==p;){var f=p.getBoundingClientRect();("none"!==window.getComputedStyle(p).pointerEvents&&z(n,cr)[cr].CAN_CEHCKED_NODE.includes(p.localName)&&n.checkIntersect(a,f)&&"g"!==p.localName||e.shiftKey&&n.has(p))&&(o.push(f.x,f.right),s.push(f.y,f.bottom),n.set(p,{node:p})),p=h.nextNode()}var v=z(n,cr)[cr].matrix,m=v.a,g=v.e,y=v.f,b=null===(i=z(n,cr)[cr].stage)||void 0===i?void 0:i.getBoundingClientRect(),x=b.left,w=b.top,_=(Math.min.apply(null,o)-x-g)/m,M=(Math.max.apply(null,o)-x-g)/m,S=(Math.min.apply(null,s)-w-y)/m,E=(Math.max.apply(null,s)-w-y)/m;z(n,Kr)[Kr](Math.abs(_)===1/0?0:_,Math.abs(S)===1/0?0:S,Math.abs(M-_)===1/0?0:M-_,Math.abs(E-S)===1/0?0:E-S),z(n,Jr)[Jr](0,0,0,0),n.autoResetBoxSelect(!1)}}}),this.nodesRemove=function(){var e,t;0===(null===n||void 0===n?void 0:n.size())||z(n,Nr)[Nr]||(null===(e=z(n,cr)[cr].history)||void 0===e||e.add(z(n,cr)[cr].history.actions().DELETE,"\u5220\u9664"),n.get().forEach((function(e){return e.node.remove()})),n.clear(),n.reset(),null===(t=z(n,cr)[cr].history)||void 0===t||t.end())},this.reset=function(){var e;n.clear(),z(n,Kr)[Kr](0,0,0,0),null===(e=z(n,cr)[cr].text)||void 0===e||e.quit()},this.checkedsTexts=function(){return z(n,pr)[pr]},this.checkedsPaths=function(){return z(n,fr)[fr]},this.checkedsGroups=function(){return z(n,vr)[vr]},this.exCludeGroupFirst=function(){return z(n,mr)[mr]},this.set=function(e,t){switch(e.nodeName){case"text":z(n,pr)[pr].set(e,e);break;case"path":z(n,fr)[fr].set(e,e);break;case"g":z(n,vr)[vr].set(e,e),e.querySelectorAll("text").forEach((function(e){z(n,pr)[pr].set(e,e)})),e.querySelectorAll("path").forEach((function(e){z(n,fr)[fr].set(e,e)}))}if(z(n,hr)[hr].set(e,t),!z(n,mr)[mr])if("g"===e.nodeName)for(var i=document.createTreeWalker(t.node,NodeFilter.SHOW_ELEMENT),r=i.currentNode;r;){if("g"!==r.nodeName){z(n,mr)[mr]=r;break}r=i.nextNode()}else z(n,mr)[mr]=t.node;clearTimeout(z(n,zr)[zr]),z(n,zr)[zr]=setTimeout((function(){var e,t;null===(e=(t=z(n,Dr))[Dr])||void 0===e||e.call(t)}),z(n,Br)[Br])},this.has=function(e){return z(n,hr)[hr].has(e)},this.get=function(){return z(n,hr)[hr]},this.item=function(e){return z(n,hr)[hr].get(e)},this.first=function(){return n.item(z(n,hr)[hr].keys().next().value)},this.size=function(){return z(n,hr)[hr].size},this.delete=function(e){switch(e.localName){case"text":z(n,pr)[pr].delete(e);break;case"path":z(n,fr)[fr].delete(e);break;case"g":z(n,vr)[vr].delete(e),e.querySelectorAll("text").forEach((function(e){z(n,pr)[pr].delete(e)})),e.querySelectorAll("path").forEach((function(e){z(n,fr)[fr].delete(e)}))}z(n,hr)[hr].delete(e),clearTimeout(z(n,zr)[zr]),z(n,zr)[zr]=setTimeout((function(){var e,t;null===(e=(t=z(n,Dr))[Dr])||void 0===e||e.call(t)}),z(n,Br)[Br])},this.clear=function(){z(n,hr)[hr].clear(),z(n,pr)[pr].clear(),z(n,fr)[fr].clear(),z(n,vr)[vr].clear(),z(n,mr)[mr]=void 0,clearTimeout(z(n,zr)[zr]),z(n,zr)[zr]=setTimeout((function(){var e,t;null===(e=(t=z(n,Dr))[Dr])||void 0===e||e.call(t)}),z(n,Br)[Br])},this.boxSelect=function(){return z(n,yr)[yr]},this.areaFocus=function(e){var t,i=z(n,Qr)[Qr](e.clientX,e.clientY);if(z(n,cr)[cr].currentType===z(n,cr)[cr].tools().SELECT){var r=z(n,cr)[cr].layer.children.length;e:for(var a=0;a<i.length;a++)for(var o=document.elementFromPoint(i[a].x,i[a].y),s=0;s<r;s++)if(z(n,cr)[cr].layer.children[s].contains(o)){t=z(n,cr)[cr].layer.children[s];break e}}else for(var l=0;l<i.length;l++){var c,u=i[l],d=document.elementFromPoint(u.x,u.y);if(null!==(c=z(n,cr)[cr].svgRoot)&&void 0!==c&&c.contains(d)&&"g"!==(null===d||void 0===d?void 0:d.localName)){t=d;break}}if(t){if("none"!==window.getComputedStyle(t).pointerEvents)return t}else e.shiftKey||n.reset()},Object.defineProperty(this,Qr,{writable:!0,value:function(e,t){var n=[];n.push({x:e,y:t});for(var i=1;i<=5;i++)n.push({x:e-i,y:t-i}),n.push({x:e,y:t-1}),n.push({x:e+i,y:t+i}),n.push({x:e-i,y:t}),n.push({x:e+i,y:t}),n.push({x:e-i,y:t+i}),n.push({x:e,y:t+i}),n.push({x:e+i,y:t+i});return n}}),this.autoResetBoxSelect=function(e){var t,i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===(t=z(n,cr)[cr].hover)||void 0===t||t.closeOutline(),n.size()<1)return n.reset();var a=[],o=[],s=z(n,cr)[cr].matrix,l=null===(i=z(n,cr)[cr].stage)||void 0===i?void 0:i.getBoundingClientRect(),c=l.left,u=l.top;if(e)n.get().forEach((function(e){var t=e.node;"text"!==t.localName&&(t.style.vectorEffect="none",t.style.strokeWidth="");var i=t.getBoundingClientRect(),l=(i.x-c-s.e)/s.a,d=(i.right-c-s.e)/s.a,h=(i.y-u-s.f)/s.a,p=(i.bottom-u-s.f)/s.a;a.push(l,d),o.push(h,p),z(n,ia)[ia](e.node,r)}));else{var d,h=null===(d=z(n,yr)[yr])||void 0===d?void 0:d.getBoundingClientRect(),p=((null===h||void 0===h?void 0:h.x)-c-s.e)/s.a,f=((null===h||void 0===h?void 0:h.right)-c-s.e)/s.a,v=((null===h||void 0===h?void 0:h.y)-u-s.f)/s.a,m=((null===h||void 0===h?void 0:h.bottom)-u-s.f)/s.a;a.push(p,f),o.push(v,m)}var g=Math.max.apply(null,a),y=Math.min.apply(null,a),b=Math.max.apply(null,o),x=Math.min.apply(null,o),w=g-y,_=b-x;e&&z(n,Kr)[Kr](y,x,w,_),z(n,$r)[$r](y,x,g,b,w,_)},Object.defineProperty(this,Kr,{writable:!0,value:function(e,t,i,r){var a=z(n,yr)[yr];a.setAttribute("x",e.toFixed(9)),a.setAttribute("y",t.toFixed(9)),a.setAttribute("width",Math.abs(i).toFixed(9)),a.setAttribute("height",Math.abs(r).toFixed(9)),i>0&&r>0&&(z(n,cr)[cr].currentType===z(n,cr)[cr].tools().SELECT||z(n,cr)[cr].currentType===z(n,cr)[cr].tools().ASELECT)?n.toggleBoxSelect(!1):n.toggleBoxSelect(!0)}}),this.toggleBoxSelect=function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=document.querySelector('[uid="origin-grippie"]'),a=document.querySelector('[uid="scale-grippies"]');i?(null===(e=z(n,yr)[yr])||void 0===e||e.setAttribute("opacity","0"),r.style.visibility="hidden",a.style.visibility="hidden"):(null===(t=z(n,yr)[yr])||void 0===t||t.removeAttribute("opacity"),r.style.visibility="visible",a.style.visibility="visible")},Object.defineProperty(this,$r,{writable:!0,value:function(e,t,i,r,a,o){var s=document.querySelector("#transform-hud"),l=null===s||void 0===s?void 0:s.querySelectorAll(".grippie"),c=Number(l[0].getAttribute("width")),u=(e-c/2+a/2).toFixed(9),d=(t-c/2).toFixed(9);l[0].setAttribute("x",u),l[0].setAttribute("y",d);var h=(e-c/2).toFixed(9),p=(t-c/2+o/2).toFixed(9);l[1].setAttribute("x",h),l[1].setAttribute("y",p);var f=(e-c/2+a/2).toFixed(9),v=(t-c/2+o).toFixed(9);l[2].setAttribute("x",f),l[2].setAttribute("y",v);var m=(e-c/2+a).toFixed(9),g=(t-c/2+o/2).toFixed(9);l[3].setAttribute("x",m),l[3].setAttribute("y",g);var y=(e-c/2).toFixed(9),b=(t-c/2).toFixed(9);l[4].setAttribute("x",y),l[4].setAttribute("y",b);var x=(i-c/2).toFixed(9),w=(t-c/2).toFixed(9);l[5].setAttribute("x",x),l[5].setAttribute("y",w);var _=(e-c/2).toFixed(9),M=(r-c/2).toFixed(9);l[6].setAttribute("x",_),l[6].setAttribute("y",M);var S=(i-c/2).toFixed(9),E=(r-c/2).toFixed(9);l[7].setAttribute("x",S),l[7].setAttribute("y",E);var C=(z(n,cr)[cr].options.grippieSize||11)/z(n,cr)[cr].matrix.a,T=e-C/2+a/2,L=t-C/2+o/2,A=document.querySelector('[uid="origin-grippie"]');null===A||void 0===A||A.setAttribute("x",T.toFixed(9)),null===A||void 0===A||A.setAttribute("y",L.toFixed(9))}}),Object.defineProperty(this,ea,{writable:!0,value:function(e){var t=e.path||e.composedPath();e:for(var i=0;i<t.length;i++)for(var r=0;r<z(n,cr)[cr].layer.children.length;r++){var a,o;if(t[i]instanceof Node&&null!==(a=z(n,cr)[cr].layer)&&void 0!==a&&null!==(o=a.children[r])&&void 0!==o&&o.contains(t[i])){var s,l;null===(s=z(n,cr)[cr].hover)||void 0===s||s.highLight(null===(l=z(n,cr)[cr].layer)||void 0===l?void 0:l.children[r]);break e}}}}),Object.defineProperty(this,ta,{writable:!0,value:function(e,t){var i,r,a,o,s,l=0,c=0;if(z(n,kr)[kr])return{sDx:l,sDy:c};var u=z(n,cr)[cr].matrix,d=u.a,h=u.e,p=u.f,f=null===(i=z(n,cr)[cr].stage)||void 0===i?void 0:i.getBoundingClientRect(),v=f.left,m=f.top,g=void 0,y=void 0,b=Number(null===(r=z(n,br)[br])||void 0===r?void 0:r.x)+e,x=Number(null===(a=z(n,br)[br])||void 0===a?void 0:a.right)+e,w=Number(null===(o=z(n,br)[br])||void 0===o?void 0:o.y)+t,_=Number(null===(s=z(n,br)[br])||void 0===s?void 0:s.bottom)+t;return z(n,gr)[gr].forEach((function(i){if(3!==i.nodeType&&!n.has(i)){var r=i.getBoundingClientRect(),a=r.x,o=r.y,s=r.bottom,u=r.right;if(Math.abs(b-a)<z(n,dr)[dr]||Math.abs(b-u)<z(n,dr)[dr]||Math.abs(x-u)<z(n,dr)[dr]||Math.abs(x-a)<z(n,dr)[dr]){var f,M,S=Math.min(Number(null===(f=z(n,br)[br])||void 0===f?void 0:f.top)+t,o),E=Math.max(Number(null===(M=z(n,br)[br])||void 0===M?void 0:M.bottom)+t,s),C=(S-m-p)/d,T=(E-m-p)/d,L=0;Math.abs(b-a)<z(n,dr)[dr]?(l=a-b,L=(a-v-h)/d):Math.abs(b-u)<z(n,dr)[dr]?(l=u-b,L=(u-v-h)/d):Math.abs(x-u)<z(n,dr)[dr]?(l=u-x,L=(u-v-h)/d):(l=a-x,L=(a-v-h)/d),g={x1:L,x2:L,y1:C,y2:T}}if(Math.abs(w-o)<z(n,dr)[dr]||Math.abs(w-s)<z(n,dr)[dr]||Math.abs(_-s)<z(n,dr)[dr]||Math.abs(_-o)<z(n,dr)[dr]){var A,P,O=Math.min(Number(null===(A=z(n,br)[br])||void 0===A?void 0:A.x)+e,a),R=Math.max(Number(null===(P=z(n,br)[br])||void 0===P?void 0:P.right)+e,u),N=(O-v-h)/d,k=(R-v-h)/d,D=0;Math.abs(w-o)<z(n,dr)[dr]?(c=o-w,D=(o-m-p)/d):Math.abs(w-s)<z(n,dr)[dr]?(c=s-w,D=(s-m-p)/d):Math.abs(_-s)<z(n,dr)[dr]?(c=s-_,D=(s-m-p)/d):(c=o-_,D=(o-m-p)/d),y={x1:N,x2:k,y1:D,y2:D}}}})),g&&z(n,na)[na](g.x1,g.y1,g.x2,g.y2),y&&z(n,na)[na](y.x1,y.y1,y.x2,y.y2),{sDx:l,sDy:c}}}),Object.defineProperty(this,na,{writable:!0,value:function(e,t,i,r){var a,o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",e.toFixed(4)),o.setAttribute("y1",t.toFixed(4)),o.setAttribute("x2",i.toFixed(4)),o.setAttribute("y2",r.toFixed(4)),o.classList.add("repr"),null===(a=z(n,ur)[ur])||void 0===a||a.append(o)}}),this.checkIntersect=function(e,t){var n=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return!(n>r||i>a)},Object.defineProperty(this,ia,{writable:!0,value:function(e,t){var i;if(e.parentNode){var r,a=e.getMatrix();if(0!==a.b||0!==a.c)return null===(r=z(n,cr)[cr].history)||void 0===r?void 0:r.end();var o=e,s=o.getBBox(),l=s.x,c=s.y,u=s.width,d=s.height,h=u*Math.abs(a.a),p=d*Math.abs(a.d),f=l*a.a+a.e+(a.a<0&&-h),v=c*a.d+a.f+(a.d<0&&-p);if(["g","image","text"].includes(e.localName)){if(t){var m=o.getMatrix(),g=m.a,y=m.b,b=m.c,x=m.d,w=m.e,_=m.f;e.setAttribute("transform","matrix(".concat(g,",").concat(y,",").concat(b,",").concat(x,",").concat(w,",").concat(_,")"))}}else e.removeAttribute("transform");switch(e.localName){case"g":case"image":case"text":break;case"rect":e.setAttribute("x",f.toFixed(4)),e.setAttribute("y",v.toFixed(4)),e.setAttribute("width",h.toFixed(4)),e.setAttribute("height",p.toFixed(4));break;case"circle":case"ellipse":e.setAttribute("cx",(f+h/2).toFixed(4)),e.setAttribute("cy",(v+p/2).toFixed(4)),e.setAttribute("rx",(h/2).toFixed(4)),e.setAttribute("ry",(p/2).toFixed(4));break;case"line":var M=Number(e.getAttribute("x1")),S=Number(e.getAttribute("y1")),E=Number(e.getAttribute("x2")),C=Number(e.getAttribute("y2")),T=M*a.a+a.e,L=S*a.d+a.f,A=E*a.a+a.e,P=C*a.d+a.f;e.setAttribute("x1",T.toFixed(4)),e.setAttribute("y1",L.toFixed(4)),e.setAttribute("x2",A.toFixed(4)),e.setAttribute("y2",P.toFixed(4));break;case"path":var O=e.getAttribute("d"),R=new Me(O).matrix(a.a,a.b,a.c,a.d,a.e,a.f).encode();e.setAttribute("d",R);break;case"polyline":case"polygon":for(var N="",k=e,D=0;D<k.points.numberOfItems;D+=1){var I=k.points.getItem(D),j=I.x*a.a+a.e,B=I.y*a.d+a.f;N+="".concat(j.toFixed(9)," ").concat(B.toFixed(9)," ")}e.setAttribute("points",N)}null===(i=z(n,cr)[cr].history)||void 0===i||i.end()}}}),this.actions=function(){return z(n,Ur)[Ur]},this.isDragging=function(){return z(n,Tr)[Tr]},this.isDrawingRubber=function(){return z(n,Ar)[Ar]},this.disSmartGuides=function(e){return z(n,kr)[kr]=e,z(n,kr)[kr]},this.disabled=function(e){z(n,Or)[Or]=e},this.disDelete=function(e){z(n,Nr)[Nr]=e},this.disDrag=function(e){z(n,Rr)[Rr]=e},this.uninstall=function(){var e,t;z(n,Dr)[Dr]=void 0,z(n,Ir)[Ir]=void 0,null===(e=z(n,cr)[cr].stage)||void 0===e||e.removeEventListener("dblclick",z(n,Vr)[Vr]),null===(t=z(n,cr)[cr].stage)||void 0===t||t.removeEventListener("mousedown",z(n,Wr)[Wr]),document.removeEventListener("mousemove",z(n,qr)[qr]),document.removeEventListener("mouseup",z(n,Xr)[Xr])},!t)throw new Error("stage not found!");z(this,cr)[cr]=t,z(this,Hr)[Hr](),z(this,Gr)[Gr]()}));function aa(e,t,n,i){var r=document.querySelector('[uid="rubber-hand"]');null===r||void 0===r||r.setAttribute("x",e.toFixed(9)),null===r||void 0===r||r.setAttribute("y",t.toFixed(9)),null===r||void 0===r||r.setAttribute("width",n.toFixed(9)),null===r||void 0===r||r.setAttribute("height",i.toFixed(9))}var oa,sa,la=ra,ca=F("stage"),ua=F("isResizing"),da=F("isMoving"),ha=F("isDisabled"),pa=F("scale"),fa=F("cacheX"),va=F("cacheY"),ma=F("cacheWidth"),ga=F("cacheHeight"),ya=F("temMatrix"),ba=F("temBBox"),xa=F("install"),wa=F("start"),_a=F("move"),Ma=F("end"),Sa=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,ca,{writable:!0,value:void 0}),Object.defineProperty(this,ua,{writable:!0,value:!1}),Object.defineProperty(this,da,{writable:!0,value:!1}),Object.defineProperty(this,ha,{writable:!0,value:!1}),Object.defineProperty(this,pa,{writable:!0,value:1}),Object.defineProperty(this,fa,{writable:!0,value:0}),Object.defineProperty(this,va,{writable:!0,value:0}),Object.defineProperty(this,ma,{writable:!0,value:0}),Object.defineProperty(this,ga,{writable:!0,value:0}),Object.defineProperty(this,ya,{writable:!0,value:void 0}),Object.defineProperty(this,ba,{writable:!0,value:void 0}),Object.defineProperty(this,xa,{writable:!0,value:function(){var e=document.querySelector("#transform-hud"),t=null===e||void 0===e?void 0:e.querySelectorAll(".grippie");null===t||void 0===t||t.forEach((function(e){(new zt).install({element:e,start:z(n,wa)[wa],move:z(n,_a)[_a],end:z(n,Ma)[Ma],un_shiftKey:!0})}))}}),Object.defineProperty(this,wa,{writable:!0,value:function(e){var t,i,r,a;if(!(0!==e.button||z(n,ha)[ha]||null!==(t=z(n,ca)[ca].select)&&void 0!==t&&t.isDragging())){z(n,ua)[ua]=!0;var o=null===(i=z(n,ca)[ca].select)||void 0===i?void 0:i.boxSelect();z(n,ya)[ya]=o.getMatrix(),z(n,ba)[ba]=o.getBBox();var s=o.getBoundingClientRect(),l=null===(r=z(n,ca)[ca].stage)||void 0===r?void 0:r.getBoundingClientRect(),c=l.left,u=l.top;z(n,pa)[pa]=z(n,ca)[ca].matrix.a,z(n,fa)[fa]=(s.x-c-z(n,ca)[ca].matrix.e)/z(n,pa)[pa],z(n,va)[va]=(s.y-u-z(n,ca)[ca].matrix.f)/z(n,pa)[pa],z(n,ma)[ma]=s.width/z(n,pa)[pa],z(n,ga)[ga]=s.height/z(n,pa)[pa],null===(a=z(n,ca)[ca].select)||void 0===a||a.get().forEach((function(e){var t=e.node,n=t.getMatrix(),i=t.getBoundingClientRect();e.matrixIterator=t.parentElement.getMatrixIterator();var r=e.matrixIterator,a=r.a,o=r.d,l=r.e,d=r.f;e.x=(i.x-c-l)/a,e.y=(i.y-u-d)/o,e.w=i.width/a,e.h=i.height/o,e.disX=(i.x-s.x)/n.a,e.disY=(i.y-s.y)/n.d,e.disR=(i.right-s.right)/n.a,e.disB=(i.bottom-s.bottom)/n.d,e.matrix=n}))}}}),Object.defineProperty(this,_a,{writable:!0,value:function(e){var t,i,r;if(z(n,ua)[ua]){var a,o=e.dataX,s=e.dataY,l=e.shiftKey;if(!z(n,da)[da]&&e instanceof zt)null===(a=z(n,ca)[ca].history)||void 0===a||a.add(z(n,ca)[ca].history.actions().MOUSE_SCALE,"\u7f29\u653e"),0===o&&0===s||(z(n,da)[da]=!0);var c,u,d,h=null===(t=z(n,ca)[ca].select)||void 0===t?void 0:t.boxSelect(),p=e instanceof zt?e.element.getAttribute("data-position"):e.pos,f=1,v=1,m=0,g=0,y=z(n,ba)[ba],b=y.x,x=y.y,w=y.width,_=y.height;switch(p){case"top":g=(1-(v=1-s/z(n,pa)[pa]/_))*(x+_);break;case"left":m=(1-(f=1-o/z(n,pa)[pa]/w))*(b+w);break;case"bottom":g=(1-(v=1+s/z(n,pa)[pa]/_))*x;break;case"right":m=(1-(f=1+o/z(n,pa)[pa]/w))*b;break;case"top-left":var M=Math.max(o/z(n,pa)[pa]/w,s/z(n,pa)[pa]/_);f=1-(l?M:o/z(n,pa)[pa]/w),v=1-(l?M:s/z(n,pa)[pa]/_),m=(1-f)*(b+w),g=(1-v)*(x+_);break;case"top-right":var S=Math.min(1+o/z(n,pa)[pa]/w,1-s/z(n,pa)[pa]/_);f=l?S:1+o/z(n,pa)[pa]/w,v=l?S:1-s/z(n,pa)[pa]/_,m=(1-f)*b,g=(1-v)*(x+_);break;case"bottom-left":var E=Math.min(1-o/z(n,pa)[pa]/w,1+s/z(n,pa)[pa]/_);f=l?E:1-o/z(n,pa)[pa]/w,v=l?E:1+s/z(n,pa)[pa]/_,m=(1-f)*(b+w),g=(1-v)*x;break;case"bottom-right":var C=Math.min(o/z(n,pa)[pa]/w,s/z(n,pa)[pa]/_);f=1+(l?C:o/z(n,pa)[pa]/w),v=1+(l?C:s/z(n,pa)[pa]/_),m=(1-f)*b,g=(1-v)*x}if(h.setAttribute("transform","matrix(".concat(f,",").concat(0,",").concat(0,",").concat(v,",").concat(m,",").concat(g,")")),null===(i=z(n,ca)[ca].select)||void 0===i||i.get().forEach((function(e){var t=e.node,i=t.getAttribute("stroke-width")||1;i>0&&"g"!==t.localName&&(t.style.vectorEffect="non-scaling-stroke",t.style.strokeWidth=i*z(n,ca)[ca].matrix.a);var r=new Xe;r.add(e.matrix.a,e.matrix.b,e.matrix.c,e.matrix.d,e.matrix.e,e.matrix.f);var a=function(){switch(p){case"top":return{x:0,y:(e.y+e.h-e.matrix.f)/e.matrix.d-e.disB/z(n,pa)[pa]};case"left":return{x:(e.x+e.w-e.matrix.e)/e.matrix.a-e.disR/z(n,pa)[pa],y:0};case"bottom":return{x:0,y:(e.y-e.matrix.f)/e.matrix.d-e.disY/z(n,pa)[pa]};case"right":return{x:(e.x-e.matrix.e)/e.matrix.a-e.disX/z(n,pa)[pa],y:0};case"top-left":return{x:(e.x+e.w-e.matrix.e)/e.matrix.a-e.disR/z(n,pa)[pa],y:(e.y+e.h-e.matrix.f)/e.matrix.d-e.disB/z(n,pa)[pa]};case"top-right":return{x:(e.x-e.matrix.e)/e.matrix.a-e.disX/z(n,pa)[pa],y:(e.y+e.h-e.matrix.f)/e.matrix.d-e.disB/z(n,pa)[pa]};case"bottom-left":return{x:(e.x+e.w-e.matrix.e)/e.matrix.a-e.disR/z(n,pa)[pa],y:(e.y-e.matrix.f)/e.matrix.d-e.disY/z(n,pa)[pa]};case"bottom-right":return{x:(e.x-e.matrix.e)/e.matrix.a-e.disX/z(n,pa)[pa],y:(e.y-e.matrix.f)/e.matrix.d-e.disY/z(n,pa)[pa]}}};r.scale(f,v,Number(a().x),Number(a().y));var o=r.a.toFixed(9),s=r.b.toFixed(9),l=r.c.toFixed(9),c=r.d.toFixed(9),u=r.e.toFixed(9),d=r.f.toFixed(9);e.node.setAttribute("transform","matrix(".concat(o,",").concat(s,",").concat(l,",").concat(c,",").concat(u,",").concat(d,")"))})),null===(r=z(n,ca)[ca].select)||void 0===r||r.autoResetBoxSelect(!1),null!==e&&void 0!==e&&e.pos)null===(c=z(n,ca)[ca].select)||void 0===c||null===(u=c.boxSelect())||void 0===u||u.removeAttribute("transform"),null===(d=z(n,ca)[ca].select)||void 0===d||d.autoResetBoxSelect(!0),setTimeout((function(){z(n,ua)[ua]=!1,z(n,da)[da]=!1}))}}}),Object.defineProperty(this,Ma,{writable:!0,value:function(){var e,t,i;z(n,ua)[ua]&&(null===(e=z(n,ca)[ca].select)||void 0===e||null===(t=e.boxSelect())||void 0===t||t.removeAttribute("transform"),null===(i=z(n,ca)[ca].select)||void 0===i||i.autoResetBoxSelect(!0,!0),setTimeout((function(){z(n,ua)[ua]=!1,z(n,da)[da]=!1})))}}),this.resize=function(e){var t,i;z(n,ua)[ua]=!0,z(n,pa)[pa]=z(n,ca)[ca].matrix.a;var r=null===(t=z(n,ca)[ca].select)||void 0===t?void 0:t.boxSelect();z(n,ya)[ya]=r.getMatrix(),z(n,ba)[ba]=r.getBBox();var a=r.getBoundingClientRect();null===(i=z(n,ca)[ca].select)||void 0===i||i.get().forEach((function(e){var t,i=null===(t=z(n,ca)[ca].stage)||void 0===t?void 0:t.getBoundingClientRect(),r=i.left,o=i.top,s=e.node,l=s.getMatrix(),c=s.getBoundingClientRect();e.matrixIterator=s.parentElement.getMatrixIterator();var u=e.matrixIterator,d=u.a,h=u.d,p=u.e,f=u.f;e.x=(c.x-r-p)/d,e.y=(c.y-o-f)/h,e.w=c.width/d,e.h=c.height/h,e.disX=(c.x-a.x)/l.a,e.disY=(c.y-a.y)/l.d,e.disR=(c.right-a.right)/l.a,e.disB=(c.bottom-a.bottom)/l.d,e.matrix=l})),z(n,_a)[_a](e)},this.isResizing=function(){return z(n,ua)[ua]},this.disabled=function(e){z(n,ha)[ha]=e},!t)throw new Error("stage not found!");z(this,ca)[ca]=t,z(this,xa)[xa]()})),Ea=Sa,Ca=F("div"),Ta=F("menus"),La=F("install"),Aa=F("clear"),Pa=s((function e(){var t=this;i(this,e),Object.defineProperty(this,Ca,{writable:!0,value:void 0}),Object.defineProperty(this,Ta,{writable:!0,value:[]}),Object.defineProperty(this,La,{writable:!0,value:function(){window.addEventListener("mousedown",z(t,Aa)[Aa]),window.addEventListener("blur",z(t,Aa)[Aa])}}),this.contextmenu=function(e){if(0!==z(t,Ta)[Ta].length){var n=e.clientX,i=e.clientY;z(t,Ca)[Ca]=document.createElement("div"),z(t,Ca)[Ca].id="lux-contextmenu",z(t,Ca)[Ca].innerHTML=Ra(),z(t,Ca)[Ca].onmousedown=function(e){e.stopPropagation()},z(t,Ta)[Ta].forEach((function(e){if("separator"===e.type){var n,i=document.createElement("hr");i.classList.add("lux-contextmenu-hr"),null===(n=z(t,Ca)[Ca])||void 0===n||n.append(i)}else{var r,a=document.createElement("div");a.innerHTML=e.label,a.classList.add("lux-contextmenu-item"),e.disabled&&a.classList.add("lux-contextmenu-item-disabled"),e.click instanceof Function&&(a.onclick=function(n){z(t,Aa)[Aa](),e.click(n)}),null===(r=z(t,Ca)[Ca])||void 0===r||r.append(a)}})),document.body.append(z(t,Ca)[Ca]),z(t,Ca)[Ca].style.cssText="left:".concat(n,"px;top:").concat(i,"px");var r=document.body.getBoundingClientRect(),a=z(t,Ca)[Ca].getBoundingClientRect(),o=a.bottom-r.bottom,s=a.right-r.right;z(t,Ca)[Ca].style.cssText="\n    left:".concat(s>0?n-s-10:n,"px;\n    top:").concat(o>0?i-o-10:i,"px")}},Object.defineProperty(this,Aa,{writable:!0,value:function(){var e,n;null===(e=z(t,Ca)[Ca])||void 0===e||e.remove(),null===(n=document.querySelector("#lux-contextmenu"))||void 0===n||n.remove()}}),this.menus=function(e){z(t,Ta)[Ta]=e},this.uninstall=function(){window.removeEventListener("mousedown",z(t,Aa)[Aa]),window.removeEventListener("blur",z(t,Aa)[Aa])},z(this,La)[La]()})),Oa=Pa,Ra=function(){return"<style>\n    #lux-contextmenu {\n      padding: 3px;\n      color: rgba(0,0,0,0.8);\n      background: #ffffff;\n      border: 1px solid #dcdcdc;\n      border-radius: 12px;\n      box-shadow: rgb(0 0 0 / 17%) 0px 3px 10px 0px;\n      position:fixed;\n      left:0;\n      top:0;\n      z-index:10;\n    }\n    .lux-contextmenu-item {\n      white-space: nowrap;\n      color: rgba(0,0,0,0.8);\n      border-radius: 8px;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      position: relative;\n      padding: 0px 23px 0px 23px;\n      min-height: 28px;\n      box-sizing: border-box;\n      cursor: default;\n      user-select: none;\n      font-size:13px;\n    }\n    .lux-contextmenu-item:hover {\n        background:rgba(0, 0, 0, 0.08);\n    }\n    .lux-contextmenu-item-disabled {\n      pointer-events: none;\n      opacity: 0.6;\n    }\n    .lux-contextmenu-hr{\n        min-height: 1px;\n        border: none;\n        width: 100%;\n        height: 1px;\n        margin: 4px 0px;\n        box-sizing: border-box;\n        background: rgba(0, 0, 0, 0.1);\n        transform:scale(1,0.5);\n    }\n  </style>"},Na=F("stage"),ka=F("isDisabeld"),Da=F("wheel"),Ia=s((function e(t){var n,r=this;if(i(this,e),Object.defineProperty(this,Na,{writable:!0,value:void 0}),Object.defineProperty(this,ka,{writable:!0,value:!1}),Object.defineProperty(this,Da,{writable:!0,value:function(e){var t,n,i;if(!z(r,ka)[ka]){e.stopPropagation();var a=z(r,Na)[Na].matrix;a.a>=3e3&&(a.a=3e3),a.a<=.001&&(a.a=.001);var o=a.a/100*10,s=null===(t=z(r,Na)[Na].boardView)||void 0===t?void 0:t.getBox(),l=(e.offsetX-s.x)*o*(1/a.a),c=(e.offsetY-s.y)*o*(1/a.a);a.e=e.deltaY<0?a.e-l:l+a.e,a.f=e.deltaY<0?a.f-c:a.f+c,e.deltaY<0?a.a+=o:a.a-=o,null===(n=z(r,Na)[Na].canvas)||void 0===n||n.setAttribute("transform","matrix(".concat(a.a,",0,0,").concat(a.a,",").concat(a.e,",").concat(a.f,")")),null===(i=z(r,Na)[Na].select)||void 0===i||i.autoResetBoxSelect(!1)}}}),this.scale=function(e){z(r,Da)[Da](e)},this.disabled=function(e){z(r,ka)[ka]=e},this.uninstall=function(){var e;null===(e=z(r,Na)[Na].stage)||void 0===e||e.removeEventListener("wheel",z(r,Da)[Da])},!t)throw new Error("stage not found!");z(this,Na)[Na]=t,null===(n=z(this,Na)[Na].stage)||void 0===n||n.addEventListener("wheel",z(this,Da)[Da],{passive:!1})})),ja=Ia,za=F("stage"),Ba=F("horizontal"),Fa=F("vertical"),Ua=F("isDragging"),Ha=F("unitRate"),Ga=F("install"),Va=F("createRulers"),Wa=F("watch"),qa=F("scaleCallback"),Xa=F("mousedown"),Za=F("mousemove"),Ya=F("style"),Ja=F("layout"),Qa=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,za,{writable:!0,value:void 0}),Object.defineProperty(this,Ba,{writable:!0,value:void 0}),Object.defineProperty(this,Fa,{writable:!0,value:void 0}),Object.defineProperty(this,Ua,{writable:!0,value:!1}),Object.defineProperty(this,Ha,{writable:!0,value:1}),Object.defineProperty(this,Ga,{writable:!0,value:function(){var e;z(n,Va)[Va](),z(n,Wa)[Wa](),z(n,Ba)[Ba]=document.querySelector("#lux-horizontal-ruler"),z(n,Fa)[Fa]=document.querySelector("#lux-vertical-ruler"),null===(e=z(n,za)[za].stage)||void 0===e||e.addEventListener("mousedown",z(n,Xa)[Xa]),document.addEventListener("mousemove",z(n,Za)[Za])}}),Object.defineProperty(this,Va,{writable:!0,value:function(){var e=z(n,za)[za].stage;e.style.position="relative";var t=document.createElement("div");t.id="lux-rulers",t.innerHTML=z(n,Ya)[Ya]()+z(n,Ja)[Ja](),null===e||void 0===e||e.append(t)}}),Object.defineProperty(this,Wa,{writable:!0,value:function(){z(n,za)[za].watch(z(n,za)[za].actions().SCALE,z(n,qa)[qa])}}),Object.defineProperty(this,qa,{writable:!0,value:function(){var e=z(n,za)[za].matrix,t=e.a,i=e.e,r=e.f,a=z(n,Ba)[Ba],o=z(n,Fa)[Fa],s=0;if(s=0<t&&t<=.001?5e4:.001<t&&t<=.0025?2e4:.0025<t&&t<=.01?1e4:.01<t&&t<=.025?5e3:.025<t&&t<=.05?2e3:.05<t&&t<=.1?1e3:.1<t&&t<=.25?500:.25<t&&t<=.5?200:.5<t&&t<=1?100:1<t&&t<=2.5?50:2.5<t&&t<=5?20:5<t&&t<=10?10:10<t&&t<=25?5:25<t&&t<=50?2:1,0===(null===a||void 0===a?void 0:a.childElementCount))for(var l=0;l<30;l++){var c=document.createElement("div");null===a||void 0===a||a.append(c),null===o||void 0===o||o.append(c.cloneNode(!0))}null===a||void 0===a||a.childNodes.forEach((function(e,r){var a=(r-Math.floor(i/(s*t*z(n,Ha)[Ha])))*s,o=i+a*t*z(n,Ha)[Ha];e.style.transform="translateX(".concat(o,"px)"),e.innerHTML=a.toString()})),null===o||void 0===o||o.childNodes.forEach((function(e,i){var a=(i-Math.floor(r/(s*t*z(n,Ha)[Ha])))*s,o=r+a*t*z(n,Ha)[Ha];e.style.transform="translateY(".concat(o,"px)"),e.innerHTML=a.toString()}))}}),Object.defineProperty(this,Xa,{writable:!0,value:function(e){var t,i=e.clientX,r=e.clientY,a=null===(t=z(n,Ba)[Ba])||void 0===t?void 0:t.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,c=a.bottom;i>o&&i<l&&r>s&&r<c&&e.stopPropagation()}}),Object.defineProperty(this,Za,{writable:!0,value:function(){}}),this.setUnitRate=function(e){z(n,Ha)[Ha]=e},this.uninstall=function(){z(n,za)[za].removeWatch(z(n,za)[za].actions().SCALE,z(n,qa)[qa]);var e=document.querySelector(".lux-horizontal-ruler");null===e||void 0===e||e.remove()},Object.defineProperty(this,Ya,{writable:!0,value:function(){return"\n      <style>\n      #lux-rulers{\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        contain: strict;\n        size: 14px;\n        pointer-events: none;\n      }\n      #lux-horizontal-ruler {\n          position: absolute;\n          top: 0px;\n          width: 100%;\n          height: 14px;\n          border-width: 0px 0px 1px;\n          border-style: none none solid;\n      }\n      #lux-horizontal-ruler > div {\n          width: 0px;\n          height: 100%;\n          top: 0px;\n          left: 0px;\n          padding: 0px 0px 0px 3px;\n          border-width: 0px 0px 0px 1px;\n          border-style: none none none solid;\n          color: rgba(0, 0, 0, 0.8);\n          border-color: rgba(0, 0, 0, 0.4);\n          position: absolute;\n          font-size: 9px;\n          box-sizing: border-box;\n          user-select: none;\n          white-space: pre;\n      }\n      #lux-vertical-ruler {\n          position: absolute;\n          top: 0px;\n          width: 14px;\n          height: 100%;\n          border-width: 0px 1px 0px 0px;\n          border-style: none solid none none;\n          writing-mode: vertical-lr;\n      }\n      #lux-vertical-ruler > div {\n        width: 100%;\n        height: 0px;\n        top: 0px;\n        left: 0px;\n        padding: 3px 0px 0px;\n        border-width: 1px 0px 0px;\n        border-style: solid none none;\n        color: rgba(0, 0, 0, 0.8);\n        border-color: rgba(0, 0, 0, 0.4);\n        position: absolute;\n        font-size: 9px;\n        box-sizing: border-box;\n        user-select: none;\n        white-space: pre;\n    }\n      #lux-corner-ruler {\n          pointer-events: all;\n          position: absolute;\n          left: 0px;\n          top: 0px;\n          width: 14px;\n          height: 14px;\n          box-sizing: border-box;\n          border-width: 0px 1px 1px 0px;\n          border-style: none solid solid none;\n      }\n      .lux-ruler{\n        background: white;\n        border-color: #dcdcdc;\n      }\n      </style>\n    "}}),Object.defineProperty(this,Ja,{writable:!0,value:function(){return'<div id="lux-horizontal-ruler" class="lux-ruler"></div><div id="lux-vertical-ruler" class="lux-ruler"></div><div id="lux-corner-ruler" class="lux-ruler"></div>'}}),!t)throw new Error("stage not found!");z(this,za)[za]=t,z(this,Ga)[Ga]()})),Ka=Qa,$a=F("TOOL"),eo=F("WATCH_ACTIONS"),to=F("listenSvgRoot"),no=F("listenScale"),io=F("selectCallback"),ro=F("rectCallback"),ao=F("updatedCallback"),oo=F("toolCallback"),so=F("scaleCallback"),lo=F("layerCallback"),co=F("textCallback"),uo=F("drawCallback"),ho=F("viewCallback"),po=F("dragBeforeCallback"),fo=F("initElement"),vo=F("registerDependencies"),mo=F("useShape"),go=F("useView"),yo=F("useSelect"),bo=F("useText"),xo=F("addEventListener"),wo=F("listenerScale"),_o=F("listenerSvgRoot"),Mo=s((function e(){var t=this;i(this,e),this.matrix={a:1,b:0,c:0,d:1,e:0,f:0},this.mmUnit=2.83464,this.CAN_CEHCKED_NODE=["rect","circle","image","text","ellipse","line","g","path","polygon","polyline"],this.currentType=void 0,this.options={fill:"#d8d8d8",stroke:"#000000",strokeWidth:1,fillOpacity:1,textFill:"#000000",textContent:"Enter your text here",fontSize:26,grippieSize:11,outerCircleSize:5,innerCircleSize:1.5,bezierControlSize:2.8,secondaryGgrippieSize:4},this.layer=void 0,this.stage=void 0,this.canvas=void 0,this.svgRoot=void 0,this.boardView=void 0,this.select=void 0,this.resize=void 0,this.hover=void 0,this.history=void 0,this.shape=void 0,this.pan=void 0,this.spline=void 0,this.view=void 0,this.freehand=void 0,this.text=void 0,this.clipboard=void 0,this.contextmenu=void 0,this.scale=void 0,this.ruler=void 0,Object.defineProperty(this,$a,{writable:!0,value:{SELECT:Symbol(),ASELECT:Symbol(),RECT:Symbol(),ELLIPSE:Symbol(),TRIANGLE:Symbol(),LINE:Symbol(),OTHER_SHAPE:Symbol(),SPLINE:Symbol(),FREEHAND:Symbol(),TEXT:Symbol(),PAN:Symbol(),VIEW:Symbol()}}),Object.defineProperty(this,eo,{writable:!0,value:{SELECTED:Symbol(),BOX_SELECT:Symbol(),HISTORY:Symbol(),VIEW:Symbol(),UPDATED:Symbol(),TOOL:Symbol(),SCALE:Symbol(),LAYER:Symbol(),TEXT:Symbol(),DRAW:Symbol(),DRAG_BEFORE:Symbol()}}),Object.defineProperty(this,to,{writable:!0,value:void 0}),Object.defineProperty(this,no,{writable:!0,value:void 0}),Object.defineProperty(this,io,{writable:!0,value:new Map}),Object.defineProperty(this,ro,{writable:!0,value:new Map}),Object.defineProperty(this,ao,{writable:!0,value:new Map}),Object.defineProperty(this,oo,{writable:!0,value:new Map}),Object.defineProperty(this,so,{writable:!0,value:new Map}),Object.defineProperty(this,lo,{writable:!0,value:new Map}),Object.defineProperty(this,co,{writable:!0,value:new Map}),Object.defineProperty(this,uo,{writable:!0,value:new Map}),Object.defineProperty(this,ho,{writable:!0,value:new Map}),Object.defineProperty(this,po,{writable:!0,value:new Map}),this.watch=function(e,n){var i;if(t.actions().SELECTED===e)null===(i=z(t,io)[io])||void 0===i||i.set(n,n);else if(t.actions().BOX_SELECT===e){var r;null===(r=z(t,ro)[ro])||void 0===r||r.set(n,n)}else if(t.actions().UPDATED===e){var a;null===(a=z(t,ao)[ao])||void 0===a||a.set(n,n)}else if(t.actions().TOOL===e){var o;null===(o=z(t,oo)[oo])||void 0===o||o.set(n,n)}else if(t.actions().SCALE===e){var s;null===(s=z(t,so)[so])||void 0===s||s.set(n,n)}else if(t.actions().LAYER===e){var l;null===(l=z(t,lo)[lo])||void 0===l||l.set(n,n)}else if(t.actions().TEXT===e){var c;null===(c=z(t,co)[co])||void 0===c||c.set(n,n)}else if(t.actions().DRAW===e){var u;null===(u=z(t,uo)[uo])||void 0===u||u.set(n,n)}else t.actions().VIEW===e?z(t,ho)[ho].set(n,n):t.actions().DRAG_BEFORE===e&&z(t,po)[po].set(n,n)},this.actions=function(){return z(t,eo)[eo]},this.tools=function(){return z(t,$a)[$a]},this.setViewBox=function(e,n){var i,r=null===(i=t.stage)||void 0===i?void 0:i.querySelector("svg");r.setAttribute("width",e.toFixed(9)),r.setAttribute("height",n.toFixed(9)),r.setAttribute("viewBox","0  0 ".concat(e," ").concat(n))},this.init=function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600,a=arguments.length>3?arguments[3]:void 0;if(!e)throw new Error("set content please.");t.options=Object.assign(t.options,a),t.stage=e;var o=Ao("svg");o.style.userSelect="none",o.setAttribute("width",i.toString()),o.setAttribute("height",r.toString()),o.setAttribute("viewBox","0  0 ".concat(i," ").concat(r)),o.style.background="#f0f0f0",o.innerHTML=Ze(t.matrix,t.options.grippieSize||11),null===(n=t.stage)||void 0===n||n.append(o),t.setViewSize(window.innerHeight/1.5,window.innerHeight/1.5),z(t,fo)[fo](),z(t,vo)[vo](),t.switchLayer(),z(t,xo)[xo]()},Object.defineProperty(this,fo,{writable:!0,value:function(){t.svgRoot=document.querySelector("#lux-svg-root"),t.canvas=document.querySelector('[uid="canvas"]'),t.boardView=document.querySelector("#background-outlines rect")}}),Object.defineProperty(this,vo,{writable:!0,value:function(){z(t,mo)[mo](),z(t,yo)[yo](),t.resize=new Ea(t),t.history=new re(t),z(t,go)[go](),t.spline=new Wn(t),t.freehand=new Ai(t),t.pan=new Wt(t),t.hover=new nr(t),t.clipboard=new lr(t),t.contextmenu=new Oa,t.scale=new ja(t),t.ruler=new Ka(t),z(t,bo)[bo]()}}),Object.defineProperty(this,mo,{writable:!0,value:function(){t.shape=new We(t,{start:function(){var e;null===(e=z(t,uo)[uo])||void 0===e||e.forEach((function(e){e("start")}))},done:function(e){var n;e.setAttribute("data-fill","0:0:0:0"),e.setAttribute("data-stroke","0:0:0:100"),null===(n=z(t,uo)[uo])||void 0===n||n.forEach((function(t){t("end",e)}))}})}}),Object.defineProperty(this,go,{writable:!0,value:function(){t.view=new Ji(t),t.view.watch((function(){z(t,ho)[ho].forEach((function(e){e()}))}))}}),Object.defineProperty(this,yo,{writable:!0,value:function(){var e,n,i,r,a,o;t.select=new la(t),null===(e=t.select)||void 0===e||e.watch(null===(n=t.select)||void 0===n?void 0:n.actions().SELECTED,(function(){z(t,io)[io].forEach((function(e){e()}))})),null===(i=t.select)||void 0===i||i.watch(null===(r=t.select)||void 0===r?void 0:r.actions().BOX_SELECT,(function(){z(t,ro)[ro].forEach((function(e){e()}))})),null===(a=t.select)||void 0===a||a.watch(null===(o=t.select)||void 0===o?void 0:o.actions().DRAG_BEFORE,(function(){z(t,po)[po].forEach((function(e){e()}))}))}}),Object.defineProperty(this,bo,{writable:!0,value:function(){t.text=new At(t),t.text.watch(t.text.actions().ADD,(function(e){var n;t.focusNode(e),null===(n=z(t,co)[co])||void 0===n||n.forEach((function(t){t(e,"add")}))})),t.text.watch(t.text.actions().EDIT,(function(e){var n,i;t.focusNode(e),null===(n=t.select)||void 0===n||n.autoResetBoxSelect(!0),null===(i=z(t,co)[co])||void 0===i||i.forEach((function(t){t(e,"edit")}))})),t.text.watch(t.text.actions().QUIT,(function(e){var n;null===(n=z(t,co)[co])||void 0===n||n.forEach((function(t){t(e,"quit")}))}))}}),Object.defineProperty(this,xo,{writable:!0,value:function(){z(t,wo)[wo](),z(t,_o)[_o]()}}),Object.defineProperty(this,wo,{writable:!0,value:function(){var e=document.querySelector("#transform-hud"),n=null===e||void 0===e?void 0:e.querySelectorAll(".grippie"),i=document.querySelector('[uid="origin-grippie"]');z(t,no)[no]=new MutationObserver((function(){for(var e,r,a=t.options.grippieSize||11,o=t.matrix.a,s=0;s<n.length;s++){var l=n[s];l.setAttribute("width",(a/o).toFixed(9)),l.setAttribute("height",(a/o).toFixed(9))}if(i.setAttribute("width",(a/o).toFixed(9)),i.setAttribute("height",(a/o).toFixed(9)),t.matrix=null===(e=t.canvas)||void 0===e?void 0:e.getMatrix(),null===(r=z(t,so)[so])||void 0===r||r.forEach((function(e){e(t.matrix)})),t.currentType===t.tools().SPLINE){var c=document.querySelectorAll(".secondary-node-grippie"),u=(t.options.secondaryGgrippieSize||4)/t.matrix.a;null===c||void 0===c||c.forEach((function(e){e.setAttribute("r",u.toFixed(9))}));var d=document.querySelector("[uid='control-point-1-grippie']"),h=document.querySelector("[uid='control-point-2-grippie']"),p=(t.options.bezierControlSize||2.8)/t.matrix.a;null===d||void 0===d||d.setAttribute("r",p.toFixed(9)),null===h||void 0===h||h.setAttribute("r",p.toFixed(9))}if(t.currentType===t.tools().FREEHAND||t.currentType===t.tools().SPLINE){var f=(t.options.outerCircleSize||5)/t.matrix.a,v=(t.options.innerCircleSize||1.5)/t.matrix.a,m=document.querySelectorAll(".outer-circle"),g=document.querySelectorAll(".inner-circle");null===m||void 0===m||m.forEach((function(e){e.setAttribute("r",f.toFixed(9))})),null===g||void 0===g||g.forEach((function(e){e.setAttribute("r",v.toFixed(9))}))}})),z(t,no)[no].observe(t.canvas,{attributes:!0,attributeFilter:["transform"]})}}),Object.defineProperty(this,_o,{writable:!0,value:function(){z(t,to)[to]=new MutationObserver((function(e){var n;e.forEach((function(e){e.addedNodes.forEach((function(e){if(3!==e.nodeType){if(t.CAN_CEHCKED_NODE.includes(null===e||void 0===e?void 0:e.localName)||null===e||void 0===e||e.setAttribute("pointer-events","none"),e instanceof SVGPathElement)null===e||void 0===e||e.toUpperCase();else e.querySelectorAll("path").forEach((function(e){e.toUpperCase()}));if(e instanceof SVGTextElement)e.style.whiteSpace="pre";else(null===e||void 0===e?void 0:e.querySelectorAll("text")).forEach((function(e){e.style.whiteSpace="pre"}))}})),e.removedNodes.forEach((function(e){var n,i=e;null===(n=t.select)||void 0===n||n.delete(i)}))})),null===(n=z(t,ao)[ao])||void 0===n||n.forEach((function(t){t(e)}))})),z(t,to)[to].observe(t.svgRoot,{childList:!0,subtree:!0})}}),this.tool=function(e,n){var i,r,a,o,s,l,c,u,d,h,p,f;if(!(!e||e===t.currentType||null!==(i=t.select)&&void 0!==i&&i.isDragging()||null!==(r=t.select)&&void 0!==r&&r.isDrawingRubber()||null!==(a=t.resize)&&void 0!==a&&a.isResizing()||null!==(o=t.shape)&&void 0!==o&&o.isDrawing())||n){t.currentType=e,t.currentType!==t.tools().PAN&&t.layerDisabled(),null===(s=t.select)||void 0===s||s.disabled(!0),null===(l=t.shape)||void 0===l||l.disabled(!0),null===(c=t.view)||void 0===c||c.disabled(!0),null===(u=t.spline)||void 0===u||u.disabled(!0),null===(d=t.freehand)||void 0===d||d.disabled(!0),null===(h=t.pan)||void 0===h||h.disabled(!0),null===(p=t.text)||void 0===p||p.disabled(!0),null===(f=t.text)||void 0===f||f.quit();var v,m,g,y,b=t.stage;if(t.currentType!==t.tools().SELECT&&t.currentType!==t.tools().ASELECT&&t.currentType!==t.tools().TEXT)null===(v=t.select)||void 0===v||v.toggleBoxSelect(!0);if(t.currentType===t.tools().SELECT)null===(m=t.select)||void 0===m||m.autoResetBoxSelect(!0),null===(g=t.select)||void 0===g||g.disabled(!1),b.style.cursor="auto",null===(y=t.select)||void 0===y||y.get().forEach((function(e){var n;if(!t.layer.contains(e.node))return null===(n=t.select)||void 0===n?void 0:n.reset()}));else if(t.currentType===t.tools().ASELECT){var x,w,_;null===(x=t.select)||void 0===x||x.autoResetBoxSelect(!0),null===(w=t.select)||void 0===w||w.disabled(!1),b.style.cursor="auto",null===(_=t.select)||void 0===_||_.get().forEach((function(e){var n;if("g"===e.node.localName)return null===(n=t.select)||void 0===n?void 0:n.reset()}))}else if(t.currentType===t.tools().PAN){var M;b.style.cursor="grab",null===(M=t.pan)||void 0===M||M.disabled(!1)}else if(t.currentType===t.tools().TEXT){var S,E,C,T,L;if(b.style.cursor="text",null===(S=t.text)||void 0===S||S.disabled(!1),1===(null===(E=t.select)||void 0===E?void 0:E.size())&&"text"===(null===(C=t.select)||void 0===C?void 0:C.first().node.localName))null===(T=t.text)||void 0===T||T.edit(null,null===(L=t.select)||void 0===L?void 0:L.first().node,!0)}else if(t.currentType===t.tools().SPLINE){var A;b.style.cursor="crosshair",null===(A=t.spline)||void 0===A||A.disabled(!1)}else if(t.currentType===t.tools().FREEHAND){var P;b.style.cursor="crosshair",null===(P=t.freehand)||void 0===P||P.disabled(!1)}else if(t.currentType===t.tools().VIEW){var O;b.style.cursor="auto",null===(O=t.view)||void 0===O||O.disabled(!1)}else if(t.currentType===t.tools().RECT||t.currentType===t.tools().ELLIPSE||t.currentType===t.tools().TRIANGLE||t.currentType===t.tools().LINE||t.currentType===t.tools().OTHER_SHAPE){var R;b.style.cursor="crosshair",null===(R=t.shape)||void 0===R||R.disabled(!1)}z(t,oo)[oo].forEach((function(e){e(t.currentType)}))}},this.setViewSize=function(e,n,i,r){var a,o,s,l;null===(a=t.boardView)||void 0===a||a.setAttribute("width",e.toString()),null===(o=t.boardView)||void 0===o||o.setAttribute("height",n.toString()),i&&(null===(s=t.boardView)||void 0===s||s.setAttribute("x",i.toString())),r&&(null===(l=t.boardView)||void 0===l||l.setAttribute("y",r.toString()))},this.getViewSize=function(){var e,n,i,r;return{width:Number(null===(e=t.boardView)||void 0===e?void 0:e.getAttribute("width"))||0,height:Number(null===(n=t.boardView)||void 0===n?void 0:n.getAttribute("height"))||0,x:Number(null===(i=t.boardView)||void 0===i?void 0:i.getAttribute("x"))||0,y:Number(null===(r=t.boardView)||void 0===r?void 0:r.getAttribute("y"))||0}},this.setBoardSize=function(e,n,i){var r,a;t.matrix.a=e||t.matrix.a,t.matrix.d=e||t.matrix.a,t.matrix.e=n||t.matrix.e,t.matrix.f=i||t.matrix.f;var o=t.matrix;null===(r=t.canvas)||void 0===r||r.setAttribute("transform","matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")")),null===(a=t.select)||void 0===a||a.autoResetBoxSelect(!1)},this.nodesCenterScale=function(e,n){var i,r,a,o,s,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Center Scale";if(0!==(null===(i=t.select)||void 0===i?void 0:i.size())){e/=100,n/=100,null===(r=t.history)||void 0===r||r.add(t.history.actions().SCALE,c);var u=null===(a=t.select)||void 0===a||null===(o=a.boxSelect())||void 0===o?void 0:o.getBoundingClientRect(),d=u.width,h=u.height,p=d*e-d,f=h*n-h,v=Math.abs(p)/2,m=Math.abs(f)/2;null===(s=t.resize)||void 0===s||s.resize({dataX:p,dataY:f,pos:"bottom-right"}),t.nodesMove("right",v,!1),t.nodesMove("down",m,!1),null===(l=t.select)||void 0===l||l.autoResetBoxSelect(!0)}},this.paragraphSplit=function(){var e,n;if(0===(null===(e=t.select)||void 0===e?void 0:e.size()))throw new Error("not checked node.");null===(n=t.select)||void 0===n||n.get().forEach((function(e){var t=e.node;if("text"===t.localName){var n=t,i=n.getAttribute("font-size"),r=n.getAttribute("font-family");if(!n.querySelector("tspan"))throw new Error("not has tspan.");n.childNodes.forEach((function(e){var t,a=Ao("text");a.setAttribute("font-size",i),a.setAttribute("font-family",r),a.append(document.createTextNode(e.textContent||"")),null===(t=n.parentNode)||void 0===t||t.append(a)}))}}))},this.paragraphSpacing=function(e){var n,i,r,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)throw new Error("not set direction.");if(0===(null===(n=t.select)||void 0===n?void 0:n.size()))throw new Error("not checked node.");null===(i=t.history)||void 0===i||i.add(t.history.actions().EDIT,"\u6bb5\u843d\u95f4\u8ddd");var l=0,c=null===(r=t.canvas)||void 0===r?void 0:r.getScale().sx,u=0,d=H(null===(a=t.select)||void 0===a?void 0:a.get().values());d.sort((function(t,n){return"v"===e?t.node.getBoundingClientRect().y-n.node.getBoundingClientRect().y:t.node.getBoundingClientRect().x-n.node.getBoundingClientRect().x})),d.forEach((function(t){if(u>0){var n=t.node,i=n.getBoundingClientRect(),r=i.y,a=i.x,o=(l-r)/c,d=(l-a)/c,h=n.getMatrix();n.setAttribute("transform","matrix(\n                 ".concat(h.a,",\n                 ").concat(h.b,",\n                 ").concat(h.c,",\n                 ").concat(h.d,",\n                 ").concat(h.e+("h"===e?d:0),",\n                 ").concat(h.f+("v"===e?o:0),")"))}var p=t.node.getBoundingClientRect(),f=p.width,v=p.height,m=p.bottom,g=p.right;"v"===e&&(l=0===u?m:l+v),"h"===e&&(l=0===u?g:l+f),l+=s*c,u++})),null===(o=t.select)||void 0===o||o.autoResetBoxSelect(!0)},this.filp=function(e){var n,i,r;if(!e)throw new Error("not set direction.");null===(n=t.history)||void 0===n||n.add(t.history.actions().EDIT,"\u955c\u50cf\u7ffb\u8f6c"),null===(i=t.select)||void 0===i||i.get().forEach((function(t){var n=t.node,i=t.node.getBBox(),r=n.getMatrix(),a=r.a*("x"===e?-1:1),o=r.d*("y"===e?-1:1),s=r.e+("x"===e?(2*i.x+i.width)*r.a:0),l=r.f+("y"===e?(2*i.y+i.height)*r.d:0);n.setAttribute("transform","matrix(\n             ".concat(a,",\n             ").concat(r.b,",\n             ").concat(r.c,",\n             ").concat(o,",\n             ").concat(s,",\n             ").concat(l,"\n           )"))})),null===(r=t.select)||void 0===r||r.autoResetBoxSelect(!0)},this.nodeAlign=function(e,n){var i,r,a,o,s;if(e&&(!t.select||0!==t.select.size())){null===(i=t.history)||void 0===i||i.add(t.history.actions().EDIT,"\u5143\u7d20\u5bf9\u9f50");var l=1===(null===(r=t.select)||void 0===r?void 0:r.size())?t.boardView:null===(a=t.select)||void 0===a?void 0:a.boxSelect(),c=null===l||void 0===l?void 0:l.getBoundingClientRect(),u=c.x,d=c.y,h=c.right,p=c.bottom,f=c.x+c.width/2,v=c.y+c.height/2;null===(o=t.select)||void 0===o||o.get().forEach((function(t){var i=new Xe,r=t.node,a=r.getBoundingClientRect(),o=a.x,s=a.y,l=a.right,c=a.bottom,m=a.x+a.width/2,g=a.y+a.height/2,y=r.getMatrix(),b=r.parentElement.getMatrixIterator();i.add(y.a,y.b,y.c,y.d,y.e,y.f),i.translate(Number(function(){if("v"===e)return 0;switch(n){case"left":return(u-o)/y.a/b.a;case"center":return(f-m)/y.a/b.a;case"right":return(h-l)/y.a/b.a}}()),Number(function(){if("h"===e)return 0;switch(n){case"top":return(d-s)/y.d/b.d;case"center":return(v-g)/y.d/b.d;case"bottom":return(p-c)/y.d/b.d}}())),r.setAttribute("transform","matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")"))})),null===(s=t.select)||void 0===s||s.autoResetBoxSelect(!0)}},this.nodesPosition=function(e,n){var i,r,a,o=(null===(i=t.select)||void 0===i?void 0:i.boxSelect()).getBox(),s=null===(r=t.boardView)||void 0===r?void 0:r.getBox(),l=e*t.matrix.a-(o.x-s.x),c=n*t.matrix.d-(o.y-s.y);null===(a=t.select)||void 0===a||a.get().forEach((function(e){var t=e.node.parentElement.getMatrixIterator(),n=t.a,i=t.d;e.matrix=e.node.getMatrix(),e.node.setAttribute("transform","matrix(\n          ".concat(e.matrix.a,",\n          ").concat(e.matrix.b,",\n          ").concat(e.matrix.c,",\n          ").concat(e.matrix.d,",\n          ").concat(e.matrix.e+l/n,",\n          ").concat(e.matrix.f+c/i,")"))}))},this.switchLayer=function(e){var n;t.layer=e||t.svgRoot,null===(n=z(t,lo)[lo])||void 0===n||n.forEach((function(e){e(t.layer)})),t.layerDisabled()},this.layerDisabled=function(){var e;if(0!==(null===(e=t.layer)||void 0===e?void 0:e.children.length))for(var n=t.svgRoot,i=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT),r=i.nextNode();null!==r;)r.classList.remove("lux-disabled"),"g"===r.localName||r.contains(t.layer)||t.layer.contains(r)||"none"===window.getComputedStyle(r).pointerEvents||t.currentType!==t.tools().SELECT||r.classList.add("lux-disabled"),r=i.nextNode()},this.focusNode=function(e){var n;if(e&&(null===(n=t.select)||void 0===n||!n.has(e)))return"g"===e.localName&&(t.layer=e.parentElement,t.switchLayer(t.layer)),new Promise((function(n){var i,r,a,o;t.select&&(null===(i=t.select)||void 0===i?void 0:i.size())>0&&(null===(r=t.select)||void 0===r||r.clear()),null===(a=t.select)||void 0===a||a.set(e,{node:e}),null===(o=t.select)||void 0===o||o.autoResetBoxSelect(!0),n(e)}))},this.nodesMove=function(e,n){var i,r,a;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(null===(i=t.history)||void 0===i||i.add(t.history.actions().KEYBOARD_MOVE,"\u952e\u76d8\u79fb\u52a8")),null===(r=t.select)||void 0===r||r.get().forEach((function(t){var i=t.node,r=i.getMatrix(),a=i.parentElement.getCTM(),o=0,s=0;switch(e){case"up":s=-n;break;case"down":s=n;break;case"left":o=-n;break;case"right":o=n}var l=a.a*a.d,c=a.b*a.c,u=a.d/(l-c)*o,d=a.a/(l-c)*s,h=u-d/a.a*a.c,p=d-u/a.d*a.b,f=(r.e+h).toFixed(9),v=(r.f+p).toFixed(9);i.setAttribute("transform","matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(f,",").concat(v,")"))})),null===(a=t.select)||void 0===a||a.autoResetBoxSelect(!0)},this.front=function(){var e,n,i,r;null===(e=t.history)||void 0===e||e.add(t.history.actions().REORDER,"\u7f6e\u4e8e\u9876\u5c42"),(null===(n=t.select)||void 0===n?void 0:n.first().node.parentNode).prepend(null===(i=t.select)||void 0===i?void 0:i.first().node),null===(r=t.history)||void 0===r||r.end()},this.back=function(){var e,n,i,r;null===(e=t.history)||void 0===e||e.add(t.history.actions().REORDER,"\u7f6e\u4e8e\u5e95\u5c42"),(null===(n=t.select)||void 0===n?void 0:n.first().node.parentNode).append(null===(i=t.select)||void 0===i?void 0:i.first().node),null===(r=t.history)||void 0===r||r.end()},this.raise=function(){var e,n,i,r;null===(e=t.history)||void 0===e||e.add(t.history.actions().REORDER,"\u5411\u4e0a\u4e00\u5c42");var a=null===(n=t.select)||void 0===n?void 0:n.first().node.nextElementSibling;null===a||void 0===a||a.after(null===(i=t.select)||void 0===i?void 0:i.first().node),null===(r=t.history)||void 0===r||r.end()},this.lower=function(){var e,n,i,r;null===(e=t.history)||void 0===e||e.add(t.history.actions().REORDER,"\u5411\u4e0b\u4e00\u5c42");var a=null===(n=t.select)||void 0===n?void 0:n.first().node.previousElementSibling;null===a||void 0===a||a.before(null===(i=t.select)||void 0===i?void 0:i.first().node),null===(r=t.history)||void 0===r||r.end()},this.group=function(){var e,n,i,r;null===(e=t.history)||void 0===e||e.add(t.history.actions().GROUP,"\u7f16\u7ec4");var a=null===(n=t.select)||void 0===n?void 0:n.first().node,o=(new So).node;a.before(o),null===(i=t.select)||void 0===i||i.get().forEach((function(e){var t=e.node;o.append(t)})),null===(r=t.select)||void 0===r||r.reset(),t.focusNode(o)},this.unGroup=function(e){var n,i,r,a,o;if(0!==(null===(n=t.select)||void 0===n?void 0:n.checkedsGroups().size)){null===(i=t.history)||void 0===i||i.add(t.history.actions().GROUP,"\u89e3\u9664\u7f16\u7ec4");var s=[],l=e||(null===(r=t.select)||void 0===r?void 0:r.checkedsGroups());null===l||void 0===l||l.forEach((function(e){for(var t=e.getMatrix(),n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),i=n.nextNode();null!==i;){if(i!==e){var r=i.getMatrix(),a=r.a*t.a+r.c*t.b,o=r.b*t.a+r.d*t.b,l=r.a*t.c+r.c*t.d,c=r.b*t.c+r.d*t.d,u=r.e*t.sx+t.e,d=r.f*t.sy+t.f;i.setAttribute("transform","matrix(".concat(a,",").concat(o,",").concat(l,",").concat(c,",").concat(u,",").concat(d,")")),e.before(i),s.push(i)}i=n.nextNode()}e.remove()})),null===(a=t.select)||void 0===a||a.reset(),null===s||void 0===s||s.forEach((function(e){var n;null===(n=t.select)||void 0===n||n.set(e,{node:e})})),null===(o=t.select)||void 0===o||o.autoResetBoxSelect(!0)}},this.removeWatch=function(e,n){t.actions().SELECTED===e?z(t,io)[io].delete(n):t.actions().BOX_SELECT===e?z(t,ro)[ro].delete(n):t.actions().UPDATED===e?z(t,ao)[ao].delete(n):t.actions().TOOL===e?z(t,oo)[oo].delete(n):t.actions().SCALE===e?z(t,so)[so].delete(n):t.actions().LAYER===e?z(t,lo)[lo].delete(n):t.actions().TEXT===e?z(t,co)[co].delete(n):t.actions().DRAW===e?z(t,uo)[uo].delete(n):t.actions().VIEW===e?z(t,ho)[ho].delete(n):t.actions().DRAG_BEFORE===e&&z(t,po)[po].delete(n)},this.uninstall=function(){var e,n,i,r,a,o,s,l,c,u,d,h,p,f,v,m;null===(e=z(t,no)[no])||void 0===e||e.disconnect(),null===(n=z(t,to)[to])||void 0===n||n.disconnect(),null===(i=t.shape)||void 0===i||i.disabled(!0),null===(r=t.view)||void 0===r||r.disabled(!0),null===(a=t.freehand)||void 0===a||a.disabled(!0),null===(o=t.pan)||void 0===o||o.disabled(!0),null===(s=t.hover)||void 0===s||s.disabled(!0),null===(l=t.clipboard)||void 0===l||l.disabled(!0),null===(c=t.select)||void 0===c||c.disabled(!0),null===(u=t.resize)||void 0===u||u.disabled(!0),null===(d=t.view)||void 0===d||d.uninstall(),null===(h=t.select)||void 0===h||h.uninstall(),null===(p=t.history)||void 0===p||p.uninstall(),null===(f=t.hover)||void 0===f||f.uninstall(),null===(v=t.text)||void 0===v||v.uninstall(),null===(m=t.scale)||void 0===m||m.uninstall()}})),So=function(){function e(t){i(this,e),this.node=void 0;var n=Ao("g");t&&Object.keys(t).forEach((function(e){n.setAttribute(Po(e),t[e])})),this.node=n}return s(e,[{key:"add",value:function(e){var t;null===(t=this.node)||void 0===t||t.append(e.node)}}]),e}(),Eo=s((function e(t){i(this,e),this.node=void 0;var n=Ao("rect");Object.keys(t).forEach((function(e){n.setAttribute(Po(e),t[e])})),this.node=n})),Co=s((function e(t){i(this,e),this.node=void 0;var n=Ao("line");t&&Object.keys(t).forEach((function(e){n.setAttribute(Po(e),t[e])})),this.node=n})),To=s((function e(t){i(this,e),this.node=void 0;var n=Ao("text");t&&Object.keys(t).forEach((function(e){"content"===e?(n.innerHTML=t[e],n.innerHTML=n.innerHTML.replace(/[\n]/gm,"")):n.setAttribute(Po(e),t[e])})),this.node=n})),Lo=s((function e(t){i(this,e),this.node=void 0;var n=Ao("image");n.setAttributeNS("http://www.w3.org/1999/xlink","href",t.href),Object.keys(t).forEach((function(e){"content"===e?n.innerHTML=t[e]:n.setAttribute(Po(e),t[e])})),this.node=n})),Ao=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg",e);return t.setAttribute("data-fill","text"===e?"0:0:0:100":"0:0:0:0"),"text"!==e&&t.setAttribute("data-stroke","0:0:0:100"),t},Po=function(e){return e.split("").map((function(e){return e.toUpperCase()===e?e="-"+e.toLowerCase():e})).join("")},Oo=F("stage"),Ro=F("layersMain"),No=F("isDragging"),ko=F("layers"),Do=F("watch"),Io=F("watchSelect"),jo=F("watchUpdated"),zo=F("watchHistory"),Bo=F("addNodes"),Fo=F("addItems"),Uo=F("removeNodes"),Ho=F("onmouseenter"),Go=F("mousedown"),Vo=F("mousemove"),Wo=F("mouseup"),qo=F("ondblclick"),Xo=F("toggleExpand"),Zo=F("expand"),Yo=F("expandAll"),Jo=F("toggleLock"),Qo=F("toggleVisibility"),Ko=F("clearSelect"),$o=F("layerDepth"),es=F("findParent"),ts=F("style"),ns=F("layout"),is=s((function e(t){var n=this;if(i(this,e),Object.defineProperty(this,Oo,{writable:!0,value:void 0}),Object.defineProperty(this,Ro,{writable:!0,value:void 0}),Object.defineProperty(this,No,{writable:!0,value:!1}),Object.defineProperty(this,ko,{writable:!0,value:new Map}),this.install=function(e){if(!e)throw new Error("container not found");document.querySelector(e).innerHTML=z(n,ns)[ns](),document.addEventListener("mousemove",z(n,Vo)[Vo]),document.addEventListener("mouseup",z(n,Wo)[Wo])},Object.defineProperty(this,Do,{writable:!0,value:function(){var e;z(n,Oo)[Oo].watch(z(n,Oo)[Oo].actions().SELECTED,z(n,Io)[Io]),z(n,Oo)[Oo].watch(z(n,Oo)[Oo].actions().UPDATED,z(n,jo)[jo]),null===(e=z(n,Oo)[Oo].history)||void 0===e||e.watch(z(n,zo)[zo])}}),Object.defineProperty(this,Io,{writable:!0,value:function(){var e,t;z(n,Ko)[Ko](),0!==(null===(e=z(n,Oo)[Oo].select)||void 0===e?void 0:e.size())&&(null===(t=z(n,Oo)[Oo].select)||void 0===t||t.get().forEach((function(e){var t,i=e.node,r=null===(t=z(n,ko)[ko].get(i))||void 0===t?void 0:t.layerNode;if(null!==r&&void 0!==r&&r.hasAttribute("data-selected")||(null===r||void 0===r||r.toggleAttribute("data-selected"),null===r||void 0===r||r.scrollIntoView({block:"nearest"})),!r&&i.parentElement!==z(n,Oo)[Oo].svgRoot){var a=z(n,ko)[ko].get(z(n,es)[es](i)),o=a.layerNode;o[Object.getOwnPropertySymbols(o)[0]].contains(i)&&z(n,Yo)[Yo](a,i)}})))}}),Object.defineProperty(this,jo,{writable:!0,value:function(e){z(n,Ro)[Ro]=document.querySelector("#lux-layers-main"),e.forEach((function(e){z(n,Bo)[Bo](e),z(n,Uo)[Uo](e)}))}}),Object.defineProperty(this,zo,{writable:!0,value:function(e){var t,i,r,a=null===(t=z(n,Oo)[Oo].history)||void 0===t?void 0:t.index(),o=null===(i=z(n,Oo)[Oo].history)||void 0===i?void 0:i.item(a);(null===o||void 0===o?void 0:o.action)===(null===(r=z(n,Oo)[Oo].history)||void 0===r?void 0:r.actions().TITLE)&&o.record.forEach((function(t){var i,r=(null===(i=z(n,ko)[ko].get(t.target))||void 0===i?void 0:i.layerNode).querySelector(".lux-layers-label");"undo"===e?r.innerHTML=t.oldValue||n.tagName(t.target.nodeName):"redo"===e&&(r.innerHTML=t.newValue||n.tagName(t.target.nodeName))}))}}),Object.defineProperty(this,Bo,{writable:!0,value:function(e){null===e||void 0===e||e.addedNodes.forEach((function(t){if(e.target===z(n,Oo)[Oo].svgRoot){var i,r=null===(i=z(n,Ro)[Ro])||void 0===i?void 0:i.querySelector("#lux-layers-items");z(n,Fo)[Fo](t,r,e)}else{document.querySelectorAll("[data-expandable]").forEach((function(i){if(i.hasAttribute("data-expanded")){var r=i.querySelector(".lux-layers-children"),a=i[Object.getOwnPropertySymbols(i)[0]];e.target===a&&z(n,Fo)[Fo](t,r,e)}}))}}))}}),Object.defineProperty(this,Fo,{writable:!0,value:function(e,t,i){var r,a;if(3!==e.nodeType&&n.tagName(e.localName)){var o,s=document.createElement("div"),l=z(n,$o)[$o](t);if(s.setAttribute("data-depth",l),s.classList.add("lux-layers-item"),"g"===e.localName&&s.toggleAttribute("data-expandable"),s[Symbol()]=e,null===(r=z(n,ko)[ko])||void 0===r||r.set(e,{depth:l,layerNode:s}),!s.hasAttribute("data-selected")&&null!==(a=z(n,Oo)[Oo].select)&&void 0!==a&&a.has(e)&&s.toggleAttribute("data-selected"),s.innerHTML='\n          <div class="lux-layers-item-background"></div>\n          <div style="padding-left:'.concat(24*l,'px" \n              class="lux-layers-main">\n              <div class="lux-layers-arrow">\n              <svg class="lux-layers-arrow-icon" viewBox="0 0 48 48">\n                  <path fill="currentColor" d="M20 12L32 24L20 36V12Z" />\n              </svg>\n              </div>\n              <div class="lux-layers-icon">').concat(n.icons(e.localName),'</div>\n              <div class="lux-layers-label">').concat(e.id?e.id:n.tagName(e.localName),'</div>\n              <div class="lux-layers-action-buttons">\n                <div class="lux-lock-button" ').concat("none"===e.getAttribute("pointer-events")&&"style='opacity:1;visibility:visible;'",">\n                ").concat(n.icons("lock"),'\n                </div>\n                <div class="lux-visibility-button"').concat("none"===e.getAttribute("display")&&"style='opacity:1;visibility:visible;'",">\n                ").concat(n.icons("eyes"),'\n                </div>\n              </div>\n          </div>\n          <div class="lux-layers-children-outer">\n              <div class="lux-layers-children"></div>\n          </div>\n          '),null!==i&&void 0!==i&&i.nextSibling){var c,u=null===i||void 0===i?void 0:i.nextSibling,d=null===(c=z(n,ko)[ko].get(u))||void 0===c?void 0:c.layerNode;null===t||void 0===t||t.insertBefore(s,d)}else if(null!==i&&void 0!==i&&i.previousSibling)try{var h,p=null===i||void 0===i?void 0:i.previousSibling,f=null===(h=z(n,ko)[ko].get(p))||void 0===h?void 0:h.layerNode;null===t||void 0===t||t.insertBefore(s,f.nextSilbing)}catch(b){t.append(s)}else t.append(s);if(l>0)null===(o=z(n,Oo)[Oo].select)||void 0===o||o.get().forEach((function(e){var t,i=e.node,r=null===(t=z(n,ko)[ko].get(i))||void 0===t?void 0:t.layerNode;!r||null!==r&&void 0!==r&&r.hasAttribute("data-selected")||(r.toggleAttribute("data-selected"),r.scrollIntoView({block:"nearest"}))}));s.ondblclick=function(e){e.stopPropagation(),z(n,qo)[qo](e,s)},s.onmousedown=function(e){e.stopPropagation(),z(n,Go)[Go](e,s)},s.onmouseenter=function(e){e.stopPropagation(),z(n,Ho)[Ho](s)},s.onmouseout=function(){var e;null===(e=z(n,Oo)[Oo].hover)||void 0===e||e.closeOutline()};var v=s.querySelector(".lux-layers-arrow");v.onclick=function(e){z(n,Xo)[Xo](e,s)};var m=s.querySelector(".lux-layers-action-buttons");m.ondblclick=m.onmousedown=v.ondblclick=v.onmousedown=function(e){e.stopPropagation()};var g=s.querySelector(".lux-lock-button"),y=s.querySelector(".lux-visibility-button");g.onclick=function(e){e.stopPropagation(),z(n,Jo)[Jo](e,s,g)},y.onclick=function(e){e.stopPropagation(),z(n,Qo)[Qo](e,s,y)}}}}),Object.defineProperty(this,Uo,{writable:!0,value:function(e){null===e||void 0===e||e.removedNodes.forEach((function(e){var t,i;3!==e.nodeType&&(null===(t=z(n,ko)[ko].get(e))||void 0===t||null===(i=t.layerNode)||void 0===i||i.remove(),z(n,ko)[ko].delete(e))}))}}),Object.defineProperty(this,Ho,{writable:!0,value:function(e){var t,i=e[Object.getOwnPropertySymbols(e)[0]];"none"!==getComputedStyle(i).display&&(z(n,No)[No]||null===(t=z(n,Oo)[Oo].hover)||void 0===t||t.highLight(i))}}),Object.defineProperty(this,Go,{writable:!0,value:function(e,t){if(0===e.button&&(z(n,No)[No]=!0,null===t||void 0===t||!t.hasAttribute("data-selected"))){e.shiftKey||z(n,Ko)[Ko]();var i=t[Object.getOwnPropertySymbols(t)[0]];z(n,Oo)[Oo].focusNode(i)}}}),Object.defineProperty(this,Vo,{writable:!0,value:function(e){var t,i;if(z(n,No)[No]){var r=e.clientY,a=e.target.parentNode,o=Number(null===a||void 0===a?void 0:a.dataset.depth),s=null===(t=z(n,Ro)[Ro])||void 0===t?void 0:t.getBoundingClientRect().y,l=null===a||void 0===a?void 0:a.getBoundingClientRect(),c=l.y,u=l.bottom,d=l.height,h=document.querySelector("#drop-marker");h.style.visibility="visible";var p=-99999999,f=a.querySelector(".lux-layers-main");f.style.background="none",a.hasAttribute("data-expandable")&&!a.hasAttribute("data-expanded")&&r>=c+d/3&&r<c+d/3*2?f.style.background="#cbe5ff":p=r>c+d/2?u:c;var v=Number(null===(i=z(n,Ro)[Ro])||void 0===i?void 0:i.scrollTop);document.querySelectorAll("[data-selected]").forEach((function(e){var t=e.getBoundingClientRect(),n=t.y,i=t.bottom;p!==n&&p!==i||"visible"===h.style.visibility&&(h.style.visibility="hidden")})),h.style.cssText="\n      top:".concat(p-Number(s)+v,"px;\n      left:").concat(24*o+16,"px")}}}),Object.defineProperty(this,Wo,{writable:!0,value:function(e){if(z(n,No)[No]){z(n,No)[No]=!1;var t=e.clientY;document.querySelector("#drop-marker").style.visibility="hidden";var i=e.target.parentNode;if(null===i||void 0===i||!i.hasAttribute("data-selected")){var r=null===i||void 0===i?void 0:i.getBoundingClientRect(),a=r.y,o=r.height,s=t>a+o/2?"after":"before",l=i[Object.getOwnPropertySymbols(i)[0]];if(i.hasAttribute("data-expandable")&&!i.hasAttribute("data-expanded"))i.querySelector(".lux-layers-main").style.background="none",t>=a+o/3&&t<a+o/3*2&&(s="append");document.querySelectorAll("[data-selected]").forEach((function(e){if(i!==e){var t=e[Object.getOwnPropertySymbols(e)[0]],n=t.parentElement.getMatrixIterator();"before"===s?l.before(t):"after"===s?l.after(t):l.append(t),function(e,t){var n,i=null===(n=e.parentElement)||void 0===n?void 0:n.getMatrixIterator(),r=i.angle+t.angle,a=t.sx/i.sx,o=t.sy/i.sy,s=i.a,l=i.d,c=i.e,u=i.f,d=(t.e-c)/s,h=(t.f-u)/l,p=e.getMatrix(),f=new Xe;f.add(p.a,p.b,p.c,p.d,p.e,p.f);var v=f.rotate(r);e.setAttribute("transform","matrix(\n           ".concat(v.a*a,",\n           ").concat(v.b*a,",\n           ").concat(v.c*o,",\n           ").concat(v.d*o,",\n           ").concat(v.e*a+d,",").concat(v.f*o+h,")"))}(t,n)}}))}}}}),Object.defineProperty(this,qo,{writable:!0,value:function(e,t){e.stopPropagation();var i=t[Object.getOwnPropertySymbols(t)[0]],r=t.querySelector(".lux-layers-label");r.toggleAttribute("hidden");var a=document.createElement("input");a.classList.add("lux-layers-rename"),a.setAttribute("value",r.innerHTML),r.before(a),a.select(),a.onkeydown=function(e){e.stopPropagation()},a.onchange=function(e){var t,a,o;e.stopPropagation(),null===(t=z(n,Oo)[Oo].history)||void 0===t||t.add(z(n,Oo)[Oo].history.actions().TITLE,"\u4fee\u6539\u6807\u9898"),i.id=r.innerHTML=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value,""===r.innerHTML&&(r.innerHTML=n.tagName(i.localName)),null===(o=z(n,Oo)[Oo].history)||void 0===o||o.end()},a.onblur=function(){a.remove(),r.removeAttribute("hidden")},a.ondblclick=function(e){e.stopPropagation()}}}),Object.defineProperty(this,Xo,{writable:!0,value:function(e,t){e.stopPropagation(),z(n,Zo)[Zo](t)}}),Object.defineProperty(this,Zo,{writable:!0,value:function(e){var t=e.querySelector(".lux-layers-children");e.hasAttribute("data-expanded")?(e.querySelectorAll(".lux-layers-item").forEach((function(e){var t=e[Object.getOwnPropertySymbols(e)[0]];z(n,ko)[ko].delete(t)})),t.innerHTML=""):e[Object.getOwnPropertySymbols(e)[0]].childNodes.forEach((function(e){z(n,Fo)[Fo](e,t)}));e.toggleAttribute("data-expanded")}}),Object.defineProperty(this,Yo,{writable:!0,value:function(e,t){var i=e.layerNode,r=i[Object.getOwnPropertySymbols(i)[0]];(z(n,Zo)[Zo](i),r!==t.parentElement)&&i.querySelectorAll(".lux-layers-item").forEach((function(e){var i=e[Object.getOwnPropertySymbols(e)[0]];i.contains(t)&&z(n,Yo)[Yo](z(n,ko)[ko].get(i),t)}))}}),Object.defineProperty(this,Jo,{writable:!0,value:function(e,t,n){var i=t[Object.getOwnPropertySymbols(t)[0]];"none"!==i.getAttribute("pointer-events")?(i.setAttribute("pointer-events","none"),n.style.visibility="visible",n.style.opacity=1):(i.removeAttribute("pointer-events"),n.removeAttribute("style"))}}),Object.defineProperty(this,Qo,{writable:!0,value:function(e,t,n){e.stopPropagation();var i=t[Object.getOwnPropertySymbols(t)[0]];"none"!==i.getAttribute("display")?(i.setAttribute("display","none"),n.style.visibility="visible",n.style.opacity=1):(i.removeAttribute("display"),n.removeAttribute("style"))}}),Object.defineProperty(this,Ko,{writable:!0,value:function(){document.querySelectorAll("[data-selected]").forEach((function(e){e.removeAttribute("data-selected")}))}}),Object.defineProperty(this,$o,{writable:!0,value:function(e){var t=0;return e!==z(n,Ro)[Ro]&&(e.hasAttribute("data-expandable")&&t++,t+=z(n,$o)[$o](e.parentElement)),t}}),Object.defineProperty(this,es,{writable:!0,value:function(e){var t=e;return z(n,ko)[ko].get(e)||(t=z(n,es)[es](e.parentElement)),t}}),this.uninstall=function(){var e;null===(e=z(n,Oo)[Oo].history)||void 0===e||e.removeWatch(z(n,zo)[zo]),z(n,Oo)[Oo].removeWatch(z(n,Oo)[Oo].actions().SELECTED,z(n,Io)[Io]),z(n,Oo)[Oo].removeWatch(z(n,Oo)[Oo].actions().UPDATED,z(n,jo)[jo]),document.removeEventListener("mousemove",z(n,Vo)[Vo]),document.removeEventListener("mouseup",z(n,Wo)[Wo])},Object.defineProperty(this,ts,{writable:!0,value:function(){return"<style>\n          #lux-layers-main{\n            height: 100%;\n            width: 100%;\n            position: relative;\n            overflow-x: hidden;\n            overflow-y: auto;\n            background-color: #ffffff;\n            user-select: none;\n          }\n \n          .lux-layers-item{\n              position: relative;\n          }\n \n          .lux-layers-item[data-selected] > .lux-layers-main{\n              color:white;\n          }\n \n          .lux-layers-item[data-selected] > .lux-layers-item-background {\n              background: #409eff;\n          }\n \n          .lux-layers-item > .lux-layers-item-background {\n              position: absolute;\n              z-index: 0;\n              top: 0px;\n              left: 0px;\n              width: 100%;\n              height: 30px;\n          }\n \n          .lux-layers-item > .lux-layers-main .lux-layers-arrow-icon {\n              width: 17px;\n              height: 17px;\n              min-width: 10px;\n              transition: transform 0.2s ease-in-out 0s;\n              transform:  rotate(0);\n              pointer-events: none;\n          }\n \n          .lux-layers-item[data-expanded] > .lux-layers-main .lux-layers-arrow-icon {\n              transform: rotate(90deg);\n          }\n \n          .lux-layers-item[data-expandable] > .lux-layers-main .lux-layers-arrow {\n              visibility: visible;\n              pointer-events: all;\n          }\n \n          .lux-layers-main{\n              position: relative;\n              z-index: 1;\n              height: 30px;\n              padding: 0px 0px 0px 24px;\n              display: flex;\n              align-items: center;\n          }\n  \n          .lux-layers-arrow{\n              width: 27px;\n              min-width: 27px;\n              height: 20px;\n              display: flex;\n              align-items: center;\n              visibility: hidden;\n              justify-content: center;\n              pointer-events: none;\n          }\n \n          .lux-layers-icon{\n            width:17px;\n            height:17px;\n            min-width:17px;\n            pointer-events: none;\n          }\n  \n          .lux-layers-label{\n             margin-left: 10px;\n             font-size: 13px;\n             white-space: pre;\n             overflow: hidden;\n             text-overflow: ellipsis;\n             pointer-events: none;\n          }\n \n          .lux-layers-action-buttons{\n              margin-left: auto;\n              display: flex;\n              align-items:center;\n          }\n \n          .lux-layers-item .lux-layers-children-outer {\n              overflow:hidden;\n          }\n \n          .lux-layers-item .lux-layers-children-outer .lux-layers-children {\n              transform-origin: 0px 0px;\n              transition: transform 0.2s ease-in-out 0s;\n          }\n \n          .lux-lock-button{\n            width: 20px;\n            height: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            visibility: hidden;\n            pointer-events: none;\n            opacity: 0.3;\n          }\n \n          .lux-visibility-button {\n            width: 20px;\n            height: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            visibility: hidden;\n            pointer-events: none;\n            opacity: 0.3;\n            padding-right: 4px;\n          }\n  \n          .lux-layers-main:hover .lux-visibility-button,.lux-layers-main:hover .lux-lock-button{\n            visibility: visible;\n            pointer-events: all;\n          }\n  \n          .lux-layers-rename{\n            border:0;\n            margin:0;\n            margin-left: 6px;\n            padding:2px 4px;\n            outline:none;\n            border-radius:4px;\n            background:#fff;\n            color:#000;\n            font-size: 13px;\n            white-space: pre;\n          }\n  \n          #drop-marker {\n              position: absolute;\n              z-index: 100;\n              top: 23px;\n              height: 2px;\n              display: flex;\n              align-items: center;\n              color: rgb(53, 132, 228);\n              background: rgb(53, 132, 228);\n              width:calc(100% - 16px);\n              box-shadow: rgb(255 255 255 / 70%) 0px 0px 0px 1px;\n              pointer-events: none;\n          }\n  \n          #drop-marker #drop-marker-circle {\n              width: 8px;\n              height: 8px;\n              box-sizing: border-box;\n              border: 2px solid currentcolor;\n              background: white;\n              border-radius: 99px;\n              box-shadow: rgb(255 255 255 / 70%) 0px 0px 0px 1px;\n          }\n      </style>"}}),Object.defineProperty(this,ns,{writable:!0,value:function(){return"".concat(z(n,ts)[ts](),'\n      <div id="lux-layers-main">\n         <div id="lux-layers-items"></div>\n         <div id="drop-marker" style="visibility:hidden;">\n             <div id="drop-marker-circle"></div>\n         </div>\n      </div>')}}),this.tagName=function(e){switch(e){case"g":return"\u7f16\u7ec4";case"text":return"\u6587\u672c";case"rect":return"\u77e9\u5f62";case"line":return"\u76f4\u7ebf";case"path":return"\u8def\u5f84";case"ellipse":return"\u692d\u5706";case"circle":return"\u5706\u5f62";case"image":return"\u56fe\u7247";case"polygon":return"\u591a\u8fb9\u5f62";case"polyline":return"\u6298\u7ebf";default:return null}},this.icons=function(e){switch(e){case"rect":return'<svg viewBox="0 0 100 100" width="17" height="17">\n            <rect fill="currentColor" width="91.785" height="92.345" style="opacity: 0.2;" y="2.789" x="4.266"></rect>\n            <path fill="currentColor" d="M 0 0 C 0 0 100 0 100 0 C 100 0 100 100 100 100 C 100 100 0 100 0 100 M 6.162 6.162 C 6.162 6.162 6.162 93.838 6.162 93.838 C 6.162 93.838 93.838 93.838 93.838 93.838 C 93.838 93.838 93.838 6.162 93.838 6.162"></path>\n        </svg>';case"ellipse":return'<svg viewBox="0 0 100 100" width="17" height="17">\n            <rect fill="currentColor" width="93.882" height="93.883" style="opacity: 0.2; stroke-width: 1.002;" rx="45.893" ry="45.893" x="3.059" y="3.059"></rect>\n            <path fill="currentColor" d="M 50.001 0 C 77.615 0 100 22.25 100 49.697 L 100 50.303 C 100 77.75 77.615 100 50.001 100 C 22.386 100 0 77.75 0 50.303 L 0 49.697 C 0 22.25 22.386 0 50.001 0 Z M 5.514 49.73 L 5.514 50.27 C 5.514 74.689 25.432 94.486 50.001 94.486 C 74.569 94.486 94.486 74.689 94.486 50.27 L 94.486 49.73 C 94.486 25.311 74.569 5.514 50.001 5.514 C 25.432 5.514 5.514 25.311 5.514 49.73 Z" style="stroke-width: 1.067;"></path>\n        </svg>';case"path":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 14.138 36.021 L 1.316 33.647 C 4.121 20.442 10.812 10.616 21.388 4.169 C 28.589 -0.221 36.952 -1.319 46.475 0.874 C 53.88 2.579 60.807 5.705 67.255 10.25 C 71.918 13.537 74.536 18.605 75.11 25.454 C 75.748 33.065 72.031 39.738 63.96 45.473 C 57.121 50.332 50.025 54.809 42.674 58.904 C 37.251 61.925 33.788 67.077 32.285 74.362 C 31.315 79.065 34.356 82.781 41.407 85.511 C 48.812 88.378 56.752 88.378 65.227 85.511 C 74.905 82.238 83.521 76.747 91.075 69.04 L 99.944 78.669 C 92.173 86.44 81.867 92.691 69.028 97.421 C 60.608 100.523 51.654 101.114 42.167 99.195 C 34.428 97.63 27.924 93.153 22.655 85.765 C 17.746 78.882 18.084 70.435 23.669 60.424 C 26.638 55.103 30.861 50.71 36.339 47.247 C 41.804 43.792 47.463 40.667 53.317 37.871 C 57.204 36.015 60.076 32.805 61.933 28.242 C 63.021 25.568 62.007 22.865 58.892 20.133 C 53.125 15.076 45.777 12.88 36.846 13.544 Q 21.029 14.72 14.138 36.021 Z"></path>\n      </svg>';case"line":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 11.813 12.152 L 88.307 89.982" style="stroke-width: 14;"></path>\n        <rect fill="currentColor" y="122.862" width="97.427" height="14.765" x="-0.59" transform="matrix(-0.707107, -0.707107, 0.707108, -0.707106, -8.069685, 176.125723)"></rect>\n      </svg>';case"text":return'<svg viewBox="0 0 100 100" width="17" height="15.39">\n            <path fill="currentColor" d="M 97.668 91.505 C 97.668 91.505 100 91.505 100 91.505 C 100 91.505 100 100 100 100 C 100 100 64.811 100 64.811 100 C 64.811 100 64.811 91.505 64.811 91.505 C 64.811 91.505 67.862 91.505 67.862 91.505 C 70.346 91.505 72.095 89.004 71.289 86.606 C 71.289 86.606 66.873 73.436 66.873 73.436 C 66.873 73.436 33.126 73.436 33.126 73.436 C 33.126 73.436 28.711 86.606 28.711 86.606 C 27.904 89.004 29.653 91.505 32.138 91.505 C 32.138 91.505 35.188 91.505 35.188 91.505 C 35.188 91.505 35.188 100 35.188 100 C 35.188 100 0 100 0 100 C 0 100 0 91.505 0 91.505 C 0 91.505 2.332 91.505 2.332 91.505 C 5.545 91.505 8.41 89.436 9.477 86.343 C 9.477 86.343 42.8 0 42.8 0 C 42.8 0 58.366 0 58.366 0 C 58.366 0 90.522 86.343 90.522 86.343 C 91.59 89.435 94.455 91.505 97.668 91.505 Z M 38.524 60.7 C 38.524 60.7 61.475 60.7 61.475 60.7 C 61.475 60.7 50 21.282 50 21.282 C 50 21.282 38.524 60.7 38.524 60.7 Z"></path>\n        </svg>';case"image":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 100 3.67 C 100 2.046 99.994 -0.001 99.994 -0.001 C 99.994 -0.001 96.782 0 96.639 0 L 3.361 0 C 3.095 0 -0.016 -0.011 -0.016 -0.011 C -0.016 -0.011 0 2.125 0 3.67 L 0 96.33 C 0 96.626 0.001 99.997 0.001 99.997 C 0.001 99.997 1.952 100 3.361 100 L 96.639 100 C 97.043 100 100.004 100.005 100.004 100.005 C 100.004 100.005 100 97.723 100 96.33 L 100 3.67 Z M 93.034 56.899 C 89.771 62.463 68.517 77.161 39.497 64.829 C 21.941 57.369 0.51 70.534 6.723 77.064 L 6.723 7.791 L 93.081 7.791 L 93.081 55.046 L 93.034 56.899 Z"></path>\n      </svg>';case"polyline":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 7.775 93.508 L 24.274 4.394 L 96.292 42.21 L 75.119 97.648 L 63.006 92.767 L 80.099 48.309 L 33.848 24.038 L 20.671 96.553 L 7.775 93.508 Z" style="stroke-width: 1px;"></path>\n      </svg>';case"polygon":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 8.721 93.504 L 25.22 4.39 L 97.238 42.206 L 76.065 97.644 L 75.756 97.519 L 75.756 98.612 L 10.379 98.612 L 7.78 98.614 L 8.721 93.504 Z M 81.045 48.305 L 34.794 24.034 L 23.609 85.587 L 66.711 85.587 L 81.045 48.305 Z" style="stroke-width: 1px;"></path>\n      </svg>';case"g":return'<svg viewBox="0 0 100 100" width="17" height="17">\n        <path fill="currentColor" d="M 88.789 20.909 L 50 20.909 L 40.303 11.211 L 11.211 11.211 C 5.878 11.211 1.562 15.575 1.562 20.909 L 1.515 79.091 C 1.515 84.425 5.878 88.789 11.211 88.789 L 88.789 88.789 C 94.122 88.789 98.485 84.425 98.485 79.091 L 98.485 30.606 C 98.485 25.273 94.122 20.909 88.789 20.909 Z M 88.789 79.091 L 11.211 79.091 L 11.211 30.606 L 88.789 30.606 L 88.789 79.091 Z" style="stroke-width: 4.849;"></path>\n      </svg>';case"lock":return'<svg viewBox="0 0 100 100" width="15" height="15">\n            <path fill="currentColor" d="M 19.882 14.268 L 80.459 14.268 L 80.459 48.523 L 67.286 48.523 L 67.286 28.205 L 33.058 28.205 L 33.058 48.523 L 19.882 48.523 Z"></path>\n            <rect fill="currentColor" x="14.319" y="48.523" width="71.362" height="51.477"></rect>\n            </svg>';case"eyes":return'<svg viewBox="0 0 100 100" width="15" height="15">\n          <path fill="currentColor" d="M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z M 38 38 L 62 38 L 62 62 L 38 62 Z"></path>\n          <path fill="currentColor" d="M 50.017 26.257 C 62.183 26.257 72.056 36.13 72.056 48.296 C 72.056 51.161 71.483 53.85 70.47 56.362 L 83.341 69.233 C 89.996 63.68 95.242 56.495 98.459 48.296 C 90.834 28.946 72.012 15.237 49.973 15.237 C 43.802 15.237 37.895 16.339 32.43 18.323 L 41.951 27.844 C 44.463 26.83 47.152 26.257 50.017 26.257 Z M 5.938 14.223 L 15.988 24.273 L 18.016 26.301 C 10.699 31.987 4.969 39.568 1.53 48.296 C 9.156 67.647 27.978 81.355 50.017 81.355 C 56.849 81.355 63.373 80.033 69.323 77.652 L 71.175 79.504 L 84.09 92.375 L 89.688 86.777 L 11.536 8.625 L 5.938 14.223 Z M 30.314 38.599 L 37.146 45.431 C 36.926 46.357 36.793 47.326 36.793 48.296 C 36.793 55.613 42.7 61.52 50.017 61.52 C 50.987 61.52 51.956 61.387 52.882 61.167 L 59.714 67.999 C 56.761 69.454 53.499 70.335 50.017 70.335 C 37.851 70.335 27.978 60.462 27.978 48.296 C 27.978 44.814 28.859 41.552 30.314 38.599 Z M 49.312 35.161 L 63.197 49.045 L 63.285 48.34 C 63.285 41.023 57.378 35.117 50.061 35.117 L 49.312 35.161 Z"></path>\n          </svg>'}},!t)throw new Error("stage not found");z(this,Oo)[Oo]=t,z(this,Do)[Do]()})),rs=is,as=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).init=function(){var e=window.stage;(oa=new rs(e)).install("#objects-main")},e.render=function(){return(0,v.jsxs)("div",{id:"objects",children:[(0,v.jsx)("header",{children:(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"Objects"})})}),(0,v.jsx)("section",{id:"objects-content",className:"flex",children:(0,v.jsx)("main",{id:"objects-main"})})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){oa.uninstall()}}]),n}(e.Component),os=as,ss=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).init=function(){},e.render=function(){return(0,v.jsxs)("div",{id:"export",children:[(0,v.jsx)("header",{children:(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{href:"#objects",children:"Objects"})})}),(0,v.jsx)("section",{id:"objects-content",className:"flex",children:(0,v.jsx)("main",{id:"objects-main"})})]})},e}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),ls=ss,cs=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.init=function(){var e,t=window.stage;null===(e=t.history)||void 0===e||e.watch((function(){var e,n;r.setState({history:null===(e=t.history)||void 0===e?void 0:e.get(),index:null===(n=t.history)||void 0===n?void 0:n.index()})}))},r.getIcon=function(e){var t,n,i,r,a,o,s,l,c,u,d,h=window.stage;return e===(null===(t=h.history)||void 0===t?void 0:t.actions().ADD)?"#objects-panel":e===(null===(n=h.history)||void 0===n?void 0:n.actions().SCALE)||e===(null===(i=h.history)||void 0===i?void 0:i.actions().MOUSE_SCALE)||e===(null===(r=h.history)||void 0===r?void 0:r.actions().MOUSE_MOVE)?"#transform-tool":e===(null===(a=h.history)||void 0===a?void 0:a.actions().KEYBOARD_MOVE)||e===(null===(o=h.history)||void 0===o?void 0:o.actions().DELETE)||e===(null===(s=h.history)||void 0===s?void 0:s.actions().EDIT)||e===(null===(l=h.history)||void 0===l?void 0:l.actions().NODE_X)||e===(null===(c=h.history)||void 0===c?void 0:c.actions().NODE_Y)||e===(null===(u=h.history)||void 0===u?void 0:u.actions().NODE_WIDTH)||e===(null===(d=h.history)||void 0===d?void 0:d.actions().NODE_HEIGHT)?"#menu":void 0},r.handleHistory=function(e){var t=window.stage,n=r.state.index-e-1;if(n>0)for(var i=0;i<n;i++){var a;null===t||void 0===t||null===(a=t.history)||void 0===a||a.undo()}else if(n<0)for(var o=0;o<Math.abs(n);o++){var s;null===t||void 0===t||null===(s=t.history)||void 0===s||s.redo()}},r.render=function(){return(0,v.jsxs)("div",{id:"history",children:[(0,v.jsx)("header",{children:(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"History"})})}),(0,v.jsx)("section",{id:"history-content",className:"flex",children:(0,v.jsx)("main",{id:"history-main",children:(0,v.jsx)("div",{id:"items",children:r.state.history.map((function(e,t){return(0,v.jsxs)("div",{style:{background:t===r.state.index-1?"#3584e4":"none",color:t===r.state.index-1?"#ffffff":"#333333",opacity:t+1>r.state.index?.5:1},className:"item",skin:"dock",value:e.value,onClick:function(){return r.handleHistory(t)},children:[(0,v.jsx)("x-icon",{className:"icon",href:r.getIcon(e.action)}),(0,v.jsx)("span",{className:"label",children:(0,v.jsx)("x-message",{href:"#add-object",children:e.CN_label})})]},t)}))})})})]})},r.state={history:[],index:0},r}return s(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),us=cs,ds=1.41732,hs=2.83464,ps=function(){var e=M(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'{\n  "version": "1.0",\n  "cartonParams": [  \n    {\n        "cortype": "A",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "B",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "C",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "BC1",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "BC",\n        "connectlen": 33,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EBA",\n        "connectlen": 28,\n        "coverlen": 6,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "C1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "AB",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EBC",\n        "connectlen": 28,\n        "coverlen": 6,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "B1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "E1",\n        "connectlen": 29,\n        "coverlen": 2,\n        "round": true,\n        "attributeState": true\n      },\n      {\n        "cortype": "EB",\n        "connectlen": 28,\n        "coverlen": 4,\n        "round": true,\n        "attributeState": true\n      }\n    ]\n}');case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fs=function(){var e=M(w().mark((function e(t,n,i,r,a,o,s,l){var c,u,d,h,p,f,v,m,g,y,b,x,_,M,S,E,C,T,L,A,P,O,R,N,k,D,I,j,z,B,F,U,H,G,V,W,q,X,Z,Y,J,Q,K,$,ee;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps();case 2:if(c=e.sent,u=JSON.parse(c).cartonParams,d=u.find((function(e){return r===e.cortype})),d){e.next=7;break}return e.abrupt("return","\u6ca1\u6709".concat(r,"\u8be5\u7bb1\u578b\u695e\u578b\u53c2\u6570"));case 7:return h=Math.floor(Number(d.coverlen)/2),p=Number(d.connectlen)+h,f=Number(d.connectlen)+h+2*t+2*n,v=i+2*Math.floor((n+Number(d.coverlen))/2),m=f*hs,g=v*hs,y=null===a||void 0===a?void 0:a.getAttribute("data-version"),(b=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("viewBox","0 0 ".concat(m," ").concat(g)),b.setAttribute("xmlns","http://www.w3.org/2000/svg"),b.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),y&&b.setAttribute("data-version",y),0,M=(_=(x=0+p)+t)-3,S=_+3,C=(E=_+n)-3,T=E+3,A=(L=E+t)-3,P=L+3,O=L+n-h,R=Math.floor((n+Number(d.coverlen))/2),0,D=(k=(N=0+R)+i)+R,(I=new So({id:"\u8fb9\u6846",pointerEvents:"none",display:l?"unset":"none"})).add(new Eo({id:"AT",x:x*hs,y:0,width:(M-x)*hs,height:(N-0)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"AB",x:x*hs,y:k*hs,width:(M-x)*hs,height:(D-k)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"BT",x:S*hs,y:0,width:(C-S)*hs,height:(N-0)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"BB",x:S*hs,y:k*hs,width:(C-S)*hs,height:(D-k)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"CT",x:T*hs,y:0,width:(A-T)*hs,height:(N-0)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"CB",x:T*hs,y:k*hs,width:(A-T)*hs,height:(D-k)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"DT",x:P*hs,y:0,width:(O-P)*hs,height:(N-0)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"DB",x:P*hs,y:k*hs,width:(O-P)*hs,height:(D-k)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"E",x:0,y:N*hs,width:(x-0)*hs,height:(k-N)*hs,fill:"none",stroke:"black",strokeWidth:ds})),I.add(new Eo({id:"A",x:x*hs,y:N*hs,width:(_-x)*hs,height:(k-N)*hs,fill:"none",stroke:"red",strokeWidth:ds})),I.add(new Eo({id:"B",x:_*hs,y:N*hs,width:(E-_)*hs,height:(k-N)*hs,fill:"none",stroke:"red",strokeWidth:ds})),I.add(new Eo({id:"C",x:E*hs,y:N*hs,width:(L-E)*hs,height:(k-N)*hs,fill:"none",stroke:"red",strokeWidth:ds})),I.add(new Eo({id:"D",x:L*hs,y:N*hs,width:(O-L)*hs,height:(k-N)*hs,fill:"none",stroke:"red",strokeWidth:ds})),U=-60,-65,-55,-66,G=(H=O+30)-5,V=H+5,W=H+15,X=(q=H+50)-5,Z=q+5,Y=q+15,ws(I,hs,0,B=-25,0,z=-35,0,j=-30,x,j,x,B,x,z,x/2,F=-36,x-0+""),ws(I,hs,x,B,x,z,x,j,_,j,_,B,_,z,(_-x)/2+x,F,_-x+""),ws(I,hs,_,B,_,z,_,j,E,j,E,B,E,z,(E-_)/2+_,F,E-_+""),ws(I,hs,E,B,E,z,E,j,L,j,L,B,L,z,(L-E)/2+E,F,L-E+""),ws(I,hs,L,B,L,z,L,j,O,j,O,B,O,z,(O-L)/2+L,F,O-L+""),ws(I,hs,0,-55,0,-65,0,U,O,U,O,-55,O,-65,(O-0)/2,-66,O-0+""),ws(I,hs,G,0,V,0,H,0,H,N,G,N,V,N,W,(N-0)/2+0,N-0+""),ws(I,hs,G,N,V,N,H,N,H,D,G,D,V,D,W,(k-N)/2+N,k-N+""),ws(I,hs,G,k,V,k,H,k,H,D,G,D,V,D,W,(D-k)/2+k,D-k+""),ws(I,hs,X,0,Z,0,q,0,q,D,X,D,Z,D,Y,(D-0)/2+0,D-0+""),J=new So({id:"\u7f16\u8f91"}),o&&(o["\u8ba2\u5355\u7f16\u53f7"]||o["\u8ba2\u8d27\u6570\u91cf"])&&(Q=0+(x-0)*hs/2,K=N*hs+(k-N)*hs/2,($=new To({id:"\u9489\u6761",fontSize:"30px",fontFamily:"'SimHei','\u9ed1\u4f53'",textAnchor:"middle",content:"".concat(o["\u8ba2\u5355\u7f16\u53f7"]).concat(o["\u8ba2\u5355\u7f16\u53f7"]&&o["\u8ba2\u8d27\u6570\u91cf"]?"-"+o["\u8ba2\u8d27\u6570\u91cf"]:o["\u8ba2\u8d27\u6570\u91cf"])})).node.setAttribute("transform","matrix(0, -1, 1, 0, ".concat(Q,",  ").concat(K,")")),J.add($),delete o["\u8ba2\u5355\u7f16\u53f7"],delete o["\u8ba2\u8d27\u6570\u91cf"]),s&&(ee=gs(t,n,i,p,h,R),vs(ee,J.node,I.node,a,o)),b.innerHTML=I.node.outerHTML+J.node.outerHTML,e.abrupt("return",b);case 81:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,o,s,l){return e.apply(this,arguments)}}(),vs=function(e,t,n,i,r){var a=(null===i||void 0===i?void 0:i.getElementsByTagName("text"))||[];for(var o in r)for(var s=0;s<a.length;s++){var l=a[s].getAttribute("id");if(l&&l===o){var c=r[o].toString(),u=a[s].getAttribute("font-size");u&&c&&-1!==c.indexOf("/n")&&(c=c.replace(RegExp("/n","g"),'<tspan x="0" dy="'.concat(u,'">\u200b</tspan>'))),a[s].innerHTML=c}}for(var d=(null===i||void 0===i?void 0:i.getElementsByTagName("g"))||[],h=0;h<d.length;h++){var p=d[h],f=p.dataset.area,v=p.dataset.pt,m=f;if(f&&v){var g=p.dataset.x||0,y=p.dataset.y||0,b=e.get(m+"-"+v);b&&(ms(b,p,v,Number(g),Number(y)),p.hasAttribute("data-join-blade")?n.innerHTML=n.innerHTML+p.outerHTML:t.innerHTML=t.innerHTML+p.outerHTML)}}},ms=function(e,t,n,i,r){var a=e.x,o=e.y,s=i,l=r;-1!=n.indexOf("T")&&(o+=l),-1!=n.indexOf("B")&&(o-=l),-1!=n.indexOf("L")&&(a+=s),-1!=n.indexOf("R")&&(a-=s),t.setAttribute("transform","matrix(1, 0, 0, 1, ".concat(a*hs,",  ").concat(o*hs,")"))},gs=function(e,t,n,i,r,a){var o,s,l,c,u,d,h,p,f,v,m,g,y,b,x,w;o=i/2,l=(s=i)+e/2,u=(c=s+e)+t/2,h=(d=c+t)+e/2,f=(p=d+e)+(t-r)/2,v=p+(t-r),m=a/2,y=(g=a)+n/2,x=(b=g+n)+a/2,w=b+a;var _=new Map;return xs(_,"E-C",o,y),bs(_,"A","L",s,0,m,g,y,b,x,w),ys(_,"A",l,0,m,g,y,b,x,w),bs(_,"A","R",c,0,m,g,y,b,x,w),bs(_,"B","L",c,0,m,g,y,b,x,w),ys(_,"B",u,0,m,g,y,b,x,w),bs(_,"B","R",d,0,m,g,y,b,x,w),bs(_,"C","L",d,0,m,g,y,b,x,w),ys(_,"C",h,0,m,g,y,b,x,w),bs(_,"C","R",p,0,m,g,y,b,x,w),bs(_,"D","L",p,0,m,g,y,b,x,w),ys(_,"D",f,0,m,g,y,b,x,w),bs(_,"D","R",v,0,m,g,y,b,x,w),_},ys=function(e,t,n,i,r,a,o,s,l,c){xs(e,t+"T-TC",n,i),xs(e,t+"T-C",n,r),xs(e,t+"T-BC",n,a),xs(e,t+"-TC",n,a),xs(e,t+"-C",n,o),xs(e,t+"-BC",n,s),xs(e,t+"B-TC",n,s),xs(e,t+"B-C",n,l),xs(e,t+"B-BC",n,c)},bs=function(e,t,n,i,r,a,o,s,l,c,u){xs(e,t+"T-"+n+"T",i,r),xs(e,t+"T-"+n+"C",i,a),xs(e,t+"T-"+n+"B",i,o),xs(e,t+"-"+n+"T",i,o),xs(e,t+"-"+n+"C",i,s),xs(e,t+"-"+n+"B",i,l),xs(e,t+"B-"+n+"T",i,l),xs(e,t+"B-"+n+"C",i,c),xs(e,t+"B-"+n+"B",i,u)},xs=function(e,t,n,i){e.set(t,{x:n,y:i})},ws=function(e,t,n,i,r,a,o,s,l,c,u,d,h,p,f,v,m){var g=new Co({fill:"green",stroke:"green"});g.node.setAttribute("x1",n*t+""),g.node.setAttribute("y1",i*t+""),g.node.setAttribute("x2",r*t+""),g.node.setAttribute("y2",a*t+""),e.add(g);var y=new Co({fill:"green",stroke:"green"});y.node.setAttribute("x1",o*t+""),y.node.setAttribute("y1",s*t+""),y.node.setAttribute("x2",l*t+""),y.node.setAttribute("y2",c*t+""),e.add(y);var b=new Co({fill:"green",stroke:"green"});b.node.setAttribute("x1",u*t+""),b.node.setAttribute("y1",d*t+""),b.node.setAttribute("x2",h*t+""),b.node.setAttribute("y2",p*t+""),e.add(b)},_s=function(e){c(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).createBlade=M(w().mark((function e(){var t,n,i,r,a,o,s,l,c,u,d,h,p,f,v,m,g;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.stage,a=null===(t=document.querySelector("#length-input"))||void 0===t?void 0:t.getAttribute("value"),o=null===(n=document.querySelector("#width-input"))||void 0===n?void 0:n.getAttribute("value"),s=null===(i=document.querySelector("#height-input"))||void 0===i?void 0:i.getAttribute("value"),e.next=6,fs(Number(a),Number(o),Number(s),"B",null,null,!0,!0);case 6:if(l=e.sent,r.svgRoot&&l){if(u=null===(c=r.svgRoot)||void 0===c?void 0:c.querySelector("#\u8fb9\u6846"))d=l.querySelector("#\u8fb9\u6846"),r.svgRoot.replaceChild(d,u);else for(h=l.childNodes,p=0;p<h.length;p++)r.svgRoot.append(h[p].cloneNode(!0));f=null===l||void 0===l?void 0:l.viewBox.baseVal,null===r||void 0===r||r.setViewSize(f.width,f.height),v=document.querySelector("#board"),m=null===v||void 0===v?void 0:v.getBoundingClientRect(),g=m.height,r.setBoardSize(Number(g-40)/f.height,20,20),r.history.clear(),r.select.autoResetBoxSelect(!0)}case 8:case"end":return e.stop()}}),e)}))),e.render=function(){return(0,v.jsxs)("div",{id:"three-box",children:[(0,v.jsx)("header",{children:(0,v.jsx)("h2",{children:(0,v.jsx)("x-message",{children:"3D-BOX"})})}),(0,v.jsx)("section",{id:"three-box-content",className:"flex",children:(0,v.jsxs)("main",{id:"three-box-main",children:[(0,v.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,v.jsx)("h4",{id:"x-heading",children:(0,v.jsx)("x-message",{children:"Length"})}),(0,v.jsx)("x-numberinput",{id:"length-input",value:"430",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]}),(0,v.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,v.jsx)("h4",{id:"x-heading",children:(0,v.jsx)("x-message",{children:"Width"})}),(0,v.jsx)("x-numberinput",{id:"width-input",value:"260",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]}),(0,v.jsxs)("x-box",{id:"x-box",vertical:"",children:[(0,v.jsx)("h4",{id:"x-heading",children:(0,v.jsx)("x-message",{children:"Height"})}),(0,v.jsx)("x-numberinput",{id:"height-input",value:"272",condensed:"",role:"input","aria-disabled":"false",tabindex:"0",hasstepper:"",step:"1",children:(0,v.jsx)("x-stepper",{})})]}),(0,v.jsx)("x-box",{id:"blade-btn",children:(0,v.jsx)("x-button",{toggled:"",condensed:"",role:"button","aria-disabled":"false",tabindex:"0",skin:"default",onClick:function(){return e.createBlade()},children:"CREATE BOX"})})]})})]})},e}return s(n,[{key:"componentDidMount",value:function(){var e=document.querySelector("#length-input"),t=document.querySelector("#width-input"),n=document.querySelector("#height-input");null===e||void 0===e||e.addEventListener("keydown",(function(e){e.stopPropagation()})),null===t||void 0===t||t.addEventListener("keydown",(function(e){e.stopPropagation()})),null===n||void 0===n||n.addEventListener("keydown",(function(e){e.stopPropagation()}));var i=document.querySelector("#create-blade");null===i||void 0===i||i.addEventListener("click",this.createBlade)}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Ms=_s,Ss=[{value:"Fill",href:"#fill-panel"},{value:"Stroke",href:"#stroke-panel"},{value:"Typography",href:"#typography-panel"},{value:"Geometry",href:"#geometry-panel"},{value:"Arrangement",href:"#arrangement-panel"},{value:"Objects",href:"#objects-panel"},{value:"History",href:"#history-panel"},{value:"3DBox",href:"#3d-box"}],Es=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.selectAction=function(e){var t=e.target,n=document.querySelector("#actionbar"),i=null===n||void 0===n?void 0:n.querySelector("x-buttons");null===i||void 0===i||i.childNodes.forEach((function(e){e.removeAttribute("toggled")})),t.textContent===r.state.currenAction?r.setState({currenAction:""}):(t.setAttribute("toggled",""),r.setState({currenAction:t.textContent}))},r.render=function(){return(0,v.jsxs)("div",{id:"actionbar",className:"flex",children:[(0,v.jsx)("x-buttons",{id:"buttons",vertical:"",children:Ss.map((function(e,t){return(0,v.jsxs)("x-button",{skin:"dock",value:e.value,onClick:function(e){return r.selectAction(e)},children:[(0,v.jsx)("x-icon",{href:e.href}),(0,v.jsx)("x-tooltip",{children:(0,v.jsx)("x-message",{children:e.value})})]},t)}))}),(0,v.jsxs)("div",{className:"compositingpanel",style:{transform:r.state.currenAction?"translateX(0)":"translateX(281px)"},children:[(0,v.jsx)("div",{style:{height:"100%",display:"Fill"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(A,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"Stroke"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(O,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"Typography"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(N,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"Geometry"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(D,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"Arrangement"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(j,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"Objects"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(os,{})}),"Export"===r.state.currenAction&&(0,v.jsx)(ls,{}),(0,v.jsx)("div",{style:{height:"100%",display:"History"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(us,{})}),(0,v.jsx)("div",{style:{height:"100%",display:"3DBox"===r.state.currenAction?"block":"none"},children:(0,v.jsx)(Ms,{})})]})]})},r.state={currenAction:""},r}return s(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Cs=Es,Ts=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.action=function(e){var t,n,i,a,o,s,l,c,u,d,h,p,f,v,m,g,y,b;switch(e.target.textContent){case"Undo":null===(t=r.state.stage)||void 0===t||null===(n=t.history)||void 0===n||n.undo();break;case"Redo":null===(i=r.state.stage)||void 0===i||null===(a=i.history)||void 0===a||a.redo();break;case"Cut":null===(o=r.state.stage)||void 0===o||null===(s=o.clipboard)||void 0===s||s.cut();break;case"Copy":null===(l=r.state.stage)||void 0===l||null===(c=l.clipboard)||void 0===c||c.copy();break;case"Paste":null===(u=r.state.stage)||void 0===u||null===(d=u.clipboard)||void 0===d||d.paste();break;case"Delete":null===(h=r.state.stage)||void 0===h||null===(p=h.select)||void 0===p||p.nodesRemove();break;case"Group":null===(f=r.state.stage)||void 0===f||f.group();break;case"Ungroup":null===(v=r.state.stage)||void 0===v||v.unGroup();break;case"Raise":null===(m=r.state.stage)||void 0===m||m.raise();break;case"Lower":null===(g=r.state.stage)||void 0===g||g.lower();break;case"Front":null===(y=r.state.stage)||void 0===y||y.front();break;case"Back":null===(b=r.state.stage)||void 0===b||b.back()}},r.contextmenu=function(){var e=M(w().mark((function e(t){var n,i,a,o,s,l,c,u,d,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===(n=r.state.stage)||void 0===n||null===(i=n.select)||void 0===i?void 0:i.checkedsGroups().keys().next().value,l=function(){var e,n,i,a=null===(e=r.state.stage)||void 0===e||null===(n=e.select)||void 0===n||null===(i=n.boxSelect())||void 0===i?void 0:i.getBoundingClientRect(),o=a.left,s=a.top,l=a.bottom,c=a.right,u=t.clientX,d=t.clientY;return u>=o&&u<=c&&d>=s&&d<=l}(),e.prev=2,e.next=5,window.navigator.clipboard.read();case 5:c=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c=!1;case 11:u=null===(a=r.state.stage)||void 0===a||null===(o=a.select)||void 0===o?void 0:o.size(),d=document.querySelector("#contextmenu"),null===(h=null===d||void 0===d?void 0:d.querySelectorAll("x-menuitem"))||void 0===h||h.forEach((function(e){e.removeAttribute("disabled"),"Cut"!==e.textContent&&"Copy"!==e.textContent&&"Group"!==e.textContent&&"Delete"!==e.textContent&&"Raise"!==e.textContent&&"Lower"!==e.textContent&&"Front"!==e.textContent&&"Back"!==e.textContent||0!==u&&l||e.toggleAttribute("disabled"),"Ungroup"===e.textContent&&(s&&l||e.toggleAttribute("disabled")),"Paste"===e.textContent&&(c||e.toggleAttribute("disabled"))}));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.render=function(){return(0,v.jsx)("x-contextmenu",{id:"contextmenu",children:(0,v.jsxs)("x-menu",{children:[(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Undo"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Redo"})}),(0,v.jsx)("hr",{}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Cut"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Copy"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Paste"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Delete"})}),(0,v.jsx)("hr",{}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Group"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Ungroup"})}),(0,v.jsx)("hr",{}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Raise"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Lower"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Front"})}),(0,v.jsx)("x-menuitem",{onClick:function(e){r.action(e)},children:(0,v.jsx)("x-label",{children:"Back"})})]})})},r.state={stage:void 0},r}return s(n,[{key:"componentDidMount",value:function(){this.setState({stage:window.stage}),document.addEventListener("contextmenu",this.contextmenu)}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),Ls=Ts;function As(e,t,n){return As=d()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&l(r,n.prototype),r},As.apply(null,arguments)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});var Ps={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Os={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Rs=0,Ns=1,ks=2,Ds=1,Is=2,js=3,zs=0,Bs=1,Fs=2,Us=0,Hs=1,Gs=2,Vs=3,Ws=4,qs=5,Xs=100,Zs=101,Ys=102,Js=103,Qs=104,Ks=200,$s=201,el=202,tl=203,nl=204,il=205,rl=206,al=207,ol=208,sl=209,ll=210,cl=0,ul=1,dl=2,hl=3,pl=4,fl=5,vl=6,ml=7,gl=0,yl=1,bl=2,xl=0,wl=1,_l=2,Ml=3,Sl=4,El=5,Cl=301,Tl=302,Ll=303,Al=304,Pl=306,Ol=307,Rl=1e3,Nl=1001,kl=1002,Dl=1003,Il=1004,jl=1005,zl=1006,Bl=1007,Fl=1008,Ul=1009,Hl=1010,Gl=1011,Vl=1012,Wl=1013,ql=1014,Xl=1015,Zl=1016,Yl=1017,Jl=1018,Ql=1019,Kl=1020,$l=1021,ec=1022,tc=1023,nc=1024,ic=1025,rc=tc,ac=1026,oc=1027,sc=1028,lc=1029,cc=1030,uc=1031,dc=1032,hc=1033,pc=33776,fc=33777,vc=33778,mc=33779,gc=35840,yc=35841,bc=35842,xc=35843,wc=36196,_c=37492,Mc=37496,Sc=37808,Ec=37809,Cc=37810,Tc=37811,Lc=37812,Ac=37813,Pc=37814,Oc=37815,Rc=37816,Nc=37817,kc=37818,Dc=37819,Ic=37820,jc=37821,zc=36492,Bc=37840,Fc=37841,Uc=37842,Hc=37843,Gc=37844,Vc=37845,Wc=37846,qc=37847,Xc=37848,Zc=37849,Yc=37850,Jc=37851,Qc=37852,Kc=37853,$c=2201,eu=2300,tu=2301,nu=2302,iu=2400,ru=2401,au=2402,ou=2500,su=3e3,lu=3001,cu=3007,uu=3002,du=3003,hu=3004,pu=3005,fu=3006,vu=3200,mu=3201,gu=0,yu=1,bu=7680,xu=519,wu=35044,_u=35048;function Mu(){}Object.assign(Mu.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});for(var Su=[],Eu=0;Eu<256;Eu++)Su[Eu]=(Eu<16?"0":"")+Eu.toString(16);var Cu,Tu=1234567,Lu={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Su[255&e]+Su[e>>8&255]+Su[e>>16&255]+Su[e>>24&255]+"-"+Su[255&t]+Su[t>>8&255]+"-"+Su[t>>16&15|64]+Su[t>>24&255]+"-"+Su[63&n|128]+Su[n>>8&255]+"-"+Su[n>>16&255]+Su[n>>24&255]+Su[255&i]+Su[i>>8&255]+Su[i>>16&255]+Su[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Tu=e%2147483647),((Tu=16807*Tu%2147483647)-1)/2147483646},degToRad:function(e){return e*Lu.DEG2RAD},radToDeg:function(e){return e*Lu.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+i)/2),u=o((t+i)/2),d=a((t-i)/2),h=o((t-i)/2),p=a((i-t)/2),f=o((i-t)/2);switch(r){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}function Pu(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Au.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Au.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(Pu.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],v=i[3],m=i[6],g=i[1],y=i[4],b=i[7],x=i[2],w=i[5],_=i[8];return r[0]=a*f+o*g+s*x,r[3]=a*v+o*y+s*w,r[6]=a*m+o*b+s*_,r[1]=l*f+c*g+u*x,r[4]=l*v+c*y+u*w,r[7]=l*m+c*b+u*_,r[2]=d*f+h*g+p*x,r[5]=d*v+h*y+p*w,r[8]=d*m+h*b+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*r*c+n*o*s+i*r*l-i*a*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=n[8],p=h*l-c*d,f=c*u-h*s,v=d*s-l*u,m=r*p+a*f+o*v;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);var g=1/m;return i[0]=p*g,i[1]=(o*d-h*a)*g,i[2]=(c*a-o*l)*g,i[3]=f*g,i[4]=(h*r-o*u)*g,i[5]=(o*s-c*r)*g,i[6]=v*g,i[7]=(a*u-d*r)*g,i[8]=(l*r-a*s)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*l,i[6]=t*o+n*c,i[1]=-n*r+t*s,i[4]=-n*a+t*l,i[7]=-n*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Ou={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Cu&&(Cu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Cu.width=e.width,Cu.height=e.height;var n=Cu.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cu}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Ru=0;function Nu(e,t,n,i,r,a,o,s,l,c){Object.defineProperty(this,"id",{value:Ru++}),this.uuid=Lu.generateUUID(),this.name="",this.image=void 0!==e?e:Nu.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Nu.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Nl,this.wrapT=void 0!==i?i:Nl,this.magFilter=void 0!==r?r:zl,this.minFilter=void 0!==a?a:Fl,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:tc,this.internalFormat=null,this.type=void 0!==s?s:Ul,this.offset=new Au(0,0),this.repeat=new Au(1,1),this.center=new Au(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pu,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:su,this.version=0,this.onUpdate=null}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=e,this.y=t,this.z=n,this.w=i}function Du(e,t,n){this.width=e,this.height=t,this.scissor=new ku(0,0,e,t),this.scissorTest=!1,this.viewport=new ku(0,0,e,t),n=n||{},this.texture=new Nu(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:zl,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Iu(e,t,n){Du.call(this,e,t,n),this.samples=4}function ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=e,this._y=t,this._z=n,this._w=i}Nu.DEFAULT_IMAGE=void 0,Nu.DEFAULT_MAPPING=300,Nu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Nu,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Lu.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(Ou.getDataURL(i[a]))}else r=Ou.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rl:e.x=e.x-Math.floor(e.x);break;case Nl:e.x=e.x<0?0:1;break;case kl:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Rl:e.y=e.y-Math.floor(e.y);break;case Nl:e.y=e.y<0?0:1;break;case kl:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Nu.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(ku.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(ku.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],p=s[9],f=s[2],v=s[6],m=s[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-v)<a){if(Math.abs(c+d)<o&&Math.abs(u+f)<o&&Math.abs(p+v)<o&&Math.abs(l+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(h+1)/2,b=(m+1)/2,x=(c+d)/4,w=(u+f)/4,_=(p+v)/4;return g>y&&g>b?g<a?(n=0,i=.707106781,r=.707106781):(i=x/(n=Math.sqrt(g)),r=w/n):y>b?y<a?(n=.707106781,i=0,r=.707106781):(n=x/(i=Math.sqrt(y)),r=_/i):b<a?(n=.707106781,i=.707106781,r=0):(n=w/(r=Math.sqrt(b)),i=_/r),this.set(n,i,r,t),this}var M=Math.sqrt((v-p)*(v-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(M)<.001&&(M=1),this.x=(v-p)/M,this.y=(u-f)/M,this.z=(d-c)/M,this.w=Math.acos((l+h+m-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),Du.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Du,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Iu.prototype=Object.assign(Object.create(Du.prototype),{constructor:Iu,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Du.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(ju,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(u!==f||s!==d||l!==h||c!==p){var v=1-o,m=s*d+l*h+c*p+u*f,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,m*g);v=Math.sin(v*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*v+d*w,l=l*v+h*w,c=c*v+p*w,u=u*v+f*w,v===1-o){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u},multiplyQuaternionsFlat:function(e,t,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],p=r[a+3];return e[t]=o*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-o*h,e[t+2]=l*p+c*h+o*d-s*u,e[t+3]=c*p-o*u-s*d-l*h,e}}),Object.defineProperties(ju.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(ju.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),d=s(n/2),h=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-s)*h,this._y=(r-l)*h,this._z=(a-i)*h}else if(n>o&&n>u){var p=2*Math.sqrt(1+n-o-u);this._w=(c-s)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(r+l)/p}else if(o>u){var f=2*Math.sqrt(1+o-n-u);this._w=(r-l)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(s+c)/f}else{var v=2*Math.sqrt(1+u-n-o);this._w=(a-i)/v,this._x=(r+l)/v,this._y=(s+c)/v,this._z=.25*v}return this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Lu.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+i*l-r*s,this._y=i*c+a*s+r*o-n*l,this._z=r*c+a*l+n*s-i*o,this._w=a*c-n*o-i*s-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var zu=new Fu,Bu=new ju;function Fu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=e,this.y=t,this.z=n}Object.assign(Fu.prototype,{isVector3:!0,set:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bu.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Bu.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,c=s*n+o*t-r*i,u=s*i+r*n-a*t,d=-r*t-a*n-o*i;return this.x=l*s+d*-r+c*-o-u*-a,this.y=c*s+d*-a+u*-r-l*-o,this.z=u*s+d*-o+l*-a-c*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return zu.copy(this).projectOnVector(e),this.sub(zu)},reflect:function(e){return this.sub(zu.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Lu.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Uu=new Fu,Hu=new Zu,Gu=new Fu(0,0,0),Vu=new Fu(1,1,1),Wu=new Fu,qu=new Fu,Xu=new Fu;function Zu(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Zu.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,l,c,u,d,h,p,f,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=d,m[3]=h,m[7]=p,m[11]=f,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Zu).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/Uu.setFromMatrixColumn(e,0).length(),r=1/Uu.setFromMatrixColumn(e,1).length(),a=1/Uu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var d=a*c,h=a*u,p=o*c,f=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-o*s,t[2]=f-d*l,t[6]=p+h*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*c,m=s*u,g=l*c,y=l*u;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*c,x=s*u,w=l*c,_=l*u;t[0]=b-_*o,t[4]=-a*u,t[8]=w+x*o,t[1]=x+w*o,t[5]=a*c,t[9]=_-b*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var M=a*c,S=a*u,E=o*c,C=o*u;t[0]=s*c,t[4]=E*l-S,t[8]=M*l+C,t[1]=s*u,t[5]=C*l+M,t[9]=S*l-E,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,L=a*l,A=o*s,P=o*l;t[0]=s*c,t[4]=P-T*u,t[8]=A*u+L,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=L*u+A,t[10]=T-P*u}else if("XZY"===e.order){var O=a*s,R=a*l,N=o*s,k=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=O*u+k,t[5]=a*c,t[9]=R*u-N,t[2]=N*u-R,t[6]=o*c,t[10]=k*u+O}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Gu,e,Vu)},lookAt:function(e,t,n){var i=this.elements;return Xu.subVectors(e,t),0===Xu.lengthSq()&&(Xu.z=1),Xu.normalize(),Wu.crossVectors(n,Xu),0===Wu.lengthSq()&&(1===Math.abs(n.z)?Xu.x+=1e-4:Xu.z+=1e-4,Xu.normalize(),Wu.crossVectors(n,Xu)),Wu.normalize(),qu.crossVectors(Xu,Wu),i[0]=Wu.x,i[4]=qu.x,i[8]=Xu.x,i[1]=Wu.y,i[5]=qu.y,i[9]=Xu.y,i[2]=Wu.z,i[6]=qu.z,i[10]=Xu.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=i[0],_=i[4],M=i[8],S=i[12],E=i[1],C=i[5],T=i[9],L=i[13],A=i[2],P=i[6],O=i[10],R=i[14],N=i[3],k=i[7],D=i[11],I=i[15];return r[0]=a*w+o*E+s*A+l*N,r[4]=a*_+o*C+s*P+l*k,r[8]=a*M+o*T+s*O+l*D,r[12]=a*S+o*L+s*R+l*I,r[1]=c*w+u*E+d*A+h*N,r[5]=c*_+u*C+d*P+h*k,r[9]=c*M+u*T+d*O+h*D,r[13]=c*S+u*L+d*R+h*I,r[2]=p*w+f*E+v*A+m*N,r[6]=p*_+f*C+v*P+m*k,r[10]=p*M+f*T+v*O+m*D,r[14]=p*S+f*L+v*R+m*I,r[3]=g*w+y*E+b*A+x*N,r[7]=g*_+y*C+b*P+x*k,r[11]=g*M+y*T+b*O+x*D,r[15]=g*S+y*L+b*R+x*I,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*s*u-i*l*u-r*o*d+n*l*d+i*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+r*a*d-i*a*h+i*l*c-r*s*c)+e[11]*(+t*l*u-t*o*h-r*a*u+n*a*h+r*o*c-n*l*c)+e[15]*(-i*o*c-t*s*u+t*o*d+i*a*u-n*a*d+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],v=i[11],m=i[12],g=i[13],y=i[14],b=i[15],x=p*y*d-g*f*d+g*u*v-c*y*v-p*u*b+c*f*b,w=m*f*d-h*y*d-m*u*v+l*y*v+h*u*b-l*f*b,_=h*g*d-m*p*d+m*c*v-l*g*v-h*c*b+l*p*b,M=m*p*u-h*g*u-m*c*f+l*g*f+h*c*y-l*p*y,S=r*x+a*w+o*_+s*M;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var E=1/S;return n[0]=x*E,n[1]=(g*f*s-p*y*s-g*o*v+a*y*v+p*o*b-a*f*b)*E,n[2]=(c*y*s-g*u*s+g*o*d-a*y*d-c*o*b+a*u*b)*E,n[3]=(p*u*s-c*f*s-p*o*d+a*f*d+c*o*v-a*u*v)*E,n[4]=w*E,n[5]=(h*y*s-m*f*s+m*o*v-r*y*v-h*o*b+r*f*b)*E,n[6]=(m*u*s-l*y*s-m*o*d+r*y*d+l*o*b-r*u*b)*E,n[7]=(l*f*s-h*u*s+h*o*d-r*f*d-l*o*v+r*u*v)*E,n[8]=_*E,n[9]=(m*p*s-h*g*s-m*a*v+r*g*v+h*a*b-r*p*b)*E,n[10]=(l*g*s-m*c*s+m*a*d-r*g*d-l*a*b+r*c*b)*E,n[11]=(h*c*s-l*p*s-h*a*d+r*p*d+l*a*v-r*c*v)*E,n[12]=M*E,n[13]=(h*g*o-m*p*o+m*a*f-r*g*f-h*a*y+r*p*y)*E,n[14]=(m*c*o-l*g*o-m*a*u+r*g*u+l*a*y-r*c*y)*E,n[15]=(l*p*o-h*c*o+h*a*u-r*p*u-l*a*f+r*c*f)*E,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,c=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,c*o+n,c*s-i*a,0,l*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,c=a+a,u=o+o,d=r*l,h=r*c,p=r*u,f=a*c,v=a*u,m=o*u,g=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return i[0]=(1-(f+m))*x,i[1]=(h+b)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(h-b)*w,i[5]=(1-(d+m))*w,i[6]=(v+g)*w,i[7]=0,i[8]=(p+y)*_,i[9]=(v-g)*_,i[10]=(1-(d+f))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){var i=this.elements,r=Uu.set(i[0],i[1],i[2]).length(),a=Uu.set(i[4],i[5],i[6]).length(),o=Uu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Hu.copy(this);var s=1/r,l=1/a,c=1/o;return Hu.elements[0]*=s,Hu.elements[1]*=s,Hu.elements[2]*=s,Hu.elements[4]*=l,Hu.elements[5]*=l,Hu.elements[6]*=l,Hu.elements[8]*=c,Hu.elements[9]*=c,Hu.elements[10]*=c,t.setFromRotationMatrix(Hu),n.x=r,n.y=a,n.z=o,this},makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),d=-(a+r)/(a-r),h=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),c=1/(a-r),u=(t+e)*s,d=(n+i)*l,h=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Yu=new Zu,Ju=new ju;function Qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qu.DefaultOrder;this._x=e,this._y=t,this._z=n,this._order=i}function Ku(){this.mask=1}Qu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Qu.DefaultOrder="XYZ",Object.defineProperties(Qu.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Qu.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Lu.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],p=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Yu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Yu,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Ju.setFromEuler(this),this.setFromQuaternion(Ju,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Fu(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Ku.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!==(this.mask&e.mask)}});var $u=0,ed=new Fu,td=new ju,nd=new Zu,id=new Fu,rd=new Fu,ad=new Fu,od=new ju,sd=new Fu(1,0,0),ld=new Fu(0,1,0),cd=new Fu(0,0,1),ud={type:"added"},dd={type:"removed"};function hd(){Object.defineProperty(this,"id",{value:$u++}),this.uuid=Lu.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hd.DefaultUp.clone();var e=new Fu,t=new Qu,n=new ju,i=new Fu(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Zu},normalMatrix:{value:new Pu}}),this.matrix=new Zu,this.matrixWorld=new Zu,this.matrixAutoUpdate=hd.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ku,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function pd(){hd.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}hd.DefaultUp=new Fu(0,1,0),hd.DefaultMatrixAutoUpdate=!0,hd.prototype=Object.assign(Object.create(Mu.prototype),{constructor:hd,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return td.setFromAxisAngle(e,t),this.quaternion.multiply(td),this},rotateOnWorldAxis:function(e,t){return td.setFromAxisAngle(e,t),this.quaternion.premultiply(td),this},rotateX:function(e){return this.rotateOnAxis(sd,e)},rotateY:function(e){return this.rotateOnAxis(ld,e)},rotateZ:function(e){return this.rotateOnAxis(cd,e)},translateOnAxis:function(e,t){return ed.copy(e).applyQuaternion(this.quaternion),this.position.add(ed.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(sd,e)},translateY:function(e){return this.translateOnAxis(ld,e)},translateZ:function(e){return this.translateOnAxis(cd,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(nd.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?id.copy(e):id.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),rd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nd.lookAt(rd,id,this.up):nd.lookAt(id,rd,this.up),this.quaternion.setFromRotationMatrix(nd),i&&(nd.extractRotation(i.matrixWorld),td.setFromRotationMatrix(nd),this.quaternion.premultiply(td.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ud)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(dd)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),nd.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),nd.multiply(e.parent.matrixWorld)),e.applyMatrix4(nd),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Fu),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new ju),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rd,e,ad),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Fu),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rd,od,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Fu),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var c=o[s];r(e.shapes,c)}else r(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var u=[],d=0,h=this.material.length;d<h;d++)u.push(r(e.materials,this.material[d]));i.material=u}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var p=0;p<this.children.length;p++)i.children.push(this.children[p].toJSON(e).object)}if(t){var f=b(e.geometries),v=b(e.materials),m=b(e.textures),g=b(e.images),y=b(e.shapes);f.length>0&&(n.geometries=f),v.length>0&&(n.materials=v),m.length>0&&(n.textures=m),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y)}return n.object=i,n;function b(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),pd.prototype=Object.assign(Object.create(hd.prototype),{constructor:pd,isScene:!0,copy:function(e,t){return hd.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=hd.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var fd=[new Fu,new Fu,new Fu,new Fu,new Fu,new Fu,new Fu,new Fu],vd=new Fu,md=new Td,gd=new Fu,yd=new Fu,bd=new Fu,xd=new Fu,wd=new Fu,_d=new Fu,Md=new Fu,Sd=new Fu,Ed=new Fu,Cd=new Fu;function Td(e,t){this.min=void 0!==e?e:new Fu(1/0,1/0,1/0),this.max=void 0!==t?t:new Fu(-1/0,-1/0,-1/0)}function Ld(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){Cd.fromArray(e,a);var s=r.x*Math.abs(Cd.x)+r.y*Math.abs(Cd.y)+r.z*Math.abs(Cd.z),l=t.dot(Cd),c=n.dot(Cd),u=i.dot(Cd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}Object.assign(Td.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],d=e[s+2];c<t&&(t=c),u<n&&(n=u),d<i&&(i=d),c>r&&(r=c),u>a&&(a=u),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),d=e.getZ(s);c<t&&(t=c),u<n&&(n=u),d<i&&(i=d),c>r&&(r=c),u>a&&(a=u),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=vd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Fu),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Fu),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),md.copy(t.boundingBox),md.applyMatrix4(e.matrixWorld),this.union(md));for(var n=e.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Fu),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,vd),vd.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Md),Sd.subVectors(this.max,Md),gd.subVectors(e.a,Md),yd.subVectors(e.b,Md),bd.subVectors(e.c,Md),xd.subVectors(yd,gd),wd.subVectors(bd,yd),_d.subVectors(gd,bd);var t=[0,-xd.z,xd.y,0,-wd.z,wd.y,0,-_d.z,_d.y,xd.z,0,-xd.x,wd.z,0,-wd.x,_d.z,0,-_d.x,-xd.y,xd.x,0,-wd.y,wd.x,0,-_d.y,_d.x,0];return!!Ld(t,gd,yd,bd,Sd)&&(!!Ld(t=[1,0,0,0,1,0,0,0,1],gd,yd,bd,Sd)&&(Ed.crossVectors(xd,wd),Ld(t=[Ed.x,Ed.y,Ed.z],gd,yd,bd,Sd)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Fu),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return vd.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(vd).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(fd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fd)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Ad=new Td;function Pd(e,t){this.center=void 0!==e?e:new Fu,this.radius=void 0!==t?t:-1}Object.assign(Pd.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):Ad.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Fu),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Td),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Od=new Fu,Rd=new Fu,Nd=new Fu,kd=new Fu,Dd=new Fu,Id=new Fu,jd=new Fu;function zd(e,t){this.origin=void 0!==e?e:new Fu,this.direction=void 0!==t?t:new Fu(0,0,-1)}Object.assign(zd.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Fu),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Od)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Fu),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Od.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Od.copy(this.direction).multiplyScalar(t).add(this.origin),Od.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){Rd.copy(e).add(t).multiplyScalar(.5),Nd.copy(t).sub(e).normalize(),kd.copy(this.origin).sub(Rd);var r,a,o,s,l=.5*e.distanceTo(t),c=-this.direction.dot(Nd),u=kd.dot(this.direction),d=-kd.dot(Nd),h=kd.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(a=c*u-d,s=l*p,(r=c*d-u)>=0)if(a>=-s)if(a<=s){var f=1/p;o=(r*=f)*(r+c*(a*=f)+2*u)+a*(c*r+a+2*d)+h}else a=l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*d)+h;else a=-l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*d)+h;else a<=-s?o=-(r=Math.max(0,-(-c*l+u)))*r+(a=r>0?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h:a<=s?(r=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):o=-(r=Math.max(0,-(c*l+u)))*r+(a=r>0?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h;else a=c>0?-l:l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Nd).multiplyScalar(a).add(Rd),o},intersectSphere:function(e,t){Od.subVectors(e.center,this.origin);var n=Od.dot(this.direction),i=Od.dot(Od)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Od)},intersectTriangle:function(e,t,n,i,r){Dd.subVectors(t,e),Id.subVectors(n,e),jd.crossVectors(Dd,Id);var a,o=this.direction.dot(jd);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}kd.subVectors(this.origin,e);var s=a*this.direction.dot(Id.crossVectors(kd,Id));if(s<0)return null;var l=a*this.direction.dot(Dd.cross(kd));if(l<0)return null;if(s+l>o)return null;var c=-a*kd.dot(jd);return c<0?null:this.at(c/o,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Bd=new Fu,Fd=new Fu,Ud=new Pu;function Hd(e,t){this.normal=void 0!==e?e:new Fu(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Hd.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var i=Bd.subVectors(n,t).cross(Fd.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Fu),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Fu);var n=e.delta(Bd),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Fu),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Ud.getNormalMatrix(e),i=this.coplanarPoint(Bd).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Gd=new Fu,Vd=new Fu,Wd=new Fu,qd=new Fu,Xd=new Fu,Zd=new Fu,Yd=new Fu,Jd=new Fu,Qd=new Fu,Kd=new Fu;function $d(e,t,n){this.a=void 0!==e?e:new Fu,this.b=void 0!==t?t:new Fu,this.c=void 0!==n?n:new Fu}Object.assign($d,{getNormal:function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Fu),i.subVectors(n,t),Gd.subVectors(e,t),i.cross(Gd);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){Gd.subVectors(i,t),Vd.subVectors(n,t),Wd.subVectors(e,t);var a=Gd.dot(Gd),o=Gd.dot(Vd),s=Gd.dot(Wd),l=Vd.dot(Vd),c=Vd.dot(Wd),u=a*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Fu),0===u)return r.set(-2,-1,-1);var d=1/u,h=(l*s-o*c)*d,p=(a*c-o*s)*d;return r.set(1-h-p,p,h)},containsPoint:function(e,t,n,i){return $d.getBarycoord(e,t,n,i,qd),qd.x>=0&&qd.y>=0&&qd.x+qd.y<=1},getUV:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,qd),s.set(0,0),s.addScaledVector(r,qd.x),s.addScaledVector(a,qd.y),s.addScaledVector(o,qd.z),s},isFrontFacing:function(e,t,n,i){return Gd.subVectors(n,t),Vd.subVectors(e,t),Gd.cross(Vd).dot(i)<0}}),Object.assign($d.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Gd.subVectors(this.c,this.b),Vd.subVectors(this.a,this.b),.5*Gd.cross(Vd).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Fu),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return $d.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Hd),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return $d.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return $d.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return $d.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return $d.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Fu);var n,i,r=this.a,a=this.b,o=this.c;Xd.subVectors(a,r),Zd.subVectors(o,r),Jd.subVectors(e,r);var s=Xd.dot(Jd),l=Zd.dot(Jd);if(s<=0&&l<=0)return t.copy(r);Qd.subVectors(e,a);var c=Xd.dot(Qd),u=Zd.dot(Qd);if(c>=0&&u<=c)return t.copy(a);var d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(r).addScaledVector(Xd,n);Kd.subVectors(e,o);var h=Xd.dot(Kd),p=Zd.dot(Kd);if(p>=0&&h<=p)return t.copy(o);var f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),t.copy(r).addScaledVector(Zd,i);var v=c*p-h*u;if(v<=0&&u-c>=0&&h-p>=0)return Yd.subVectors(o,a),i=(u-c)/(u-c+(h-p)),t.copy(a).addScaledVector(Yd,i);var m=1/(v+f+d);return n=f*m,i=d*m,t.copy(r).addScaledVector(Xd,n).addScaledVector(Zd,i)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var eh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},th={h:0,s:0,l:0},nh={h:0,s:0,l:0};function ih(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function rh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ah(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function oh(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function sh(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Fu,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new ih,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(ih.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Lu.euclideanModulo(e,1),t=Lu.clamp(t,0,1),n=Lu.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=rh(r,i,e+1/3),this.g=rh(r,i,e),this.b=rh(r,i,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=eh[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=ah(e.r),this.g=ah(e.g),this.b=ah(e.b),this},copyLinearToSRGB:function(e){return this.r=oh(e.r),this.g=oh(e.g),this.b=oh(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),l=(s+o)/2;if(s===o)t=0,n=0;else{var c=o-s;switch(n=l<=.5?c/(o+s):c/(2-o-s),o){case i:t=(r-a)/c+(r<a?6:0);break;case r:t=(a-i)/c+2;break;case a:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(th),th.h+=e,th.s+=t,th.l+=n,this.setHSL(th.h,th.s,th.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(th),e.getHSL(nh);var n=Lu.lerp(th.h,nh.h,t),i=Lu.lerp(th.s,nh.s,t),r=Lu.lerp(th.l,nh.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),ih.NAMES=eh,Object.assign(sh.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var i=0,r=e.vertexColors.length;i<r;i++)this.vertexColors[i]=e.vertexColors[i].clone();return this}});var lh=0;function ch(){Object.defineProperty(this,"id",{value:lh++}),this.uuid=Lu.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Hs,this.side=zs,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=nl,this.blendDst=il,this.blendEquation=Xs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bu,this.stencilZFail=bu,this.stencilZPass=bu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function uh(e){ch.call(this),this.type="MeshBasicMaterial",this.color=new ih(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ch.prototype=Object.assign(Object.create(Mu.prototype),{constructor:ch,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Hs&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==zs&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ch.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),uh.prototype=Object.create(ch.prototype),uh.prototype.constructor=uh,uh.prototype.isMeshBasicMaterial=!0,uh.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var dh=new Fu,hh=new Au;function ph(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=wu,this.updateRange={offset:0,count:-1},this.version=0}function fh(e,t,n){ph.call(this,new Int8Array(e),t,n)}function vh(e,t,n){ph.call(this,new Uint8Array(e),t,n)}function mh(e,t,n){ph.call(this,new Uint8ClampedArray(e),t,n)}function gh(e,t,n){ph.call(this,new Int16Array(e),t,n)}function yh(e,t,n){ph.call(this,new Uint16Array(e),t,n)}function bh(e,t,n){ph.call(this,new Int32Array(e),t,n)}function xh(e,t,n){ph.call(this,new Uint32Array(e),t,n)}function wh(e,t,n){ph.call(this,new Float32Array(e),t,n)}function _h(e,t,n){ph.call(this,new Float64Array(e),t,n)}function Mh(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Sh(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(ph.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ph.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new ih),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Au),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Fu),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new ku),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)hh.fromBufferAttribute(this,t),hh.applyMatrix3(e),this.setXY(t,hh.x,hh.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)dh.fromBufferAttribute(this,i),dh.applyMatrix3(e),this.setXYZ(i,dh.x,dh.y,dh.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)dh.x=this.getX(t),dh.y=this.getY(t),dh.z=this.getZ(t),dh.applyMatrix4(e),this.setXYZ(t,dh.x,dh.y,dh.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)dh.x=this.getX(t),dh.y=this.getY(t),dh.z=this.getZ(t),dh.applyNormalMatrix(e),this.setXYZ(t,dh.x,dh.y,dh.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)dh.x=this.getX(t),dh.y=this.getY(t),dh.z=this.getZ(t),dh.transformDirection(e),this.setXYZ(t,dh.x,dh.y,dh.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),fh.prototype=Object.create(ph.prototype),fh.prototype.constructor=fh,vh.prototype=Object.create(ph.prototype),vh.prototype.constructor=vh,mh.prototype=Object.create(ph.prototype),mh.prototype.constructor=mh,gh.prototype=Object.create(ph.prototype),gh.prototype.constructor=gh,yh.prototype=Object.create(ph.prototype),yh.prototype.constructor=yh,bh.prototype=Object.create(ph.prototype),bh.prototype.constructor=bh,xh.prototype=Object.create(ph.prototype),xh.prototype.constructor=xh,wh.prototype=Object.create(ph.prototype),wh.prototype.constructor=wh,_h.prototype=Object.create(ph.prototype),_h.prototype.constructor=_h,Object.assign(Mh.prototype,{computeGroups:function(e){var t,n,i=[],r=void 0,a=e.faces;for(n=0;n<a.length;n++){var o=a[n];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*n-t.start,i.push(t)),t={start:3*n,materialIndex:r})}void 0!==t&&(t.count=3*n-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var u,d=e.morphNormals,h=d.length;if(h>0){u=[];for(var p=0;p<h;p++)u[p]={name:d[p].name,data:[]};this.morphTargets.normal=u}var f=e.skinIndices,v=e.skinWeights,m=f.length===i.length,g=v.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<n.length;y++){var b=n[y];this.vertices.push(i[b.a],i[b.b],i[b.c]);var x=b.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var w=b.normal;this.normals.push(w,w,w)}var _=b.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var M=b.color;this.colors.push(M,M,M)}if(!0===a){var S=r[0][y];void 0!==S?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new Au,new Au,new Au))}if(!0===o){var E=r[1][y];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new Au,new Au,new Au))}for(var C=0;C<l;C++){var T=s[C].vertices;t[C].data.push(T[b.a],T[b.b],T[b.c])}for(var L=0;L<h;L++){var A=d[L].vertexNormals[y];u[L].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(f[b.a],f[b.b],f[b.c]),g&&this.skinWeights.push(v[b.a],v[b.b],v[b.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Eh=1,Ch=new Zu,Th=new hd,Lh=new Fu,Ah=new Td,Ph=new Td,Oh=new Fu;function Rh(){Object.defineProperty(this,"id",{value:Eh+=2}),this.uuid=Lu.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Rh.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Rh,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Sh(e)>65535?xh:yh)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new Pu).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ch.makeRotationX(e),this.applyMatrix4(Ch),this},rotateY:function(e){return Ch.makeRotationY(e),this.applyMatrix4(Ch),this},rotateZ:function(e){return Ch.makeRotationZ(e),this.applyMatrix4(Ch),this},translate:function(e,t,n){return Ch.makeTranslation(e,t,n),this.applyMatrix4(Ch),this},scale:function(e,t,n){return Ch.makeScale(e,t,n),this.applyMatrix4(Ch),this},lookAt:function(e){return Th.lookAt(e),Th.updateMatrix(),this.applyMatrix4(Th.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lh).negate(),this.translate(Lh.x,Lh.y,Lh.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new wh(3*t.vertices.length,3),i=new wh(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new wh(t.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new wh(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(!0===t.verticesNeedUpdate){var i=this.attributes.position;void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){var a=this.attributes.color;void 0!==a&&(a.copyColorsArray(t.colors),a.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var o=this.attributes.uv;void 0!==o&&(o.copyVector2sArray(t.uvs),o.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(t.lineDistances),s.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Mh).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new ph(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new ph(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.setAttribute("color",new ph(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new ph(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new ph(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[o],c=0,u=l.length;c<u;c++){var d=l[c],h=new wh(3*d.data.length,3);h.name=d.name,s.push(h.copyVector3sArray(d.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var p=new wh(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new wh(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Td);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];Ah.setFromBufferAttribute(r),this.morphTargetsRelative?(Oh.addVectors(this.boundingBox.min,Ah.min),this.boundingBox.expandByPoint(Oh),Oh.addVectors(this.boundingBox.max,Ah.max),this.boundingBox.expandByPoint(Oh)):(this.boundingBox.expandByPoint(Ah.min),this.boundingBox.expandByPoint(Ah.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Pd);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Ah.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];Ph.setFromBufferAttribute(a),this.morphTargetsRelative?(Oh.addVectors(Ah.min,Ph.min),Ah.expandByPoint(Oh),Oh.addVectors(Ah.max,Ph.max),Ah.expandByPoint(Oh)):(Ah.expandByPoint(Ph.min),Ah.expandByPoint(Ph.max))}Ah.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)Oh.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Oh));if(t)for(var c=0,u=t.length;c<u;c++)for(var d=t[c],h=this.morphTargetsRelative,p=0,f=d.count;p<f;p++)Oh.fromBufferAttribute(d,p),h&&(Lh.fromBufferAttribute(e,p),Oh.add(Lh)),o=Math.max(o,n.distanceToSquared(Oh));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new ph(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Fu,o=new Fu,s=new Fu,l=new Fu,c=new Fu,u=new Fu,d=new Fu,h=new Fu;if(e)for(var p=0,f=e.count;p<f;p+=3){var v=e.getX(p+0),m=e.getX(p+1),g=e.getX(p+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),u.fromBufferAttribute(n,g),l.add(d),c.add(d),u.add(d),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,u.x,u.y,u.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],o=a.array,s=a.itemSize*t,l=Math.min(o.length,r.length-s),c=0,u=s;c<l;c++,u++)r[u]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Oh.fromBufferAttribute(e,t),Oh.normalize(),e.setXYZ(t,Oh.x,Oh.y,Oh.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,s=0,l=0,c=t.length;l<c;l++){o=t[l]*i;for(var u=0;u<i;u++)a[s++]=n[o++]}return new ph(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Rh,n=this.index.array,i=this.attributes;for(var r in i){var a=e(i[r],n);t.setAttribute(r,a)}var o=this.morphAttributes;for(var s in o){for(var l=[],c=o[s],u=0,d=c.length;u<d;u++){var h=e(c[u],n);l.push(h)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,v=p.length;f<v;f++){var m=p[f];t.addGroup(m.start,m.count,m.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a],s=o.toJSON(e.data);""!==o.name&&(s.name=o.name),e.data.attributes[a]=s}var l={},c=!1;for(var u in this.morphAttributes){for(var d=this.morphAttributes[u],h=[],p=0,f=d.length;p<f;p++){var v=d[p],m=v.toJSON(e.data);""!==v.name&&(m.name=v.name),h.push(m)}h.length>0&&(l[u]=h,c=!0)}c&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);var g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));var y=this.boundingSphere;return null!==y&&(e.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),e},clone:function(){return(new Rh).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],c=o[s],u=0,d=c.length;u<d;u++)l.push(c[u].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,p=0,f=h.length;p<f;p++){var v=h[p];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Nh=new Zu,kh=new zd,Dh=new Pd,Ih=new Fu,jh=new Fu,zh=new Fu,Bh=new Fu,Fh=new Fu,Uh=new Fu,Hh=new Fu,Gh=new Fu,Vh=new Fu,Wh=new Au,qh=new Au,Xh=new Au,Zh=new Fu,Yh=new Fu;function Jh(e,t){hd.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Rh,this.material=void 0!==t?t:new uh,this.updateMorphTargets()}function Qh(e,t,n,i,r,a,o,s){if(null===(t.side===Bs?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==Fs,s)))return null;Yh.copy(s),Yh.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Yh);return l<n.near||l>n.far?null:{distance:l,point:Yh.clone(),object:e}}function Kh(e,t,n,i,r,a,o,s,l,c,u,d){Ih.fromBufferAttribute(r,c),jh.fromBufferAttribute(r,u),zh.fromBufferAttribute(r,d);var h=e.morphTargetInfluences;if(t.morphTargets&&a&&h){Hh.set(0,0,0),Gh.set(0,0,0),Vh.set(0,0,0);for(var p=0,f=a.length;p<f;p++){var v=h[p],m=a[p];0!==v&&(Bh.fromBufferAttribute(m,c),Fh.fromBufferAttribute(m,u),Uh.fromBufferAttribute(m,d),o?(Hh.addScaledVector(Bh,v),Gh.addScaledVector(Fh,v),Vh.addScaledVector(Uh,v)):(Hh.addScaledVector(Bh.sub(Ih),v),Gh.addScaledVector(Fh.sub(jh),v),Vh.addScaledVector(Uh.sub(zh),v)))}Ih.add(Hh),jh.add(Gh),zh.add(Vh)}e.isSkinnedMesh&&(e.boneTransform(c,Ih),e.boneTransform(u,jh),e.boneTransform(d,zh));var g=Qh(e,t,n,i,Ih,jh,zh,Zh);if(g){s&&(Wh.fromBufferAttribute(s,c),qh.fromBufferAttribute(s,u),Xh.fromBufferAttribute(s,d),g.uv=$d.getUV(Zh,Ih,jh,zh,Wh,qh,Xh,new Au)),l&&(Wh.fromBufferAttribute(l,c),qh.fromBufferAttribute(l,u),Xh.fromBufferAttribute(l,d),g.uv2=$d.getUV(Zh,Ih,jh,zh,Wh,qh,Xh,new Au));var y=new sh(c,u,d);$d.getNormal(Ih,jh,zh,y.normal),g.face=y}return g}Jh.prototype=Object.assign(Object.create(hd.prototype),{constructor:Jh,isMesh:!0,copy:function(e){return hd.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Dh.copy(i.boundingSphere),Dh.applyMatrix4(a),!1!==e.ray.intersectsSphere(Dh)&&(Nh.getInverse(a),kh.copy(e.ray).applyMatrix4(Nh),null===i.boundingBox||!1!==kh.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o=i.index,s=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative,u=i.attributes.uv,d=i.attributes.uv2,h=i.groups,p=i.drawRange;if(null!==o)if(Array.isArray(r))for(var f=0,v=h.length;f<v;f++)for(var m=h[f],g=r[m.materialIndex],y=Math.max(m.start,p.start),b=Math.min(m.start+m.count,p.start+p.count);y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),_=o.getX(y+2);(n=Kh(this,g,e,kh,s,l,c,u,d,x,w,_))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var M=Math.max(0,p.start),S=Math.min(o.count,p.start+p.count);M<S;M+=3){var E=o.getX(M),C=o.getX(M+1),T=o.getX(M+2);(n=Kh(this,r,e,kh,s,l,c,u,d,E,C,T))&&(n.faceIndex=Math.floor(M/3),t.push(n))}else if(void 0!==s)if(Array.isArray(r))for(var L=0,A=h.length;L<A;L++)for(var P=h[L],O=r[P.materialIndex],R=Math.max(P.start,p.start),N=Math.min(P.start+P.count,p.start+p.count);R<N;R+=3){(n=Kh(this,O,e,kh,s,l,c,u,d,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=P.materialIndex,t.push(n))}else for(var k=Math.max(0,p.start),D=Math.min(s.count,p.start+p.count);k<D;k+=3){(n=Kh(this,r,e,kh,s,l,c,u,d,k,k+1,k+2))&&(n.faceIndex=Math.floor(k/3),t.push(n))}}else if(i.isGeometry){var I,j=Array.isArray(r),z=i.vertices,B=i.faces,F=i.faceVertexUvs[0];F.length>0&&(I=F);for(var U=0,H=B.length;U<H;U++){var G=B[U],V=j?r[G.materialIndex]:r;if(void 0!==V){var W=z[G.a],q=z[G.b],X=z[G.c];if(n=Qh(this,V,e,kh,W,q,X,Zh)){if(I&&I[U]){var Z=I[U];Wh.copy(Z[0]),qh.copy(Z[1]),Xh.copy(Z[2]),n.uv=$d.getUV(Zh,W,q,X,Wh,qh,Xh,new Au)}n.face=G,n.faceIndex=U,t.push(n)}}}}}});var $h=0,ep=new Zu,tp=new hd,np=new Fu;function ip(){Object.defineProperty(this,"id",{value:$h+=2}),this.uuid=Lu.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}ip.prototype=Object.assign(Object.create(Mu.prototype),{constructor:ip,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Pu).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(var r=0,a=this.faces.length;r<a;r++){var o=this.faces[r];o.normal.applyMatrix3(t).normalize();for(var s=0,l=o.vertexNormals.length;s<l;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return ep.makeRotationX(e),this.applyMatrix4(ep),this},rotateY:function(e){return ep.makeRotationY(e),this.applyMatrix4(ep),this},rotateZ:function(e){return ep.makeRotationZ(e),this.applyMatrix4(ep),this},translate:function(e,t,n){return ep.makeTranslation(e,t,n),this.applyMatrix4(ep),this},scale:function(e,t,n){return ep.makeScale(e,t,n),this.applyMatrix4(ep),this},lookAt:function(e){return tp.lookAt(e),tp.updateMatrix(),this.applyMatrix4(tp.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position,a=i.normal,o=i.color,s=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0;c<r.count;c++)t.vertices.push((new Fu).fromBufferAttribute(r,c)),void 0!==o&&t.colors.push((new ih).fromBufferAttribute(o,c));function u(e,n,i,r){var c=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=new sh(e,n,i,void 0===a?[]:[(new Fu).fromBufferAttribute(a,e),(new Fu).fromBufferAttribute(a,n),(new Fu).fromBufferAttribute(a,i)],c,r);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Au).fromBufferAttribute(s,e),(new Au).fromBufferAttribute(s,n),(new Au).fromBufferAttribute(s,i)]),void 0!==l&&t.faceVertexUvs[1].push([(new Au).fromBufferAttribute(l,e),(new Au).fromBufferAttribute(l,n),(new Au).fromBufferAttribute(l,i)])}var d=e.groups;if(d.length>0)for(var h=0;h<d.length;h++)for(var p=d[h],f=p.start,v=f,m=f+p.count;v<m;v+=3)void 0!==n?u(n.getX(v),n.getX(v+1),n.getX(v+2),p.materialIndex):u(v,v+1,v+2,p.materialIndex);else if(void 0!==n)for(var g=0;g<n.count;g+=3)u(n.getX(g),n.getX(g+1),n.getX(g+2));else for(var y=0;y<r.count;y+=3)u(y,y+1,y+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(np).negate(),this.translate(np.x,np.y,np.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Zu;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var e=new Fu,t=new Fu,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);for(var t=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)t[n]=new Fu;if(e)for(var r=new Fu,a=new Fu,o=0,s=this.faces.length;o<s;o++){var l=this.faces[o],c=this.vertices[l.a],u=this.vertices[l.b],d=this.vertices[l.c];r.subVectors(d,u),a.subVectors(c,u),r.cross(a),t[l.a].add(r),t[l.b].add(r),t[l.c].add(r)}else{this.computeFaceNormals();for(var h=0,p=this.faces.length;h<p;h++){var f=this.faces[h];t[f.a].add(f.normal),t[f.b].add(f.normal),t[f.c].add(f.normal)}}for(var v=0,m=this.vertices.length;v<m;v++)t[v].normalize();for(var g=0,y=this.faces.length;g<y;g++){var b=this.faces[g],x=b.vertexNormals;3===x.length?(x[0].copy(t[b.a]),x[1].copy(t[b.b]),x[2].copy(t[b.c])):(x[0]=t[b.a].clone(),x[1]=t[b.b].clone(),x[2]=t[b.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,r=n.vertexNormals.length;i<r;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var a=new ip;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var l=this.morphNormals[o].faceNormals,c=this.morphNormals[o].vertexNormals,u=0,d=this.faces.length;u<d;u++){var h=new Fu,p={a:new Fu,b:new Fu,c:new Fu};l.push(h),c.push(p)}}var f=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var v=0,m=this.faces.length;v<m;v++){var g=this.faces[v],y=f.faceNormals[v],b=f.vertexNormals[v];y.copy(g.normal),b.a.copy(g.vertexNormals[0]),b.b.copy(g.vertexNormals[1]),b.c.copy(g.vertexNormals[2])}}for(var x=0,w=this.faces.length;x<w;x++){var _=this.faces[x];_.normal=_.__originalFaceNormal,_.vertexNormals=_.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Td),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Pd),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,c=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Pu).getNormalMatrix(t));for(var d=0,h=o.length;d<h;d++){var p=o[d].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(var f=0,v=u.length;f<v;f++)c.push(u[f].clone());for(var m=0,g=l.length;m<g;m++){var y=l[m],b=void 0,x=void 0,w=void 0,_=y.vertexNormals,M=y.vertexColors;(b=new sh(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==i&&b.normal.applyMatrix3(i).normalize();for(var S=0,E=_.length;S<E;S++)x=_[S].clone(),void 0!==i&&x.applyMatrix3(i).normalize(),b.vertexNormals.push(x);b.color.copy(y.color);for(var C=0,T=M.length;C<T;C++)w=M[C],b.vertexColors.push(w.clone());b.materialIndex=y.materialIndex+n,s.push(b)}for(var L=0,A=e.faceVertexUvs.length;L<A;L++){var P=e.faceVertexUvs[L];void 0===this.faceVertexUvs[L]&&(this.faceVertexUvs[L]=[]);for(var O=0,R=P.length;O<R;O++){for(var N=P[O],k=[],D=0,I=N.length;D<I;D++)k.push(N[D].clone());this.faceVertexUvs[L].push(k)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){for(var e={},t=[],n=[],i=Math.pow(10,4),r=0,a=this.vertices.length;r<a;r++){var o=this.vertices[r],s=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===e[s]?(e[s]=r,t.push(this.vertices[r]),n[r]=t.length-1):n[r]=n[e[s]]}for(var l=[],c=0,u=this.faces.length;c<u;c++){var d=this.faces[c];d.a=n[d.a],d.b=n[d.b],d.c=n[d.c];for(var h=[d.a,d.b,d.c],p=0;p<3;p++)if(h[p]===h[(p+1)%3]){l.push(c);break}}for(var f=l.length-1;f>=0;f--){var v=l[f];this.faces.splice(v,1);for(var m=0,g=this.faceVertexUvs.length;m<g;m++)this.faceVertexUvs[m].splice(v,1)}var y=this.vertices.length-t.length;return this.vertices=t,y},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Fu(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(var s=0;s<t;s++){var l=e[s]._id;i&&i.push(a[l]),r&&r.push(o[l])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},c=[],u={},d=[],h={},p=0;p<this.faces.length;p++){var f=this.faces[p],v=void 0!==this.faceVertexUvs[0][p],m=f.normal.length()>0,g=f.vertexNormals.length>0,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,b=f.vertexColors.length>0,x=0;if(x=S(x,0,0),x=S(x,1,!0),x=S(x,2,!1),x=S(x,3,v),x=S(x,4,m),x=S(x,5,g),x=S(x,6,y),x=S(x,7,b),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),v){var w=this.faceVertexUvs[0][p];o.push(T(w[0]),T(w[1]),T(w[2]))}if(m&&o.push(E(f.normal)),g){var _=f.vertexNormals;o.push(E(_[0]),E(_[1]),E(_[2]))}if(y&&o.push(C(f.color)),b){var M=f.vertexColors;o.push(C(M[0]),C(M[1]),C(M[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function C(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=c.length,c.push(e.getHex())),u[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=i,e.data.normals=s,c.length>0&&(e.data.colors=c),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e},clone:function(){return(new ip).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,i=t.length;n<i;n++)this.vertices.push(t[n].clone());for(var r=e.colors,a=0,o=r.length;a<o;a++)this.colors.push(r[a].clone());for(var s=e.faces,l=0,c=s.length;l<c;l++)this.faces.push(s[l].clone());for(var u=0,d=e.faceVertexUvs.length;u<d;u++){var h=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(var p=0,f=h.length;p<f;p++){for(var v=h[p],m=[],g=0,y=v.length;g<y;g++){var b=v[g];m.push(b.clone())}this.faceVertexUvs[u].push(m)}}for(var x=e.morphTargets,w=0,_=x.length;w<_;w++){var M={};if(M.name=x[w].name,void 0!==x[w].vertices){M.vertices=[];for(var S=0,E=x[w].vertices.length;S<E;S++)M.vertices.push(x[w].vertices[S].clone())}if(void 0!==x[w].normals){M.normals=[];for(var C=0,T=x[w].normals.length;C<T;C++)M.normals.push(x[w].normals[C].clone())}this.morphTargets.push(M)}for(var L=e.morphNormals,A=0,P=L.length;A<P;A++){var O={};if(void 0!==L[A].vertexNormals){O.vertexNormals=[];for(var R=0,N=L[A].vertexNormals.length;R<N;R++){var k=L[A].vertexNormals[R],D={};D.a=k.a.clone(),D.b=k.b.clone(),D.c=k.c.clone(),O.vertexNormals.push(D)}}if(void 0!==L[A].faceNormals){O.faceNormals=[];for(var I=0,j=L[A].faceNormals.length;I<j;I++)O.faceNormals.push(L[A].faceNormals[I].clone())}this.morphNormals.push(O)}for(var z=e.skinWeights,B=0,F=z.length;B<F;B++)this.skinWeights.push(z[B].clone());for(var U=e.skinIndices,H=0,G=U.length;H<G;H++)this.skinIndices.push(U[H].clone());for(var V=e.lineDistances,W=0,q=V.length;W<q;W++)this.lineDistances.push(V[W]);var X=e.boundingBox;null!==X&&(this.boundingBox=X.clone());var Z=e.boundingSphere;return null!==Z&&(this.boundingSphere=Z.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var rp=function(e){c(n,e);var t=p(n);function n(e,r,a,o,s,l){var c;return i(this,n),(c=t.call(this)).type="BoxGeometry",c.parameters={width:e,height:r,depth:a,widthSegments:o,heightSegments:s,depthSegments:l},c.fromBufferGeometry(new ap(e,r,a,o,s,l)),c.mergeVertices(),c}return s(n)}(ip),ap=function(e){c(n,e);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;i(this,n),(e=t.call(this)).type="BoxBufferGeometry",e.parameters={width:r,height:a,depth:o,widthSegments:s,heightSegments:l,depthSegments:c};var u=h(e);s=Math.floor(s),l=Math.floor(l),c=Math.floor(c);var d=[],p=[],f=[],v=[],m=0,g=0;function y(e,t,n,i,r,a,o,s,l,c,h){for(var y=a/l,b=o/c,x=a/2,w=o/2,_=s/2,M=l+1,S=c+1,E=0,C=0,T=new Fu,L=0;L<S;L++)for(var A=L*b-w,P=0;P<M;P++){var O=P*y-x;T[e]=O*i,T[t]=A*r,T[n]=_,p.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,f.push(T.x,T.y,T.z),v.push(P/l),v.push(1-L/c),E+=1}for(var R=0;R<c;R++)for(var N=0;N<l;N++){var k=m+N+M*R,D=m+N+M*(R+1),I=m+(N+1)+M*(R+1),j=m+(N+1)+M*R;d.push(k,D,j),d.push(D,I,j),C+=6}u.addGroup(g,C,h),g+=C,m+=E}return y("z","y","x",-1,-1,o,a,r,c,l,0),y("z","y","x",1,-1,o,a,-r,c,l,1),y("x","z","y",1,1,r,o,a,s,c,2),y("x","z","y",1,-1,r,o,-a,s,c,3),y("x","y","z",1,-1,r,a,o,s,l,4),y("x","y","z",-1,-1,r,a,-o,s,l,5),e.setIndex(d),e.setAttribute("position",new wh(p,3)),e.setAttribute("normal",new wh(f,3)),e.setAttribute("uv",new wh(v,2)),e}return s(n)}(Rh);function op(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function sp(e){for(var t={},n=0;n<e.length;n++){var i=op(e[n]);for(var r in i)t[r]=i[r]}return t}var lp={clone:op,merge:sp},cp="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",up="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function dp(e){ch.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=cp,this.fragmentShader=up,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function hp(){hd.call(this),this.type="Camera",this.matrixWorldInverse=new Zu,this.projectionMatrix=new Zu,this.projectionMatrixInverse=new Zu}function pp(e,t,n,i){hp.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}dp.prototype=Object.create(ch.prototype),dp.prototype.constructor=dp,dp.prototype.isShaderMaterial=!0,dp.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=op(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},dp.prototype.toJSON=function(e){var t=ch.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},hp.prototype=Object.assign(Object.create(hd.prototype),{constructor:hp,isCamera:!0,copy:function(e,t){return hd.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Fu),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){hd.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){hd.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),pp.prototype=Object.assign(Object.create(hp.prototype),{constructor:pp,isPerspectiveCamera:!0,copy:function(e,t){return hp.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Lu.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Lu.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Lu.RAD2DEG*Math.atan(Math.tan(.5*Lu.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Lu.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=hd.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var fp=90,vp=1;function mp(e,t,n){if(hd.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var i=new pp(fp,vp,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Fu(1,0,0)),this.add(i);var r=new pp(fp,vp,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Fu(-1,0,0)),this.add(r);var a=new pp(fp,vp,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Fu(0,1,0)),this.add(a);var o=new pp(fp,vp,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Fu(0,-1,0)),this.add(o);var s=new pp(fp,vp,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Fu(0,0,1)),this.add(s);var l=new pp(fp,vp,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Fu(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c},this.clear=function(e,t,i,r){for(var a=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(n,o),e.clear(t,i,r);e.setRenderTarget(a)}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function gp(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Du.call(this,e,e,t)}function yp(e,t,n,i,r,a,o,s,l,c,u,d){Nu.call(this,null,a,o,s,l,c,i,r,u,d),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:Dl,this.minFilter=void 0!==c?c:Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}mp.prototype=Object.create(hd.prototype),mp.prototype.constructor=mp,gp.prototype=Object.create(Du.prototype),gp.prototype.constructor=gp,gp.prototype.isWebGLCubeRenderTarget=!0,gp.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=tc,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new pd,i="\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",r="\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",a=new dp({name:"CubemapFromEquirect",uniforms:op({tEquirect:{value:null}}),vertexShader:i,fragmentShader:r,side:Bs,blending:Us});a.uniforms.tEquirect.value=t;var o=new Jh(new ap(5,5,5),a);return n.add(o),new mp(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this},yp.prototype=Object.create(Nu.prototype),yp.prototype.constructor=yp,yp.prototype.isDataTexture=!0;var bp=new Pd,xp=new Fu;function wp(e,t,n,i,r,a){this.planes=[void 0!==e?e:new Hd,void 0!==t?t:new Hd,void 0!==n?n:new Hd,void 0!==i?i:new Hd,void 0!==r?r:new Hd,void 0!==a?a:new Hd]}Object.assign(wp.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],f=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-i,u-s,f-d,y-v).normalize(),t[1].setComponents(o+i,u+s,f+d,y+v).normalize(),t[2].setComponents(o+r,u+l,f+h,y+m).normalize(),t[3].setComponents(o-r,u-l,f-h,y-m).normalize(),t[4].setComponents(o-a,u-c,f-p,y-g).normalize(),t[5].setComponents(o+a,u+c,f+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),bp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(bp)},intersectsSprite:function(e){return bp.center.set(0,0,0),bp.radius=.7071067811865476,bp.applyMatrix4(e.matrixWorld),this.intersectsSphere(bp)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(xp.x=i.normal.x>0?e.max.x:e.min.x,xp.y=i.normal.y>0?e.max.y:e.min.y,xp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(xp)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var _p={common:{diffuse:{value:new ih(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pu},uv2Transform:{value:new Pu},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Au(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ih(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ih(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Pu}},sprite:{diffuse:{value:new ih(15658734)},opacity:{value:1},center:{value:new Au(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Pu}}};function Mp(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Sp(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var a=i.get(t);void 0===a?i.set(t,function(t,n){var i=t.array,r=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(!function(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,r),a.version=t.version)}}}function Ep(e,t,n,i){ip.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Cp(e,t,n,i)),this.mergeVertices()}function Cp(e,t,n,i){Rh.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};for(var r=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(i)||1,l=o+1,c=s+1,u=e/o,d=t/s,h=[],p=[],f=[],v=[],m=0;m<c;m++)for(var g=m*d-a,y=0;y<l;y++){var b=y*u-r;p.push(b,-g,0),f.push(0,0,1),v.push(y/o),v.push(1-m/s)}for(var x=0;x<s;x++)for(var w=0;w<o;w++){var _=w+l*x,M=w+l*(x+1),S=w+1+l*(x+1),E=w+1+l*x;h.push(_,M,E),h.push(M,S,E)}this.setIndex(h),this.setAttribute("position",new wh(p,3)),this.setAttribute("normal",new wh(f,3)),this.setAttribute("uv",new wh(v,2))}Ep.prototype=Object.create(ip.prototype),Ep.prototype.constructor=Ep,Cp.prototype=Object.create(Rh.prototype),Cp.prototype.constructor=Cp;var Tp={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Lp={basic:{uniforms:sp([_p.common,_p.specularmap,_p.envmap,_p.aomap,_p.lightmap,_p.fog]),vertexShader:Tp.meshbasic_vert,fragmentShader:Tp.meshbasic_frag},lambert:{uniforms:sp([_p.common,_p.specularmap,_p.envmap,_p.aomap,_p.lightmap,_p.emissivemap,_p.fog,_p.lights,{emissive:{value:new ih(0)}}]),vertexShader:Tp.meshlambert_vert,fragmentShader:Tp.meshlambert_frag},phong:{uniforms:sp([_p.common,_p.specularmap,_p.envmap,_p.aomap,_p.lightmap,_p.emissivemap,_p.bumpmap,_p.normalmap,_p.displacementmap,_p.fog,_p.lights,{emissive:{value:new ih(0)},specular:{value:new ih(1118481)},shininess:{value:30}}]),vertexShader:Tp.meshphong_vert,fragmentShader:Tp.meshphong_frag},standard:{uniforms:sp([_p.common,_p.envmap,_p.aomap,_p.lightmap,_p.emissivemap,_p.bumpmap,_p.normalmap,_p.displacementmap,_p.roughnessmap,_p.metalnessmap,_p.fog,_p.lights,{emissive:{value:new ih(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tp.meshphysical_vert,fragmentShader:Tp.meshphysical_frag},toon:{uniforms:sp([_p.common,_p.aomap,_p.lightmap,_p.emissivemap,_p.bumpmap,_p.normalmap,_p.displacementmap,_p.gradientmap,_p.fog,_p.lights,{emissive:{value:new ih(0)}}]),vertexShader:Tp.meshtoon_vert,fragmentShader:Tp.meshtoon_frag},matcap:{uniforms:sp([_p.common,_p.bumpmap,_p.normalmap,_p.displacementmap,_p.fog,{matcap:{value:null}}]),vertexShader:Tp.meshmatcap_vert,fragmentShader:Tp.meshmatcap_frag},points:{uniforms:sp([_p.points,_p.fog]),vertexShader:Tp.points_vert,fragmentShader:Tp.points_frag},dashed:{uniforms:sp([_p.common,_p.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tp.linedashed_vert,fragmentShader:Tp.linedashed_frag},depth:{uniforms:sp([_p.common,_p.displacementmap]),vertexShader:Tp.depth_vert,fragmentShader:Tp.depth_frag},normal:{uniforms:sp([_p.common,_p.bumpmap,_p.normalmap,_p.displacementmap,{opacity:{value:1}}]),vertexShader:Tp.normal_vert,fragmentShader:Tp.normal_frag},sprite:{uniforms:sp([_p.sprite,_p.fog]),vertexShader:Tp.sprite_vert,fragmentShader:Tp.sprite_frag},background:{uniforms:{uvTransform:{value:new Pu},t2D:{value:null}},vertexShader:Tp.background_vert,fragmentShader:Tp.background_frag},cube:{uniforms:sp([_p.envmap,{opacity:{value:1}}]),vertexShader:Tp.cube_vert,fragmentShader:Tp.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tp.equirect_vert,fragmentShader:Tp.equirect_frag},distanceRGBA:{uniforms:sp([_p.common,_p.displacementmap,{referencePosition:{value:new Fu},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tp.distanceRGBA_vert,fragmentShader:Tp.distanceRGBA_frag},shadow:{uniforms:sp([_p.lights,_p.fog,{color:{value:new ih(0)},opacity:{value:1}}]),vertexShader:Tp.shadow_vert,fragmentShader:Tp.shadow_frag}};function Ap(e,t,n,i){var r,a,o=new ih(0),s=0,l=null,c=0,u=null;function d(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),d(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){d(o,s=e)},render:function(t,i,h,p){var f=!0===i.isScene?i.background:null,v=e.xr,m=v.getSession&&v.getSession();if(m&&"additive"===m.environmentBlendMode&&(f=null),null===f?d(o,s):f&&f.isColor&&(d(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===Pl)){void 0===a&&((a=new Jh(new ap(1,1,1),new dp({name:"BackgroundCubeMaterial",uniforms:op(Lp.cube.uniforms),vertexShader:Lp.cube.vertexShader,fragmentShader:Lp.cube.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(a));var g=f.isWebGLCubeRenderTarget?f.texture:f;a.material.uniforms.envMap.value=g,a.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,l===f&&c===g.version&&u===e.toneMapping||(a.material.needsUpdate=!0,l=f,c=g.version,u=e.toneMapping),t.unshift(a,a.geometry,a.material,0,0,null)}else f&&f.isTexture&&(void 0===r&&((r=new Jh(new Cp(2,2),new dp({name:"BackgroundMaterial",uniforms:op(Lp.background.uniforms),vertexShader:Lp.background.vertexShader,fragmentShader:Lp.background.fragmentShader,side:zs,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),r.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&c===f.version&&u===e.toneMapping||(r.material.needsUpdate=!0,l=f,c=f.version,u=e.toneMapping),t.unshift(r,r.geometry,r.material,0,0,null))}}}function Pp(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=h(null),c=l;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{}}}function p(){for(var e=c.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function f(e){v(e,0)}function v(n,r){var a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function m(){for(var t=c.newAttributes,n=c.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function g(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function y(){b(),c!==l&&u((c=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,y,b){var x=!1;if(o){var w=function(t,n,r){var o=!0===r.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var c=l[n.id];void 0===c&&(c={},l[n.id]=c);var u=c[o];void 0===u&&(u=h(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u);return u}(y,d,l);c!==w&&u((c=w).object),x=function(e){var t=c.attributes,n=e.attributes;if(Object.keys(t).length!==Object.keys(n).length)return!0;for(var i in n){var r=t[i],a=n[i];if(r.attribute!==a)return!0;if(r.data!==a.data)return!0}return!1}(y),x&&function(e){var t={},n=e.attributes;for(var i in n){var r=n[i],a={};a.attribute=r,r.data&&(a.data=r.data),t[i]=a}c.attributes=t}(y)}else{var _=!0===l.wireframe;c.geometry===y.id&&c.program===d.id&&c.wireframe===_||(c.geometry=y.id,c.program=d.id,c.wireframe=_,x=!0)}!0===r.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(!function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(var d in c){var h=c[d];if(h>=0){var y=l[d];if(void 0!==y){var b=y.normalized,x=y.itemSize,w=n.get(y);if(void 0===w)continue;var _=w.buffer,M=w.type,S=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,C=E.stride,T=y.offset;E&&E.isInstancedInterleavedBuffer?(v(h,E.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)):f(h),e.bindBuffer(34962,_),g(h,x,M,b,C*S,T*S)}else y.isInstancedBufferAttribute?(v(h,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):f(h),e.bindBuffer(34962,_),g(h,x,M,b,0,0)}else if("instanceMatrix"===d){var L=n.get(r.instanceMatrix);if(void 0===L)continue;var A=L.buffer,P=L.type;v(h+0,1),v(h+1,1),v(h+2,1),v(h+3,1),e.bindBuffer(34962,A),e.vertexAttribPointer(h+0,4,P,!1,64,0),e.vertexAttribPointer(h+1,4,P,!1,64,16),e.vertexAttribPointer(h+2,4,P,!1,64,32),e.vertexAttribPointer(h+3,4,P,!1,64,48)}else if(void 0!==u){var O=u[d];if(void 0!==O)switch(O.length){case 2:e.vertexAttrib2fv(h,O);break;case 3:e.vertexAttrib3fv(h,O);break;case 4:e.vertexAttrib4fv(h,O);break;default:e.vertexAttrib1fv(h,O)}}}}m()}(r,l,d,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var i=t[n];for(var r in i)d(i[r].object),delete i[r];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var i=t[n];for(var r in i)d(i[r].object),delete i[r];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)d(i[r].object),delete i[r];delete n[e.id]}}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:m}}function Op(e,t,n,i){var r,a=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=function(i,o,s){if(0!==s){var l,c;if(a)l=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,i,o,s),n.update(o,r,s)}}}function Rp(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),v=e.getParameter(36348),m=e.getParameter(36349),g=u>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:f,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?e.getParameter(36183):0}}function Np(){var e=this,t=null,n=0,i=!1,r=!1,a=new Hd,o=new Pu,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==r||null===c){var u=i+4*l,d=n.matrixWorldInverse;o.getNormalMatrix(d),(null===c||c.length<u)&&(c=new Float32Array(u));for(var h=0,p=i;h!==l;++h,p+=4)a.copy(t[h]).applyMatrix4(d,o),a.normal.toArray(c,p),c[p+3]=a.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,a){var o=0!==e.length||r||0!==n||i;return i=r,t=c(e,a,0),n=e.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,a,o,u,d,h){if(!i||null===e||0===e.length||r&&!o)r?c(null):l();else{var p=r?0:n,f=4*p,v=d.clippingState||null;s.value=v,v=c(e,u,f,h);for(var m=0;m!==f;++m)v[m]=t[m];d.clippingState=v,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=p}}}function kp(e){var t={};return{has:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,!!i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Dp(e,t,n,i){var r=new WeakMap,a=new WeakMap;function o(e){var s=e.target,l=r.get(s);for(var c in null!==l.index&&t.remove(l.index),l.attributes)t.remove(l.attributes[c]);s.removeEventListener("dispose",o),r.delete(s);var u=a.get(l);u&&(t.remove(u),a.delete(l)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,c=s.length;l<c;l+=3){var u=s[l+0],d=s[l+1],h=s[l+2];n.push(u,d,d,h,h,u)}}else{var p=r.array;o=r.version;for(var f=0,v=p.length/3-1;f<v;f+=3){var m=f+0,g=f+1,y=f+2;n.push(m,g,g,y,y,m)}}var b=new(Sh(n)>65535?xh:yh)(n,1);b.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,b)}return{get:function(e,t){var i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Rh).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Ip(e,t,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)},this.renderInstances=function(i,l,c){if(0!==c){var u,d;if(s)u=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](r,l,a,i*o,c),n.update(l,r,c)}}}function jp(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function zp(e,t){return e[0]-t[0]}function Bp(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Fp(e){for(var t={},n=new Float32Array(8),i=[],r=0;r<8;r++)i[r]=[r,0];return{update:function(r,a,o,s){var l=r.morphTargetInfluences,c=void 0===l?0:l.length,u=t[a.id];if(void 0===u){u=[];for(var d=0;d<c;d++)u[d]=[d,0];t[a.id]=u}for(var h=0;h<c;h++){var p=u[h];p[0]=h,p[1]=l[h]}u.sort(Bp);for(var f=0;f<8;f++)f<c&&u[f][1]?(i[f][0]=u[f][0],i[f][1]=u[f][1]):(i[f][0]=Number.MAX_SAFE_INTEGER,i[f][1]=0);i.sort(zp);for(var v=o.morphTargets&&a.morphAttributes.position,m=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var b=i[y],x=b[0],w=b[1];x!==Number.MAX_SAFE_INTEGER&&w?(v&&a.getAttribute("morphTarget"+y)!==v[x]&&a.setAttribute("morphTarget"+y,v[x]),m&&a.getAttribute("morphNormal"+y)!==m[x]&&a.setAttribute("morphNormal"+y,m[x]),n[y]=w,g+=w):(v&&void 0!==a.getAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),m&&void 0!==a.getAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var _=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",_),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Up(e,t,n,i){var r=new WeakMap;return{update:function(e){var a=i.render.frame,o=e.geometry,s=t.get(e,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,a)),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function Hp(e,t,n,i,r,a,o,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:Cl,o=void 0!==o?o:ec,Nu.call(this,e,t,n,i,r,a,o,s,l,c),this.flipY=!1}function Gp(e,t,n,i){Nu.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Dl,this.minFilter=Dl,this.wrapR=Nl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Vp(e,t,n,i){Nu.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Dl,this.minFilter=Dl,this.wrapR=Nl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Lp.physical={uniforms:sp([Lp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Au(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ih(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Tp.meshphysical_vert,fragmentShader:Tp.meshphysical_frag},Hp.prototype=Object.create(Nu.prototype),Hp.prototype.constructor=Hp,Hp.prototype.isCubeTexture=!0,Object.defineProperty(Hp.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Gp.prototype=Object.create(Nu.prototype),Gp.prototype.constructor=Gp,Gp.prototype.isDataTexture2DArray=!0,Vp.prototype=Object.create(Nu.prototype),Vp.prototype.constructor=Vp,Vp.prototype.isDataTexture3D=!0;var Wp=new Nu,qp=new Gp,Xp=new Vp,Zp=new Hp,Yp=[],Jp=[],Qp=new Float32Array(16),Kp=new Float32Array(9),$p=new Float32Array(4);function ef(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Yp[r];if(void 0===a&&(a=new Float32Array(r),Yp[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function tf(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function nf(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function rf(e,t){var n=Jp[t];void 0===n&&(n=new Int32Array(t),Jp[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function af(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function of(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(tf(n,t))return;e.uniform2fv(this.addr,t),nf(n,t)}}function sf(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(tf(n,t))return;e.uniform3fv(this.addr,t),nf(n,t)}}function lf(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(tf(n,t))return;e.uniform4fv(this.addr,t),nf(n,t)}}function cf(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(tf(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),nf(n,t)}else{if(tf(n,i))return;$p.set(i),e.uniformMatrix2fv(this.addr,!1,$p),nf(n,i)}}function uf(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(tf(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),nf(n,t)}else{if(tf(n,i))return;Kp.set(i),e.uniformMatrix3fv(this.addr,!1,Kp),nf(n,i)}}function df(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(tf(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),nf(n,t)}else{if(tf(n,i))return;Qp.set(i),e.uniformMatrix4fv(this.addr,!1,Qp),nf(n,i)}}function hf(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Wp,r)}function pf(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||qp,r)}function ff(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Xp,r)}function vf(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Zp,r)}function mf(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function gf(e,t){var n=this.cache;tf(n,t)||(e.uniform2iv(this.addr,t),nf(n,t))}function yf(e,t){var n=this.cache;tf(n,t)||(e.uniform3iv(this.addr,t),nf(n,t))}function bf(e,t){var n=this.cache;tf(n,t)||(e.uniform4iv(this.addr,t),nf(n,t))}function xf(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function wf(e,t){e.uniform1fv(this.addr,t)}function _f(e,t){e.uniform1iv(this.addr,t)}function Mf(e,t){e.uniform2iv(this.addr,t)}function Sf(e,t){e.uniform3iv(this.addr,t)}function Ef(e,t){e.uniform4iv(this.addr,t)}function Cf(e,t){var n=ef(t,this.size,2);e.uniform2fv(this.addr,n)}function Tf(e,t){var n=ef(t,this.size,3);e.uniform3fv(this.addr,n)}function Lf(e,t){var n=ef(t,this.size,4);e.uniform4fv(this.addr,n)}function Af(e,t){var n=ef(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Pf(e,t){var n=ef(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Of(e,t){var n=ef(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Rf(e,t,n){var i=t.length,r=rf(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(t[a]||Wp,r[a])}function Nf(e,t,n){var i=t.length,r=rf(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(t[a]||Zp,r[a])}function kf(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return af;case 35664:return of;case 35665:return sf;case 35666:return lf;case 35674:return cf;case 35675:return uf;case 35676:return df;case 5124:case 35670:return mf;case 35667:case 35671:return gf;case 35668:case 35672:return yf;case 35669:case 35673:return bf;case 5125:return xf;case 35678:case 36198:case 36298:case 36306:case 35682:return hf;case 35679:case 36299:case 36307:return ff;case 35680:case 36300:case 36308:case 36293:return vf;case 36289:case 36303:case 36311:case 36292:return pf}}(t.type)}function Df(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return wf;case 35664:return Cf;case 35665:return Tf;case 35666:return Lf;case 35674:return Af;case 35675:return Pf;case 35676:return Of;case 5124:case 35670:return _f;case 35667:case 35671:return Mf;case 35668:case 35672:return Sf;case 35669:case 35673:return Ef;case 35678:case 36198:case 36298:case 36306:case 35682:return Rf;case 35680:case 36300:case 36308:case 36293:return Nf}}(t.type)}function If(e){this.id=e,this.seq=[],this.map={}}Df.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),nf(t,e)},If.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}};var jf=/([\w\d_]+)(\])?(\[|\.)?/g;function zf(e,t){e.seq.push(t),e.map[t.id]=t}function Bf(e,t,n){var i=e.name,r=i.length;for(jf.lastIndex=0;;){var a=jf.exec(i),o=jf.lastIndex,s=a[1],l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===r){zf(n,void 0===c?new kf(s,e,t):new Df(s,e,t));break}var u=n.map[s];void 0===u&&zf(n,u=new If(s)),n=u}}function Ff(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);Bf(r,e.getUniformLocation(t,r.name),this)}}function Uf(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Ff.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Ff.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Ff.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},Ff.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var Hf=0;function Gf(e){switch(e){case su:return["Linear","( value )"];case lu:return["sRGB","( value )"];case uu:return["RGBE","( value )"];case hu:return["RGBM","( value, 7.0 )"];case pu:return["RGBM","( value, 16.0 )"];case fu:return["RGBD","( value, 256.0 )"];case cu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case du:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Vf(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Wf(e,t){var n=Gf(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function qf(e,t){var n=Gf(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xf(e,t){var n;switch(t){case wl:n="Linear";break;case _l:n="Reinhard";break;case Ml:n="OptimizedCineon";break;case Sl:n="ACESFilmic";break;case El:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Zf(e){return""!==e}function Yf(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Jf(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Qf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Kf(e){return e.replace(Qf,$f)}function $f(e,t){var n=Tp[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Kf(n)}var ev=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,tv=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function nv(e){return e.replace(tv,rv).replace(ev,iv)}function iv(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),rv(e,t,n,i)}function rv(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function av(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ov(e,t,n,i){var r,a,o=e.getContext(),s=n.defines,l=n.vertexShader,c=n.fragmentShader,u=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Ds?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Is?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===js&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Cl:case Tl:t="ENVMAP_TYPE_CUBE";break;case Pl:case Ol:t="ENVMAP_TYPE_CUBE_UV";break;case Ll:case Al:t="ENVMAP_TYPE_EQUIREC"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Tl:case Al:case Ol:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case gl:t="ENVMAP_BLENDING_MULTIPLY";break;case yl:t="ENVMAP_BLENDING_MIX";break;case bl:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Zf).join("\n")}(n),m=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),g=o.createProgram();n.isRawShaderMaterial?((r=[m].filter(Zf).join("\n")).length>0&&(r+="\n"),(a=[v,m].filter(Zf).join("\n")).length>0&&(a+="\n")):(r=[av(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Zf).join("\n"),a=[v,av(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==xl?"#define TONE_MAPPING":"",n.toneMapping!==xl?Tp.tonemapping_pars_fragment:"",n.toneMapping!==xl?Xf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Tp.encodings_pars_fragment,n.map?Wf("mapTexelToLinear",n.mapEncoding):"",n.matcap?Wf("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Wf("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Wf("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Wf("lightMapTexelToLinear",n.lightMapEncoding):"",qf("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Zf).join("\n")),l=Jf(l=Yf(l=Kf(l),n),n),c=Jf(c=Yf(c=Kf(c),n),n),l=nv(l),c=nv(c),n.isWebGL2&&!n.isRawShaderMaterial&&(r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#version 300 es\n","#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y,b,x=a+c,w=Uf(o,35633,r+l),_=Uf(o,35632,x);if(o.attachShader(g,w),o.attachShader(g,_),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var M=o.getProgramInfoLog(g).trim(),S=o.getShaderInfoLog(w).trim(),E=o.getShaderInfoLog(_).trim(),C=!0,T=!0;if(!1===o.getProgramParameter(g,35714)){C=!1;var L=Vf(o,w,"vertex"),A=Vf(o,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(g,35715),"gl.getProgramInfoLog",M,L,A)}else""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==S&&""!==E||(T=!1);T&&(this.diagnostics={runnable:C,programLog:M,vertexShader:{log:S,prefix:r},fragmentShader:{log:E,prefix:a}})}return o.deleteShader(w),o.deleteShader(_),this.getUniforms=function(){return void 0===y&&(y=new Ff(o,g)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(o,g)),b},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Hf++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=_,this}function sv(e,t,n,i){var r=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,l=n.maxVertexUniforms,c=n.vertexTextures,u=n.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function p(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=su,t}return{getParameters:function(i,r,h,f,v,m,g){var y,b,x=f.fog,w=i.isMeshStandardMaterial?f.environment:null,_=i.envMap||w,M=d[i.type],S=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(s)return 1024;var n=l,i=Math.floor((n-20)/4),r=Math.min(i,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(g):0;if(null!==i.precision&&(u=n.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",u,"instead."),M){var E=Lp[M];y=E.vertexShader,b=E.fragmentShader}else y=i.vertexShader,b=i.fragmentShader;var C=e.getRenderTarget();return{isWebGL2:a,shaderID:M,shaderName:i.type,vertexShader:y,fragmentShader:b,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:u,instancing:!0===g.isInstancedMesh,supportsVertexTextures:c,outputEncoding:null!==C?p(C.texture):e.outputEncoding,map:!!i.map,mapEncoding:p(i.map),matcap:!!i.matcap,matcapEncoding:p(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:p(_),envMapCubeUV:!!_&&(_.mapping===Pl||_.mapping===Ol),lightMap:!!i.lightMap,lightMapEncoding:p(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:p(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===yu,tangentSpaceNormalMap:i.normalMapType===gu,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmissionMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap)&&!!i.displacementMap,fog:!!x,useFog:i.fog,fogExp2:x&&x.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:o,skinning:i.skinning&&S>0,maxBones:S,useVertexTexture:s,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:v,numClipIntersection:m,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:xl,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Fs,flipSided:i.side===Bs,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:a||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||null!==t.get("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);if(void 0===t.isRawShaderMaterial){for(var r=0;r<h.length;r++)n.push(t[h[r]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var i=Lp[n];t=lp.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var a,o=0,s=r.length;o<s;o++){var l=r[o];if(l.cacheKey===n){++(a=l).usedTimes;break}}return void 0===a&&(a=new ov(e,n,t,i),r.push(a)),a},releaseProgram:function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},programs:r}}function lv(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function cv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function uv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function dv(e){var t=[],n=0,i=[],r=[],a={id:-1};function o(i,r,o,s,l,c){var u=t[n],d=e.get(o);return void 0===u?(u={id:i.id,object:i,geometry:r,material:o,program:d.program||a,groupOrder:s,renderOrder:i.renderOrder,z:l,group:c},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=o,u.program=d.program||a,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,a,s,l){var c=o(e,t,n,a,s,l);(!0===n.transparent?r:i).push(c)},unshift:function(e,t,n,a,s,l){var c=o(e,t,n,a,s,l);(!0===n.transparent?r:i).unshift(c)},finish:function(){for(var e=n,i=t.length;e<i;e++){var r=t[e];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(e,t){i.length>1&&i.sort(e||cv),r.length>1&&r.sort(t||uv)}}}function hv(e){var t=new WeakMap;function n(e){var i=e.target;i.removeEventListener("dispose",n),t.delete(i)}return{get:function(i,r){var a,o=t.get(i);return void 0===o?(a=new dv(e),t.set(i,new WeakMap),t.get(i).set(r,a),i.addEventListener("dispose",n)):void 0===(a=o.get(r))&&(a=new dv(e),o.set(r,a)),a},dispose:function(){t=new WeakMap}}}function pv(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Fu,color:new ih};break;case"SpotLight":n={position:new Fu,direction:new Fu,color:new ih,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fu,color:new ih,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fu,skyColor:new ih,groundColor:new ih};break;case"RectAreaLight":n={color:new ih,position:new Fu,halfWidth:new Fu,halfHeight:new Fu}}return e[t.id]=n,n}}}var fv=0;function vv(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function mv(){for(var e=new pv,t=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Au};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Au,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)n.probe.push(new Fu);var r=new Fu,a=new Zu,o=new Zu;return{setup:function(i,s,l){for(var c=0,u=0,d=0,h=0;h<9;h++)n.probe[h].set(0,0,0);var p=0,f=0,v=0,m=0,g=0,y=0,b=0,x=0,w=l.matrixWorldInverse;i.sort(vv);for(var _=0,M=i.length;_<M;_++){var S=i[_],E=S.color,C=S.intensity,T=S.distance,L=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)c+=E.r*C,u+=E.g*C,d+=E.b*C;else if(S.isLightProbe)for(var A=0;A<9;A++)n.probe[A].addScaledVector(S.sh.coefficients[A],C);else if(S.isDirectionalLight){var P=e.get(S);if(P.color.copy(S.color).multiplyScalar(S.intensity),P.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(w),S.castShadow){var O=S.shadow,R=t.get(S);R.shadowBias=O.bias,R.shadowNormalBias=O.normalBias,R.shadowRadius=O.radius,R.shadowMapSize=O.mapSize,n.directionalShadow[p]=R,n.directionalShadowMap[p]=L,n.directionalShadowMatrix[p]=S.shadow.matrix,y++}n.directional[p]=P,p++}else if(S.isSpotLight){var N=e.get(S);if(N.position.setFromMatrixPosition(S.matrixWorld),N.position.applyMatrix4(w),N.color.copy(E).multiplyScalar(C),N.distance=T,N.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(w),N.coneCos=Math.cos(S.angle),N.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),N.decay=S.decay,S.castShadow){var k=S.shadow,D=t.get(S);D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,n.spotShadow[v]=D,n.spotShadowMap[v]=L,n.spotShadowMatrix[v]=S.shadow.matrix,x++}n.spot[v]=N,v++}else if(S.isRectAreaLight){var I=e.get(S);I.color.copy(E).multiplyScalar(C),I.position.setFromMatrixPosition(S.matrixWorld),I.position.applyMatrix4(w),o.identity(),a.copy(S.matrixWorld),a.premultiply(w),o.extractRotation(a),I.halfWidth.set(.5*S.width,0,0),I.halfHeight.set(0,.5*S.height,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),n.rectArea[m]=I,m++}else if(S.isPointLight){var j=e.get(S);if(j.position.setFromMatrixPosition(S.matrixWorld),j.position.applyMatrix4(w),j.color.copy(S.color).multiplyScalar(S.intensity),j.distance=S.distance,j.decay=S.decay,S.castShadow){var z=S.shadow,B=t.get(S);B.shadowBias=z.bias,B.shadowNormalBias=z.normalBias,B.shadowRadius=z.radius,B.shadowMapSize=z.mapSize,B.shadowCameraNear=z.camera.near,B.shadowCameraFar=z.camera.far,n.pointShadow[f]=B,n.pointShadowMap[f]=L,n.pointShadowMatrix[f]=S.shadow.matrix,b++}n.point[f]=j,f++}else if(S.isHemisphereLight){var F=e.get(S);F.direction.setFromMatrixPosition(S.matrixWorld),F.direction.transformDirection(w),F.direction.normalize(),F.skyColor.copy(S.color).multiplyScalar(C),F.groundColor.copy(S.groundColor).multiplyScalar(C),n.hemi[g]=F,g++}}n.ambient[0]=c,n.ambient[1]=u,n.ambient[2]=d;var U=n.hash;U.directionalLength===p&&U.pointLength===f&&U.spotLength===v&&U.rectAreaLength===m&&U.hemiLength===g&&U.numDirectionalShadows===y&&U.numPointShadows===b&&U.numSpotShadows===x||(n.directional.length=p,n.spot.length=v,n.rectArea.length=m,n.point.length=f,n.hemi.length=g,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=x,n.spotShadowMap.length=x,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=x,U.directionalLength=p,U.pointLength=f,U.spotLength=v,U.rectAreaLength=m,U.hemiLength=g,U.numDirectionalShadows=y,U.numPointShadows=b,U.numSpotShadows=x,n.version=fv++)},state:n}}function gv(){var e=new mv,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function yv(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r;return!1===e.has(n)?(r=new gv,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new gv,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function bv(e){ch.call(this),this.type="MeshDepthMaterial",this.depthPacking=vu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function xv(e){ch.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Fu,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}bv.prototype=Object.create(ch.prototype),bv.prototype.constructor=bv,bv.prototype.isMeshDepthMaterial=!0,bv.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},xv.prototype=Object.create(ch.prototype),xv.prototype.constructor=xv,xv.prototype.isMeshDistanceMaterial=!0,xv.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var wv="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",_v="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Mv(e,t,n){var i=new wp,r=new Au,a=new Au,o=new ku,s=[],l=[],c={},u={0:Bs,1:zs,2:Fs},d=new dp({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Au},radius:{value:4}},vertexShader:_v,fragmentShader:wv}),h=d.clone();h.defines.HORIZONAL_PASS=1;var p=new Rh;p.setAttribute("position",new ph(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new Jh(p,d),v=this;function m(n,i){var r=t.update(f);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,d,f,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,h,f,null)}function g(e,t,n){var i=e<<0|t<<1|n<<2,r=s[i];return void 0===r&&(r=new bv({depthPacking:mu,morphTargets:e,skinning:t}),s[i]=r),r}function y(e,t,n){var i=e<<0|t<<1|n<<2,r=l[i];return void 0===r&&(r=new xv({morphTargets:e,skinning:t}),l[i]=r),r}function b(t,n,i,r,a,o,s){var l=null,d=g,h=t.customDepthMaterial;if(!0===r.isPointLight&&(d=y,h=t.customDistanceMaterial),void 0===h){var p=!1;!0===i.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var f=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=d(p,f,!0===t.isInstancedMesh)}else l=h;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var v=l.uuid,m=i.uuid,b=c[v];void 0===b&&(b={},c[v]=b);var x=b[m];void 0===x&&(x=l.clone(),b[m]=x),l=x}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=s===js?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=o),l}function x(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===js)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),c=n.material;if(Array.isArray(c))for(var u=l.groups,d=0,h=u.length;d<h;d++){var p=u[d],f=c[p.materialIndex];if(f&&f.visible){var v=b(n,l,f,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,v,n,p)}}else if(c.visible){var m=b(n,l,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,y=0,w=g.length;y<w;y++)x(g[y],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ds,this.render=function(t,s,l){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var c=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(Us),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var g=t[p],y=g.shadow;if(!1!==y.autoUpdate||!1!==y.needsUpdate)if(void 0!==y){r.copy(y.mapSize);var b=y.getFrameExtents();if(r.multiply(b),a.copy(y.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(a.x=Math.floor(n/b.x),r.x=a.x*b.x,y.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/b.y),r.y=a.y*b.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&this.type===js){var w={minFilter:zl,magFilter:zl,format:tc,stencilBuffer:!1};y.map=new Du(r.x,r.y,w),y.map.texture.name=g.name+".shadowMap",y.mapPass=new Du(r.x,r.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){var _={minFilter:Dl,magFilter:Dl,format:tc,stencilBuffer:!1};y.map=new Du(r.x,r.y,_),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),S=0;S<M;S++){var E=y.getViewport(S);o.set(a.x*E.x,a.y*E.y,a.x*E.z,a.y*E.w),h.viewport(o),y.updateMatrices(g,S),i=y.getFrustum(),x(s,l,y.camera,g,this.type)}y.isPointLightShadow||this.type!==js||m(y,l),y.needsUpdate=!1}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}v.needsUpdate=!1,e.setRenderTarget(c,u,d)}}}function Sv(e,t,n){var i,r,a=n.isWebGL2;var o=new function(){var t=!1,n=new ku,i=null,r=new ku(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?D(2929):I(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case cl:e.depthFunc(512);break;case ul:e.depthFunc(519);break;case dl:e.depthFunc(513);break;case hl:e.depthFunc(515);break;case pl:e.depthFunc(514);break;case fl:e.depthFunc(518);break;case vl:e.depthFunc(516);break;case ml:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},l=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?D(2960):I(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null}}},c={},u=null,d=null,h=null,p=null,f=null,v=null,m=null,g=null,y=null,b=!1,x=null,w=null,_=null,M=null,S=null,E=e.getParameter(35661),C=!1,T=0,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(T=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),C=T>=1):-1!==L.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),C=T>=2);var A=null,P={},O=new ku,R=new ku;function N(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var k={};function D(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function I(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}k[3553]=N(3553,3553,1),k[34067]=N(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),D(2929),s.setFunc(hl),U(!1),H(Ns),D(2884),F(Us);var j=(ir(i={},Xs,32774),ir(i,Zs,32778),ir(i,Ys,32779),i);if(a)j[Js]=32775,j[Qs]=32776;else{var z=t.get("EXT_blend_minmax");null!==z&&(j[Js]=z.MIN_EXT,j[Qs]=z.MAX_EXT)}var B=(ir(r={},Ks,0),ir(r,$s,1),ir(r,el,768),ir(r,nl,770),ir(r,ll,776),ir(r,ol,774),ir(r,rl,772),ir(r,tl,769),ir(r,il,771),ir(r,sl,775),ir(r,al,773),r);function F(t,n,i,r,a,o,s,l){if(t!==Us){if(d||(D(3042),d=!0),t===qs)a=a||n,o=o||i,s=s||r,n===p&&a===m||(e.blendEquationSeparate(j[n],j[a]),p=n,m=a),i===f&&r===v&&o===g&&s===y||(e.blendFuncSeparate(B[i],B[r],B[o],B[s]),f=i,v=r,g=o,y=s),h=t,b=null;else if(t!==h||l!==b){if(p===Xs&&m===Xs||(e.blendEquation(32774),p=Xs,m=Xs),l)switch(t){case Hs:e.blendFuncSeparate(1,771,1,771);break;case Gs:e.blendFunc(1,1);break;case Vs:e.blendFuncSeparate(0,0,769,771);break;case Ws:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Hs:e.blendFuncSeparate(770,771,1,771);break;case Gs:e.blendFunc(770,1);break;case Vs:e.blendFunc(0,769);break;case Ws:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,v=null,g=null,y=null,h=t,b=l}}else d&&(I(3042),d=!1)}function U(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function H(t){t!==Rs?(D(2884),t!==w&&(t===Ns?e.cullFace(1029):t===ks?e.cullFace(1028):e.cullFace(1032))):I(2884),w=t}function G(t,n,i){t?(D(32823),M===n&&S===i||(e.polygonOffset(n,i),M=n,S=i)):I(32823)}function V(t){void 0===t&&(t=33984+E-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:o,depth:s,stencil:l},enable:D,disable:I,useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:F,setMaterial:function(e,t){e.side===Fs?I(2884):D(2884);var n=e.side===Bs;t&&(n=!n),U(n),e.blending===Hs&&!1===e.transparent?F(Us):F(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var i=e.stencilWrite;l.setTest(i),i&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),G(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:U,setCullFace:H,setLineWidth:function(t){t!==_&&(C&&e.lineWidth(t),_=t)},setPolygonOffset:G,setScissorTest:function(e){e?D(3089):I(3089)},activeTexture:V,bindTexture:function(t,n){null===A&&V();var i=P[A];void 0===i&&(i={type:void 0,texture:void 0},P[A]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||k[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=P[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===R.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){c={},A=null,P={},u=null,h=null,x=null,w=null,o.reset(),s.reset(),l.reset()}}}function Ev(e,t,n,i,r,a,o){var s,l,c,u=r.isWebGL2,d=r.maxTextures,h=r.maxCubemapSize,p=r.maxTextureSize,f=r.maxSamples,v=new WeakMap,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function g(e,t){return m?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Lu.floorPowerOfTwo:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===c&&(c=g(o,s));var l=n?g(o,s):c;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return Lu.isPowerOfTwo(e.width)&&Lu.isPowerOfTwo(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==Dl&&e.minFilter!==zl}function w(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function _(n,i,r){if(!1===u)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function M(e){return e===Dl||e===Il||e===jl?9728:9729}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&v.delete(n),o.memory.textures--}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}var C=0;function T(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void k(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function L(t,r){if(6===t.image.length){var o=i.get(t);if(t.version>0&&o.__version!==t.version){N(o,t),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,c=[],d=0;d<6;d++)c[d]=s||l?l?t.image[d].image:t.image[d]:y(t.image[d],!1,!0,h);var p,f=c[0],v=b(f)||u,m=a.convert(t.format),g=a.convert(t.type),M=_(t.internalFormat,m,g);if(R(34067,t,v),s){for(var S=0;S<6;S++){p=c[S].mipmaps;for(var E=0;E<p.length;E++){var C=p[E];t.format!==tc&&t.format!==ec?null!==m?n.compressedTexImage2D(34069+S,E,M,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+S,E,M,C.width,C.height,0,m,g,C.data)}}o.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(var T=0;T<6;T++)if(l){n.texImage2D(34069+T,0,M,c[T].width,c[T].height,0,m,g,c[T].data);for(var L=0;L<p.length;L++){var A=p[L].image[T].image;n.texImage2D(34069+T,L+1,M,A.width,A.height,0,m,g,A.data)}}else{n.texImage2D(34069+T,0,M,m,g,c[T]);for(var P=0;P<p.length;P++){var O=p[P];n.texImage2D(34069+T,P+1,M,m,g,O.image[T])}}o.__maxMipLevel=p.length}x(t,v)&&w(34067,t,f.width,f.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function A(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}var P=(ir(s={},Rl,10497),ir(s,Nl,33071),ir(s,kl,33648),s),O=(ir(l={},Dl,9728),ir(l,Il,9984),ir(l,jl,9986),ir(l,zl,9729),ir(l,Bl,9985),ir(l,Fl,9987),l);function R(n,a,o){o?(e.texParameteri(n,10242,P[a.wrapS]),e.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[a.wrapR]),e.texParameteri(n,10240,O[a.magFilter]),e.texParameteri(n,10241,O[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Nl&&a.wrapT===Nl||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==Dl&&a.minFilter!==zl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(a.type===Xl&&null===t.get("OES_texture_float_linear"))return;if(a.type===Zl&&null===(u||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),o.memory.textures++)}function k(t,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),N(t,i),n.activeTexture(33984+r),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var s,l=function(e){return!u&&(e.wrapS!==Nl||e.wrapT!==Nl||e.minFilter!==Dl&&e.minFilter!==zl)}(i)&&!1===b(i.image),c=y(i.image,l,!1,p),d=b(c)||u,h=a.convert(i.format),f=a.convert(i.type),v=_(i.internalFormat,h,f);R(o,i,d);var m=i.mipmaps;if(i.isDepthTexture)v=6402,u?v=i.type===Xl?36012:i.type===ql?33190:i.type===Kl?35056:33189:i.type===Xl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===ac&&6402===v&&i.type!==Vl&&i.type!==ql&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Vl,f=a.convert(i.type)),i.format===oc&&6402===v&&(v=34041,i.type!==Kl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Kl,f=a.convert(i.type))),n.texImage2D(3553,0,v,c.width,c.height,0,h,f,null);else if(i.isDataTexture)if(m.length>0&&d){for(var g=0,M=m.length;g<M;g++)s=m[g],n.texImage2D(3553,g,v,s.width,s.height,0,h,f,s.data);i.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,c.width,c.height,0,h,f,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var S=0,E=m.length;S<E;S++)s=m[S],i.format!==tc&&i.format!==ec?null!==h?n.compressedTexImage2D(3553,S,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,v,s.width,s.height,0,h,f,s.data);t.__maxMipLevel=m.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,v,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,v,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(m.length>0&&d){for(var C=0,T=m.length;C<T;C++)s=m[C],n.texImage2D(3553,C,v,h,f,s);i.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,h,f,c),t.__maxMipLevel=0;x(i,d)&&w(o,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(t,r,o,s){var l=a.convert(r.texture.format),c=a.convert(r.texture.type),u=_(r.texture.internalFormat,l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Xl?r=36012:o.type===ql&&(r=33190));var s=z(n);e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){var l=z(n);e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var c=a.convert(n.texture.format),u=a.convert(n.texture.type),d=_(n.texture.internalFormat,c,u);if(i){var h=z(n);e.renderbufferStorageMultisample(36161,h,d,n.width,n.height)}else e.renderbufferStorage(36161,d,n.width,n.height)}e.bindRenderbuffer(36161,null)}function j(t){var n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ac)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==oc)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),I(n.__webglDepthbuffer[a],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),I(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function z(e){return u&&e.isWebGLMultisampleRenderTarget?Math.min(f,e.samples):0}var B=!1,F=!1;this.allocateTextureUnit=function(){var e=C;return e>=d&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+d),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?k(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?k(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=L,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(t){var r=i.get(t),s=i.get(t.texture);t.addEventListener("dispose",E),s.__webglTexture=e.createTexture(),o.memory.textures++;var l=!0===t.isWebGLCubeRenderTarget,c=!0===t.isWebGLMultisampleRenderTarget,d=b(t)||u;if(!u||t.texture.format!==ec||t.texture.type!==Xl&&t.texture.type!==Zl||(t.texture.format=tc,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){r.__webglFramebuffer=[];for(var h=0;h<6;h++)r.__webglFramebuffer[h]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),c)if(u){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var p=a.convert(t.texture.format),f=a.convert(t.texture.type),v=_(t.texture.internalFormat,p,f),m=z(t);e.renderbufferStorageMultisample(36161,m,v,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),I(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,s.__webglTexture),R(34067,t.texture,d);for(var g=0;g<6;g++)D(r.__webglFramebuffer[g],t,36064,34069+g);x(t.texture,d)&&w(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),R(3553,t.texture,d),D(r.__webglFramebuffer,t,36064,3553),x(t.texture,d)&&w(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(x(t,b(e)||u)){var r=e.isWebGLCubeRenderTarget?34067:3553,a=i.get(t).__webglTexture;n.bindTexture(r,a),w(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(u){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?L(e,t):A(e,t)}}function Cv(e,t,n){var i=n.isWebGL2;return{convert:function(e){var n;if(e===Ul)return 5121;if(e===Yl)return 32819;if(e===Jl)return 32820;if(e===Ql)return 33635;if(e===Hl)return 5120;if(e===Gl)return 5122;if(e===Vl)return 5123;if(e===Wl)return 5124;if(e===ql)return 5125;if(e===Xl)return 5126;if(e===Zl)return i?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===$l)return 6406;if(e===ec)return 6407;if(e===tc)return 6408;if(e===nc)return 6409;if(e===ic)return 6410;if(e===ac)return 6402;if(e===oc)return 34041;if(e===sc)return 6403;if(e===lc)return 36244;if(e===cc)return 33319;if(e===uc)return 33320;if(e===dc)return 36248;if(e===hc)return 36249;if(e===pc||e===fc||e===vc||e===mc){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===pc)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===fc)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===vc)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===mc)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===gc||e===yc||e===bc||e===xc){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===gc)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===yc)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===bc)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===xc)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===wc)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===_c||e===Mc)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===_c)return n.COMPRESSED_RGB8_ETC2;if(e===Mc)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Sc||e===Ec||e===Cc||e===Tc||e===Lc||e===Ac||e===Pc||e===Oc||e===Rc||e===Nc||e===kc||e===Dc||e===Ic||e===jc||e===Bc||e===Fc||e===Uc||e===Hc||e===Gc||e===Vc||e===Wc||e===qc||e===Xc||e===Zc||e===Yc||e===Jc||e===Qc||e===Kc?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===zc?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===Kl?i?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Tv(e){pp.call(this),this.cameras=e||[]}function Lv(){hd.call(this),this.type="Group"}function Av(){this._targetRay=null,this._grip=null,this._hand=null}function Pv(e,t){var n=this,i=null,r=1,a=null,o="local-floor",s=null,l=[],c=new Map,u=new pp;u.layers.enable(1),u.viewport=new ku;var d=new pp;d.layers.enable(2),d.viewport=new ku;var h=[u,d],p=new Tv;p.layers.enable(1),p.layers.enable(2);var f=null,v=null;function m(e){var t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function g(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){a=e,S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(e){for(var t=i.inputSources,n=0;n<l.length;n++)c.set(t[n],l[n]);for(var r=0;r<e.removed.length;r++){var a=e.removed[r],o=c.get(a);o&&(o.dispatchEvent({type:"disconnected",data:a}),c.delete(a))}for(var s=0;s<e.added.length;s++){var u=e.added[s],d=c.get(u);d&&d.dispatchEvent({type:"connected",data:u})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=l[e];return void 0===t&&(t=new Av,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=l[e];return void 0===t&&(t=new Av,l[e]=t),t.getGripSpace()},this.getHand=function(e){var t=l[e];return void 0===t&&(t=new Av,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=function(e){if(null!==(i=e)){i.addEventListener("select",m),i.addEventListener("selectstart",m),i.addEventListener("selectend",m),i.addEventListener("squeeze",m),i.addEventListener("squeezestart",m),i.addEventListener("squeezeend",m),i.addEventListener("end",g);var n=t.getContextAttributes();!0!==n.xrCompatible&&t.makeXRCompatible();var a={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:r},s=new XRWebGLLayer(i,t,a);i.updateRenderState({baseLayer:s}),i.requestReferenceSpace(o).then(y),i.addEventListener("inputsourceschange",b)}};var x=new Fu,w=new Fu;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=d.near=u.near=e.near,p.far=d.far=u.far=e.far,f===p.near&&v===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,v=p.far);var t=e.parent,n=p.cameras;_(p,t);for(var r=0;r<n.length;r++)_(n[r],t);e.matrixWorld.copy(p.matrixWorld);for(var a=e.children,o=0,s=a.length;o<s;o++)a[o].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){x.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);var i=x.distanceTo(w),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=o*u,p=o*d,f=i/(-u+d),v=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var m=o+f,g=s+f,y=h-v,b=p+(i-v),_=l*s/g*m,M=c*s/g*m;e.projectionMatrix.makePerspective(y,b,_,M,m,g)}(p,u,d):p.projectionMatrix.copy(u.projectionMatrix),p};var M=null;var S=new Mp;S.setAnimationLoop((function(t,n){if(null!==(s=n.getViewerPose(a))){var r=s.views,o=i.renderState.baseLayer;e.setFramebuffer(o.framebuffer);var c=!1;r.length!==p.cameras.length&&(p.cameras.length=0,c=!0);for(var u=0;u<r.length;u++){var d=r[u],f=o.getViewport(d),v=h[u];v.matrix.fromArray(d.transform.matrix),v.projectionMatrix.fromArray(d.projectionMatrix),v.viewport.set(f.x,f.y,f.width,f.height),0===u&&p.matrix.copy(v.matrix),!0===c&&p.cameras.push(v)}}for(var m=i.inputSources,g=0;g<l.length;g++){var y=l[g],b=m[g];y.update(b,n,a)}M&&M(t,n)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}function Ov(e){function t(t,n,i){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,a,o=n.envMap||i;if(o){t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var s=e.get(o).__maxMipLevel;void 0!==s&&(t.maxMipLevel.value=s)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap&&(r=n.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Bs&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Bs&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,a,o){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Bs&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Bs&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Bs&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Bs&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i,r),i.isMeshPhysicalMaterial?function(e,t,i){n(e,t,i),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Bs&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i,r):n(e,i,r)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Bs&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Bs&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Bs&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Bs&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Rv(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=su,this.physicallyCorrectLights=!1,this.toneMapping=xl,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p=this,f=!1,v=null,m=0,g=0,y=null,b=null,x=-1,w=null,_=null,M=new ku,S=new ku,E=null,C=t.width,T=t.height,L=1,A=null,P=null,O=new ku(0,0,C,T),R=new ku(0,0,C,T),N=!1,k=new wp,D=new Np,I=!1,j=!1,z=new Zu,B=new Fu,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===y?L:1}var H,G,V,W,q,X,Z,Y,J,Q,K,$,ee,te,ne,ie,re,ae,oe,se=n;function le(e,n){for(var i=0;i<e.length;i++){var r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{var ce={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",ve,!1),null===se){var ue=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&ue.shift(),null===(se=le(ue,ce)))throw le(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===se.getShaderPrecisionFormat&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}function de(){H=new kp(se),!1===(G=new Rp(se,H,e)).isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),ae=new Cv(se,H,G),(V=new Sv(se,H,G)).scissor(S.copy(R).multiplyScalar(L).floor()),V.viewport(M.copy(O).multiplyScalar(L).floor()),W=new jp(se),q=new lv,X=new Ev(se,H,V,q,G,ae,W),Z=new Sp(se,G),oe=new Pp(se,H,Z,G),Y=new Dp(se,Z,W,oe),J=new Up(se,Y,Z,W),ne=new Fp(se),Q=new sv(p,H,G,oe),K=new Ov(q),$=new hv(q),ee=new yv,te=new Ap(p,V,J,s),ie=new Op(se,H,W,G),re=new Ip(se,H,W,G),W.programs=Q.programs,p.capabilities=G,p.extensions=H,p.properties=q,p.renderLists=$,p.state=V,p.info=W}de();var he=new Pv(p,se);this.xr=he;var pe=new Mv(p,J,G.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,de()}function me(e){var t=e.target;t.removeEventListener("dispose",me),function(e){ge(e),q.remove(e)}(t)}function ge(e){var t=q.get(e).program;void 0!==t&&Q.releaseProgram(t)}this.shadowMap=pe,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){var e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(e){void 0!==e&&(L=e,this.setSize(C,T,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Au),e.set(C,T)},this.setSize=function(e,n,i){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,T=n,t.width=Math.floor(e*L),t.height=Math.floor(n*L),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Au),e.set(C*L,T*L).floor()},this.setDrawingBufferSize=function(e,n,i){C=e,T=n,L=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new ku),e.copy(M)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,i){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,i),V.viewport(M.copy(O).multiplyScalar(L).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),V.scissor(S.copy(R).multiplyScalar(L).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){V.setScissorTest(N=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(){return te.getClearColor()},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),se.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",ve,!1),$.dispose(),ee.dispose(),q.dispose(),J.dispose(),oe.dispose(),he.dispose(),be.stop()},this.renderBufferImmediate=function(e,t){oe.initAttributes();var n=q.get(e);e.hasPositions&&!n.position&&(n.position=se.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=se.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=se.createBuffer()),e.hasColors&&!n.color&&(n.color=se.createBuffer());var i=t.getAttributes();e.hasPositions&&(se.bindBuffer(34962,n.position),se.bufferData(34962,e.positionArray,35048),oe.enableAttribute(i.position),se.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(se.bindBuffer(34962,n.normal),se.bufferData(34962,e.normalArray,35048),oe.enableAttribute(i.normal),se.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(se.bindBuffer(34962,n.uv),se.bufferData(34962,e.uvArray,35048),oe.enableAttribute(i.uv),se.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(se.bindBuffer(34962,n.color),se.bufferData(34962,e.colorArray,35048),oe.enableAttribute(i.color),se.vertexAttribPointer(i.color,3,5126,!1,0,0)),oe.disableUnusedAttributes(),se.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=F);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=Se(e,t,i,r);V.setMaterial(i,o);var l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;var u,d=1;!0===i.wireframe&&(l=Y.getWireframeAttribute(n),d=2),(i.morphTargets||i.morphNormals)&&ne.update(r,n,i,s),oe.setup(r,i,s,n,l);var h=ie;null!==l&&(u=Z.get(l),(h=re).setIndex(u));var p=null!==l?l.count:c.count,f=n.drawRange.start*d,v=n.drawRange.count*d,m=null!==a?a.start*d:0,g=null!==a?a.count*d:1/0,y=Math.max(f,m),b=Math.min(p,f+v,m+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*U()),h.setMode(1)):h.setMode(4);else if(r.isLine){var w=i.linewidth;void 0===w&&(w=1),V.setLineWidth(w*U()),r.isLineSegments?h.setMode(1):r.isLineLoop?h.setMode(2):h.setMode(3)}else r.isPoints?h.setMode(0):r.isSprite&&h.setMode(4);if(r.isInstancedMesh)h.renderInstances(y,x,r.count);else if(n.isInstancedBufferGeometry){var _=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,x,_)}else h.render(y,x)}},this.compile=function(e,t){(h=ee.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t);var n=new WeakMap;e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];!1===n.has(a)&&(Me(a,e,t),n.set(a))}else!1===n.has(i)&&(Me(i,e,t),n.set(i))}))};var ye=null;var be=new Mp;function xe(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var r=J.update(e),a=e.material;a.visible&&d.push(e,r,a,n,B.z,null)}}else if(e.isImmediateRenderObject)i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),d.push(e,null,e.material,n,B.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,c=0,u=l.length;c<u;c++){var p=l[c],f=s[p.materialIndex];f&&f.visible&&d.push(e,o,f,n,B.z,p)}else s.visible&&d.push(e,o,s,n,B.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)xe(v[m],t,n,i)}}function we(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,c=null===i?o.material:i,u=o.group;if(n.isArrayCamera){_=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var v=d[p];s.layers.test(v.layers)&&(V.viewport(M.copy(v.viewport)),h.setupLights(v),_e(s,t,v,l,c,u))}}else _=null,_e(s,t,n,l,c,u)}}function _e(e,t,n,i,r,a){if(e.onBeforeRender(p,t,n,i,r,a),h=ee.get(t,_||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=Se(n,t,r,e);V.setMaterial(r),oe.reset(),function(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}(e,o)}else p.renderBufferDirect(n,t,i,r,e,a);e.onAfterRender(p,t,n,i,r,a),h=ee.get(t,_||n)}function Me(e,t,n){!0!==t.isScene&&(t=F);var i=q.get(e),r=h.state.lights,a=h.state.shadowsArray,o=r.state.version,s=Q.getParameters(e,r.state,a,t,D.numPlanes,D.numIntersection,n),l=Q.getProgramCacheKey(s),c=i.program,u=!0;if(void 0===c)e.addEventListener("dispose",me);else if(c.cacheKey!==l)ge(e);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,u=!1;else{if(void 0!==s.shaderID)return;u=!1}u&&(s.uniforms=Q.getUniforms(e,s),e.onBeforeCompile(s,p),c=Q.acquireProgram(s,l),i.program=c,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);var d=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<p.maxMorphTargets;f++)d["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var v=0;v<p.maxMorphNormals;v++)d["morphNormal"+v]>=0&&e.numSupportedMorphNormals++}var m=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=D.numPlanes,i.numIntersection=D.numIntersection,m.clippingPlanes=D.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.directionalLightShadows.value=r.state.directionalShadow,m.spotLights.value=r.state.spot,m.spotLightShadows.value=r.state.spotShadow,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.pointLightShadows.value=r.state.pointShadow,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),y=Ff.seqWithValue(g.seq,m);i.uniformsList=y}function Se(e,t,n,i){!0!==t.isScene&&(t=F),X.resetTextureUnits();var r=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===y?p.outputEncoding:y.texture.encoding,s=q.get(n),l=h.state.lights;if(!0===I&&(!0===j||e!==w)){var c=e===w&&n.id===x;D.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,s,c)}n.version===s.__version?void 0===s.program||n.fog&&s.fog!==r||s.environment!==a||s.needsLights&&s.lightsStateVersion!==l.state.version?Me(n,t,i):void 0===s.numClippingPlanes||s.numClippingPlanes===D.numPlanes&&s.numIntersection===D.numIntersection?s.outputEncoding!==o&&Me(n,t,i):Me(n,t,i):(Me(n,t,i),s.__version=n.version);var u,d,f=!1,v=!1,m=!1,g=s.program,b=g.getUniforms(),_=s.uniforms;if(V.useProgram(g.program)&&(f=!0,v=!0,m=!0),n.id!==x&&(x=n.id,v=!0),f||w!==e){if(b.setValue(se,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&b.setValue(se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,v=!0,m=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var M=b.map.cameraPosition;void 0!==M&&M.setValue(se,B.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(se,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&b.setValue(se,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){b.setOptional(se,i,"bindMatrix"),b.setOptional(se,i,"bindMatrixInverse");var S=i.skeleton;if(S){var E=S.bones;if(G.floatVertexTextures){if(void 0===S.boneTexture){var C=Math.sqrt(4*E.length);C=Lu.ceilPowerOfTwo(C),C=Math.max(C,4);var A=new Float32Array(C*C*4);A.set(S.boneMatrices);var P=new yp(A,C,C,tc,Xl);S.boneMatrices=A,S.boneTexture=P,S.boneTextureSize=C}b.setValue(se,"boneTexture",S.boneTexture,X),b.setValue(se,"boneTextureSize",S.boneTextureSize)}else b.setOptional(se,S,"boneMatrices")}}return(v||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,b.setValue(se,"receiveShadow",i.receiveShadow)),v&&(b.setValue(se,"toneMappingExposure",p.toneMappingExposure),s.needsLights&&(d=m,(u=_).ambientLightColor.needsUpdate=d,u.lightProbe.needsUpdate=d,u.directionalLights.needsUpdate=d,u.directionalLightShadows.needsUpdate=d,u.pointLights.needsUpdate=d,u.pointLightShadows.needsUpdate=d,u.spotLights.needsUpdate=d,u.spotLightShadows.needsUpdate=d,u.rectAreaLights.needsUpdate=d,u.hemisphereLights.needsUpdate=d),r&&n.fog&&K.refreshFogUniforms(_,r),K.refreshMaterialUniforms(_,n,a,L,T),void 0!==_.ltc_1&&(_.ltc_1.value=_p.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=_p.LTC_2),Ff.upload(se,s.uniformsList,_,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ff.upload(se,s.uniformsList,_,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(se,"center",i.center),b.setValue(se,"modelViewMatrix",i.modelViewMatrix),b.setValue(se,"normalMatrix",i.normalMatrix),b.setValue(se,"modelMatrix",i.matrixWorld),g}be.setAnimationLoop((function(e){he.isPresenting||ye&&ye(e)})),"undefined"!==typeof window&&be.setContext(window),this.setAnimationLoop=function(e){ye=e,he.setAnimationLoop(e),null===e?be.stop():be.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0===t||!0===t.isCamera){if(!0!==f){oe.resetDefaultState(),x=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||y),(h=ee.get(e,t)).init(),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(z),j=this.localClippingEnabled,I=D.init(this.clippingPlanes,j,t),(d=$.get(e,t)).init(),xe(e,t,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(A,P),!0===I&&D.beginShadows();var r=h.state.shadowsArray;pe.render(r,e,t),h.setupLights(t),!0===I&&D.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),te.render(d,e,t,i);var a=d.opaque,o=d.transparent;a.length>0&&we(a,e,t),o.length>0&&we(o,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==y&&(X.updateRenderTargetMipmap(y),X.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),d=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){v!==e&&null===y&&se.bindFramebuffer(36160,e),v=e},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t,n){y=e,m=t,g=n,e&&void 0===q.get(e).__webglFramebuffer&&X.setupRenderTarget(e);var i=v,r=!1;if(e){var a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=a[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,M.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else M.copy(O).multiplyScalar(L).floor(),S.copy(R).multiplyScalar(L).floor(),E=N;if(b!==i&&(se.bindFramebuffer(36160,i),b=i),V.viewport(M),V.scissor(S),V.setScissorTest(E),r){var o=q.get(e.texture);se.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var l=!1;s!==b&&(se.bindFramebuffer(36160,s),l=!0);try{var c=e.texture,u=c.format,d=c.type;if(u!==tc&&ae.convert(u)!==se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(d!==Ul&&ae.convert(d)!==se.getParameter(35738)&&(d!==Xl||!(G.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float")))&&(d!==Zl||!(G.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===se.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&se.readPixels(t,n,i,r,ae.convert(u),ae.convert(d),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&se.bindFramebuffer(36160,b)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i),o=ae.convert(t.format);X.setTexture2D(t,0),se.copyTexImage2D(3553,n,o,e.x,e.y,r,a,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);var r=t.image.width,a=t.image.height,o=ae.convert(n.format),s=ae.convert(n.type);X.setTexture2D(n,0),se.pixelStorei(37440,n.flipY),se.pixelStorei(37441,n.premultiplyAlpha),se.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?se.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?se.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):se.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&se.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),V.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Nv(e){Rv.call(this,e)}function kv(e,t){this.name="",this.color=new ih(e),this.density=void 0!==t?t:25e-5}function Dv(e,t,n){this.name="",this.color=new ih(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Iv(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=wu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Lu.generateUUID()}Tv.prototype=Object.assign(Object.create(pp.prototype),{constructor:Tv,isArrayCamera:!0}),Lv.prototype=Object.assign(Object.create(hd.prototype),{constructor:Lv,isGroup:!0}),Object.assign(Av.prototype,{constructor:Av,getHandSpace:function(){if(null===this._hand&&(this._hand=new Lv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){var t=new Lv;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Lv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Lv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e)if(e.hand){a=!0;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(e.hand[c]){var u=t.getJointPose(e.hand[c],n),d=l.joints[c];null!==u&&(d.matrix.fromArray(u.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=u.radius),d.visible=null!==u;var h=l.joints[window.XRHand.INDEX_PHALANX_TIP],p=l.joints[window.XRHand.THUMB_PHALANX_TIP],f=h.position.distanceTo(p.position);l.inputState.pinching&&f>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&null!==(i=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}}),Object.assign(Pv.prototype,Mu.prototype),Nv.prototype=Object.assign(Object.create(Rv.prototype),{constructor:Nv,isWebGL1Renderer:!0}),Object.assign(kv.prototype,{isFogExp2:!0,clone:function(){return new kv(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Dv.prototype,{isFog:!0,clone:function(){return new Dv(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Iv.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Iv.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lu.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new Iv(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lu.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var jv,zv=new Fu;function Bv(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Fv(e){ch.call(this),this.type="SpriteMaterial",this.color=new ih(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(Bv.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Bv.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)zv.x=this.getX(t),zv.y=this.getY(t),zv.z=this.getZ(t),zv.applyMatrix4(e),this.setXYZ(t,zv.x,zv.y,zv.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return new ph(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bv(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Fv.prototype=Object.create(ch.prototype),Fv.prototype.constructor=Fv,Fv.prototype.isSpriteMaterial=!0,Fv.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Uv=new Fu,Hv=new Fu,Gv=new Fu,Vv=new Au,Wv=new Au,qv=new Zu,Xv=new Fu,Zv=new Fu,Yv=new Fu,Jv=new Au,Qv=new Au,Kv=new Au;function $v(e){if(hd.call(this),this.type="Sprite",void 0===jv){jv=new Rh;var t=new Iv(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);jv.setIndex([0,1,2,0,2,3]),jv.setAttribute("position",new Bv(t,3,0,!1)),jv.setAttribute("uv",new Bv(t,2,3,!1))}this.geometry=jv,this.material=void 0!==e?e:new Fv,this.center=new Au(.5,.5)}function em(e,t,n,i,r,a){Vv.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Wv.x=a*Vv.x-r*Vv.y,Wv.y=r*Vv.x+a*Vv.y):Wv.copy(Vv),e.copy(t),e.x+=Wv.x,e.y+=Wv.y,e.applyMatrix4(qv)}$v.prototype=Object.assign(Object.create(hd.prototype),{constructor:$v,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hv.setFromMatrixScale(this.matrixWorld),qv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Hv.multiplyScalar(-Gv.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;em(Xv.set(-.5,-.5,0),Gv,a,Hv,n,i),em(Zv.set(.5,-.5,0),Gv,a,Hv,n,i),em(Yv.set(.5,.5,0),Gv,a,Hv,n,i),Jv.set(0,0),Qv.set(1,0),Kv.set(1,1);var o=e.ray.intersectTriangle(Xv,Zv,Yv,!1,Uv);if(null!==o||(em(Zv.set(-.5,.5,0),Gv,a,Hv,n,i),Qv.set(0,1),null!==(o=e.ray.intersectTriangle(Xv,Yv,Zv,!1,Uv)))){var s=e.ray.origin.distanceTo(Uv);s<e.near||s>e.far||t.push({distance:s,point:Uv.clone(),uv:$d.getUV(Uv,Xv,Zv,Yv,Jv,Qv,Kv,new Au),face:null,object:this})}},copy:function(e){return hd.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});var tm=new Fu,nm=new Fu;function im(){hd.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function rm(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Jh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Zu,this.bindMatrixInverse=new Zu}im.prototype=Object.assign(Object.create(hd.prototype),{constructor:im,isLOD:!0,copy:function(e){hd.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);var n,i=this.levels;for(n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){tm.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(tm);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){tm.setFromMatrixPosition(e.matrixWorld),nm.setFromMatrixPosition(this.matrixWorld);var n,i,r=tm.distanceTo(nm)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i&&r>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}},toJSON:function(e){var t=hd.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),rm.prototype=Object.assign(Object.create(Jh.prototype),{constructor:rm,isSkinnedMesh:!0,copy:function(e){return Jh.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new ku,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Jh.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var e=new Fu,t=new ku,n=new ku,i=new Fu,r=new Zu;return function(a,o){var s=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,a),n.fromBufferAttribute(l.attributes.skinWeight,a),e.fromBufferAttribute(l.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var c=0;c<4;c++){var u=n.getComponent(c);if(0!==u){var d=t.getComponent(c);r.multiplyMatrices(s.bones[d].matrixWorld,s.boneInverses[d]),o.addScaledVector(i.copy(e).applyMatrix4(r),u)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});var am=new Zu,om=new Zu;function sm(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Zu)}}function lm(){hd.call(this),this.type="Bone"}Object.assign(sm.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Zu;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:om;am.multiplyMatrices(o,t[r]),am.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new sm(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),lm.prototype=Object.assign(Object.create(hd.prototype),{constructor:lm,isBone:!0});var cm=new Zu,um=new Zu,dm=[],hm=new Jh;function pm(e,t,n){Jh.call(this,e,t),this.instanceMatrix=new ph(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function fm(e){ch.call(this),this.type="LineBasicMaterial",this.color=new ih(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}pm.prototype=Object.assign(Object.create(Jh.prototype),{constructor:pm,isInstancedMesh:!0,copy:function(e){return Jh.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,i=this.count;if(hm.geometry=this.geometry,hm.material=this.material,void 0!==hm.material)for(var r=0;r<i;r++){this.getMatrixAt(r,cm),um.multiplyMatrices(n,cm),hm.matrixWorld=um,hm.raycast(e,dm);for(var a=0,o=dm.length;a<o;a++){var s=dm[a];s.instanceId=r,s.object=this,t.push(s)}dm.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),fm.prototype=Object.create(ch.prototype),fm.prototype.constructor=fm,fm.prototype.isLineBasicMaterial=!0,fm.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var vm=new Fu,mm=new Fu,gm=new Zu,ym=new zd,bm=new Pd;function xm(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),hd.call(this),this.type="Line",this.geometry=void 0!==e?e:new Rh,this.material=void 0!==t?t:new fm,this.updateMorphTargets()}xm.prototype=Object.assign(Object.create(hd.prototype),{constructor:xm,isLine:!0,copy:function(e){return hd.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)vm.fromBufferAttribute(t,i-1),mm.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=vm.distanceTo(mm);e.setAttribute("lineDistance",new wh(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices,o=e.lineDistances;o[0]=0;for(var s=1,l=a.length;s<l;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),bm.copy(n.boundingSphere),bm.applyMatrix4(i),bm.radius+=r,!1!==e.ray.intersectsSphere(bm)){gm.getInverse(i),ym.copy(e.ray).applyMatrix4(gm);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new Fu,l=new Fu,c=new Fu,u=new Fu,d=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,p=n.attributes.position.array;if(null!==h)for(var f=h.array,v=0,m=f.length-1;v<m;v+=d){var g=f[v],y=f[v+1];if(s.fromArray(p,3*g),l.fromArray(p,3*y),!(ym.distanceSqToSegment(s,l,u,c)>o)){u.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(u);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=0,w=p.length/3-1;x<w;x+=d){if(s.fromArray(p,3*x),l.fromArray(p,3*x+3),!(ym.distanceSqToSegment(s,l,u,c)>o)){u.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(u);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var M=n.vertices,S=M.length,E=0;E<S-1;E+=d){if(!(ym.distanceSqToSegment(M[E],M[E+1],u,c)>o)){u.applyMatrix4(this.matrixWorld);var C=e.ray.origin.distanceTo(u);C<e.near||C>e.far||t.push({distance:C,point:c.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var wm=new Fu,_m=new Fu;function Mm(e,t){xm.call(this,e,t),this.type="LineSegments"}function Sm(e,t){xm.call(this,e,t),this.type="LineLoop"}function Em(e){ch.call(this),this.type="PointsMaterial",this.color=new ih(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Mm.prototype=Object.assign(Object.create(xm.prototype),{constructor:Mm,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)wm.fromBufferAttribute(t,i),_m.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+wm.distanceTo(_m);e.setAttribute("lineDistance",new wh(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,o=e.lineDistances,s=0,l=a.length;s<l;s+=2)wm.copy(a[s]),_m.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+wm.distanceTo(_m);return this}}),Sm.prototype=Object.assign(Object.create(xm.prototype),{constructor:Sm,isLineLoop:!0}),Em.prototype=Object.create(ch.prototype),Em.prototype.constructor=Em,Em.prototype.isPointsMaterial=!0,Em.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Cm=new Zu,Tm=new zd,Lm=new Pd,Am=new Fu;function Pm(e,t){hd.call(this),this.type="Points",this.geometry=void 0!==e?e:new Rh,this.material=void 0!==t?t:new Em,this.updateMorphTargets()}function Om(e,t,n,i,r,a,o){var s=Tm.distanceSqToPoint(e);if(s<n){var l=new Fu;Tm.closestPointToPoint(e,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}function Rm(e,t,n,i,r,a,o,s,l){Nu.call(this,e,t,n,i,r,a,o,s,l),this.format=void 0!==o?o:ec,this.minFilter=void 0!==a?a:zl,this.magFilter=void 0!==r?r:zl,this.generateMipmaps=!1;var c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function Nm(e,t,n,i,r,a,o,s,l,c,u,d){Nu.call(this,null,a,o,s,l,c,i,r,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function km(e,t,n,i,r,a,o,s,l){Nu.call(this,e,t,n,i,r,a,o,s,l),this.needsUpdate=!0}function Dm(e,t,n,i,r,a,o,s,l,c){if((c=void 0!==c?c:ac)!==ac&&c!==oc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ac&&(n=Vl),void 0===n&&c===oc&&(n=Kl),Nu.call(this,null,i,r,a,o,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Dl,this.minFilter=void 0!==s?s:Dl,this.flipY=!1,this.generateMipmaps=!1}function Im(e){Rh.call(this),this.type="WireframeGeometry";var t=[],n=[0,0],i={},r=["a","b","c"];if(e&&e.isGeometry){for(var a=e.faces,o=0,s=a.length;o<s;o++)for(var l=a[o],c=0;c<3;c++){var u=l[r[c]],d=l[r[(c+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d);var h=n[0]+","+n[1];void 0===i[h]&&(i[h]={index1:n[0],index2:n[1]})}for(var p in i){var f=i[p],v=e.vertices[f.index1];t.push(v.x,v.y,v.z),v=e.vertices[f.index2],t.push(v.x,v.y,v.z)}}else if(e&&e.isBufferGeometry){var m=new Fu;if(null!==e.index){var g=e.attributes.position,y=e.index,b=e.groups;0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]);for(var x=0,w=b.length;x<w;++x)for(var _=b[x],M=_.start,S=M,E=M+_.count;S<E;S+=3)for(var C=0;C<3;C++){var T=y.getX(S+C),L=y.getX(S+(C+1)%3);n[0]=Math.min(T,L),n[1]=Math.max(T,L);var A=n[0]+","+n[1];void 0===i[A]&&(i[A]={index1:n[0],index2:n[1]})}for(var P in i){var O=i[P];m.fromBufferAttribute(g,O.index1),t.push(m.x,m.y,m.z),m.fromBufferAttribute(g,O.index2),t.push(m.x,m.y,m.z)}}else for(var R=e.attributes.position,N=0,k=R.count/3;N<k;N++)for(var D=0;D<3;D++){var I=3*N+D;m.fromBufferAttribute(R,I),t.push(m.x,m.y,m.z);var j=3*N+(D+1)%3;m.fromBufferAttribute(R,j),t.push(m.x,m.y,m.z)}}this.setAttribute("position",new wh(t,3))}function jm(e,t,n){ip.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new zm(e,t,n)),this.mergeVertices()}function zm(e,t,n){Rh.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i=[],r=[],a=[],o=[],s=1e-5,l=new Fu,c=new Fu,u=new Fu,d=new Fu,h=new Fu;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var p=t+1,f=0;f<=n;f++)for(var v=f/n,m=0;m<=t;m++){var g=m/t;e(g,v,c),r.push(c.x,c.y,c.z),g-s>=0?(e(g-s,v,u),d.subVectors(c,u)):(e(g+s,v,u),d.subVectors(u,c)),v-s>=0?(e(g,v-s,u),h.subVectors(c,u)):(e(g,v+s,u),h.subVectors(u,c)),l.crossVectors(d,h).normalize(),a.push(l.x,l.y,l.z),o.push(g,v)}for(var y=0;y<n;y++)for(var b=0;b<t;b++){var x=y*p+b,w=y*p+b+1,_=(y+1)*p+b+1,M=(y+1)*p+b;i.push(x,w,M),i.push(w,_,M)}this.setIndex(i),this.setAttribute("position",new wh(r,3)),this.setAttribute("normal",new wh(a,3)),this.setAttribute("uv",new wh(o,2))}function Bm(e,t,n,i){ip.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Fm(e,t,n,i)),this.mergeVertices()}function Fm(e,t,n,i){Rh.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],a=[];function o(e,t,n,i){for(var r=Math.pow(2,i),a=[],o=0;o<=r;o++){a[o]=[];for(var l=e.clone().lerp(n,o/r),c=t.clone().lerp(n,o/r),u=r-o,d=0;d<=u;d++)a[o][d]=0===d&&o===r?l:l.clone().lerp(c,d/u)}for(var h=0;h<r;h++)for(var p=0;p<2*(r-h)-1;p++){var f=Math.floor(p/2);p%2===0?(s(a[h][f+1]),s(a[h+1][f]),s(a[h][f])):(s(a[h][f+1]),s(a[h+1][f+1]),s(a[h+1][f]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Fu,i=new Fu,r=new Fu,a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],i),l(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new Fu,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new Fu,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=u(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var e=new Fu,t=new Fu,n=new Fu,i=new Fu,o=new Au,s=new Au,l=new Au,d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=u(i);c(o,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new wh(r,3)),this.setAttribute("normal",new wh(r.slice(),3)),this.setAttribute("uv",new wh(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Um(e,t){ip.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hm(e,t)),this.mergeVertices()}function Hm(e,t){Fm.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gm(e,t){ip.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vm(e,t)),this.mergeVertices()}function Vm(e,t){Fm.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wm(e,t){ip.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qm(e,t)),this.mergeVertices()}function qm(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Fm.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xm(e,t){ip.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zm(e,t)),this.mergeVertices()}function Zm(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Fm.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ym(e,t,n,i,r,a){ip.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Jm(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Jm(e,t,n,i,r){Rh.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o=new Fu,s=new Fu,l=new Au,c=new Fu,u=[],d=[],h=[],p=[];function f(r){c=e.getPointAt(r/t,c);for(var l=a.normals[r],h=a.binormals[r],p=0;p<=i;p++){var f=p/i*Math.PI*2,v=Math.sin(f),m=-Math.cos(f);s.x=m*l.x+v*h.x,s.y=m*l.y+v*h.y,s.z=m*l.z+v*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(var e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(var e=0;e<=t;e++)for(var n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}(),function(){for(var e=1;e<=t;e++)for(var n=1;n<=i;n++){var r=(i+1)*(e-1)+(n-1),a=(i+1)*e+(n-1),o=(i+1)*e+n,s=(i+1)*(e-1)+n;p.push(r,a,s),p.push(a,o,s)}}()}(),this.setIndex(p),this.setAttribute("position",new wh(u,3)),this.setAttribute("normal",new wh(d,3)),this.setAttribute("uv",new wh(h,2))}function Qm(e,t,n,i,r,a,o){ip.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Km(e,t,n,i,r,a)),this.mergeVertices()}function Km(e,t,n,i,r,a){Rh.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;for(var o=[],s=[],l=[],c=[],u=new Fu,d=new Fu,h=new Fu,p=new Fu,f=new Fu,v=new Fu,m=new Fu,g=0;g<=n;++g){var y=g/n*r*Math.PI*2;A(y,r,a,e,h),A(y+.01,r,a,e,p),v.subVectors(p,h),m.addVectors(p,h),f.crossVectors(v,m),m.crossVectors(f,v),f.normalize(),m.normalize();for(var b=0;b<=i;++b){var x=b/i*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);u.x=h.x+(w*m.x+_*f.x),u.y=h.y+(w*m.y+_*f.y),u.z=h.z+(w*m.z+_*f.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(g/n),c.push(b/i)}}for(var M=1;M<=n;M++)for(var S=1;S<=i;S++){var E=(i+1)*(M-1)+(S-1),C=(i+1)*M+(S-1),T=(i+1)*M+S,L=(i+1)*(M-1)+S;o.push(E,C,L),o.push(C,T,L)}function A(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new wh(s,3)),this.setAttribute("normal",new wh(l,3)),this.setAttribute("uv",new wh(c,2))}function $m(e,t,n,i,r){ip.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new eg(e,t,n,i,r)),this.mergeVertices()}function eg(e,t,n,i,r){Rh.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;for(var a=[],o=[],s=[],l=[],c=new Fu,u=new Fu,d=new Fu,h=0;h<=n;h++)for(var p=0;p<=i;p++){var f=p/i*r,v=h/n*Math.PI*2;u.x=(e+t*Math.cos(v))*Math.cos(f),u.y=(e+t*Math.cos(v))*Math.sin(f),u.z=t*Math.sin(v),o.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(p/i),l.push(h/n)}for(var m=1;m<=n;m++)for(var g=1;g<=i;g++){var y=(i+1)*m+g-1,b=(i+1)*(m-1)+g-1,x=(i+1)*(m-1)+g,w=(i+1)*m+g;a.push(y,b,w),a.push(b,x,w)}this.setIndex(a),this.setAttribute("position",new wh(o,3)),this.setAttribute("normal",new wh(s,3)),this.setAttribute("uv",new wh(l,2))}Pm.prototype=Object.assign(Object.create(hd.prototype),{constructor:Pm,isPoints:!0,copy:function(e){return hd.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Lm.copy(n.boundingSphere),Lm.applyMatrix4(i),Lm.radius+=r,!1!==e.ray.intersectsSphere(Lm)){Cm.getInverse(i),Tm.copy(e.ray).applyMatrix4(Cm);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var c=s.array,u=0,d=c.length;u<d;u++){var h=c[u];Am.fromArray(l,3*h),Om(Am,h,o,i,e,t,this)}else for(var p=0,f=l.length/3;p<f;p++)Am.fromArray(l,3*p),Om(Am,p,o,i,e,t,this)}else for(var v=n.vertices,m=0,g=v.length;m<g;m++)Om(v[m],m,o,i,e,t,this)}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Rm.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Rm,isVideoTexture:!0,update:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Nm.prototype=Object.create(Nu.prototype),Nm.prototype.constructor=Nm,Nm.prototype.isCompressedTexture=!0,km.prototype=Object.create(Nu.prototype),km.prototype.constructor=km,km.prototype.isCanvasTexture=!0,Dm.prototype=Object.create(Nu.prototype),Dm.prototype.constructor=Dm,Dm.prototype.isDepthTexture=!0,Im.prototype=Object.create(Rh.prototype),Im.prototype.constructor=Im,jm.prototype=Object.create(ip.prototype),jm.prototype.constructor=jm,zm.prototype=Object.create(Rh.prototype),zm.prototype.constructor=zm,Bm.prototype=Object.create(ip.prototype),Bm.prototype.constructor=Bm,Fm.prototype=Object.create(Rh.prototype),Fm.prototype.constructor=Fm,Um.prototype=Object.create(ip.prototype),Um.prototype.constructor=Um,Hm.prototype=Object.create(Fm.prototype),Hm.prototype.constructor=Hm,Gm.prototype=Object.create(ip.prototype),Gm.prototype.constructor=Gm,Vm.prototype=Object.create(Fm.prototype),Vm.prototype.constructor=Vm,Wm.prototype=Object.create(ip.prototype),Wm.prototype.constructor=Wm,qm.prototype=Object.create(Fm.prototype),qm.prototype.constructor=qm,Xm.prototype=Object.create(ip.prototype),Xm.prototype.constructor=Xm,Zm.prototype=Object.create(Fm.prototype),Zm.prototype.constructor=Zm,Ym.prototype=Object.create(ip.prototype),Ym.prototype.constructor=Ym,Jm.prototype=Object.create(Rh.prototype),Jm.prototype.constructor=Jm,Jm.prototype.toJSON=function(){var e=Rh.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Qm.prototype=Object.create(ip.prototype),Qm.prototype.constructor=Qm,Km.prototype=Object.create(Rh.prototype),Km.prototype.constructor=Km,$m.prototype=Object.create(ip.prototype),$m.prototype.constructor=$m,eg.prototype=Object.create(Rh.prototype),eg.prototype.constructor=eg;var tg=function(e,t,n){n=n||2;var i,r,a,o,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,h=ng(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=ng(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(pg(o));for(s.sort(cg),r=0;r<s.length;r++)ug(s[r],n),n=ig(n,n.next);return n}(e,t,h,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var f=n;f<d;f+=n)(s=e[f])<i&&(i=s),(l=e[f+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-i,o-r))?1/c:0}return rg(h,p,n,i,r,c),p};function ng(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=Mg(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=Mg(a,e[a],e[a+1],o);return o&&gg(o,o.next)&&(Sg(o),o=o.next),o}function ig(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!gg(i,i.next)&&0!==mg(i.prev,i,i.next))i=i.next;else{if(Sg(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function rg(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=hg(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?og(e,i,r,a):ag(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Sg(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?rg(e=sg(ig(e),t,n),t,n,i,r,a,2):2===o&&lg(e,t,n,i,r,a):rg(ig(e),t,n,i,r,a,1);break}}}function ag(e){var t=e.prev,n=e,i=e.next;if(mg(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(fg(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&mg(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function og(e,t,n,i){var r=e.prev,a=e,o=e.next;if(mg(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,d=hg(s,l,t,n,i),h=hg(c,u,t,n,i),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&fg(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&mg(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&fg(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mg(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&fg(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&mg(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&fg(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&mg(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function sg(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!gg(r,a)&&yg(r,i,i.next,a)&&wg(r,a)&&wg(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Sg(i),Sg(i.next),i=e=a),i=i.next}while(i!==e);return ig(i)}function lg(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&vg(o,s)){var l=_g(o,s);return o=ig(o,o.next),l=ig(l,l.next),rg(o,t,n,i,r,a),void rg(l,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function cg(e,t){return e.x-t.x}function ug(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n;var l,c=n,u=n.x,d=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&fg(a<d?r:o,a,u,d,a<d?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),wg(i,e)&&(l<h||l===h&&(i.x>n.x||i.x===n.x&&dg(n,i)))&&(n=i,h=l)),i=i.next}while(i!==c);return n}(e,t),t){var n=_g(t,e);ig(t,t.next),ig(n,n.next)}}function dg(e,t){return mg(e.prev,e,t.prev)<0&&mg(t.next,e,e.next)<0}function hg(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pg(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function fg(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function vg(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&yg(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(wg(e,t)&&wg(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(mg(e.prev,e,t.prev)||mg(e,t.prev,t))||gg(e,t)&&mg(e.prev,e,e.next)>0&&mg(t.prev,t,t.next)>0)}function mg(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function gg(e,t){return e.x===t.x&&e.y===t.y}function yg(e,t,n,i){var r=xg(mg(e,t,n)),a=xg(mg(e,t,i)),o=xg(mg(n,i,e)),s=xg(mg(n,i,t));return r!==a&&o!==s||(!(0!==r||!bg(e,n,t))||(!(0!==a||!bg(e,i,t))||(!(0!==o||!bg(n,e,i))||!(0!==s||!bg(n,t,i)))))}function bg(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function xg(e){return e>0?1:e<0?-1:0}function wg(e,t){return mg(e.prev,e,e.next)<0?mg(e,t,e.next)>=0&&mg(e,e.prev,t)>=0:mg(e,t,e.prev)<0||mg(e,e.next,t)<0}function _g(e,t){var n=new Eg(e.i,e.x,e.y),i=new Eg(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Mg(e,t,n,i){var r=new Eg(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Sg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Eg(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Cg={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Cg.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Tg(e),Lg(n,e);var a=e.length;t.forEach(Tg);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Lg(n,t[o]);for(var s=tg(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}};function Tg(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Lg(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Ag(e,t){ip.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Pg(e,t)),this.mergeVertices()}function Pg(e,t){Rh.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:u-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:Og;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,g,y,b,x,w=!1;f&&(m=f.getSpacedPoints(s),w=!0,c=!1,g=f.computeFrenetFrames(s,!1),y=new Fu,b=new Fu,x=new Fu),c||(p=0,u=0,d=0,h=0);var _=e.extractPoints(o),M=_.shape,S=_.holes;if(!Cg.isClockWise(M)){M=M.reverse();for(var E=0,C=S.length;E<C;E++){var T=S[E];Cg.isClockWise(T)&&(S[E]=T.reverse())}}for(var L=Cg.triangulateShape(M,S),A=M,P=0,O=S.length;P<O;P++){var R=S[P];M=M.concat(R)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var k=M.length,D=L.length;function I(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,d=o*c-s*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=t.x-s/h,v=t.y+o/h,m=((n.x-c/p-f)*c-(n.y+l/p-v)*l)/(o*c-s*l),g=(i=f+o*m-e.x)*i+(r=v+s*m-e.y)*r;if(g<=2)return new Au(i,r);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Au(i/a,r/a)}for(var j=[],z=0,B=A.length,F=B-1,U=z+1;z<B;z++,F++,U++)F===B&&(F=0),U===B&&(U=0),j[z]=I(A[z],A[F],A[U]);for(var H,G=[],V=j.concat(),W=0,q=S.length;W<q;W++){var X=S[W];H=[];for(var Z=0,Y=X.length,J=Y-1,Q=Z+1;Z<Y;Z++,J++,Q++)J===Y&&(J=0),Q===Y&&(Q=0),H[Z]=I(X[Z],X[J],X[Q]);G.push(H),V=V.concat(H)}for(var K=0;K<p;K++){for(var $=K/p,ee=u*Math.cos($*Math.PI/2),te=d*Math.sin($*Math.PI/2)+h,ne=0,ie=A.length;ne<ie;ne++){var re=N(A[ne],j[ne],te);Oe(re.x,re.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];H=G[ae];for(var le=0,ce=se.length;le<ce;le++){var ue=N(se[le],H[le],te);Oe(ue.x,ue.y,-ee)}}}for(var de=d+h,he=0;he<k;he++){var pe=c?N(M[he],V[he],de):M[he];w?(b.copy(g.normals[0]).multiplyScalar(pe.x),y.copy(g.binormals[0]).multiplyScalar(pe.y),x.copy(m[0]).add(b).add(y),Oe(x.x,x.y,x.z)):Oe(pe.x,pe.y,0)}for(var fe=1;fe<=s;fe++)for(var ve=0;ve<k;ve++){var me=c?N(M[ve],V[ve],de):M[ve];w?(b.copy(g.normals[fe]).multiplyScalar(me.x),y.copy(g.binormals[fe]).multiplyScalar(me.y),x.copy(m[fe]).add(b).add(y),Oe(x.x,x.y,x.z)):Oe(me.x,me.y,l/s*fe)}for(var ge=p-1;ge>=0;ge--){for(var ye=ge/p,be=u*Math.cos(ye*Math.PI/2),xe=d*Math.sin(ye*Math.PI/2)+h,we=0,_e=A.length;we<_e;we++){var Me=N(A[we],j[we],xe);Oe(Me.x,Me.y,l+be)}for(var Se=0,Ee=S.length;Se<Ee;Se++){var Ce=S[Se];H=G[Se];for(var Te=0,Le=Ce.length;Te<Le;Te++){var Ae=N(Ce[Te],H[Te],xe);w?Oe(Ae.x,Ae.y+m[s-1].y,m[s-1].x+be):Oe(Ae.x,Ae.y,l+be)}}}function Pe(e,t){for(var n=e.length;--n>=0;){var i=n,r=n-1;r<0&&(r=e.length-1);for(var a=0,o=s+2*p;a<o;a++){var l=k*a,c=k*(a+1);Ne(t+i+l,t+r+l,t+r+c,t+i+c)}}}function Oe(e,t,n){a.push(e),a.push(t),a.push(n)}function Re(e,t,r){ke(e),ke(t),ke(r);var a=i.length/3,o=v.generateTopUV(n,i,a-3,a-2,a-1);De(o[0]),De(o[1]),De(o[2])}function Ne(e,t,r,a){ke(e),ke(t),ke(a),ke(t),ke(r),ke(a);var o=i.length/3,s=v.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function ke(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function De(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(c){for(var t=0,r=k*t,a=0;a<D;a++){var o=L[a];Re(o[2]+r,o[1]+r,o[0]+r)}r=k*(t=s+2*p);for(var l=0;l<D;l++){var u=L[l];Re(u[0]+r,u[1]+r,u[2]+r)}}else{for(var d=0;d<D;d++){var h=L[d];Re(h[2],h[1],h[0])}for(var f=0;f<D;f++){var v=L[f];Re(v[0]+k*s,v[1]+k*s,v[2]+k*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;Pe(A,t),t+=A.length;for(var r=0,a=S.length;r<a;r++){var o=S[r];Pe(o,t),t+=o.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new wh(i,3)),this.setAttribute("uv",new wh(r,2)),this.computeVertexNormals()}Ag.prototype=Object.create(ip.prototype),Ag.prototype.constructor=Ag,Ag.prototype.toJSON=function(){var e=ip.prototype.toJSON.call(this);return Rg(this.parameters.shapes,this.parameters.options,e)},Pg.prototype=Object.create(Rh.prototype),Pg.prototype.constructor=Pg,Pg.prototype.toJSON=function(){var e=Rh.prototype.toJSON.call(this);return Rg(this.parameters.shapes,this.parameters.options,e)};var Og={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Au(a,o),new Au(s,l),new Au(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new Au(o,1-l),new Au(c,1-d),new Au(h,1-f),new Au(v,1-g)]:[new Au(s,1-l),new Au(u,1-d),new Au(p,1-f),new Au(m,1-g)]}};function Rg(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Ng(e,t){ip.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new kg(e,t)),this.mergeVertices()}function kg(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ip;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Pg.call(this,i,t),this.type="TextBufferGeometry"}function Dg(e,t,n,i,r,a,o){ip.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ig(e,t,n,i,r,a,o)),this.mergeVertices()}function Ig(e,t,n,i,r,a,o){Rh.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),l=0,c=[],u=new Fu,d=new Fu,h=[],p=[],f=[],v=[],m=0;m<=n;m++){var g=[],y=m/n,b=0;0==m&&0==a?b=.5/t:m==n&&s==Math.PI&&(b=-.5/t);for(var x=0;x<=t;x++){var w=x/t;u.x=-e*Math.cos(i+w*r)*Math.sin(a+y*o),u.y=e*Math.cos(a+y*o),u.z=e*Math.sin(i+w*r)*Math.sin(a+y*o),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),v.push(w+b,1-y),g.push(l++)}c.push(g)}for(var _=0;_<n;_++)for(var M=0;M<t;M++){var S=c[_][M+1],E=c[_][M],C=c[_+1][M],T=c[_+1][M+1];(0!==_||a>0)&&h.push(S,E,T),(_!==n-1||s<Math.PI)&&h.push(E,C,T)}this.setIndex(h),this.setAttribute("position",new wh(p,3)),this.setAttribute("normal",new wh(f,3)),this.setAttribute("uv",new wh(v,2))}function jg(e,t,n,i,r,a){ip.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new zg(e,t,n,i,r,a)),this.mergeVertices()}function zg(e,t,n,i,r,a){Rh.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;for(var o=[],s=[],l=[],c=[],u=e,d=(t-e)/(i=void 0!==i?Math.max(1,i):1),h=new Fu,p=new Au,f=0;f<=i;f++){for(var v=0;v<=n;v++){var m=r+v/n*a;h.x=u*Math.cos(m),h.y=u*Math.sin(m),s.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(var g=0;g<i;g++)for(var y=g*(n+1),b=0;b<n;b++){var x=b+y,w=x,_=x+n+1,M=x+n+2,S=x+1;o.push(w,_,S),o.push(_,M,S)}this.setIndex(o),this.setAttribute("position",new wh(s,3)),this.setAttribute("normal",new wh(l,3)),this.setAttribute("uv",new wh(c,2))}function Bg(e,t,n,i){ip.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Fg(e,t,n,i)),this.mergeVertices()}function Fg(e,t,n,i){Rh.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Lu.clamp(i,0,2*Math.PI);for(var r=[],a=[],o=[],s=1/t,l=new Fu,c=new Au,u=0;u<=t;u++)for(var d=n+u*s*i,h=Math.sin(d),p=Math.cos(d),f=0;f<=e.length-1;f++)l.x=e[f].x*h,l.y=e[f].y,l.z=e[f].x*p,a.push(l.x,l.y,l.z),c.x=u/t,c.y=f/(e.length-1),o.push(c.x,c.y);for(var v=0;v<t;v++)for(var m=0;m<e.length-1;m++){var g=m+v*e.length,y=g,b=g+e.length,x=g+e.length+1,w=g+1;r.push(y,b,w),r.push(b,x,w)}if(this.setIndex(r),this.setAttribute("position",new wh(a,3)),this.setAttribute("uv",new wh(o,2)),this.computeVertexNormals(),i===2*Math.PI)for(var _=this.attributes.normal.array,M=new Fu,S=new Fu,E=new Fu,C=t*e.length*3,T=0,L=0;T<e.length;T++,L+=3)M.x=_[L+0],M.y=_[L+1],M.z=_[L+2],S.x=_[C+L+0],S.y=_[C+L+1],S.z=_[C+L+2],E.addVectors(M,S).normalize(),_[L+0]=_[C+L+0]=E.x,_[L+1]=_[C+L+1]=E.y,_[L+2]=_[C+L+2]=E.z}function Ug(e,t){ip.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Hg(e,t)),this.mergeVertices()}function Hg(e,t){Rh.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(o,s,l),o+=s,s=0;function c(e){var o=i.length/3,l=e.extractPoints(t),c=l.shape,u=l.holes;!1===Cg.isClockWise(c)&&(c=c.reverse());for(var d=0,h=u.length;d<h;d++){var p=u[d];!0===Cg.isClockWise(p)&&(u[d]=p.reverse())}for(var f=Cg.triangulateShape(c,u),v=0,m=u.length;v<m;v++){var g=u[v];c=c.concat(g)}for(var y=0,b=c.length;y<b;y++){var x=c[y];i.push(x.x,x.y,0),r.push(0,0,1),a.push(x.x,x.y)}for(var w=0,_=f.length;w<_;w++){var M=f[w],S=M[0]+o,E=M[1]+o,C=M[2]+o;n.push(S,E,C),s+=3}}this.setIndex(n),this.setAttribute("position",new wh(i,3)),this.setAttribute("normal",new wh(r,3)),this.setAttribute("uv",new wh(a,2))}function Gg(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Vg(e,t){Rh.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(Lu.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(a=new ip).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,p=0,f=h.length;p<f;p++)for(var v=h[p],m=0;m<3;m++)n=v[u[m]],i=v[u[(m+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var g=c[r];if(void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=s){var y=d[g.index1];o.push(y.x,y.y,y.z),y=d[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new wh(o,3))}function Wg(e,t,n,i,r,a,o,s){ip.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new qg(e,t,n,i,r,a,o,s)),this.mergeVertices()}function qg(e,t,n,i,r,a,o,s){Rh.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],d=[],h=[],p=0,f=[],v=n/2,m=0;function g(n){var r,a,f=new Au,g=new Fu,y=0,b=!0===n?e:t,x=!0===n?1:-1;r=p;for(var w=1;w<=i;w++)u.push(0,v*x,0),d.push(0,x,0),h.push(.5,.5),p++;a=p;for(var _=0;_<=i;_++){var M=_/i*s+o,S=Math.cos(M),E=Math.sin(M);g.x=b*E,g.y=v*x,g.z=b*S,u.push(g.x,g.y,g.z),d.push(0,x,0),f.x=.5*S+.5,f.y=.5*E*x+.5,h.push(f.x,f.y),p++}for(var C=0;C<i;C++){var T=r+C,L=a+C;!0===n?c.push(L,L+1,T):c.push(L+1,L,T),y+=3}l.addGroup(m,y,!0===n?1:2),m+=y}!function(){for(var a=new Fu,g=new Fu,y=0,b=(t-e)/n,x=0;x<=r;x++){for(var w=[],_=x/r,M=_*(t-e)+e,S=0;S<=i;S++){var E=S/i,C=E*s+o,T=Math.sin(C),L=Math.cos(C);g.x=M*T,g.y=-_*n+v,g.z=M*L,u.push(g.x,g.y,g.z),a.set(T,b,L).normalize(),d.push(a.x,a.y,a.z),h.push(E,1-_),w.push(p++)}f.push(w)}for(var A=0;A<i;A++)for(var P=0;P<r;P++){var O=f[P][A],R=f[P+1][A],N=f[P+1][A+1],k=f[P][A+1];c.push(O,R,k),c.push(R,N,k),y+=6}l.addGroup(m,y,0),m+=y}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new wh(u,3)),this.setAttribute("normal",new wh(d,3)),this.setAttribute("uv",new wh(h,2))}function Xg(e,t,n,i,r,a,o){Wg.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Zg(e,t,n,i,r,a,o){qg.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Yg(e,t,n,i){ip.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Jg(e,t,n,i)),this.mergeVertices()}function Jg(e,t,n,i){Rh.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r=[],a=[],o=[],s=[],l=new Fu,c=new Au;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(var u=0,d=3;u<=t;u++,d+=3){var h=n+u/t*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,s.push(c.x,c.y)}for(var p=1;p<=t;p++)r.push(p,p+1,0);this.setIndex(r),this.setAttribute("position",new wh(a,3)),this.setAttribute("normal",new wh(o,3)),this.setAttribute("uv",new wh(s,2))}Ng.prototype=Object.create(ip.prototype),Ng.prototype.constructor=Ng,kg.prototype=Object.create(Pg.prototype),kg.prototype.constructor=kg,Dg.prototype=Object.create(ip.prototype),Dg.prototype.constructor=Dg,Ig.prototype=Object.create(Rh.prototype),Ig.prototype.constructor=Ig,jg.prototype=Object.create(ip.prototype),jg.prototype.constructor=jg,zg.prototype=Object.create(Rh.prototype),zg.prototype.constructor=zg,Bg.prototype=Object.create(ip.prototype),Bg.prototype.constructor=Bg,Fg.prototype=Object.create(Rh.prototype),Fg.prototype.constructor=Fg,Ug.prototype=Object.create(ip.prototype),Ug.prototype.constructor=Ug,Ug.prototype.toJSON=function(){var e=ip.prototype.toJSON.call(this);return Gg(this.parameters.shapes,e)},Hg.prototype=Object.create(Rh.prototype),Hg.prototype.constructor=Hg,Hg.prototype.toJSON=function(){var e=Rh.prototype.toJSON.call(this);return Gg(this.parameters.shapes,e)},Vg.prototype=Object.create(Rh.prototype),Vg.prototype.constructor=Vg,Wg.prototype=Object.create(ip.prototype),Wg.prototype.constructor=Wg,qg.prototype=Object.create(Rh.prototype),qg.prototype.constructor=qg,Xg.prototype=Object.create(Wg.prototype),Xg.prototype.constructor=Xg,Zg.prototype=Object.create(qg.prototype),Zg.prototype.constructor=Zg,Yg.prototype=Object.create(ip.prototype),Yg.prototype.constructor=Yg,Jg.prototype=Object.create(Rh.prototype),Jg.prototype.constructor=Jg;var Qg=Object.freeze({__proto__:null,WireframeGeometry:Im,ParametricGeometry:jm,ParametricBufferGeometry:zm,TetrahedronGeometry:Um,TetrahedronBufferGeometry:Hm,OctahedronGeometry:Gm,OctahedronBufferGeometry:Vm,IcosahedronGeometry:Wm,IcosahedronBufferGeometry:qm,DodecahedronGeometry:Xm,DodecahedronBufferGeometry:Zm,PolyhedronGeometry:Bm,PolyhedronBufferGeometry:Fm,TubeGeometry:Ym,TubeBufferGeometry:Jm,TorusKnotGeometry:Qm,TorusKnotBufferGeometry:Km,TorusGeometry:$m,TorusBufferGeometry:eg,TextGeometry:Ng,TextBufferGeometry:kg,SphereGeometry:Dg,SphereBufferGeometry:Ig,RingGeometry:jg,RingBufferGeometry:zg,PlaneGeometry:Ep,PlaneBufferGeometry:Cp,LatheGeometry:Bg,LatheBufferGeometry:Fg,ShapeGeometry:Ug,ShapeBufferGeometry:Hg,ExtrudeGeometry:Ag,ExtrudeBufferGeometry:Pg,EdgesGeometry:Vg,ConeGeometry:Xg,ConeBufferGeometry:Zg,CylinderGeometry:Wg,CylinderBufferGeometry:qg,CircleGeometry:Yg,CircleBufferGeometry:Jg,BoxGeometry:rp,BoxBufferGeometry:ap});function Kg(e){ch.call(this),this.type="ShadowMaterial",this.color=new ih(0),this.transparent=!0,this.setValues(e)}function $g(e){dp.call(this,e),this.type="RawShaderMaterial"}function ey(e){ch.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ih(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ih(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function ty(e){ey.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Au(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function ny(e){ch.call(this),this.type="MeshPhongMaterial",this.color=new ih(16777215),this.specular=new ih(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ih(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function iy(e){ch.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ih(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ih(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ry(e){ch.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ay(e){ch.call(this),this.type="MeshLambertMaterial",this.color=new ih(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ih(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function oy(e){ch.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ih(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function sy(e){fm.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Kg.prototype=Object.create(ch.prototype),Kg.prototype.constructor=Kg,Kg.prototype.isShadowMaterial=!0,Kg.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this},$g.prototype=Object.create(dp.prototype),$g.prototype.constructor=$g,$g.prototype.isRawShaderMaterial=!0,ey.prototype=Object.create(ch.prototype),ey.prototype.constructor=ey,ey.prototype.isMeshStandardMaterial=!0,ey.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},ty.prototype=Object.create(ey.prototype),ty.prototype.constructor=ty,ty.prototype.isMeshPhysicalMaterial=!0,ty.prototype.copy=function(e){return ey.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ih).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},ny.prototype=Object.create(ch.prototype),ny.prototype.constructor=ny,ny.prototype.isMeshPhongMaterial=!0,ny.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},iy.prototype=Object.create(ch.prototype),iy.prototype.constructor=iy,iy.prototype.isMeshToonMaterial=!0,iy.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ry.prototype=Object.create(ch.prototype),ry.prototype.constructor=ry,ry.prototype.isMeshNormalMaterial=!0,ry.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ay.prototype=Object.create(ch.prototype),ay.prototype.constructor=ay,ay.prototype.isMeshLambertMaterial=!0,ay.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},oy.prototype=Object.create(ch.prototype),oy.prototype.constructor=oy,oy.prototype.isMeshMatcapMaterial=!0,oy.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},sy.prototype=Object.create(fm.prototype),sy.prototype.constructor=sy,sy.prototype.isLineDashedMaterial=!0,sy.prototype.copy=function(e){return fm.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ly=Object.freeze({__proto__:null,ShadowMaterial:Kg,SpriteMaterial:Fv,RawShaderMaterial:$g,ShaderMaterial:dp,PointsMaterial:Em,MeshPhysicalMaterial:ty,MeshStandardMaterial:ey,MeshPhongMaterial:ny,MeshToonMaterial:iy,MeshNormalMaterial:ry,MeshLambertMaterial:ay,MeshDepthMaterial:bv,MeshDistanceMaterial:xv,MeshBasicMaterial:uh,MeshMatcapMaterial:oy,LineDashedMaterial:sy,LineBasicMaterial:fm,Material:ch}),cy={arraySlice:function(e,t,n){return cy.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}},subclip:function(e,t,n,i,r){r=r||30;var a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],c=l.getValueSize(),u=[],d=[],h=0;h<l.times.length;++h){var p=l.times[h]*r;if(!(p<n||p>=i)){u.push(l.times[h]);for(var f=0;f<c;++f)d.push(l.values[h*c+f])}}0!==u.length&&(l.times=cy.convertArray(u,l.times.constructor),l.values=cy.convertArray(d,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);for(var r=e.tracks.length,a=t/i,o=function(){var t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)return"continue";var r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===i}));if(void 0===r)return"continue";var o,l=t.getValueSize(),c=t.times.length-1;if(a<=t.times[0])o=cy.arraySlice(t.values,0,t.valueSize);else if(a>=t.times[c]){var u=c*l;o=cy.arraySlice(t.values,u)}else{var d=t.createInterpolant();d.evaluate(a),o=d.resultBuffer}"quaternion"===i&&new ju(o[0],o[1],o[2],o[3]).normalize().conjugate().toArray(o);for(var h=r.times.length,p=0;p<h;++p){var f=p*l;if("quaternion"===i)ju.multiplyQuaternionsFlat(r.values,f,o,0,r.values,f);else for(var v=0;v<l;++v)r.values[f+v]-=o[v]}},s=0;s<r;++s)o();return e.blendMode=2501,e}};function uy(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function dy(e,t,n,i){uy.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function hy(e,t,n,i){uy.call(this,e,t,n,i)}function py(e,t,n,i){uy.call(this,e,t,n,i)}function fy(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cy.convertArray(t,this.TimeBufferType),this.values=cy.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function vy(e,t,n){fy.call(this,e,t,n)}function my(e,t,n,i){fy.call(this,e,t,n,i)}function gy(e,t,n,i){fy.call(this,e,t,n,i)}function yy(e,t,n,i){uy.call(this,e,t,n,i)}function by(e,t,n,i){fy.call(this,e,t,n,i)}function xy(e,t,n,i){fy.call(this,e,t,n,i)}function wy(e,t,n,i){fy.call(this,e,t,n,i)}function _y(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:ou,this.uuid=Lu.generateUUID(),this.duration<0&&this.resetDuration()}function My(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gy;case"vector":case"vector2":case"vector3":case"vector4":return wy;case"color":return my;case"quaternion":return by;case"bool":case"boolean":return vy;case"string":return xy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];cy.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(uy.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===l)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(uy.prototype,{beforeStart_:uy.prototype.copySampleValue_,afterEnd_:uy.prototype.copySampleValue_}),dy.prototype=Object.assign(Object.create(uy.prototype),{constructor:dy,DefaultSettings_:{endingStart:iu,endingEnd:iu},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case ru:r=e,o=2*t-n;break;case au:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ru:a=e,s=2*n-t;break;case au:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,v=f*p,m=-d*v+2*d*f-d*p,g=(1+d)*v+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*v+(1.5+h)*f+.5*p,b=h*v-h*f,x=0;x!==o;++x)r[x]=m*a[c+x]+g*a[l+x]+y*a[s+x]+b*a[u+x];return r}}),hy.prototype=Object.assign(Object.create(uy.prototype),{constructor:hy,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(i-t),u=1-c,d=0;d!==o;++d)r[d]=a[l+d]*u+a[s+d]*c;return r}}),py.prototype=Object.assign(Object.create(uy.prototype),{constructor:py,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(fy,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:cy.convertArray(e.times,Array),values:cy.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(fy.prototype,{constructor:fy,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:tu,InterpolantFactoryMethodDiscrete:function(e){return new py(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new hy(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new dy(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case eu:t=this.InterpolantFactoryMethodDiscrete;break;case tu:t=this.InterpolantFactoryMethodLinear;break;case nu:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return eu;case this.InterpolantFactoryMethodLinear:return tu;case this.InterpolantFactoryMethodSmooth:return nu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=cy.arraySlice(n,r,a),this.values=cy.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&cy.isTypedArray(i))for(var l=0,c=i.length;l!==c;++l){var u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e},optimize:function(){for(var e=cy.arraySlice(this.times),t=cy.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===nu,r=e.length-1,a=1,o=1;o<r;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var c=o*n,u=c-n,d=c+n,h=0;h!==n;++h){var p=t[c+h];if(p!==t[u+h]||p!==t[d+h]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var f=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[f+m]}++a}}if(r>0){e[a]=e[r];for(var g=r*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=cy.arraySlice(e,0,a),this.values=cy.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){var e=cy.arraySlice(this.times,0),t=cy.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),vy.prototype=Object.assign(Object.create(fy.prototype),{constructor:vy,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:eu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),my.prototype=Object.assign(Object.create(fy.prototype),{constructor:my,ValueTypeName:"color"}),gy.prototype=Object.assign(Object.create(fy.prototype),{constructor:gy,ValueTypeName:"number"}),yy.prototype=Object.assign(Object.create(uy.prototype),{constructor:yy,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t),l=e*o,c=l+o;l!==c;l+=4)ju.slerpFlat(r,0,a,l-o,a,l,s);return r}}),by.prototype=Object.assign(Object.create(fy.prototype),{constructor:by,ValueTypeName:"quaternion",DefaultInterpolation:tu,InterpolantFactoryMethodLinear:function(e){return new yy(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),xy.prototype=Object.assign(Object.create(fy.prototype),{constructor:xy,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:eu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wy.prototype=Object.assign(Object.create(fy.prototype),{constructor:wy,ValueTypeName:"vector"}),Object.assign(_y,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(My(n[r]).scale(i));return new _y(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(fy.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=cy.getKeyframeOrder(s);s=cy.sortedArray(s,1,c),l=cy.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new gy(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new _y(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(s)}}var d=[];for(var h in i)d.push(_y.CreateFromMorphTargetSequence(h,i[h],t,n));return d},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];cy.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],c=0;c<l.length;c++){var u=l[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){var d={},h=void 0;for(h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)d[u[h].morphTargets[p]]=-1;for(var f in d){for(var v=[],m=[],g=0;g!==u[h].morphTargets.length;++g){var y=u[h];v.push(y.time),m.push(y.morphTarget===f?1:0)}i.push(new gy(".morphTargetInfluence["+f+"]",v,m))}s=d.length*(a||1)}else{var b=".bones["+t[c].name+"]";n(wy,b+".position",u,"pos",i),n(by,b+".quaternion",u,"rot",i),n(wy,b+".scale",u,"scl",i)}}return 0===i.length?null:new _y(r,s,i,o)}}),Object.assign(_y.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new _y(this.name,this.duration,e,this.blendMode)}});var Sy={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ey(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var i=l[t],r=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}}var Cy=new Ey;function Ty(e){this.manager=void 0!==e?e:Cy,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ty.prototype,{load:function(){},loadAsync:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var Ly={};function Ay(e){Ty.call(this,e)}function Py(e){Ty.call(this,e)}function Oy(e){Ty.call(this,e)}function Ry(e){Ty.call(this,e)}function Ny(e){Ty.call(this,e)}function ky(e){Ty.call(this,e)}function Dy(e){Ty.call(this,e)}function Iy(){this.type="Curve",this.arcLengthDivisions=200}function jy(e,t,n,i,r,a,o,s){Iy.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function zy(e,t,n,i,r,a){jy.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function By(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,l*=o,c*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}Ay.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Ay,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Sy.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===Ly[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var l=s[1],c=!!s[2],u=s[3];u=decodeURIComponent(u),c&&(u=atob(u));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),f=0;f<u.length;f++)p[f]=u.charCodeAt(f);d="blob"===h?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var v=new DOMParser;d=v.parseFromString(u,l);break;case"json":d=JSON.parse(u);break;default:d=u}setTimeout((function(){t&&t(d),r.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){i&&i(g),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{for(var m in Ly[e]=[],Ly[e].push({onLoad:t,onProgress:n,onError:i}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,i=Ly[e];if(delete Ly[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Sy.add(e,n);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(var l=0,c=i.length;l<c;l++){var u=i[l];u.onError&&u.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=Ly[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=Ly[e];delete Ly[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=Ly[e];delete Ly[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(m,this.requestHeader[m]);o.send(null)}return r.manager.itemStart(e),o}Ly[e].push({onLoad:t,onProgress:n,onError:i})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Py.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Py,load:function(e,t,n,i){var r=this,a=new Ay(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=_y.parse(e[n]);t.push(i)}return t}}),Oy.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Oy,load:function(e,t,n,i){var r=this,a=[],o=new Nm;o.image=a;var s=new Ay(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader);var l=0;function c(c){s.load(e[c],(function(e){var n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=zl),o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(var u=0,d=e.length;u<d;++u)c(u);else s.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=zl),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}),Ry.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Ry,load:function(e,t,n,i){var r=this,a=new yp,o=new Ay(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(e,(function(e){var n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Nl,a.wrapT=void 0!==n.wrapT?n.wrapT:Nl,a.magFilter=void 0!==n.magFilter?n.magFilter:zl,a.minFilter=void 0!==n.minFilter?n.minFilter:zl,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Fl),1===n.mipmapCount&&(a.minFilter=zl),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}),Ny.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Ny,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Sy.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Sy.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}),ky.prototype=Object.assign(Object.create(Ty.prototype),{constructor:ky,load:function(e,t,n,i){var r=new Hp,a=new Ny(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r}}),Dy.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Dy,load:function(e,t,n,i){var r=new Nu,a=new Ny(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?ec:tc,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(Iy.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)r+=(t=this.getPoint(a/e)).distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(a-1)},getTangent:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new Au:new Fu);return s.copy(o).sub(a).normalize(),s},getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){for(var n=new Fu,i=[],r=[],a=[],o=new Fu,s=new Zu,l=0;l<=e;l++){var c=l/e;i[l]=this.getTangentAt(c,new Fu),i[l].normalize()}r[0]=new Fu,a[0]=new Fu;var u=Number.MAX_VALUE,d=Math.abs(i[0].x),h=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=u&&(u=d,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),p<=u&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var f=1;f<=e;f++){if(r[f]=r[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Lu.clamp(i[f-1].dot(i[f]),-1,1));r[f].applyMatrix4(s.makeRotationAxis(o,v))}a[f].crossVectors(i[f],r[f])}if(!0===t){var m=Math.acos(Lu.clamp(r[0].dot(r[e]),-1,1));m/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(m=-m);for(var g=1;g<=e;g++)r[g].applyMatrix4(s.makeRotationAxis(i[g],m*g)),a[g].crossVectors(i[g],r[g])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),jy.prototype=Object.create(Iy.prototype),jy.prototype.constructor=jy,jy.prototype.isEllipseCurve=!0,jy.prototype.getPoint=function(e,t){for(var n=t||new Au,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*c-h*u+this.aX,l=d*u+h*c+this.aY}return n.set(s,l)},jy.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},jy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},jy.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},zy.prototype=Object.create(jy.prototype),zy.prototype.constructor=zy,zy.prototype.isArcCurve=!0;var Fy=new Fu,Uy=new By,Hy=new By,Gy=new By;function Vy(e,t,n,i){Iy.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Wy(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function qy(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Xy(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Zy(e,t,n,i){Iy.call(this),this.type="CubicBezierCurve",this.v0=e||new Au,this.v1=t||new Au,this.v2=n||new Au,this.v3=i||new Au}function Yy(e,t,n,i){Iy.call(this),this.type="CubicBezierCurve3",this.v0=e||new Fu,this.v1=t||new Fu,this.v2=n||new Fu,this.v3=i||new Fu}function Jy(e,t){Iy.call(this),this.type="LineCurve",this.v1=e||new Au,this.v2=t||new Au}function Qy(e,t){Iy.call(this),this.type="LineCurve3",this.v1=e||new Fu,this.v2=t||new Fu}function Ky(e,t,n){Iy.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Au,this.v1=t||new Au,this.v2=n||new Au}function $y(e,t,n){Iy.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Fu,this.v1=t||new Fu,this.v2=n||new Fu}function eb(e){Iy.call(this),this.type="SplineCurve",this.points=e||[]}Vy.prototype=Object.create(Iy.prototype),Vy.prototype.constructor=Vy,Vy.prototype.isCatmullRomCurve3=!0,Vy.prototype.getPoint=function(e,t){var n,i,r,a,o=t||new Fu,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),d=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===d&&u===l-1&&(u=l-2,d=1),this.closed||u>0?n=s[(u-1)%l]:(Fy.subVectors(s[0],s[1]).add(s[0]),n=Fy),i=s[u%l],r=s[(u+1)%l],this.closed||u+2<l?a=s[(u+2)%l]:(Fy.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=Fy),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),h),f=Math.pow(i.distanceToSquared(r),h),v=Math.pow(r.distanceToSquared(a),h);f<1e-4&&(f=1),p<1e-4&&(p=f),v<1e-4&&(v=f),Uy.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,p,f,v),Hy.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,p,f,v),Gy.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,p,f,v)}else"catmullrom"===this.curveType&&(Uy.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),Hy.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),Gy.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(Uy.calc(d),Hy.calc(d),Gy.calc(d)),o},Vy.prototype.copy=function(e){Iy.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Vy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Vy.prototype.fromJSON=function(e){Iy.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Fu).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Zy.prototype=Object.create(Iy.prototype),Zy.prototype.constructor=Zy,Zy.prototype.isCubicBezierCurve=!0,Zy.prototype.getPoint=function(e,t){var n=t||new Au,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Xy(e,i.x,r.x,a.x,o.x),Xy(e,i.y,r.y,a.y,o.y)),n},Zy.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Zy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Zy.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Yy.prototype=Object.create(Iy.prototype),Yy.prototype.constructor=Yy,Yy.prototype.isCubicBezierCurve3=!0,Yy.prototype.getPoint=function(e,t){var n=t||new Fu,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Xy(e,i.x,r.x,a.x,o.x),Xy(e,i.y,r.y,a.y,o.y),Xy(e,i.z,r.z,a.z,o.z)),n},Yy.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Yy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Yy.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Jy.prototype=Object.create(Iy.prototype),Jy.prototype.constructor=Jy,Jy.prototype.isLineCurve=!0,Jy.prototype.getPoint=function(e,t){var n=t||new Au;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Jy.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Jy.prototype.getTangent=function(e,t){var n=t||new Au;return n.copy(this.v2).sub(this.v1).normalize(),n},Jy.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Jy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Jy.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Qy.prototype=Object.create(Iy.prototype),Qy.prototype.constructor=Qy,Qy.prototype.isLineCurve3=!0,Qy.prototype.getPoint=function(e,t){var n=t||new Fu;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Qy.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Qy.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qy.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qy.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ky.prototype=Object.create(Iy.prototype),Ky.prototype.constructor=Ky,Ky.prototype.isQuadraticBezierCurve=!0,Ky.prototype.getPoint=function(e,t){var n=t||new Au,i=this.v0,r=this.v1,a=this.v2;return n.set(qy(e,i.x,r.x,a.x),qy(e,i.y,r.y,a.y)),n},Ky.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ky.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ky.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$y.prototype=Object.create(Iy.prototype),$y.prototype.constructor=$y,$y.prototype.isQuadraticBezierCurve3=!0,$y.prototype.getPoint=function(e,t){var n=t||new Fu,i=this.v0,r=this.v1,a=this.v2;return n.set(qy(e,i.x,r.x,a.x),qy(e,i.y,r.y,a.y),qy(e,i.z,r.z,a.z)),n},$y.prototype.copy=function(e){return Iy.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$y.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$y.prototype.fromJSON=function(e){return Iy.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},eb.prototype=Object.create(Iy.prototype),eb.prototype.constructor=eb,eb.prototype.isSplineCurve=!0,eb.prototype.getPoint=function(e,t){var n=t||new Au,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Wy(o,s.x,l.x,c.x,u.x),Wy(o,s.y,l.y,c.y,u.y)),n},eb.prototype.copy=function(e){Iy.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},eb.prototype.toJSON=function(){var e=Iy.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},eb.prototype.fromJSON=function(e){Iy.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Au).fromArray(i))}return this};var tb=Object.freeze({__proto__:null,ArcCurve:zy,CatmullRomCurve3:Vy,CubicBezierCurve:Zy,CubicBezierCurve3:Yy,EllipseCurve:jy,LineCurve:Jy,LineCurve3:Qy,QuadraticBezierCurve:Ky,QuadraticBezierCurve3:$y,SplineCurve:eb});function nb(){Iy.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ib(e){nb.call(this),this.type="Path",this.currentPoint=new Au,e&&this.setFromPoints(e)}function rb(e){ib.call(this,e),this.uuid=Lu.generateUUID(),this.type="Shape",this.holes=[]}function ab(e,t){hd.call(this),this.type="Light",this.color=new ih(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ob(e,t,n){ab.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(hd.DefaultUp),this.updateMatrix(),this.groundColor=new ih(t)}function sb(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Au(512,512),this.map=null,this.mapPass=null,this.matrix=new Zu,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wp,this._frameExtents=new Au(1,1),this._viewportCount=1,this._viewports=[new ku(0,0,1,1)]}function lb(){sb.call(this,new pp(50,1,.5,500))}function cb(e,t,n,i,r,a){ab.call(this,e,t),this.type="SpotLight",this.position.copy(hd.DefaultUp),this.updateMatrix(),this.target=new hd,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new lb}function ub(){sb.call(this,new pp(90,1,.5,500)),this._frameExtents=new Au(4,2),this._viewportCount=6,this._viewports=[new ku(2,1,1,1),new ku(0,1,1,1),new ku(3,1,1,1),new ku(1,1,1,1),new ku(3,0,1,1),new ku(1,0,1,1)],this._cubeDirections=[new Fu(1,0,0),new Fu(-1,0,0),new Fu(0,0,1),new Fu(0,0,-1),new Fu(0,1,0),new Fu(0,-1,0)],this._cubeUps=[new Fu(0,1,0),new Fu(0,1,0),new Fu(0,1,0),new Fu(0,1,0),new Fu(0,0,1),new Fu(0,0,-1)]}function db(e,t,n,i){ab.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ub}function hb(e,t,n,i,r,a){hp.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function pb(){sb.call(this,new hb(-5,5,5,-5,.5,500))}function fb(e,t){ab.call(this,e,t),this.type="DirectionalLight",this.position.copy(hd.DefaultUp),this.updateMatrix(),this.target=new hd,this.shadow=new pb}function vb(e,t){ab.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function mb(e,t,n,i){ab.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function gb(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Fu)}function yb(e,t){ab.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new gb}function bb(e){Ty.call(this,e),this.textures={}}nb.prototype=Object.assign(Object.create(Iy.prototype),{constructor:nb,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Jy(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Iy.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Iy.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Iy.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new tb[i.type]).fromJSON(i))}return this}}),ib.prototype=Object.assign(Object.create(nb.prototype),{constructor:ib,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Jy(this.currentPoint.clone(),new Au(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){var r=new Ky(this.currentPoint.clone(),new Au(e,t),new Au(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,a){var o=new Zy(this.currentPoint.clone(),new Au(e,t),new Au(n,i),new Au(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(e){var t=new eb([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this},absarc:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this},ellipse:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,o,s),this},absellipse:function(e,t,n,i,r,a,o,s){var l=new jy(e,t,n,i,r,a,o,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);return this.currentPoint.copy(u),this},copy:function(e){return nb.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=nb.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return nb.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),rb.prototype=Object.assign(Object.create(ib.prototype),{constructor:rb,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ib.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=ib.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){ib.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new ib).fromJSON(i))}return this}}),ab.prototype=Object.assign(Object.create(hd.prototype),{constructor:ab,isLight:!0,copy:function(e){return hd.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=hd.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ob.prototype=Object.assign(Object.create(ab.prototype),{constructor:ob,isHemisphereLight:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(sb.prototype,{_projScreenMatrix:new Zu,_lightPositionWorld:new Fu,_lookTarget:new Fu,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),lb.prototype=Object.assign(Object.create(sb.prototype),{constructor:lb,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Lu.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),sb.prototype.updateMatrices.call(this,e)}}),cb.prototype=Object.assign(Object.create(ab.prototype),{constructor:cb,isSpotLight:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ub.prototype=Object.assign(Object.create(sb.prototype),{constructor:ub,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),db.prototype=Object.assign(Object.create(ab.prototype),{constructor:db,isPointLight:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),hb.prototype=Object.assign(Object.create(hp.prototype),{constructor:hb,isOrthographicCamera:!0,copy:function(e,t){return hp.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=l*this.view.offsetX)+l*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=hd.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),pb.prototype=Object.assign(Object.create(sb.prototype),{constructor:pb,isDirectionalLightShadow:!0,updateMatrices:function(e){sb.prototype.updateMatrices.call(this,e)}}),fb.prototype=Object.assign(Object.create(ab.prototype),{constructor:fb,isDirectionalLight:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),vb.prototype=Object.assign(Object.create(ab.prototype),{constructor:vb,isAmbientLight:!0}),mb.prototype=Object.assign(Object.create(ab.prototype),{constructor:mb,isRectAreaLight:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ab.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(gb.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(gb,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),yb.prototype=Object.assign(Object.create(ab.prototype),{constructor:yb,isLightProbe:!0,copy:function(e){return ab.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=ab.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),bb.prototype=Object.assign(Object.create(Ty.prototype),{constructor:bb,load:function(e,t,n,i){var r=this,a=new Ay(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new ly[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new ih).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var r in e.uniforms){var a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new ih).setHex(a.value);break;case"v2":i.uniforms[r].value=(new Au).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new Fu).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new ku).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new Pu).fromArray(a.value);case"m4":i.uniforms[r].value=(new Zu).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)i.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new Au).fromArray(s)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Au).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});var xb=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function wb(){Rh.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function _b(e,t,n,i){"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ph.call(this,e,t,n),this.meshPerAttribute=i||1}function Mb(e){Ty.call(this,e)}wb.prototype=Object.assign(Object.create(Rh.prototype),{constructor:wb,isInstancedBufferGeometry:!0,copy:function(e){return Rh.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Rh.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),_b.prototype=Object.assign(Object.create(ph.prototype),{constructor:_b,isInstancedBufferAttribute:!0,copy:function(e){return ph.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=ph.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Mb.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Mb,load:function(e,t,n,i){var r=this,a=new Ay(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)},parse:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}(e,r.buffer),o=new Iv(new Sb[r.type](a),r.stride);return o.uuid=r.uuid,t[i]=o,o}var r=e.isInstancedBufferGeometry?new wb:new Rh,a=e.data.index;if(void 0!==a){var o=new Sb[a.type](a.array);r.setIndex(new ph(o,1))}var s=e.data.attributes;for(var l in s){var c=s[l],u=void 0;if(c.isInterleavedBufferAttribute){u=new Bv(i(e.data,c.data),c.itemSize,c.offset,c.normalized)}else{var d=new Sb[c.type](c.array);u=new(c.isInstancedBufferAttribute?_b:ph)(d,c.itemSize,c.normalized)}void 0!==c.name&&(u.name=c.name),r.setAttribute(l,u)}var h=e.data.morphAttributes;if(h)for(var p in h){for(var f=h[p],v=[],m=0,g=f.length;m<g;m++){var y=f[m],b=void 0;if(y.isInterleavedBufferAttribute)b=new Bv(i(e.data,y.data),y.itemSize,y.offset,y.normalized);else b=new ph(new Sb[y.type](y.array),y.itemSize,y.normalized);void 0!==y.name&&(b.name=y.name),v.push(b)}r.morphAttributes[p]=v}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var x=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==x)for(var w=0,_=x.length;w!==_;++w){var M=x[w];r.addGroup(M.start,M.count,M.materialIndex)}var S=e.data.boundingSphere;if(void 0!==S){var E=new Fu;void 0!==S.center&&E.fromArray(S.center),r.boundingSphere=new Pd(E,S.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});var Sb={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Eb(e){Ty.call(this,e)}Eb.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Eb,load:function(e,t,n,i){var r=this,a=""===this.path?xb(e):this.path;this.resourcePath=this.resourcePath||a;var o=new Ay(r.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new rb).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n,i={};if(void 0!==e)for(var r=new Mb,a=0,o=e.length;a<o;a++){var s=void 0,l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Qg[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Qg[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Qg[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Qg[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Qg[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Qg[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Qg[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Qg[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Qg[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Qg[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Qg[l.type]((new tb[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Qg[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Qg[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var c=0,u=l.shapes.length;c<u;c++){var d=t[l.shapes[c]];n.push(d)}s=new Qg[l.type](n,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var h=0,p=l.shapes.length;h<p;h++){var f=t[l.shapes[h]];n.push(f)}var v=l.options.extrudePath;void 0!==v&&(l.options.extrudePath=(new tb[v.type]).fromJSON(v)),s=new Qg[l.type](n,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),i[l.uuid]=s}return i},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new bb;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=_y.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n,i=this,r={};function a(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Ey(t);(n=new Ny(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var c=e[s],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var d=0,h=u.length;d<h;d++){var p=u[d],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;r[c.uuid].push(a(f))}}else{var v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:i.resourcePath+c.url;r[c.uuid]=a(v)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0;(s=Array.isArray(t[o.image])?new Hp(t[o.image]):new Nu(t[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Tb)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Lb),s.wrapT=n(o.wrap[1],Lb)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,Ab)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,Ab)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),i[o.uuid]=s}return i},parseObject:function(e,t,n){var i,r,a;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new pd,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new ih(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Dv(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new kv(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new pp(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new hb(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new vb(e.color,e.intensity);break;case"DirectionalLight":i=new fb(e.color,e.intensity);break;case"PointLight":i=new db(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new mb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new cb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new ob(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new yb).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":i=new Jh(r=o(e.geometry),a=s(e.material));break;case"InstancedMesh":r=o(e.geometry),a=s(e.material);var l=e.count,c=e.instanceMatrix;(i=new pm(r,a,l)).instanceMatrix=new ph(new Float32Array(c.array),16);break;case"LOD":i=new im;break;case"Line":i=new xm(o(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new Sm(o(e.geometry),s(e.material));break;case"LineSegments":i=new Mm(o(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new Pm(o(e.geometry),s(e.material));break;case"Sprite":i=new $v(s(e.material));break;case"Group":i=new Lv;break;default:i=new hd}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,d=0;d<u.length;d++)i.add(this.parseObject(u[d],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);for(var h=e.levels,p=0;p<h.length;p++){var f=h[p],v=i.getObjectByProperty("uuid",f.object);void 0!==v&&i.addLevel(v,f.distance)}}return i}});var Cb,Tb={UVMapping:300,CubeReflectionMapping:Cl,CubeRefractionMapping:Tl,EquirectangularReflectionMapping:Ll,EquirectangularRefractionMapping:Al,CubeUVReflectionMapping:Pl,CubeUVRefractionMapping:Ol},Lb={RepeatWrapping:Rl,ClampToEdgeWrapping:Nl,MirroredRepeatWrapping:kl},Ab={NearestFilter:Dl,NearestMipmapNearestFilter:Il,NearestMipmapLinearFilter:jl,LinearFilter:zl,LinearMipmapNearestFilter:Bl,LinearMipmapLinearFilter:Fl};function Pb(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ty.call(this,e),this.options={premultiplyAlpha:"none"}}function Ob(){this.type="ShapePath",this.color=new ih,this.subPaths=[],this.currentPath=null}function Rb(e){this.type="Font",this.data=e}function Nb(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var o,s,l,c,u,d,h,p,f=new Ob;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;){switch(v[m++]){case"m":o=v[m++]*t+n,s=v[m++]*t+i,f.moveTo(o,s);break;case"l":o=v[m++]*t+n,s=v[m++]*t+i,f.lineTo(o,s);break;case"q":l=v[m++]*t+n,c=v[m++]*t+i,u=v[m++]*t+n,d=v[m++]*t+i,f.quadraticCurveTo(u,d,l,c);break;case"b":l=v[m++]*t+n,c=v[m++]*t+i,u=v[m++]*t+n,d=v[m++]*t+i,h=v[m++]*t+n,p=v[m++]*t+i,f.bezierCurveTo(u,d,h,p,l,c)}}return{offsetX:a.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}function kb(e){Ty.call(this,e)}Pb.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Pb,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Sy.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){Sy.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Ob.prototype,{moveTo:function(e,t){return this.currentPath=new ib,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new rb;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],l=-l,s=t[r],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=c*(e.x-o.x)-l*(e.y-o.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var r=Cg.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,l,c=[];if(1===a.length)return s=a[0],(l=new rb).curves=s.curves,c.push(l),c;var u=!r(a[0].getPoints());u=e?!u:u;var d,h,p=[],f=[],v=[],m=0;f[m]=void 0,v[m]=[];for(var g=0,y=a.length;g<y;g++)o=r(d=(s=a[g]).getPoints()),(o=e?!o:o)?(!u&&f[m]&&m++,f[m]={s:new rb,p:d},f[m].s.curves=s.curves,u&&m++,v[m]=[]):v[m].push({h:s,p:d[0]});if(!f[0])return n(a);if(f.length>1){for(var b=!1,x=[],w=0,_=f.length;w<_;w++)p[w]=[];for(var M=0,S=f.length;M<S;M++)for(var E=v[M],C=0;C<E.length;C++){for(var T=E[C],L=!0,A=0;A<f.length;A++)i(T.p,f[A].p)&&(M!==A&&x.push({froms:M,tos:A,hole:C}),L?(L=!1,p[A].push(T)):b=!0);L&&p[M].push(T)}x.length>0&&(b||(v=p))}for(var P=0,O=f.length;P<O;P++){l=f[P].s,c.push(l);for(var R=0,N=(h=v[P]).length;R<N;R++)l.holes.push(h[R].h)}return c}}),Object.assign(Rb.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,l=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)s=0,l-=a;else{var d=Nb(u,r,s,l,n);s+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),kb.prototype=Object.assign(Object.create(Ty.prototype),{constructor:kb,load:function(e,t,n,i){var r=this,a=new Ay(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new Rb(e)}});var Db={getContext:function(){return void 0===Cb&&(Cb=new(window.AudioContext||window.webkitAudioContext)),Cb},setContext:function(e){Cb=e}};function Ib(e){Ty.call(this,e)}function jb(e,t,n){yb.call(this,void 0,n);var i=(new ih).set(e),r=(new ih).set(t),a=new Fu(i.r,i.g,i.b),o=new Fu(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function zb(e,t){yb.call(this,void 0,t);var n=(new ih).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Ib.prototype=Object.assign(Object.create(Ty.prototype),{constructor:Ib,load:function(e,t,n,i){var r=this,a=new Ay(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(e,(function(n){try{var a=n.slice(0);Db.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}}),jb.prototype=Object.assign(Object.create(yb.prototype),{constructor:jb,isHemisphereLightProbe:!0,copy:function(e){return yb.prototype.copy.call(this,e),this},toJSON:function(e){return yb.prototype.toJSON.call(this,e)}}),zb.prototype=Object.assign(Object.create(yb.prototype),{constructor:zb,isAmbientLightProbe:!0,copy:function(e){return yb.prototype.copy.call(this,e),this},toJSON:function(e){return yb.prototype.toJSON.call(this,e)}});var Bb=new Zu,Fb=new Zu;function Ub(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pp,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pp,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,i,r=e.projectionMatrix.clone(),a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(Lu.DEG2RAD*t.fov*.5)/t.zoom;Fb.elements[12]=-a,Bb.elements[12]=a,n=-s*t.aspect+o,i=s*t.aspect+o,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-s*t.aspect-o,i=s*t.aspect-o,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Bb)}}),Object.assign(Ub.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Hb=new Fu,Gb=new ju,Vb=new Fu,Wb=new Fu;function qb(){hd.call(this),this.type="AudioListener",this.context=Db.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ub}function Xb(e){hd.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}qb.prototype=Object.assign(Object.create(hd.prototype),{constructor:qb,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){hd.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Hb,Gb,Vb),Wb.set(0,0,-1).applyQuaternion(Gb),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Hb.x,i),t.positionY.linearRampToValueAtTime(Hb.y,i),t.positionZ.linearRampToValueAtTime(Hb.z,i),t.forwardX.linearRampToValueAtTime(Wb.x,i),t.forwardY.linearRampToValueAtTime(Wb.y,i),t.forwardZ.linearRampToValueAtTime(Wb.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Hb.x,Hb.y,Hb.z),t.setOrientation(Wb.x,Wb.y,Wb.z,n.x,n.y,n.z)}}),Xb.prototype=Object.assign(Object.create(hd.prototype),{constructor:Xb,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Zb=new Fu,Yb=new ju,Jb=new Fu,Qb=new Fu;function Kb(e){Xb.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function $b(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ex(e,t,n){var i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Kb.prototype=Object.assign(Object.create(Xb.prototype),{constructor:Kb,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(hd.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Zb,Yb,Jb),Qb.set(0,0,1).applyQuaternion(Yb);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zb.x,n),t.positionY.linearRampToValueAtTime(Zb.y,n),t.positionZ.linearRampToValueAtTime(Zb.z,n),t.orientationX.linearRampToValueAtTime(Qb.x,n),t.orientationY.linearRampToValueAtTime(Qb.y,n),t.orientationZ.linearRampToValueAtTime(Qb.z,n)}else t.setPosition(Zb.x,Zb.y,Zb.z),t.setOrientation(Qb.x,Qb.y,Qb.z)}}}),Object.assign($b.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(ex.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){ju.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){var a=this._workIndex*r;ju.multiplyQuaternionsFlat(e,a,e,t,e,n),ju.slerpFlat(e,t,e,t,e,a,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}},_lerpAdditive:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}});var tx="\\[\\]\\.:\\/",nx=new RegExp("["+tx+"]","g"),ix="[^"+tx+"]",rx="[^"+tx.replace("\\.","")+"]",ax=/((?:WC+[\/:])*)/.source.replace("WC",ix),ox=/(WCOD+)?/.source.replace("WCOD",rx),sx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ix),lx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ix),cx=new RegExp("^"+ax+ox+sx+lx+"$"),ux=["material","materials","bones"];function dx(e,t,n){var i=n||hx.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function hx(e,t,n){this.path=t,this.parsedPath=n||hx.parseTrackName(t),this.node=hx.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function px(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;for(var r=t.tracks,a=r.length,o=new Array(a),s={endingStart:iu,endingEnd:iu},l=0;l!==a;++l){var c=r[l].createInterpolant(null);o[l]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$c,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function fx(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function vx(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function mx(e,t,n){Iv.call(this,e,t),this.meshPerAttribute=n||1}function gx(e,t,n,i){this.ray=new zd(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Ku,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function yx(e,t){return e.distance-t.distance}function bx(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)bx(r[a],t,n,!0)}Object.assign(dx.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(hx,{Composite:dx,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new hx.Composite(e,t,n):new hx(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(nx,"")},parseTrackName:function(e){var t=cx.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==ux.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}),Object.assign(hx.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=hx.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(hx.prototype,{_getValue_unbound:hx.prototype.getValue,_setValue_unbound:hx.prototype.setValue}),Object.assign(function(){this.uuid=Lu.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=e.length,l=this.nCachedObjects_,c=0,u=arguments.length;c!==u;++c){var d=arguments[c],h=d.uuid,p=t[h];if(void 0===p){p=s++,t[h]=p,e.push(d);for(var f=0,v=a;f!==v;++f)r[f].push(new hx(d,n[f],i[f]))}else if(p<l){o=e[p];var m=--l,g=e[m];t[g.uuid]=p,e[p]=g,t[h]=m,e[m]=d;for(var y=0,b=a;y!==b;++y){var x=r[y],w=x[m],_=x[p];x[p]=w,void 0===_&&(_=new hx(d,n[y],i[y])),x[m]=_}}else e[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=t[l];if(void 0!==c&&c>=r){var u=r++,d=e[u];t[d.uuid]=c,e[c]=d,t[l]=u,e[u]=s;for(var h=0,p=i;h!==p;++h){var f=n[h],v=f[u],m=f[c];f[c]=v,f[u]=m}}}this.nCachedObjects_=r},uncache:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=t[l];if(void 0!==c)if(delete t[l],c<r){var u=--r,d=e[u],h=--a,p=e[h];t[d.uuid]=c,e[c]=d,t[p.uuid]=u,e[u]=p,e.pop();for(var f=0,v=i;f!==v;++f){var m=n[f],g=m[u],y=m[h];m[c]=g,m[u]=y,m.pop()}}else{var b=--a,x=e[b];t[x.uuid]=c,e[c]=x,e.pop();for(var w=0,_=i;w!==_;++w){var M=n[w];M[c]=M[b],M.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(var d=c,h=s.length;d!==h;++d){var p=s[d];u[d]=new hx(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(px.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(var u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(s);else for(var h=0,p=l.length;h!==p;++h)l[h].evaluate(o),c[h].accumulate(i,s)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=2202===n;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=ru,i.endingEnd=ru):(i.endingStart=e?this.zeroSlopeAtStart?ru:iu:au,i.endingEnd=t?this.zeroSlopeAtEnd?ru:iu:au)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),fx.prototype=Object.assign(Object.create(Mu.prototype),{constructor:fx,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var d=i[u],h=d.name,p=c[h];if(void 0!==p)a[u]=p;else{if(void 0!==(p=a[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new ex(hx.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),a[u]=p}o[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new hy(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"===typeof e?_y.findByName(i,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:ou),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var u=new px(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?_y.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}for(var s=this._bindings,l=this._nActiveBindings,c=0;c!==l;++c)s[c].apply(a);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),vx.prototype.clone=function(){return new vx(void 0===this.value.clone?this.value:this.value.clone())},mx.prototype=Object.assign(Object.create(Iv.prototype),{constructor:mx,isInstancedInterleavedBuffer:!0,copy:function(e){return Iv.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){var t=Iv.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){var t=Iv.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.assign(gx.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return bx(e,this,i,t),i.sort(yx),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=e.length;r<a;r++)bx(e[r],this,i,t);return i.sort(yx),i}});var xx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i(this,e),this.radius=t,this.phi=n,this.theta=r,this}return s(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Lu.clamp(t/this.radius,-1,1))),this}}]),e}();Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var wx=new Au;function _x(e,t){this.min=void 0!==e?e:new Au(1/0,1/0),this.max=void 0!==t?t:new Au(-1/0,-1/0)}Object.assign(_x.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=wx.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Au),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Au),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Au),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Au),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return wx.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Mx=new Fu,Sx=new Fu;function Ex(e,t){this.start=void 0!==e?e:new Fu,this.end=void 0!==t?t:new Fu}function Cx(e){hd.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(Ex.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Fu),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Fu),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Fu),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){Mx.subVectors(e,this.start),Sx.subVectors(this.end,this.start);var n=Sx.dot(Sx),i=Sx.dot(Mx)/n;return t&&(i=Lu.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Fu),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Cx.prototype=Object.create(hd.prototype),Cx.prototype.constructor=Cx,Cx.prototype.isImmediateRenderObject=!0;var Tx=new Fu;function Lx(e,t){hd.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Rh,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new wh(i,3));var l=new fm({fog:!1,toneMapped:!1});this.cone=new Mm(n,l),this.add(this.cone),this.update()}Lx.prototype=Object.create(hd.prototype),Lx.prototype.constructor=Lx,Lx.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Lx.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Tx.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Tx),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Ax=new Fu,Px=new Zu,Ox=new Zu;function Rx(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Rx(e.children[n]));return t}function Nx(e){for(var t=Rx(e),n=new Rh,i=[],r=[],a=new ih(0,0,1),o=new ih(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new wh(i,3)),n.setAttribute("color",new wh(r,3));var c=new fm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Mm.call(this,n,c),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function kx(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Ig(t,4,2),r=new uh({wireframe:!0,fog:!1,toneMapped:!1});Jh.call(this,i,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Nx.prototype=Object.create(Mm.prototype),Nx.prototype.constructor=Nx,Nx.prototype.isSkeletonHelper=!0,Nx.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,i=n.getAttribute("position");Ox.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<t.length;r++){var o=t[r];o.parent&&o.parent.isBone&&(Px.multiplyMatrices(Ox,o.matrixWorld),Ax.setFromMatrixPosition(Px),i.setXYZ(a,Ax.x,Ax.y,Ax.z),Px.multiplyMatrices(Ox,o.parent.matrixWorld),Ax.setFromMatrixPosition(Px),i.setXYZ(a+1,Ax.x,Ax.y,Ax.z),a+=2)}n.getAttribute("position").needsUpdate=!0,hd.prototype.updateMatrixWorld.call(this,e)},kx.prototype=Object.create(Jh.prototype),kx.prototype.constructor=kx,kx.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},kx.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Dx=new Fu,Ix=new ih,jx=new ih;function zx(e,t,n){hd.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Vm(t);i.rotateY(.5*Math.PI),this.material=new uh({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new ph(a,3)),this.add(new Jh(i,this.material)),this.update()}function Bx(e,t,n,i){e=e||10,t=t||10,n=new ih(void 0!==n?n:4473924),i=new ih(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],l=[],c=0,u=0,d=-o;c<=t;c++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);var h=c===r?n:i;h.toArray(l,u),u+=3,h.toArray(l,u),u+=3,h.toArray(l,u),u+=3,h.toArray(l,u),u+=3}var p=new Rh;p.setAttribute("position",new wh(s,3)),p.setAttribute("color",new wh(l,3));var f=new fm({vertexColors:!0,toneMapped:!1});Mm.call(this,p,f),this.type="GridHelper"}function Fx(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new ih(void 0!==r?r:4473924),a=new ih(void 0!==a?a:8947848);for(var o=[],s=[],l=0;l<=t;l++){var c=l/t*(2*Math.PI),u=Math.sin(c)*e,d=Math.cos(c)*e;o.push(0,0,0),o.push(u,0,d);var h=1&l?r:a;s.push(h.r,h.g,h.b),s.push(h.r,h.g,h.b)}for(var p=0;p<=n;p++)for(var f=1&p?r:a,v=e-e/n*p,m=0;m<i;m++){var g=m/i*(2*Math.PI),y=Math.sin(g)*v,b=Math.cos(g)*v;o.push(y,0,b),s.push(f.r,f.g,f.b),g=(m+1)/i*(2*Math.PI),y=Math.sin(g)*v,b=Math.cos(g)*v,o.push(y,0,b),s.push(f.r,f.g,f.b)}var x=new Rh;x.setAttribute("position",new wh(o,3)),x.setAttribute("color",new wh(s,3));var w=new fm({vertexColors:!0,toneMapped:!1});Mm.call(this,x,w),this.type="PolarGridHelper"}zx.prototype=Object.create(hd.prototype),zx.prototype.constructor=zx,zx.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zx.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Ix.copy(this.light.color),jx.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?Ix:jx;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Dx.setFromMatrixPosition(this.light.matrixWorld).negate())},Bx.prototype=Object.create(Mm.prototype),Bx.prototype.constructor=Bx,Fx.prototype=Object.create(Mm.prototype),Fx.prototype.constructor=Fx;var Ux=new Fu,Hx=new Fu,Gx=new Fu;function Vx(e,t,n){hd.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Rh;i.setAttribute("position",new wh([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new fm({fog:!1,toneMapped:!1});this.lightPlane=new xm(i,r),this.add(this.lightPlane),(i=new Rh).setAttribute("position",new wh([0,0,0,0,0,1],3)),this.targetLine=new xm(i,r),this.add(this.targetLine),this.update()}Vx.prototype=Object.create(hd.prototype),Vx.prototype.constructor=Vx,Vx.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Vx.prototype.update=function(){Ux.setFromMatrixPosition(this.light.matrixWorld),Hx.setFromMatrixPosition(this.light.target.matrixWorld),Gx.subVectors(Hx,Ux),this.lightPlane.lookAt(Hx),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hx),this.targetLine.scale.z=Gx.length()};var Wx=new Fu,qx=new hp;function Xx(e){var t=new Rh,n=new fm({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={},o=new ih(16755200),s=new ih(16711680),l=new ih(43775),c=new ih(16777215),u=new ih(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}d("n1","n2",o),d("n2","n4",o),d("n4","n3",o),d("n3","n1",o),d("f1","f2",o),d("f2","f4",o),d("f4","f3",o),d("f3","f1",o),d("n1","f1",o),d("n2","f2",o),d("n3","f3",o),d("n4","f4",o),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u),t.setAttribute("position",new wh(i,3)),t.setAttribute("color",new wh(r,3)),Mm.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Zx(e,t,n,i,r,a,o){Wx.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),c=0,u=s.length;c<u;c++)l.setXYZ(s[c],Wx.x,Wx.y,Wx.z)}Xx.prototype=Object.create(Mm.prototype),Xx.prototype.constructor=Xx,Xx.prototype.update=function(){var e=this.geometry,t=this.pointMap;qx.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zx("c",t,e,qx,0,0,-1),Zx("t",t,e,qx,0,0,1),Zx("n1",t,e,qx,-1,-1,-1),Zx("n2",t,e,qx,1,-1,-1),Zx("n3",t,e,qx,-1,1,-1),Zx("n4",t,e,qx,1,1,-1),Zx("f1",t,e,qx,-1,-1,1),Zx("f2",t,e,qx,1,-1,1),Zx("f3",t,e,qx,-1,1,1),Zx("f4",t,e,qx,1,1,1),Zx("u1",t,e,qx,.7,1.1,-1),Zx("u2",t,e,qx,-.7,1.1,-1),Zx("u3",t,e,qx,0,2,-1),Zx("cf1",t,e,qx,-1,0,1),Zx("cf2",t,e,qx,1,0,1),Zx("cf3",t,e,qx,0,-1,1),Zx("cf4",t,e,qx,0,1,1),Zx("cn1",t,e,qx,-1,0,-1),Zx("cn2",t,e,qx,1,0,-1),Zx("cn3",t,e,qx,0,-1,-1),Zx("cn4",t,e,qx,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Yx=new Td;function Jx(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Rh;r.setIndex(new ph(n,1)),r.setAttribute("position",new ph(i,3)),Mm.call(this,r,new fm({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Qx(e,t){this.type="Box3Helper",this.box=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Rh;i.setIndex(new ph(n,1)),i.setAttribute("position",new wh([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Mm.call(this,i,new fm({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function Kx(e,t,n){this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Rh;r.setAttribute("position",new wh([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),xm.call(this,r,new fm({color:i,toneMapped:!1})),this.type="PlaneHelper";var a=new Rh;a.setAttribute("position",new wh([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Jh(a,new uh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}Jx.prototype=Object.create(Mm.prototype),Jx.prototype.constructor=Jx,Jx.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Yx.setFromObject(this.object),!Yx.isEmpty()){var t=Yx.min,n=Yx.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Jx.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Jx.prototype.copy=function(e){return Mm.prototype.copy.call(this,e),this.object=e.object,this},Qx.prototype=Object.create(Mm.prototype),Qx.prototype.constructor=Qx,Qx.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),hd.prototype.updateMatrixWorld.call(this,e))},Kx.prototype=Object.create(xm.prototype),Kx.prototype.constructor=Kx,Kx.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Bs:zs,this.lookAt(this.plane.normal),hd.prototype.updateMatrixWorld.call(this,e)};var $x,ew,tw=new Fu;function nw(e,t,n,i,r,a){hd.call(this),this.type="ArrowHelper",void 0===e&&(e=new Fu(0,0,1)),void 0===t&&(t=new Fu(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===$x&&(($x=new Rh).setAttribute("position",new wh([0,0,0,0,1,0],3)),(ew=new qg(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new xm($x,new fm({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jh(ew,new uh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function iw(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Rh;n.setAttribute("position",new wh(t,3)),n.setAttribute("color",new wh([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new fm({vertexColors:!0,toneMapped:!1});Mm.call(this,n,i),this.type="AxesHelper"}nw.prototype=Object.create(hd.prototype),nw.prototype.constructor=nw,nw.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{tw.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(tw,t)}},nw.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},nw.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},nw.prototype.copy=function(e){return hd.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},iw.prototype=Object.create(Mm.prototype),iw.prototype.constructor=iw;var rw=4,aw=8,ow=Math.pow(2,aw),sw=[.125,.215,.35,.446,.526,.582],lw=aw-rw+1+sw.length,cw=20,uw=(ir(sa={},su,0),ir(sa,lu,1),ir(sa,uu,2),ir(sa,hu,3),ir(sa,pu,4),ir(sa,fu,5),ir(sa,cu,6),sa),dw=new hb,hw=function(){for(var e=[],t=[],n=[],i=aw,r=0;r<lw;r++){var a=Math.pow(2,i);t.push(a);var o=1/a;r>aw-rw?o=sw[r-aw+rw-1]:0==r&&(o=0),n.push(o);for(var s=1/(a-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=new Float32Array(108),h=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var v=f%3*2/3-1,m=f>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];d.set(g,18*f),h.set(u,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var b=new Rh;b.setAttribute("position",new ph(d,3)),b.setAttribute("uv",new ph(h,2)),b.setAttribute("faceIndex",new ph(p,1)),e.push(b),i>rw&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),pw=hw._lodPlanes,fw=hw._sizeLods,vw=hw._sigmas,mw=null,gw=(1+Math.sqrt(5))/2,yw=1/gw,bw=[new Fu(1,1,1),new Fu(-1,1,1),new Fu(1,1,-1),new Fu(-1,1,-1),new Fu(0,gw,yw),new Fu(0,gw,-yw),new Fu(yw,0,gw),new Fu(-yw,0,gw),new Fu(gw,yw,0),new Fu(-gw,yw,0)];function xw(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new Fu(0,1,0);return new $g({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:uw[su]},outputEncoding:{value:uw[su]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Us,depthTest:!1,depthWrite:!1})}(cw),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function ww(e){return void 0!==e&&e.type===Ul&&(e.encoding===su||e.encoding===lu||e.encoding===cu)}function _w(e){var t=new Du(3*ow,3*ow,e);return t.texture.mapping=Pl,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Mw(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Sw(){return new $g({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Au(1,1)},inputEncoding:{value:uw[su]},outputEncoding:{value:uw[su]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Us,depthTest:!1,depthWrite:!1})}function Ew(){return new $g({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:uw[su]},outputEncoding:{value:uw[su]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Us,depthTest:!1,depthWrite:!1})}xw.prototype={constructor:xw,fromScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;mw=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=Ew(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=Sw(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<pw.length;e++)pw[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(mw),e.scissorTest=!1,Mw(e,0,0,e.width,e.height)},_fromTexture:function(e){mw=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){var t={magFilter:Dl,minFilter:Dl,generateMipmaps:!1,type:Ul,format:rc,encoding:ww(e)?e.encoding:uu,depthBuffer:!1,stencilBuffer:!1},n=_w(t);return n.depthBuffer=!e,this._pingPongRenderTarget=_w(t),n},_compileMaterial:function(e){var t=new Jh(pw[0],e);this._renderer.compile(t,dw)},_sceneToCubeUV:function(e,t,n,i){var r=new pp(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,c=s.toneMapping,u=s.getClearColor(),d=s.getClearAlpha();s.toneMapping=xl,s.outputEncoding=su;var h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();var p=Math.max(h.r,h.g,h.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);h=h.multiplyScalar(Math.pow(2,-f));var v=(f+128)/255;s.setClearColor(h,v),e.background=null}for(var m=0;m<6;m++){var g=m%3;0==g?(r.up.set(0,a[m],0),r.lookAt(o[m],0,0)):1==g?(r.up.set(0,0,a[m]),r.lookAt(0,o[m],0)):(r.up.set(0,a[m],0),r.lookAt(0,0,o[m])),Mw(i,g*ow,m>2?ow:0,ow,ow),s.setRenderTarget(i),s.render(e,r)}s.toneMapping=c,s.outputEncoding=l,s.setClearColor(u,d)},_textureToCubeUV:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Ew()):null==this._equirectShader&&(this._equirectShader=Sw());var i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new Jh(pw[0],i),a=i.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=uw[e.encoding],a.outputEncoding.value=uw[t.texture.encoding],Mw(t,0,0,3*ow,2*ow),n.setRenderTarget(t),n.render(r,dw)},_applyPMREM:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<lw;i++){var r=Math.sqrt(vw[i]*vw[i]-vw[i-1]*vw[i-1]),a=bw[(i-1)%bw.length];this._blur(e,i-1,i,r,a)}t.autoClear=n},_blur:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)},_halfBlur:function(e,t,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new Jh(pw[i],l),u=l.uniforms,d=fw[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*cw-1),p=r/h,f=isFinite(r)?1+Math.floor(3*p):cw;f>cw&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(cw));for(var v=[],m=0,g=0;g<cw;++g){var y=g/p,b=Math.exp(-y*y/2);v.push(b),0==g?m+=b:g<f&&(m+=2*b)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=v,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o),u.dTheta.value=h,u.mipInt.value=aw-n,u.inputEncoding.value=uw[e.texture.encoding],u.outputEncoding.value=uw[e.texture.encoding];var w=fw[i];Mw(t,3*Math.max(0,ow-2*w),(0===i?0:2*ow)+2*w*(i>aw-rw?i-aw+rw:0),3*w,2*w),s.setRenderTarget(t),s.render(c,dw)}};function Cw(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Vy.call(this,e),this.type="catmullrom"}Iy.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Iy.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(nb.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ip,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Fu(r.x,r.y,r.z||0))}return t}}),Object.assign(ib.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Vy.prototype),Object.create(Vy.prototype),Cw.prototype=Object.create(Vy.prototype),Object.assign(Cw.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Bx.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Nx.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ty.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),xb(e)}}),Ty.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Eb.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(_x.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Td.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Pd.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),wp.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Ex.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Lu,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Lu.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Lu.ceilPowerOfTwo(e)}}),Object.assign(Pu.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Zu.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Fu).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),Hd.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},ju.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(zd.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign($d.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign($d,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),$d.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),$d.getNormal(e,t,n,i)}}),Object.assign(rb.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ag(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ug(this,e)}}),Object.assign(Au.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Fu.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ku.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ip.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(hd.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(hd.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Jh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Jh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(im.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(sm.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),rm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Iy.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),pp.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ab.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ph.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===_u},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(_u)}}}),Object.assign(ph.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?_u:wu),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Rh.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ph(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Rh.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(wb.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(gx.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Iv.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===_u},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Iv.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?_u:wu),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Pg.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(vx.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ch.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ih}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(ny.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ty.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(dp.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Rv.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Rv.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?lu:su}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Mv.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Du.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Xb.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ib).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),$b.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},mp.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};Ou.crossOrigin=void 0,Ou.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Dy;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Ou.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new ky;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Ou.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ou.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"119"}}));var Tw=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new Fu,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:Ps.ROTATE,MIDDLE:Ps.DOLLY,RIGHT:Ps.PAN},this.touches={ONE:Os.ROTATE,TWO:Os.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),s=o.NONE},this.update=function(){var t=new Fu,r=(new ju).setFromUnitVectors(e.up,new Fu(0,1,0)),a=r.clone().inverse(),f=new Fu,v=new ju,m=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(r),c.setFromVector3(t),n.autoRotate&&s===o.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);var g=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),y<-Math.PI?y+=m:y>Math.PI&&(y-=m),c.theta=g<y?Math.max(g,Math.min(y,c.theta)):c.theta>(g+y)/2?Math.max(g,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=d,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),t.setFromSpherical(c),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),d=1,!!(p||f.distanceToSquared(n.object.position)>l||8*(1-v.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),f.copy(n.object.position),v.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",X,!1),n.domElement.removeEventListener("mousedown",B,!1),n.domElement.removeEventListener("wheel",H,!1),n.domElement.removeEventListener("touchstart",V,!1),n.domElement.removeEventListener("touchend",q,!1),n.domElement.removeEventListener("touchmove",W,!1),n.domElement.ownerDocument.removeEventListener("mousemove",F,!1),n.domElement.ownerDocument.removeEventListener("mouseup",U,!1),n.domElement.removeEventListener("keydown",G,!1)};var n=this,i={type:"change"},r={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,l=1e-6,c=new xx,u=new xx,d=1,h=new Fu,p=!1,f=new Au,v=new Au,m=new Au,g=new Au,y=new Au,b=new Au,x=new Au,w=new Au,_=new Au;function M(){return Math.pow(.95,n.zoomSpeed)}function S(e){u.theta-=e}function E(e){u.phi-=e}var C=function(){var e=new Fu;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),T=function(){var e=new Fu;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),L=function(){var e=new Fu;return function(t,i){var r=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*o/r.clientHeight,n.object.matrix),T(2*i*o/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),T(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function A(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){f.set(e.clientX,e.clientY)}function R(e){g.set(e.clientX,e.clientY)}function N(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}}function k(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}}function D(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);x.set(0,i)}function I(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,i)}m.subVectors(v,f).multiplyScalar(n.rotateSpeed);var r=n.domElement;S(2*Math.PI*m.x/r.clientHeight),E(2*Math.PI*m.y/r.clientHeight),f.copy(v)}function j(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,i)}b.subVectors(y,g).multiplyScalar(n.panSpeed),L(b.x,b.y),g.copy(y)}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);w.set(0,r),_.set(0,Math.pow(w.y/x.y,n.zoomSpeed)),A(_.y),x.copy(w)}function B(e){if(!1!==n.enabled){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ps.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case Ps.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;R(e),s=o.PAN}else{if(!1===n.enableRotate)return;O(e),s=o.ROTATE}break;case Ps.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),s=o.ROTATE}else{if(!1===n.enablePan)return;R(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&(n.domElement.ownerDocument.addEventListener("mousemove",F,!1),n.domElement.ownerDocument.addEventListener("mouseup",U,!1),n.dispatchEvent(r))}}function F(e){if(!1!==n.enabled)switch(e.preventDefault(),s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),m.subVectors(v,f).multiplyScalar(n.rotateSpeed);var t=n.domElement;S(2*Math.PI*m.x/t.clientHeight),E(2*Math.PI*m.y/t.clientHeight),f.copy(v),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,x),_.y>0?A(M()):_.y<0&&P(M()),x.copy(w),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,g).multiplyScalar(n.panSpeed),L(b.x,b.y),g.copy(y),n.update()}(e)}}function U(e){!1!==n.enabled&&(n.domElement.ownerDocument.removeEventListener("mousemove",F,!1),n.domElement.ownerDocument.removeEventListener("mouseup",U,!1),n.dispatchEvent(a),s=o.NONE)}function H(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(r),function(e){e.deltaY<0?P(M()):e.deltaY>0&&A(M()),n.update()}(e),n.dispatchEvent(a))}function G(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:L(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:L(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function V(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case Os.ROTATE:if(!1===n.enableRotate)return;N(e),s=o.TOUCH_ROTATE;break;case Os.PAN:if(!1===n.enablePan)return;k(e),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case Os.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&D(e),n.enablePan&&k(e)}(e),s=o.TOUCH_DOLLY_PAN;break;case Os.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&D(e),n.enableRotate&&N(e)}(e),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(r)}}function W(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;I(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&j(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&I(e)}(e),n.update();break;default:s=o.NONE}}function q(e){!1!==n.enabled&&(n.dispatchEvent(a),s=o.NONE)}function X(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",X,!1),n.domElement.addEventListener("mousedown",B,!1),n.domElement.addEventListener("wheel",H,!1),n.domElement.addEventListener("touchstart",V,!1),n.domElement.addEventListener("touchend",q,!1),n.domElement.addEventListener("touchmove",W,!1),n.domElement.addEventListener("keydown",G,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};Tw.prototype=Object.create(Mu.prototype),Tw.prototype.constructor=Tw;var Lw=function(e,t){Tw.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Ps.PAN,this.mouseButtons.RIGHT=Ps.ROTATE,this.touches.ONE=Os.PAN,this.touches.TWO=Os.DOLLY_ROTATE};(Lw.prototype=Object.create(Mu.prototype)).constructor=Lw;var Aw,Pw,Ow,Rw,Nw,kw,Dw,Iw,jw,zw,Bw,Fw,Uw,Hw,Gw,Vw,Ww,qw,Xw,Zw,Yw,Jw,Qw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABE0lEQVRIS92Xyw3CMBBEZ45UBG1ABVRAE6CkAH4F0Aw3PgUg4AQNcAHJaKVEMlaieOP1hT3msC/PXm0mdM6NAOwAOAAbAGuSbxgXnXN7AEOv7xHAlOTJkiWgF4BB0FSMFgBKKzsByZG1lZldF0hewMQuBlTbJtlpQL5dQfKjGRYtqO59qCbzHAvrC1LbpYBUdhagKDsrUKedNajVLgfIt5uQvMqDnCDpf5OFTfKZGySwGcnl34Du1dE9chrJehqTvOQaBlm2JYC5/9G0NhILiQGydH/KCtRo4ZMsQK0WVqBOCwtQlEUKSCwKiWLaGKa5I7WF1qi3hQaUZBGCmiKxiUUICkO+mUUI8n9btgBW2omKyXZfmJLMIaAnJuMAAAAASUVORK5CYII=",Kw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAAiElEQVRIS+2WsQ2AIBRE7xp30OFcQysLK13D4XQHm7MQG4WIBZVHQ0jI+8kL5I6SKgAjgBbnWgAMJPdwztqSHEkTgO5GmUn2WeRwKcmRtAKob7CNZPNxQJwjSTEQSX4cEOd4wKUxacKKrCj7r/kVvaqyIit6GnCiXU7owPlH4BSvjsXLb9H6fgBDCQyem/8TjgAAAABJRU5ErkJggg==",$w="https://darkdragonblade.github.io/svgeditor/build/three-preview/skin.png",e_="https://darkdragonblade.github.io/svgeditor/build/three-preview/wa_B.jpg",t_=[0,0,1800],n_=15856113,i_=[],r_={minX:0,maxX:0,minY:0,maxY:0},a_=.9,o_=.45,s_=0,l_=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.changeMaterial=function(e){Zw=e,r.updateTexture()},r.cameraChange=function(e){var t;(t=Aw.position).set.apply(t,H(e)),Aw.rotation.set(0,0,0),Aw.updateProjectionMatrix(),Bw.time=r.state.maxDuration},r.changeAmbientLightIntensity=function(e){Rw.intensity=e},r.changeSunIntensity=function(e){Nw.intensity=e},r.changeSunAngle=function(e){s_=e,r.changeShadowAngle()},r.changeBackground=function(e){kw.background=r.loadTexture(e)},r.switchScreen=function(){if(Aw){var e=window.innerWidth,t=window.innerHeight;Aw.aspect=e/t,Aw.updateProjectionMatrix(),Pw.setSize(e,t);var n=document.querySelector(".three-dom");n.removeChild(Pw.domElement),n.appendChild(Pw.domElement)}},r.updateTexture=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createCanvas();case 2:t=e.sent,Fw.map=new km(t);case 4:case"end":return e.stop()}}),e)}))),r.initPerspectiveCamera=function(){var e,t=window.innerWidth,n=window.innerHeight;(e=(Aw=new pp(25,t/n,10,1e5)).position).set.apply(e,t_),Aw.lookAt(As(Fu,[0,0,0]))},r.initRender=function(){var e=window.innerWidth,t=window.innerHeight;(Pw=new Rv({antialias:!0,alpha:!0,precision:"highp",preserveDrawingBuffer:!0})).setPixelRatio(window.devicePixelRatio),Pw.setSize(e,t),Pw.shadowMap.enabled=!0,Pw.shadowMap.type=Is,Pw.sortObjects=!0,document.querySelector(".three-dom").appendChild(Pw.domElement)},r.initControls=function(){Ow=new Tw(Aw,Pw.domElement)},r.setSunLight=function(){Nw&&r.removeScene(Nw),Nw=new fb(16777215,o_);var e=qw/2*Math.cos(-s_/57.2),t=qw/2*Math.sin(-s_/57.2);Nw.position.set(t,Xw,e),kw.add(Nw),Nw.castShadow=!0,Nw.shadow.mapSize.width=3e3,Nw.shadow.mapSize.height=3e3;var n=2500;Nw.shadow.camera.left=-n,Nw.shadow.camera.right=n,Nw.shadow.camera.top=n,Nw.shadow.camera.bottom=-n,Nw.shadow.camera.far=2500,Nw.shadow.bias=-1e-4},r.changeShadowAngle=function(){var e=qw/2*Math.cos(-s_/57.2),t=qw/2*Math.sin(-s_/57.2);Nw.position.set(t,Xw,e)},r.initAmbientLight=function(){Rw&&r.removeScene(Rw),Rw=new vb("#ffffff",a_),r.addScene(Rw)},r.initLight=function(){r.initAmbientLight(),r.setSunLight()},r.initScene=function(){(kw=new pd).background=new ih(15921906)},r.addScene=function(e){kw.add(e)},r.removeScene=function(e){kw.remove(e)},r.loadTexture=function(e){var t=new Dy;return t.setCrossOrigin("anonymous"),t.load(e)},r.animate=function(){window.cancelAnimationFrame(Dw),Dw=requestAnimationFrame(r.animate),r.renderThree(),Ow.update()},r.renderThree=function(){Pw.render(kw,Aw)},r.createCanvas=function(){var e=5*Ww.width,t=5*Ww.height;return new Promise((function(n){var i=document.createElement("canvas"),r=i.getContext("2d"),a=new Image;a.src=Zw||e_,a.setAttribute("crossOrigin","Anonymous"),i.width=1*e,i.height=1*t,r.fillStyle="#ffffff",r.fillRect(0,0,i.width,i.height),a.onload=function(){var o=r.createPattern(a,"repeat");r.fillStyle=o,r.fillRect(0,0,i.width,i.height);var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.getElementById("lux-svg-root");s.append(l.cloneNode(!0)),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var c=new Image;c.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(s.outerHTML))),c.setAttribute("crossOrigin","Anonymous"),c.onload=function(){r.drawImage(this,0,0,e,t),n(i)}}}))},r.createBox=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createCanvas();case 2:t=e.sent,(jw=new Lv).name="wrapGroup",Fw=new ay({color:n_,side:Fs,map:new km(t)}),Uw=new ay({color:n_,map:r.loadTexture(e_)}),Hw=new ay({color:n_,map:r.loadTexture($w)}),r.createCube(),kw.add(jw),jw.position.set(-qw/2,-Xw/2,0);case 11:case"end":return e.stop()}}),e)}))),r.createCube=function(){i_=[],Vw.p.forEach((function(e,t){var n=new hd;n.name=Vw.b[t].split(":")[0];var i=Vw.b[t].split(":")[1];n.renderOrder=t+1;for(var a=Ww.z,o=new rb,s=[],l=[],c=e.a.length,u=0;u<c/2;u++)s.push(e.a[2*u]),l.push(e.a[2*u+1]),0===u?o.moveTo(e.a[2*u],e.a[2*u+1]):o.lineTo(e.a[2*u],e.a[2*u+1]);var d,h,p,f,v,m,g,y,b=new Ag(o,{depth:a,bevelEnabled:!1}),x=n.maxX=Math.max.apply(null,s),w=n.minX=Math.min.apply(null,s),_=n.maxY=Math.max.apply(null,l),M=n.minY=Math.min.apply(null,l),S=x-w,E=_-M,C=[],T=[],L=[];Vw.b.forEach((function(e){var t=e.search(n.name);-1!=t&&C.push(0===t?e.split(":")[1]:e.split(":")[0])})),C.forEach((function(e){Vw.b.forEach((function(t,n){if(e===t.split(":")[0])for(var i=Vw.p[n].a.length,r=0;r<i/2;r++)T.push(Vw.p[n].a[2*r]),L.push(Vw.p[n].a[2*r+1])}))})),f=T.find((function(e){return e<w})),p=T.find((function(e){return e>x})),h=L.find((function(e){return e<M})),d=L.find((function(e){return e>_})),-1!==n.name.search("SG")&&-1===C.join(";").search("SG")&&(p=void 0,f=void 0),-1!==n.name.search("XG")&&-1===C.join(";").search("XG")&&(p=void 0,f=void 0),v=void 0===f?Hw:Fw,m=void 0===p?Hw:Fw,g=void 0===d?Hw:Fw,y=void 0===h?Hw:Fw,b.faceVertexUvs[0]=[],b.faceVertexUvs[0][0]=[new Au(0,0),new Au(1,0),new Au(1,1)],b.faceVertexUvs[0][1]=[new Au(1,1),new Au(0,1),new Au(0,0)],b.faceVertexUvs[0][2]=[new Au(w/qw,1-(Xw-_)/Xw),new Au(w/qw,(_-E)/Xw),new Au(x/qw,(_-E)/Xw)],b.faceVertexUvs[0][3]=[new Au(x/qw,(_-E)/Xw),new Au(x/qw,1-(Xw-_)/Xw),new Au(w/qw,1-(Xw-_)/Xw)],b.faceVertexUvs[0][4]=void 0===p?[new Au(1e-4,1),new Au(0,1),new Au(1e-4,1-Ww.l/10)]:[new Au(x/qw,(_-E)/Xw),new Au(x/qw,1-(Xw-_)/Xw),new Au(x/qw,(_-E)/Xw)],b.faceVertexUvs[0][5]=void 0===p?[new Au(0,1),new Au(0,1-Ww.l/10),new Au(1e-4,1-Ww.l/10)]:[new Au(x/qw,1-(Xw-_)/Xw),new Au(x/qw,1-(Xw-_)/Xw),new Au(x/qw,(_-E)/Xw)],b.faceVertexUvs[0][6]=void 0===d?[new Au(Math.ceil(S/11.45),1),new Au(0,1),new Au(Math.ceil(S/11.45),1-Ww.l/10)]:[new Au(x/qw,1-(Xw-_)/Xw),new Au(w/qw,1-(Xw-_)/Xw),new Au(x/qw,1-(Xw-_)/Xw)],b.faceVertexUvs[0][7]=void 0===d?[new Au(0,1),new Au(0,1-Ww.l/10),new Au(Math.ceil(S/11.45),1-Ww.l/10)]:[new Au(w/qw,1-(Xw-_)/Xw),new Au(w/qw,1-(Xw-_)/Xw),new Au(x/qw,1-(Xw-_)/Xw)],b.faceVertexUvs[0][8]=void 0===f?[new Au(1e-4,1),new Au(0,1),new Au(1e-4,1-Ww.l/10)]:[new Au(w/qw,1-(Xw-_)/Xw),new Au(w/qw,(_-E)/Xw),new Au(w/qw,1-(Xw-_)/Xw)],b.faceVertexUvs[0][9]=void 0===f?[new Au(0,1),new Au(0,1-Ww.l/10),new Au(1e-4,1-Ww.l/10)]:[new Au(w/qw,(_-E)/Xw),new Au(w/qw,(_-E)/Xw),new Au(w/qw,1-(Xw-_)/Xw)],b.faceVertexUvs[0][10]=void 0===h?[new Au(1,1),new Au(Math.ceil(S/11.45),1),new Au(1,1-Ww.l/10)]:[new Au(w/qw,(_-E)/Xw),new Au(x/qw,(_-E)/Xw),new Au(w/qw,(_-E)/Xw)],b.faceVertexUvs[0][11]=void 0===h?[new Au(Math.ceil(S/11.45),1),new Au(Math.ceil(S/11.45),1-Ww.l/10),new Au(1,1-Ww.l/10)]:[new Au(x/qw,(_-E)/Xw),new Au(x/qw,(_-E)/Xw),new Au(w/qw,(_-E)/Xw)];for(var A=b.faces.length,P=0;P<A/2;P++)b.faces[2*P].materialIndex=P,b.faces[2*P+1].materialIndex=P;b.computeFaceNormals();var O=new Jh(b,[Uw,Fw,m,g,v,y]);if(n.add(O),O.material.forEach((function(e){e.map.wrapS=e.map.wrapT=Rl})),O.castShadow=!0,i){n.width=S,n.height=E,r.findCube(i_,i).add(n);var R=-1!=n.name.search("XG"),N=-1!=n.name.search("SG");w<r_.minX&&!N&&!R?(n.position.set(w+S,0,0),O.position.set(-(w+S),0,0),n.parent.name===Vw.b[0]?n.sideType="left":n.position.set(-n.parent.width,0,0)):w>r_.minX&&!N&&!R?(n.position.set(w,0,0),O.position.set(-w,0,0),n.parent.name===Vw.b[0]?n.sideType="right":n.position.set(n.parent.width,0,0)):M>r_.minY&&N&&n.parent.name!==Vw.b[0]?(n.position.set(w<r_.minX?-n.parent.maxX:-n.parent.position.x,Xw-E,0),O.position.set(0,-(Xw-E),0)):M>r_.minY&&N&&n.parent.name===Vw.b[0]?(n.position.set(0,Xw-E,0),O.position.set(0,-(Xw-E),0)):M<r_.minY&&R&&n.parent.name!==Vw.b[0]?(n.position.set(w<r_.minX?-n.parent.maxX:-n.parent.position.x,E,0),O.position.set(0,-E,0)):M<r_.minY&&R&&n.parent.name===Vw.b[0]&&(n.position.set(0,E,0),O.position.set(0,-E,0)),t===Vw.p.length-1&&(jw.add(i_[0]),r.initPlaneGeometry(),setTimeout((function(){r.initAnimationAction()}),1e3))}else r_={minX:w,minY:M,maxX:x,maxY:_},n.position.z=a/2,i_[0]=n;O.position.z=-a/2}))},r.findCube=function(e,t){var n;return(e||[]).map((function(e){if(e.name===t)n=e;else{var i=r.findCube(e.children,t);i&&(n=i)}})),n},r.initPlaneGeometry=function(){(Yw=new Jh(new Cp(1e4,1e4),new ny({color:16777215,depthWrite:!1,transparent:!0,opacity:.5}))).rotation.x=-Math.PI/2,Yw.receiveShadow=!0,Yw.name="ground",jw.add(Yw),(Jw=new Bx(1e4,100,16777215,16777215)).name="grid";for(var e=Vw.p[0].a,t=[],n=[],i=e.length,r=0;r<i/2;r++)t.push(e[2*r]),n.push(e[2*r+1]);var a=Math.max.apply(null,t)-Math.min.apply(null,t);Jw.position.x=r_.maxX-a/2,Yw.position.x=r_.maxX-a/2,jw.add(Jw)},r.clipChange=function(e){var t=e.target.value;Bw.time=t/100,Bw.paused=!0,r.setState({paused:!Bw.paused,changeFlag:!0})},r.switchPlayPause=function(){r.setState({changeFlag:!1}),Bw&&(Bw.paused?Bw.paused=!1:Bw.paused=!0),r.setState({paused:!Bw.paused}),Bw.time!==r.state.maxDuration||r.state.changeFlag||(Bw.time=null)},r.animateRender=function(){r.setState({time:100*Bw.time});var e=document.querySelector("#three-slider");null===e||void 0===e||e.setAttribute("value",(100*Bw.time).toString()),(0!==Bw.time||r.state.changeFlag)&&(Bw.time!==r.state.maxDuration||r.state.changeFlag)||r.setState({paused:!Bw.paused}),Iw=requestAnimationFrame(r.animateRender),zw.update(Gw.getDelta())},r.dispose3d=function(){try{Pw.dispose(),Pw.forceContextLoss(),Pw.content=null,window.cancelAnimationFrame(Dw),window.cancelAnimationFrame(Iw),document.querySelector(".three-dom").removeChild(Pw.domElement),Pw.domElement=null,Pw=null,Bw=null}catch(e){}},r.initThreePreview=function(){r.initScene(),r.initPerspectiveCamera(),r.initRender(),r.initControls(),r.createBox(),r.initLight(),r.animate()},r.render=function(){return(0,v.jsxs)("div",{id:"three-dom",children:[(0,v.jsx)("div",{class:"three-dom",ref:"threeDom"}),(0,v.jsxs)("div",{class:"play-wrap",children:[(0,v.jsx)("x-slider",{id:"three-slider",value:"0",min:"0",max:"1000",step:"1"}),(0,v.jsx)("img",{alt:"\u56fe\u7247",onClick:function(){return r.switchPlayPause()},style:{marginLeft:"10px",width:"13px",height:"16px",cursor:"pointer"},src:r.state.paused?Kw:Qw})]})]})},r.state={time:0,threeDom:void 0,paused:!1,changeFlag:!1,maxDuration:0},r}return s(n,[{key:"initAnimationAction",value:function(){zw=new fx(jw);for(var e=Vw.p[0].a,t=[],n=[],i=e.length,r=0;r<i/2;r++)t.push(e[2*r]),n.push(e[2*r+1]);var a=Math.max.apply(null,t),o=Math.min.apply(null,t),s=Math.max.apply(null,n),l=a-o,c=s-Math.min.apply(null,n),u=[new fy("wrapGroup.position[x]",[0,3],[jw.position.x,-(a-l/2)]),new fy("wrapGroup.position[y]",[7,10],[jw.position.y,-(s-c/2)]),new fy("wrapGroup.position[z]",[0,3],[jw.position.z,-1!=Vw.b.join(",").search("SG")&&-1!=Vw.b.join(",").search("XG")?(Ww.height-c)/2:Ww.height-c]),new fy("ground.position[y]",[7,10],[Yw.position.y,-1!=Vw.b.join(",").search("SG")&&-1!=Vw.b.join(",").search("XG")?(Ww.height-c)/2:Ww.height-c]),new fy("grid.position[y]",[7,10],[Jw.position.y,-1!=Vw.b.join(",").search("SG")&&-1!=Vw.b.join(",").search("XG")?(Ww.height-c)/2:Ww.height-c])];Vw.p.forEach((function(e,t){for(var n=[],i=[],r=e.a.length,a=0;a<r/2;a++)n.push(e.a[2*a]),i.push(e.a[2*a+1]);var o=Math.min.apply(null,n);if(t>0){var s=-1!=Vw.b[t].search("SG")||-1!=Vw.b[t].search("XG")?".rotation[x]":".rotation[y]",l=o<r_.minX?[e.c[0],-Math.PI/(180/e.c[1])]:[e.c[0],Math.PI/(180/e.c[1])];-1!=Vw.b[t].search("SG")&&(l=[e.c[0],-Math.PI/(180/e.c[1])]),-1!=Vw.b[t].search("XG")&&(l=[e.c[0],Math.PI/(180/e.c[1])]),u.push(new fy(Vw.b[t].split(":")[0]+s,e.t,l))}}));var d=new _y("Action",this.state.maxDuration,u);(Bw=zw.clipAction(d)).loop=2200,Bw.clampWhenFinished=!0,Bw.timeScale=1,this.setState({paused:!0}),Gw=new Ub,this.animateRender(),Bw.play()}},{key:"componentDidMount",value:function(){var e,t=window.threeData;Vw=t.ge,Ww=t.de,qw=t.de.width,Xw=t.de.height,this.setState({maxDuration:null===(e=Ww)||void 0===e?void 0:e.duration}),this.initThreePreview();var n=document.querySelector("#three-slider");null===n||void 0===n||n.addEventListener("change",this.clipChange)}},{key:"componentWillUnmount",value:function(){this.dispose3d()}}]),n}(e.Component),c_=l_,u_=.566928,d_=function(e,t,n,i){var r=h_(i+2*e+2*t,n+t),a=1.5*r.z,o=0+i,s=o+e,l=s-3,c=s+3,u=s+t,d=u-3,h=u+3,p=u+e,f=p-3,v=p+3,m=p+t,g=0+t/2,y=g+5,b=g+n,x=b-5,w=b+t/2,_=[];return p_(_,[u*u_,g*u_,u*u_,b*u_,p*u_,b*u_,p*u_,g*u_],[0,90],[0,3]),p_(_,[s*u_,g*u_,s*u_,(b-a)*u_,u*u_,(b-a)*u_,u*u_,(g+a)*u_],[0,90],[0,3]),p_(_,[o*u_,g*u_,o*u_,b*u_,s*u_,b*u_,s*u_,g*u_],[0,90],[0,3]),p_(_,[p*u_,g*u_,p*u_,(b-a)*u_,m*u_,(b-a)*u_,m*u_,(g+a)*u_],[0,90],[0,4]),p_(_,[0,y*u_,0,x*u_,o*u_,b*u_,o*u_,g*u_],[0,120],[0,3]),p_(_,[c*u_,(b-a)*u_,c*u_,w*u_,d*u_,w*u_,d*u_,(b-a)*u_],[0,95],[4,7]),p_(_,[o*u_,b*u_,o*u_,w*u_,l*u_,w*u_,l*u_,b*u_],[0,90],[7,10]),p_(_,[h*u_,b*u_,h*u_,w*u_,f*u_,w*u_,f*u_,b*u_],[0,90],[7,10]),p_(_,[v*u_,(b-a)*u_,v*u_,w*u_,m*u_,w*u_,m*u_,(b-a)*u_],[0,95],[4,7]),p_(_,[c*u_,0,c*u_,(g+a)*u_,d*u_,(g+a)*u_,d*u_,0],[0,95],[4,7]),p_(_,[o*u_,0,o*u_,g*u_,l*u_,g*u_,l*u_,0],[0,90],[7,10]),p_(_,[h*u_,0,h*u_,g*u_,f*u_,g*u_,f*u_,0],[0,90],[7,10]),p_(_,[v*u_,0,v*u_,(g+a)*u_,m*u_,(g+a)*u_,m*u_,0],[0,95],[4,7]),{de:r,ge:{b:["C","B:C","A:B","D:C","E:A","SGB:B","SGA:A","SGC:C","SGD:D","XGB:B","XGA:A","XGC:C","XGD:D"],p:_}}},h_=function(e,t){return{width:e*u_,height:t*u_,z:2.83464,l:3,duration:10}},p_=function(e,t,n,i){var r={a:t,c:n,t:i};e.push(r)},f_=function(e){c(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state=void 0,r.changeType=function(e){if(r.setState({type:e}),3===e){var t,n,i,a,o,s=null===(t=r.state.stage)||void 0===t||null===(n=t.svgRoot)||void 0===n?void 0:n.querySelector("#\u8fb9\u6846"),l=null===s||void 0===s?void 0:s.querySelector("#A"),c=null===s||void 0===s?void 0:s.querySelector("#B"),u=Number(null===l||void 0===l?void 0:l.getAttribute("width"))/Number(null===(i=r.state.stage)||void 0===i?void 0:i.mmUnit),d=Number(null===c||void 0===c?void 0:c.getAttribute("width"))/Number(null===(a=r.state.stage)||void 0===a?void 0:a.mmUnit),h=Number(null===l||void 0===l?void 0:l.getAttribute("height"))/Number(null===(o=r.state.stage)||void 0===o?void 0:o.mmUnit);window.threeData=d_(u,d,h,30)}},r.render=function(){return(0,v.jsxs)("div",{className:"App",children:[r.state.stage&&(0,v.jsx)(T,{}),(0,v.jsxs)("div",{id:"editor",className:"flex",children:[r.state.stage&&(0,v.jsx)(x,{}),(0,v.jsx)("div",{id:"board",className:"svg"}),r.state.stage&&(0,v.jsx)(Ls,{}),r.state.stage&&(0,v.jsx)(Cs,{})]}),3===r.state.type&&(0,v.jsx)(c_,{}),(0,v.jsx)("div",{className:"toggle-3d-wrapper",children:(0,v.jsxs)("div",{className:"toggle-3d-inner flex flex-align-center",children:[(0,v.jsx)("div",{onClick:function(){return r.changeType(2)},className:2===r.state.type?"toggle-3d-item toggle-3d-item-active":"toggle-3d-item",children:(0,v.jsx)("span",{className:"flex flex-justify-center flex-align-center",children:"2D"})}),(0,v.jsx)("div",{onClick:function(){return r.changeType(3)},className:3===r.state.type?"toggle-3d-item toggle-3d-item-active":r.state.has3D?"toggle-3d-item":"toggle-3d-item disabled",children:(0,v.jsx)("span",{className:"flex flex-justify-center flex-align-center",children:"3D"})})]})})]})},r.state={stage:void 0,type:2,threeData:void 0,has3D:!1},r}return s(n,[{key:"componentDidMount",value:function(){var e=this,t=window.stage=new Mo,n=document.querySelector("#board"),i=null===n||void 0===n?void 0:n.getBoundingClientRect();t.init(n,1980,1200);var r=600,a=600;try{a=Number((null===i||void 0===i?void 0:i.height)||680)-80,r=Number((null===i||void 0===i?void 0:i.height)||680)-80}catch(o){}t.setViewSize(a,r),t.setBoardSize(1,20,20),t.watch(t.actions().UPDATED,(function(){var n,i=null===t||void 0===t||null===(n=t.svgRoot)||void 0===n?void 0:n.querySelector("#\u8fb9\u6846");e.setState({has3D:!!i})})),this.setState({stage:t})}},{key:"componentWillUnmount",value:function(){}}]),n}(e.Component),v_=f_,m_=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,v.jsx)(v_,{})),m_()}()}();
//# sourceMappingURL=main.f1823c3c.js.map